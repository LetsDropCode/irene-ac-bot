2026-01-06T14:46:14.492464480Z [err]      return await self.app(scope, receive, send)
2026-01-06T14:46:14.492471212Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T14:46:14.492477059Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T14:46:14.492482591Z [err]      await super().__call__(scope, receive, send)
2026-01-06T14:46:14.492488660Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T14:46:14.492495060Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T14:46:14.492500571Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T14:46:14.492505967Z [err]      raise exc
2026-01-06T14:46:14.492512302Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T14:46:15.128122435Z [err]  2026-01-06 14:46:14.091 UTC [8131] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T14:46:15.128130589Z [err]  2026-01-06 14:46:14.091 UTC [8131] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T14:46:15.128138855Z [err]  2026-01-06 14:46:14.091 UTC [8131] STATEMENT:  
2026-01-06T14:46:15.128147095Z [err]  	        SELECT event
2026-01-06T14:46:15.128154969Z [err]  	        FROM event_config
2026-01-06T14:46:15.128161969Z [err]  	        WHERE day_of_week = 1
2026-01-06T14:46:15.128168786Z [err]  	          AND active = 1
2026-01-06T14:46:15.128175560Z [err]  	          AND '14:46' BETWEEN open_time AND close_time
2026-01-06T14:46:15.128211967Z [err]  	        LIMIT 1;
2026-01-06T14:46:15.128220562Z [err]  	        
2026-01-06T14:46:15.430045318Z [err]      await self.app(scope, receive, _send)
2026-01-06T14:46:15.430051723Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T14:46:15.430057514Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T14:46:15.430063886Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T14:46:15.430076195Z [err]      raise exc
2026-01-06T14:46:15.430082553Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T14:46:15.430087974Z [err]      await app(scope, receive, sender)
2026-01-06T14:46:15.430095504Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T14:46:15.430100956Z [err]      await self.app(scope, receive, send)
2026-01-06T14:46:15.430106496Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T14:46:15.430111457Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T14:46:15.430116229Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T14:46:15.430120862Z [err]      await route.handle(scope, receive, send)
2026-01-06T14:46:15.430126531Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T14:46:15.430131762Z [err]      await self.app(scope, receive, send)
2026-01-06T14:46:15.430136747Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T14:46:15.430141699Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T14:46:15.430146953Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T14:46:15.463764438Z [err]      raise exc
2026-01-06T14:46:15.465000152Z [err]          """
2026-01-06T14:46:15.465000809Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T14:46:15.465016458Z [err]      await app(scope, receive, sender)
2026-01-06T14:46:15.465023930Z [err]      )
2026-01-06T14:46:15.465027598Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T14:46:15.465031530Z [err]          ^^^
2026-01-06T14:46:15.465036036Z [err]      ^
2026-01-06T14:46:15.465039892Z [err]      response = await f(request)
2026-01-06T14:46:15.465044601Z [err]      ...<7 lines>...
2026-01-06T14:46:15.465044998Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T14:46:15.465052937Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T14:46:15.465054904Z [err]      return await dependant.call(**values)
2026-01-06T14:46:15.465063899Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T14:46:15.465064912Z [err]          (day_of_week, current_time),
2026-01-06T14:46:15.465065307Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T14:46:15.465075063Z [err]    File "/app/app/webhook.py", line 112, in webhook
2026-01-06T14:46:15.465076554Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T14:46:15.465078369Z [err]      raw_response = await run_endpoint_function(
2026-01-06T14:46:15.465083833Z [err]      event = get_active_event()
2026-01-06T14:46:15.465089796Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T14:46:15.465093780Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T14:46:15.465100410Z [err]      cur.execute(
2026-01-06T14:46:15.465101379Z [err]      ...<3 lines>...
2026-01-06T14:46:15.465105940Z [err]      ~~~~~~~~~~~^
2026-01-06T14:46:15.473831838Z [err]      )
2026-01-06T14:46:15.473848117Z [err]      ^
2026-01-06T14:46:15.473855518Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T14:46:15.473864952Z [err]      return super().execute(query, vars)
2026-01-06T14:46:15.473871194Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T14:46:15.473878447Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T14:46:15.473885600Z [err]  LINE 5:           AND active = 1
2026-01-06T14:46:15.473893885Z [err]                               ^
2026-01-06T14:46:15.473900751Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T14:46:15.473907589Z [err]  
2026-01-06T14:46:19.558945463Z [err]  2026-01-06 14:46:19.061 UTC [8133] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T14:46:19.558953210Z [err]  2026-01-06 14:46:19.061 UTC [8133] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T14:46:19.558959164Z [err]  2026-01-06 14:46:19.061 UTC [8133] STATEMENT:  
2026-01-06T14:46:19.558965039Z [err]  	        SELECT event
2026-01-06T14:46:19.558970656Z [err]  	        FROM event_config
2026-01-06T14:46:19.558976948Z [err]  	        WHERE day_of_week = 1
2026-01-06T14:46:19.558983388Z [err]  	          AND active = 1
2026-01-06T14:46:19.558989115Z [err]  	          AND '14:46' BETWEEN open_time AND close_time
2026-01-06T14:46:19.558994674Z [err]  	        LIMIT 1;
2026-01-06T14:46:19.559000297Z [err]  	        
2026-01-06T14:46:20.038327964Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T14:46:20.038330055Z [err]      raise exc
2026-01-06T14:46:20.038359799Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T14:46:20.038415860Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T14:46:20.038427676Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T14:46:20.038437913Z [err]          self.scope, self.receive, self.send
2026-01-06T14:46:20.038450172Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T14:46:20.038466929Z [err]      )
2026-01-06T14:46:20.038478200Z [err]      ^
2026-01-06T14:46:20.038501767Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T14:46:20.038510486Z [err]      return await self.app(scope, receive, send)
2026-01-06T14:46:20.038536497Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T14:46:20.038546478Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T14:46:20.038560730Z [err]      await super().__call__(scope, receive, send)
2026-01-06T14:46:20.038586654Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T14:46:20.038620650Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T14:46:20.038634235Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T14:46:20.039047383Z [inf]  ðŸ“¨ 27722135094: OPEN SUBMISSION
2026-01-06T14:46:20.039056360Z [inf]  INFO:     100.64.0.7:16346 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T14:46:20.039067239Z [err]  ERROR:    Exception in ASGI application
2026-01-06T14:46:20.039093930Z [err]  Traceback (most recent call last):
2026-01-06T14:46:20.074646375Z [err]      await self.app(scope, receive, _send)
2026-01-06T14:46:20.074680898Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T14:46:20.074688424Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T14:46:20.074701255Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T14:46:20.074737621Z [err]      raise exc
2026-01-06T14:46:20.074748113Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T14:46:20.074828825Z [err]      await app(scope, receive, sender)
2026-01-06T14:46:20.074859212Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T14:46:20.074870341Z [err]      await self.app(scope, receive, send)
2026-01-06T14:46:20.074877009Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T14:46:20.074900919Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T14:46:20.074914101Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T14:46:20.074925792Z [err]      await route.handle(scope, receive, send)
2026-01-06T14:46:20.074931539Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T14:46:20.074938389Z [err]      await self.app(scope, receive, send)
2026-01-06T14:46:20.074947275Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T14:46:20.074957078Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T14:46:20.074972464Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T14:46:20.100531381Z [err]      raise exc
2026-01-06T14:46:20.100543851Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T14:46:20.100553008Z [err]      await app(scope, receive, sender)
2026-01-06T14:46:20.100561554Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T14:46:20.100570705Z [err]      response = await f(request)
2026-01-06T14:46:20.100579974Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T14:46:20.100589714Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T14:46:20.100597440Z [err]      raw_response = await run_endpoint_function(
2026-01-06T14:46:20.100604225Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T14:46:20.100616945Z [err]      ...<3 lines>...
2026-01-06T14:46:20.100625593Z [err]      )
2026-01-06T14:46:20.100634374Z [err]      ^
2026-01-06T14:46:20.100642016Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T14:46:20.100649290Z [err]      return await dependant.call(**values)
2026-01-06T14:46:20.100656714Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T14:46:20.100663595Z [err]    File "/app/app/webhook.py", line 112, in webhook
2026-01-06T14:46:20.100671318Z [err]      event = get_active_event()
2026-01-06T14:46:20.100678881Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T14:46:20.100686708Z [err]      cur.execute(
2026-01-06T14:46:20.100693540Z [err]      ~~~~~~~~~~~^
2026-01-06T14:46:20.100701857Z [err]          """
2026-01-06T14:46:20.100709046Z [err]          ^^^
2026-01-06T14:46:20.100716008Z [err]      ...<7 lines>...
2026-01-06T14:46:20.100723333Z [err]          (day_of_week, current_time),
2026-01-06T14:46:20.100730335Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T14:46:20.115707490Z [err]      )
2026-01-06T14:46:20.115714393Z [err]      ^
2026-01-06T14:46:20.115721045Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T14:46:20.115728382Z [err]      return super().execute(query, vars)
2026-01-06T14:46:20.115735609Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T14:46:20.115741846Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T14:46:20.115751662Z [err]  LINE 5:           AND active = 1
2026-01-06T14:46:20.115757719Z [err]                               ^
2026-01-06T14:46:20.115763374Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T14:46:20.115769607Z [err]  
2026-01-06T14:46:20.115776343Z [inf]  ðŸ“¨ 27722135094: OPEN SUBMISSION
2026-01-06T14:46:20.115782429Z [inf]  INFO:     100.64.0.8:18342 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T14:46:20.115790942Z [err]  ERROR:    Exception in ASGI application
2026-01-06T14:46:20.115827526Z [err]  Traceback (most recent call last):
2026-01-06T14:46:20.115834141Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T14:46:20.115840840Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T14:46:20.115847767Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T14:46:20.115854870Z [err]          self.scope, self.receive, self.send
2026-01-06T14:46:20.116081632Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T14:46:20.116092710Z [err]      )
2026-01-06T14:46:20.116103670Z [err]      ^
2026-01-06T14:46:20.116109357Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T14:46:20.116116706Z [err]      return await self.app(scope, receive, send)
2026-01-06T14:46:20.136497996Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T14:46:20.138743976Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T14:46:20.138767178Z [err]      await super().__call__(scope, receive, send)
2026-01-06T14:46:20.138810297Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T14:46:20.138819068Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T14:46:20.138836704Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T14:46:20.138848022Z [err]      raise exc
2026-01-06T14:46:20.138859787Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T14:46:20.138876898Z [err]      await self.app(scope, receive, _send)
2026-01-06T14:46:20.138892902Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T14:46:20.138906716Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T14:46:20.138929952Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T14:46:20.138947024Z [err]      raise exc
2026-01-06T14:46:20.138964580Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T14:46:20.138976814Z [err]      await app(scope, receive, sender)
2026-01-06T14:46:20.139009798Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T14:46:20.139027724Z [err]      await self.app(scope, receive, send)
2026-01-06T14:46:20.139045385Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T14:46:20.159055830Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T14:46:20.159068717Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T14:46:20.159076428Z [err]      await route.handle(scope, receive, send)
2026-01-06T14:46:20.159084292Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T14:46:20.159092793Z [err]      await self.app(scope, receive, send)
2026-01-06T14:46:20.159102619Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T14:46:20.159109036Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T14:46:20.159116034Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T14:46:20.159123047Z [err]      raise exc
2026-01-06T14:46:20.159129357Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T14:46:20.159135992Z [err]      await app(scope, receive, sender)
2026-01-06T14:46:20.159142228Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T14:46:20.159149632Z [err]      response = await f(request)
2026-01-06T14:46:20.159156136Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T14:46:20.159161922Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T14:46:20.159169793Z [err]      raw_response = await run_endpoint_function(
2026-01-06T14:46:20.159175770Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T14:46:20.159181475Z [err]      ...<3 lines>...
2026-01-06T14:46:20.159191185Z [err]      )
2026-01-06T14:46:20.159197045Z [err]      ^
2026-01-06T14:46:20.159203433Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T14:46:20.173423443Z [err]      return await dependant.call(**values)
2026-01-06T14:46:20.173431636Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T14:46:20.173437728Z [err]    File "/app/app/webhook.py", line 112, in webhook
2026-01-06T14:46:20.173444651Z [err]      event = get_active_event()
2026-01-06T14:46:20.173452914Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T14:46:20.173460751Z [err]      cur.execute(
2026-01-06T14:46:20.173467774Z [err]      ~~~~~~~~~~~^
2026-01-06T14:46:20.173474508Z [err]          """
2026-01-06T14:46:20.173481100Z [err]          ^^^
2026-01-06T14:46:20.173487871Z [err]      ...<7 lines>...
2026-01-06T14:46:20.173493813Z [err]          (day_of_week, current_time),
2026-01-06T14:46:20.173501141Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T14:46:20.173509406Z [err]      )
2026-01-06T14:46:20.173515691Z [err]      ^
2026-01-06T14:46:20.173522648Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T14:46:20.173532714Z [err]      return super().execute(query, vars)
2026-01-06T14:46:20.173539880Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T14:46:20.173548974Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T14:46:20.176854024Z [err]  LINE 5:           AND active = 1
2026-01-06T14:46:20.176870943Z [err]                               ^
2026-01-06T14:46:20.176881022Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T14:46:20.176890891Z [err]  
2026-01-06T14:46:20.792666888Z [inf]  ðŸ“¨ 27722135094: OPEN SUBMISSION
2026-01-06T14:46:20.792672074Z [inf]  INFO:     100.64.0.6:35820 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T14:46:20.792677053Z [err]  ERROR:    Exception in ASGI application
2026-01-06T14:46:20.792683100Z [err]  Traceback (most recent call last):
2026-01-06T14:46:20.792688193Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T14:46:20.792692750Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T14:46:20.792697074Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T14:46:20.792702250Z [err]          self.scope, self.receive, self.send
2026-01-06T14:46:20.792707342Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T14:46:20.792712745Z [err]      )
2026-01-06T14:46:20.792718578Z [err]      ^
2026-01-06T14:46:20.792723457Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T14:46:20.792728410Z [err]      return await self.app(scope, receive, send)
2026-01-06T14:46:20.792740626Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T14:46:20.792746641Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T14:46:20.792753065Z [err]      await super().__call__(scope, receive, send)
2026-01-06T14:46:20.792760715Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T14:46:20.792769430Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T14:46:20.792776326Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T14:46:20.792783132Z [err]      raise exc
2026-01-06T14:46:20.792794048Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T14:46:20.825034353Z [err]  2026-01-06 14:46:19.626 UTC [8135] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T14:46:20.825060001Z [err]  2026-01-06 14:46:19.626 UTC [8135] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T14:46:20.825095406Z [err]  2026-01-06 14:46:19.626 UTC [8135] STATEMENT:  
2026-01-06T14:46:20.825107374Z [err]  	        SELECT event
2026-01-06T14:46:20.825115907Z [err]  	        FROM event_config
2026-01-06T14:46:20.825127027Z [err]  	        WHERE day_of_week = 1
2026-01-06T14:46:20.825136893Z [err]  	          AND active = 1
2026-01-06T14:46:20.825148553Z [err]  	          AND '14:46' BETWEEN open_time AND close_time
2026-01-06T14:46:20.825178494Z [err]  	        LIMIT 1;
2026-01-06T14:46:20.825187511Z [err]  	        
2026-01-06T14:46:20.825195576Z [err]  2026-01-06 14:46:20.202 UTC [8137] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T14:46:20.825204348Z [err]  2026-01-06 14:46:20.202 UTC [8137] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T14:46:20.825212908Z [err]  2026-01-06 14:46:20.202 UTC [8137] STATEMENT:  
2026-01-06T14:46:20.825221016Z [err]  	        SELECT event
2026-01-06T14:46:20.825484128Z [err]  	        FROM event_config
2026-01-06T14:46:20.825496173Z [err]  	        WHERE day_of_week = 1
2026-01-06T14:46:20.825502405Z [err]  	          AND active = 1
2026-01-06T14:46:20.825507715Z [err]  	          AND '14:46' BETWEEN open_time AND close_time
2026-01-06T14:46:20.825512142Z [err]  	        LIMIT 1;
2026-01-06T14:46:20.825520129Z [err]  	        
2026-01-06T14:46:21.727014126Z [err]      await self.app(scope, receive, _send)
2026-01-06T14:46:21.727021065Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T14:46:21.727028705Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T14:46:21.727036185Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T14:46:21.727044672Z [err]      raise exc
2026-01-06T14:46:21.727051559Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T14:46:21.727058096Z [err]      await app(scope, receive, sender)
2026-01-06T14:46:21.727065475Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T14:46:21.727072830Z [err]      await self.app(scope, receive, send)
2026-01-06T14:46:21.727081231Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T14:46:21.727088038Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T14:46:21.727095217Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T14:46:21.727103934Z [err]      await route.handle(scope, receive, send)
2026-01-06T14:46:21.727110198Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T14:46:21.727117447Z [err]      await self.app(scope, receive, send)
2026-01-06T14:46:21.727123342Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T14:46:21.727133663Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T14:46:21.727140904Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T14:46:21.737376115Z [err]      raise exc
2026-01-06T14:46:21.737381743Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T14:46:21.737388247Z [err]      await app(scope, receive, sender)
2026-01-06T14:46:21.737394166Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T14:46:21.737400007Z [err]      response = await f(request)
2026-01-06T14:46:21.737408352Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T14:46:21.737414816Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T14:46:21.737420502Z [err]      raw_response = await run_endpoint_function(
2026-01-06T14:46:21.737426695Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T14:46:21.737432589Z [err]      ...<3 lines>...
2026-01-06T14:46:21.737597640Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T14:46:21.737601635Z [err]    File "/app/app/webhook.py", line 112, in webhook
2026-01-06T14:46:21.737613409Z [err]          """
2026-01-06T14:46:21.737613643Z [err]      )
2026-01-06T14:46:21.737616459Z [err]      event = get_active_event()
2026-01-06T14:46:21.737627350Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T14:46:21.737628072Z [err]          ^^^
2026-01-06T14:46:21.737631007Z [err]      ^
2026-01-06T14:46:21.737637272Z [err]      ...<7 lines>...
2026-01-06T14:46:21.737637840Z [err]      cur.execute(
2026-01-06T14:46:21.737642881Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T14:46:21.737649293Z [err]      ~~~~~~~~~~~^
2026-01-06T14:46:21.737649980Z [err]          (day_of_week, current_time),
2026-01-06T14:46:21.737651213Z [err]      return await dependant.call(**values)
2026-01-06T14:46:21.737657988Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T14:46:21.747221668Z [err]  2026-01-06 14:46:21.583 UTC [8140] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T14:46:21.747228990Z [err]  2026-01-06 14:46:21.583 UTC [8140] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T14:46:21.747235781Z [err]  2026-01-06 14:46:21.583 UTC [8140] STATEMENT:  
2026-01-06T14:46:21.747244194Z [err]  	        SELECT event
2026-01-06T14:46:21.747251431Z [err]  	        FROM event_config
2026-01-06T14:46:21.747257801Z [err]  	        WHERE day_of_week = 1
2026-01-06T14:46:21.747264500Z [err]  	          AND active = 1
2026-01-06T14:46:21.747272709Z [err]  	          AND '14:46' BETWEEN open_time AND close_time
2026-01-06T14:46:21.747279631Z [err]  	        LIMIT 1;
2026-01-06T14:46:21.747297239Z [err]  	        
2026-01-06T14:46:21.758232726Z [err]      )
2026-01-06T14:46:21.758241942Z [err]      ^
2026-01-06T14:46:21.758247177Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T14:46:21.758251926Z [err]      return super().execute(query, vars)
2026-01-06T14:46:21.758256491Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T14:46:21.758261342Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T14:46:21.758265853Z [err]  LINE 5:           AND active = 1
2026-01-06T14:46:21.758270432Z [err]                               ^
2026-01-06T14:46:21.758284019Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T14:46:21.758289160Z [err]  
2026-01-06T14:46:21.758293482Z [inf]  ðŸ“¨ 27722135094: OPEN SUBMISSION
2026-01-06T14:46:21.758297954Z [inf]  INFO:     100.64.0.3:60266 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T14:46:21.758303165Z [err]  ERROR:    Exception in ASGI application
2026-01-06T14:46:21.758310633Z [err]  Traceback (most recent call last):
2026-01-06T14:46:21.758316069Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T14:46:21.758321087Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T14:46:21.758327463Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T14:46:21.758333557Z [err]          self.scope, self.receive, self.send
2026-01-06T14:46:21.758339590Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T14:46:21.758345185Z [err]      )
2026-01-06T14:46:21.758361453Z [err]      ^
2026-01-06T14:46:21.758368375Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T14:46:21.758652880Z [err]      return await self.app(scope, receive, send)
2026-01-06T14:46:21.768258597Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T14:46:21.768270001Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T14:46:21.768271455Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T14:46:21.768282518Z [err]      raise exc
2026-01-06T14:46:21.768286336Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T14:46:21.768290666Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T14:46:21.768298055Z [err]      await super().__call__(scope, receive, send)
2026-01-06T14:46:21.768300039Z [err]      await app(scope, receive, sender)
2026-01-06T14:46:21.768308687Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T14:46:21.768312412Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T14:46:21.768316894Z [err]      await self.app(scope, receive, send)
2026-01-06T14:46:21.768321325Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T14:46:21.768324728Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T14:46:21.768330481Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T14:46:21.768337230Z [err]      raise exc
2026-01-06T14:46:21.768344569Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T14:46:21.768354068Z [err]      await self.app(scope, receive, _send)
2026-01-06T14:46:21.768361880Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T14:46:21.776900628Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T14:46:21.776904961Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T14:46:21.776909187Z [err]      await route.handle(scope, receive, send)
2026-01-06T14:46:21.776913425Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T14:46:21.777187471Z [err]      await self.app(scope, receive, send)
2026-01-06T14:46:21.777197108Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T14:46:21.777203723Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T14:46:21.777208824Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T14:46:21.777214192Z [err]      raise exc
2026-01-06T14:46:21.777219382Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T14:46:21.777225562Z [err]      await app(scope, receive, sender)
2026-01-06T14:46:21.777233211Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T14:46:21.777238351Z [err]      response = await f(request)
2026-01-06T14:46:21.777243971Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T14:46:21.777250848Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T14:46:21.777257538Z [err]      raw_response = await run_endpoint_function(
2026-01-06T14:46:21.777263503Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T14:46:21.777268585Z [err]      ...<3 lines>...
2026-01-06T14:46:21.777274562Z [err]      )
2026-01-06T14:46:21.777279604Z [err]      ^
2026-01-06T14:46:21.777284702Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T14:46:21.788021972Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T14:46:21.788022397Z [err]      return await dependant.call(**values)
2026-01-06T14:46:21.788036200Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T14:46:21.788040776Z [err]  
2026-01-06T14:46:21.788051741Z [err]    File "/app/app/webhook.py", line 112, in webhook
2026-01-06T14:46:21.788062388Z [err]      event = get_active_event()
2026-01-06T14:46:21.788063267Z [err]      return super().execute(query, vars)
2026-01-06T14:46:21.788066377Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T14:46:21.788073514Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T14:46:21.788083643Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T14:46:21.788086521Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T14:46:21.788090881Z [err]          (day_of_week, current_time),
2026-01-06T14:46:21.788094884Z [err]      cur.execute(
2026-01-06T14:46:21.788098251Z [err]  LINE 5:           AND active = 1
2026-01-06T14:46:21.788105612Z [err]      ~~~~~~~~~~~^
2026-01-06T14:46:21.788112627Z [err]                               ^
2026-01-06T14:46:21.788118965Z [err]          """
2026-01-06T14:46:21.788123147Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T14:46:21.788127909Z [err]          ^^^
2026-01-06T14:46:21.788139710Z [err]      ...<7 lines>...
2026-01-06T14:46:21.788151572Z [err]      )
2026-01-06T14:46:21.788158762Z [err]      ^
2026-01-06T14:46:52.130459003Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T14:46:52.130465375Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T14:46:52.130472507Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T14:46:52.130478360Z [err]          self.scope, self.receive, self.send
2026-01-06T14:46:52.130492515Z [err]      return await self.app(scope, receive, send)
2026-01-06T14:46:52.130499339Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T14:46:52.130501678Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T14:46:52.130511473Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T14:46:52.130512467Z [err]      )
2026-01-06T14:46:52.130515843Z [inf]  ðŸ“¨ 27722135094: OPEN SUBMISSION
2026-01-06T14:46:52.130521518Z [err]      ^
2026-01-06T14:46:52.130527078Z [inf]  INFO:     100.64.0.2:11432 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T14:46:52.130529627Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T14:46:52.130530883Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T14:46:52.130536609Z [err]  ERROR:    Exception in ASGI application
2026-01-06T14:46:52.130543782Z [err]      await super().__call__(scope, receive, send)
2026-01-06T14:46:52.130557851Z [err]  Traceback (most recent call last):
2026-01-06T14:46:52.130558299Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T14:46:52.130585889Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T14:46:52.130593584Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T14:46:52.130600761Z [err]      raise exc
2026-01-06T14:46:52.145510359Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T14:46:52.145518596Z [err]      raise exc
2026-01-06T14:46:52.145525717Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T14:46:52.145534901Z [err]      await app(scope, receive, sender)
2026-01-06T14:46:52.145541857Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T14:46:52.145546466Z [err]      await self.app(scope, receive, _send)
2026-01-06T14:46:52.145552177Z [err]      await self.app(scope, receive, send)
2026-01-06T14:46:52.145555599Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T14:46:52.145560878Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T14:46:52.145563782Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T14:46:52.145569061Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T14:46:52.145574857Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T14:46:52.145579793Z [err]      await route.handle(scope, receive, send)
2026-01-06T14:46:52.145585897Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T14:46:52.145590869Z [err]      await self.app(scope, receive, send)
2026-01-06T14:46:52.145597908Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T14:46:52.145603583Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T14:46:52.145608540Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T14:46:52.155783250Z [err]      raise exc
2026-01-06T14:46:52.155789442Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T14:46:52.155814425Z [err]      await app(scope, receive, sender)
2026-01-06T14:46:52.155823421Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T14:46:52.155828513Z [err]      response = await f(request)
2026-01-06T14:46:52.155835165Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T14:46:52.155842663Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T14:46:52.155848897Z [err]      raw_response = await run_endpoint_function(
2026-01-06T14:46:52.155856850Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T14:46:52.155862150Z [err]      ...<3 lines>...
2026-01-06T14:46:52.155867858Z [err]      )
2026-01-06T14:46:52.155872759Z [err]      ^
2026-01-06T14:46:52.156001566Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T14:46:52.156007931Z [err]      return await dependant.call(**values)
2026-01-06T14:46:52.156014000Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T14:46:52.156020070Z [err]    File "/app/app/webhook.py", line 112, in webhook
2026-01-06T14:46:52.156026358Z [err]      event = get_active_event()
2026-01-06T14:46:52.156034610Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T14:46:52.156040823Z [err]      cur.execute(
2026-01-06T14:46:52.156047739Z [err]      ~~~~~~~~~~~^
2026-01-06T14:46:52.156053869Z [err]          """
2026-01-06T14:46:52.156059243Z [err]          ^^^
2026-01-06T14:46:52.156064473Z [err]      ...<7 lines>...
2026-01-06T14:46:52.156073380Z [err]          (day_of_week, current_time),
2026-01-06T14:46:52.156079105Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T14:46:52.163727910Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T14:46:52.163739023Z [err]  
2026-01-06T14:46:52.163771941Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T14:46:52.163810252Z [err]      )
2026-01-06T14:46:52.163820255Z [err]      ^
2026-01-06T14:46:52.163822203Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T14:46:52.163831171Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T14:46:52.163841785Z [err]      return super().execute(query, vars)
2026-01-06T14:46:52.163844424Z [err]  LINE 5:           AND active = 1
2026-01-06T14:46:52.163868830Z [err]                               ^
2026-01-06T14:46:52.561043350Z [err]  2026-01-06 14:46:45.380 UTC [8143] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T14:46:52.561054107Z [err]  2026-01-06 14:46:45.380 UTC [8143] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T14:46:52.561060187Z [err]  2026-01-06 14:46:45.380 UTC [8143] STATEMENT:  
2026-01-06T14:46:52.561070436Z [err]  	        SELECT event
2026-01-06T14:46:52.561075904Z [err]  	        FROM event_config
2026-01-06T14:46:52.561082435Z [err]  	        WHERE day_of_week = 1
2026-01-06T14:46:52.561091356Z [err]  	          AND active = 1
2026-01-06T14:46:52.669371632Z [err]  	          AND '14:46' BETWEEN open_time AND close_time
2026-01-06T14:46:52.669388215Z [err]  	        LIMIT 1;
2026-01-06T14:46:52.669396970Z [err]  	        
2026-01-06T14:47:55.669619213Z [err]  2026-01-06 14:47:46.383 UTC [76] LOG:  checkpoint starting: time
2026-01-06T14:47:55.669627432Z [err]  2026-01-06 14:47:46.725 UTC [76] LOG:  checkpoint complete: wrote 4 buffers (0.0%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.306 s, sync=0.009 s, total=0.342 s; sync files=4, longest=0.007 s, average=0.003 s; distance=1 kB, estimate=84 kB; lsn=0/19F5E40, redo lsn=0/19F5DE8
2026-01-06T14:48:11.880942266Z [inf]  ðŸ“¨ 27725957859: Hi
2026-01-06T14:48:11.880948377Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T14:48:11.880954014Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T14:48:11.880959727Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T14:48:11.880964270Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T14:48:11.880969170Z [inf]  ðŸ“¤ Status: 200
2026-01-06T14:48:11.880977897Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27725957859","wa_id":"27725957859"}],"messages":[{"id":"wamid.HBgLMjc3MjU5NTc4NTkVAgARGBI5MTZCNTFFREI1MzExRjlCNTQA"}]}
2026-01-06T14:48:11.880983342Z [inf]  INFO:     100.64.0.7:43468 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T14:48:11.880988001Z [inf]  INFO:     100.64.0.7:43468 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T14:48:11.880998488Z [inf]  INFO:     100.64.0.5:40758 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T14:48:42.000240617Z [inf]  ðŸ“¨ 27725957859: Runner
2026-01-06T14:48:42.000249348Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T14:48:42.000257394Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T14:48:42.000265196Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T14:48:42.344765640Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T14:48:42.344773242Z [inf]  ðŸ“¤ Status: 200
2026-01-06T14:48:42.344780213Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27725957859","wa_id":"27725957859"}],"messages":[{"id":"wamid.HBgLMjc3MjU5NTc4NTkVAgARGBJDQjQzRkRFMERCRkRCMjVCMkEA"}]}
2026-01-06T14:48:42.353287304Z [inf]  INFO:     100.64.0.6:25224 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T14:48:43.052345852Z [inf]  INFO:     100.64.0.6:25224 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T14:48:43.142194282Z [inf]  INFO:     100.64.0.8:49840 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T14:49:28.180361332Z [err]  	        FROM event_config
2026-01-06T14:49:28.180374644Z [err]  	        WHERE day_of_week = 1
2026-01-06T14:49:28.180383699Z [err]  	          AND active = 1
2026-01-06T14:49:28.180391921Z [err]  	          AND '14:49' BETWEEN open_time AND close_time
2026-01-06T14:49:28.180455924Z [err]  	        LIMIT 1;
2026-01-06T14:49:28.180465030Z [err]  	        
2026-01-06T14:49:28.180767259Z [err]  2026-01-06 14:49:27.429 UTC [8155] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T14:49:28.180774342Z [err]  2026-01-06 14:49:27.429 UTC [8155] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T14:49:28.180783346Z [err]  2026-01-06 14:49:27.429 UTC [8155] STATEMENT:  
2026-01-06T14:49:28.180791394Z [err]  	        SELECT event
2026-01-06T14:49:34.778710300Z [inf]  ðŸ“¨ 27722135094: OPEN SUBMISSION
2026-01-06T14:49:34.778720163Z [inf]  INFO:     100.64.0.8:14194 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T14:49:34.778742400Z [err]      return await self.app(scope, receive, send)
2026-01-06T14:49:34.778747692Z [err]      await super().__call__(scope, receive, send)
2026-01-06T14:49:34.778757491Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T14:49:34.778758134Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T14:49:34.778764501Z [err]  ERROR:    Exception in ASGI application
2026-01-06T14:49:34.778765123Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T14:49:34.778768306Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T14:49:34.778769788Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T14:49:34.778773659Z [err]  Traceback (most recent call last):
2026-01-06T14:49:34.778779609Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T14:49:34.778782872Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T14:49:34.778783584Z [err]          self.scope, self.receive, self.send
2026-01-06T14:49:34.778783907Z [err]      raise exc
2026-01-06T14:49:34.778792648Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T14:49:34.778793410Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T14:49:34.778795285Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T14:49:34.778802789Z [err]      )
2026-01-06T14:49:34.778814970Z [err]      ^
2026-01-06T14:49:34.778823448Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T14:49:34.792551038Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T14:49:34.792562996Z [err]      await app(scope, receive, sender)
2026-01-06T14:49:34.792570486Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T14:49:34.792577508Z [err]      await self.app(scope, receive, send)
2026-01-06T14:49:34.792584099Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T14:49:34.792591333Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T14:49:34.792598017Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T14:49:34.792605226Z [err]      await route.handle(scope, receive, send)
2026-01-06T14:49:34.792611632Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T14:49:34.792618709Z [err]      await self.app(scope, receive, send)
2026-01-06T14:49:34.792625538Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T14:49:34.792631806Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T14:49:34.792638453Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T14:49:34.793194378Z [err]      await self.app(scope, receive, _send)
2026-01-06T14:49:34.793199419Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T14:49:34.793205611Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T14:49:34.793212031Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T14:49:34.793219015Z [err]      raise exc
2026-01-06T14:49:34.802066000Z [err]      raise exc
2026-01-06T14:49:34.802071953Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T14:49:34.802093039Z [err]      await app(scope, receive, sender)
2026-01-06T14:49:34.802100860Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T14:49:34.802107591Z [err]      response = await f(request)
2026-01-06T14:49:34.802114128Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T14:49:34.802163169Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T14:49:34.802174591Z [err]      raw_response = await run_endpoint_function(
2026-01-06T14:49:34.802182201Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T14:49:34.802189030Z [err]      ...<3 lines>...
2026-01-06T14:49:34.802195798Z [err]      )
2026-01-06T14:49:34.802867741Z [err]      ^
2026-01-06T14:49:34.802879213Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T14:49:34.802886245Z [err]      return await dependant.call(**values)
2026-01-06T14:49:34.802893319Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T14:49:34.802900572Z [err]    File "/app/app/webhook.py", line 112, in webhook
2026-01-06T14:49:34.802907080Z [err]      ~~~~~~~~~~~^
2026-01-06T14:49:34.802907895Z [err]      event = get_active_event()
2026-01-06T14:49:34.802915425Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T14:49:34.802919740Z [err]          """
2026-01-06T14:49:34.802923520Z [err]      cur.execute(
2026-01-06T14:49:34.802928501Z [err]          ^^^
2026-01-06T14:49:34.802934183Z [err]      ...<7 lines>...
2026-01-06T14:49:34.802940478Z [err]          (day_of_week, current_time),
2026-01-06T14:49:34.802946667Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T14:49:34.811603449Z [err]      )
2026-01-06T14:49:34.811609664Z [err]      ^
2026-01-06T14:49:34.811616209Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T14:49:34.811622749Z [err]      return super().execute(query, vars)
2026-01-06T14:49:34.811630497Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T14:49:34.811638593Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T14:49:34.811644615Z [err]  LINE 5:           AND active = 1
2026-01-06T14:49:34.811651396Z [err]                               ^
2026-01-06T14:49:34.811657670Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T14:49:34.811664420Z [err]  
2026-01-06T14:52:17.206237068Z [err]  2026-01-06 14:52:10.551 UTC [8165] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T14:52:17.206251090Z [err]  2026-01-06 14:52:10.551 UTC [8165] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T14:52:17.206260372Z [err]  2026-01-06 14:52:10.551 UTC [8165] STATEMENT:  
2026-01-06T14:52:17.206269140Z [err]  	        SELECT event
2026-01-06T14:52:17.206277356Z [err]  	        FROM event_config
2026-01-06T14:52:17.206294829Z [err]  	        WHERE day_of_week = 1
2026-01-06T14:52:17.206302426Z [err]  	          AND active = 1
2026-01-06T14:52:17.206309414Z [err]  	          AND '14:52' BETWEEN open_time AND close_time
2026-01-06T14:52:17.206316703Z [err]  	        LIMIT 1;
2026-01-06T14:52:17.206326769Z [err]  	        
2026-01-06T14:52:17.937221254Z [err]      )
2026-01-06T14:52:17.937239573Z [err]      ^
2026-01-06T14:52:17.937247996Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T14:52:17.937257917Z [err]      return await self.app(scope, receive, send)
2026-01-06T14:52:17.937274790Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T14:52:17.937284837Z [err]          self.scope, self.receive, self.send
2026-01-06T14:52:17.937292537Z [inf]  INFO:     100.64.0.6:10542 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T14:52:17.937292996Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T14:52:17.937299606Z [inf]  ðŸ“¨ 27722135094: OPEN SUBMISSION
2026-01-06T14:52:17.937304898Z [err]  ERROR:    Exception in ASGI application
2026-01-06T14:52:17.937306126Z [err]  Traceback (most recent call last):
2026-01-06T14:52:17.937318357Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T14:52:17.937325671Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T14:52:17.937339283Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T14:52:17.937339482Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T14:52:17.937350481Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T14:52:17.937351909Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T14:52:17.937361402Z [err]      await super().__call__(scope, receive, send)
2026-01-06T14:52:17.937371464Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T14:52:17.937376019Z [err]      raise exc
2026-01-06T14:52:17.937388889Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T14:52:17.954242760Z [err]      await self.app(scope, receive, _send)
2026-01-06T14:52:17.954250621Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T14:52:17.954257561Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T14:52:17.954264692Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T14:52:17.954272585Z [err]      raise exc
2026-01-06T14:52:17.954279661Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T14:52:17.954286507Z [err]      await app(scope, receive, sender)
2026-01-06T14:52:17.954292946Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T14:52:17.954301609Z [err]      await self.app(scope, receive, send)
2026-01-06T14:52:17.954308391Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T14:52:17.954317809Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T14:52:17.954324678Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T14:52:17.954331732Z [err]      await route.handle(scope, receive, send)
2026-01-06T14:52:17.954343581Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T14:52:17.954350341Z [err]      await self.app(scope, receive, send)
2026-01-06T14:52:17.954504016Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T14:52:17.954514056Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T14:52:17.954521494Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T14:52:17.966856735Z [err]      raise exc
2026-01-06T14:52:17.966865200Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T14:52:17.966872254Z [err]      await app(scope, receive, sender)
2026-01-06T14:52:17.966881526Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T14:52:17.966888466Z [err]      response = await f(request)
2026-01-06T14:52:17.966895516Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T14:52:17.966902795Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T14:52:17.966910207Z [err]      raw_response = await run_endpoint_function(
2026-01-06T14:52:17.966919254Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T14:52:17.966925571Z [err]      ...<3 lines>...
2026-01-06T14:52:17.966931517Z [err]      )
2026-01-06T14:52:17.966937583Z [err]      ^
2026-01-06T14:52:17.966946107Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T14:52:17.966952012Z [err]      return await dependant.call(**values)
2026-01-06T14:52:17.966961762Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T14:52:17.966967683Z [err]    File "/app/app/webhook.py", line 112, in webhook
2026-01-06T14:52:17.966973687Z [err]      event = get_active_event()
2026-01-06T14:52:17.966982855Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T14:52:17.966988057Z [err]      cur.execute(
2026-01-06T14:52:17.966993678Z [err]      ~~~~~~~~~~~^
2026-01-06T14:52:17.966999282Z [err]          """
2026-01-06T14:52:17.967009014Z [err]          ^^^
2026-01-06T14:52:17.967015119Z [err]      ...<7 lines>...
2026-01-06T14:52:17.967020675Z [err]          (day_of_week, current_time),
2026-01-06T14:52:17.967030146Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T14:52:17.981388414Z [err]      )
2026-01-06T14:52:17.981395495Z [err]      ^
2026-01-06T14:52:17.981396559Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T14:52:17.981404097Z [err]                               ^
2026-01-06T14:52:17.981405538Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T14:52:17.981414503Z [err]  LINE 5:           AND active = 1
2026-01-06T14:52:17.981420198Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T14:52:17.981422419Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T14:52:17.981433785Z [err]  
2026-01-06T14:52:17.981434280Z [err]      return super().execute(query, vars)
2026-01-06T14:52:47.362630718Z [err]  2026-01-06 14:52:46.825 UTC [76] LOG:  checkpoint starting: time
2026-01-06T14:52:47.362637339Z [err]  2026-01-06 14:52:47.272 UTC [76] LOG:  checkpoint complete: wrote 5 buffers (0.0%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.409 s, sync=0.011 s, total=0.448 s; sync files=5, longest=0.007 s, average=0.003 s; distance=7 kB, estimate=76 kB; lsn=0/19F7A68, redo lsn=0/19F7A10
2026-01-06T14:54:30.476477207Z [inf]  ðŸ“¨ 27790385688: Hi
2026-01-06T14:54:30.476483181Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T14:54:30.476488303Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T14:54:30.476494832Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T14:54:30.476500374Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T14:54:30.476506071Z [inf]  ðŸ“¤ Status: 200
2026-01-06T14:54:30.476512154Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27790385688","wa_id":"27790385688"}],"messages":[{"id":"wamid.HBgLMjc3OTAzODU2ODgVAgARGBI4MzYxMzJGNkEwOTkzQUMzNUQA"}]}
2026-01-06T14:54:30.476517668Z [inf]  INFO:     100.64.0.6:35056 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T14:54:30.476523648Z [inf]  INFO:     100.64.0.7:51070 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T14:54:31.613485282Z [inf]  INFO:     100.64.0.5:46294 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T14:54:51.310345125Z [inf]  INFO:     100.64.0.5:53422 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T14:54:51.310352058Z [inf]  ðŸ“¨ 27790385688: RUNNER
2026-01-06T14:54:51.310359495Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T14:54:51.310367647Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T14:54:51.310385901Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T14:54:51.364265260Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T14:54:51.364280673Z [inf]  ðŸ“¤ Status: 200
2026-01-06T14:54:51.364304694Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27790385688","wa_id":"27790385688"}],"messages":[{"id":"wamid.HBgLMjc3OTAzODU2ODgVAgARGBI3NTFCMUMwNzlFQzcxMTkyRkYA"}]}
2026-01-06T14:54:51.364316797Z [inf]  INFO:     100.64.0.4:16770 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T14:54:52.452702019Z [inf]  INFO:     100.64.0.5:53422 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T14:54:53.235206066Z [inf]  INFO:     100.64.0.4:16770 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T14:54:53.463860490Z [inf]  INFO:     100.64.0.9:41318 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T14:55:00.943432699Z [inf]  ðŸ“¨ 27769852475: Hi
2026-01-06T14:55:00.943439891Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T14:55:00.943447596Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T14:55:00.943453681Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T14:55:00.943459184Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T14:55:00.943465475Z [inf]  ðŸ“¤ Status: 200
2026-01-06T14:55:00.943472973Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27769852475","wa_id":"27769852475"}],"messages":[{"id":"wamid.HBgLMjc3Njk4NTI0NzUVAgARGBI2OEUyM0RDRDdDRjQ3Mjc5OUQA"}]}
2026-01-06T14:55:00.943480855Z [inf]  INFO:     100.64.0.8:52384 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T14:55:02.607149442Z [inf]  INFO:     100.64.0.8:52384 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T14:55:02.607155911Z [inf]  INFO:     100.64.0.3:43112 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T14:55:23.026949761Z [inf]  INFO:     100.64.0.6:46166 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T14:55:23.026960885Z [inf]  INFO:     100.64.0.7:58564 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T14:55:23.027109171Z [inf]  ðŸ“¨ 27769852475: Runner
2026-01-06T14:55:23.027119233Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T14:55:23.027173307Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T14:55:23.027181701Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T14:55:23.027187935Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T14:55:23.027197534Z [inf]  ðŸ“¤ Status: 200
2026-01-06T14:55:23.027204716Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27769852475","wa_id":"27769852475"}],"messages":[{"id":"wamid.HBgLMjc3Njk4NTI0NzUVAgARGBI2NTk4QzQwRDRFNjIxMTY1RDkA"}]}
2026-01-06T14:55:23.027213583Z [inf]  INFO:     100.64.0.8:11388 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T14:57:50.551825672Z [err]  2026-01-06 14:57:46.372 UTC [76] LOG:  checkpoint starting: time
2026-01-06T14:57:50.551831490Z [err]  2026-01-06 14:57:46.837 UTC [76] LOG:  checkpoint complete: wrote 5 buffers (0.0%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.413 s, sync=0.013 s, total=0.466 s; sync files=5, longest=0.009 s, average=0.003 s; distance=7 kB, estimate=69 kB; lsn=0/19F9908, redo lsn=0/19F98B0
2026-01-06T15:01:23.000000000Z [inf]  Starting Container
2026-01-06T15:01:25.349914346Z [err]  INFO:     Started server process [1]
2026-01-06T15:01:25.349923159Z [err]  INFO:     Waiting for application startup.
2026-01-06T15:01:25.349931088Z [inf]  ðŸš€ Initialising database...
2026-01-06T15:01:25.349938519Z [inf]  âœ… Database ready
2026-01-06T15:01:25.349945960Z [err]  INFO:     Application startup complete.
2026-01-06T15:01:25.349952818Z [err]  INFO:     Uvicorn running on http://0.0.0.0:8080 (Press CTRL+C to quit)
2026-01-06T15:01:33.000000000Z [inf]  Stopping Container
2026-01-06T15:01:36.345942584Z [err]  INFO:     Shutting down
2026-01-06T15:01:36.345948224Z [err]  INFO:     Waiting for application shutdown.
2026-01-06T15:01:36.345955054Z [err]  INFO:     Application shutdown complete.
2026-01-06T15:01:36.345961031Z [err]  INFO:     Finished server process [1]
2026-01-06T15:01:55.216881687Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27722135094","wa_id":"27722135094"}],"messages":[{"id":"wamid.HBgLMjc3MjIxMzUwOTQVAgARGBJGNTVDQkNEQjQ0Njk2OTkwQTcA"}]}
2026-01-06T15:01:55.216884207Z [inf]  ðŸ“¨ 27722135094: ADD CODES
2026-01-06T15:01:55.216890477Z [inf]  INFO:     100.64.0.2:60370 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:01:55.216897058Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T15:01:55.216905957Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T15:01:55.216915049Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T15:01:55.216923146Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T15:01:55.216930688Z [inf]  ðŸ“¤ Status: 200
2026-01-06T15:01:55.558777387Z [inf]  INFO:     100.64.0.3:51150 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:01:55.716053013Z [inf]  INFO:     100.64.0.4:23148 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:01:55.825575758Z [inf]  INFO:     100.64.0.5:11406 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:02:55.130846664Z [err]  	        
2026-01-06T15:02:55.130848258Z [err]  2026-01-06 15:02:46.619 UTC [8205] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:02:55.130854711Z [err]  2026-01-06 15:02:46.619 UTC [8205] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:02:55.130862112Z [err]  2026-01-06 15:02:46.619 UTC [8205] STATEMENT:  
2026-01-06T15:02:55.130868630Z [err]  	        SELECT event
2026-01-06T15:02:55.130875020Z [err]  	        FROM event_config
2026-01-06T15:02:55.130882908Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:02:55.130891630Z [err]  	          AND active = 1
2026-01-06T15:02:55.130902287Z [err]  2026-01-06 15:02:47.476 UTC [76] LOG:  checkpoint complete: wrote 5 buffers (0.0%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.420 s, sync=0.016 s, total=0.542 s; sync files=5, longest=0.011 s, average=0.004 s; distance=1 kB, estimate=63 kB; lsn=0/19FA020, redo lsn=0/19F9FB0
2026-01-06T15:02:55.130904420Z [err]  	          AND '15:02' BETWEEN open_time AND close_time
2026-01-06T15:02:55.130913555Z [err]  	        LIMIT 1;
2026-01-06T15:02:55.130921064Z [err]  	        
2026-01-06T15:02:55.130927625Z [err]  2026-01-06 15:02:46.935 UTC [76] LOG:  checkpoint starting: time
2026-01-06T15:02:55.130934690Z [err]  2026-01-06 15:02:47.172 UTC [8207] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:02:55.130941457Z [err]  2026-01-06 15:02:47.172 UTC [8207] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:02:55.130949013Z [err]  2026-01-06 15:02:47.172 UTC [8207] STATEMENT:  
2026-01-06T15:02:55.130957258Z [err]  	        SELECT event
2026-01-06T15:02:55.130966608Z [err]  	        FROM event_config
2026-01-06T15:02:55.130975451Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:02:55.130982642Z [err]  	          AND active = 1
2026-01-06T15:02:55.130991991Z [err]  	          AND '15:02' BETWEEN open_time AND close_time
2026-01-06T15:02:55.130999390Z [err]  	        LIMIT 1;
2026-01-06T15:02:55.943127772Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:02:55.943138531Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:02:55.943144315Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:02:55.943149808Z [err]      raise exc
2026-01-06T15:02:55.943156477Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:02:55.943197795Z [inf]  ðŸ“¨ 27722135094: OPEN SUBMISSION
2026-01-06T15:02:55.943202333Z [inf]  INFO:     100.64.0.6:17410 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:02:55.943206570Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:02:55.943211758Z [err]  Traceback (most recent call last):
2026-01-06T15:02:55.943216684Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:02:55.943222249Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:02:55.943227757Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:02:55.943233535Z [err]          self.scope, self.receive, self.send
2026-01-06T15:02:55.943238625Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:02:55.943244129Z [err]      )
2026-01-06T15:02:55.943248620Z [err]      ^
2026-01-06T15:02:55.943254083Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:02:55.943259106Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:02:55.943263970Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:02:55.943269138Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:02:55.943275591Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:02:55.943638571Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:02:55.943644230Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:02:55.943649528Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:02:55.943654947Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:02:55.943659943Z [err]      raise exc
2026-01-06T15:02:55.943664569Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:02:55.943668758Z [err]      await app(scope, receive, sender)
2026-01-06T15:02:55.943674455Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:02:55.943679195Z [err]      await self.app(scope, receive, send)
2026-01-06T15:02:55.943685058Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:02:55.943689720Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:02:55.943694278Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:02:55.943698195Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:02:55.943702929Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:02:55.943707126Z [err]      await self.app(scope, receive, send)
2026-01-06T15:02:55.943711848Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:02:55.943716858Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:02:55.943720776Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:02:55.944544618Z [err]      raise exc
2026-01-06T15:02:55.944553517Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:02:55.944559653Z [err]      await app(scope, receive, sender)
2026-01-06T15:02:55.944565402Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:02:55.944569891Z [err]      response = await f(request)
2026-01-06T15:02:55.944574822Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:02:55.944580292Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:02:55.944585000Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:02:55.944590285Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:02:55.944595778Z [err]      ...<3 lines>...
2026-01-06T15:02:55.944600257Z [err]      )
2026-01-06T15:02:55.944604394Z [err]      ^
2026-01-06T15:02:55.944608702Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:02:55.944613918Z [err]      return await dependant.call(**values)
2026-01-06T15:02:55.944618996Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:02:55.944624203Z [err]    File "/app/app/webhook.py", line 112, in webhook
2026-01-06T15:02:55.944629540Z [err]      event = get_active_event()
2026-01-06T15:02:55.944634552Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:02:55.944639576Z [err]      cur.execute(
2026-01-06T15:02:55.944643462Z [err]      ~~~~~~~~~~~^
2026-01-06T15:02:55.944647216Z [err]          """
2026-01-06T15:02:55.944651348Z [err]          ^^^
2026-01-06T15:02:55.944655408Z [err]      ...<7 lines>...
2026-01-06T15:02:55.944659188Z [err]          (day_of_week, current_time),
2026-01-06T15:02:55.944663059Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:02:55.945346347Z [err]      )
2026-01-06T15:02:55.945355541Z [err]      ^
2026-01-06T15:02:55.945362803Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:02:55.945369725Z [err]      return super().execute(query, vars)
2026-01-06T15:02:55.945376465Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:02:55.945383843Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:02:55.945389140Z [err]  LINE 5:           AND active = 1
2026-01-06T15:02:55.945393586Z [err]                               ^
2026-01-06T15:02:55.945398053Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:02:55.945403445Z [err]  
2026-01-06T15:02:55.945408467Z [inf]  ðŸ“¨ 27722135094: OPEN SUBMISSION
2026-01-06T15:02:55.945409307Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:02:55.945413734Z [inf]  INFO:     100.64.0.5:44146 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:02:55.945418952Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:02:55.945421823Z [err]          self.scope, self.receive, self.send
2026-01-06T15:02:55.945424256Z [err]  Traceback (most recent call last):
2026-01-06T15:02:55.945429122Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:02:55.945432298Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:02:55.945436135Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:02:55.945441932Z [err]      )
2026-01-06T15:02:55.945448768Z [err]      ^
2026-01-06T15:02:55.945456062Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:02:55.945462842Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:02:55.946113276Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:02:55.946118338Z [err]      await app(scope, receive, sender)
2026-01-06T15:02:55.946121184Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:02:55.946125090Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:02:55.946128475Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:02:55.946131440Z [err]      await self.app(scope, receive, send)
2026-01-06T15:02:55.946136146Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:02:55.946137791Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:02:55.946142136Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:02:55.946147636Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:02:55.946153703Z [err]      raise exc
2026-01-06T15:02:55.946159476Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:02:55.946161811Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:02:55.946174613Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:02:55.946188873Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:02:55.946198816Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:02:55.946207371Z [err]      raise exc
2026-01-06T15:02:55.946216051Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:02:55.946756287Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:02:55.946758772Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:02:55.946763394Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:02:55.946768162Z [err]      raise exc
2026-01-06T15:02:55.946770438Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:02:55.946772449Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:02:55.946776259Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:02:55.946778405Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:02:55.946782811Z [err]      await app(scope, receive, sender)
2026-01-06T15:02:55.946784889Z [err]      ...<3 lines>...
2026-01-06T15:02:55.946786019Z [err]      await self.app(scope, receive, send)
2026-01-06T15:02:55.946788973Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:02:55.946795083Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:02:55.946796658Z [err]      )
2026-01-06T15:02:55.946798060Z [err]      response = await f(request)
2026-01-06T15:02:55.946801700Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:02:55.946804997Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:02:55.946807313Z [err]      ^
2026-01-06T15:02:55.946807913Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:02:55.946811265Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:02:55.946815553Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:02:55.947966591Z [err]      return await dependant.call(**values)
2026-01-06T15:02:55.947977092Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:02:55.947985088Z [err]    File "/app/app/webhook.py", line 112, in webhook
2026-01-06T15:02:55.947990307Z [err]      event = get_active_event()
2026-01-06T15:02:55.947995891Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:02:55.948002810Z [err]      cur.execute(
2026-01-06T15:02:55.948010504Z [err]      ~~~~~~~~~~~^
2026-01-06T15:02:55.948017138Z [err]          """
2026-01-06T15:02:55.948023683Z [err]          ^^^
2026-01-06T15:02:55.948030618Z [err]      ...<7 lines>...
2026-01-06T15:02:55.948037183Z [err]          (day_of_week, current_time),
2026-01-06T15:02:55.948045774Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:02:55.948051605Z [err]      )
2026-01-06T15:02:55.948055467Z [err]      ^
2026-01-06T15:02:55.948059319Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:02:55.948063034Z [err]      return super().execute(query, vars)
2026-01-06T15:02:55.948067363Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:02:55.948071845Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:02:55.948076223Z [err]  LINE 5:           AND active = 1
2026-01-06T15:02:55.948080466Z [err]                               ^
2026-01-06T15:02:55.948084391Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:02:55.948088660Z [err]  
2026-01-06T15:02:55.948094027Z [inf]  ðŸ“¨ 27722135094: OPEN SUBMISSION
2026-01-06T15:02:55.948098535Z [inf]  INFO:     100.64.0.3:22380 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:02:55.948102322Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:02:55.948802873Z [err]  Traceback (most recent call last):
2026-01-06T15:02:55.948809932Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:02:55.948814749Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:02:55.948819124Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:02:55.948823116Z [err]          self.scope, self.receive, self.send
2026-01-06T15:02:55.948827534Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:02:55.948831650Z [err]      )
2026-01-06T15:02:55.948836080Z [err]      ^
2026-01-06T15:02:55.948840330Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:02:55.948845028Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:02:55.948848996Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:02:55.948855577Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:02:55.948860368Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:02:55.948864878Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:02:55.948868790Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:02:55.948872987Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:02:55.948877856Z [err]      raise exc
2026-01-06T15:02:55.948882261Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:02:55.948886232Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:02:55.948890201Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:02:55.949887809Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:02:55.949895389Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:02:55.949900267Z [err]      raise exc
2026-01-06T15:02:55.949905883Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:02:55.949912214Z [err]      await app(scope, receive, sender)
2026-01-06T15:02:55.949922106Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:02:55.949929094Z [err]      await self.app(scope, receive, send)
2026-01-06T15:02:55.949937060Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:02:55.949943085Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:02:55.949947299Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:02:55.949951907Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:02:55.949956549Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:02:55.949961252Z [err]      await self.app(scope, receive, send)
2026-01-06T15:02:55.949965622Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:02:55.949970350Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:02:55.949975258Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:02:55.949978993Z [err]      raise exc
2026-01-06T15:02:55.949983120Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:02:55.951042891Z [err]      await app(scope, receive, sender)
2026-01-06T15:02:55.951049851Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:02:55.951055775Z [err]      response = await f(request)
2026-01-06T15:02:55.951065499Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:02:55.951071220Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:02:55.951085368Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:02:55.951091302Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:02:55.951098287Z [err]      ...<3 lines>...
2026-01-06T15:02:55.951104146Z [err]      )
2026-01-06T15:02:55.951110590Z [err]      ^
2026-01-06T15:02:55.951115855Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:02:55.951121600Z [err]      return await dependant.call(**values)
2026-01-06T15:02:55.951127801Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:02:55.951133657Z [err]    File "/app/app/webhook.py", line 112, in webhook
2026-01-06T15:02:55.951139527Z [err]      event = get_active_event()
2026-01-06T15:02:55.951145346Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:02:55.951151226Z [err]      cur.execute(
2026-01-06T15:02:55.951157231Z [err]      ~~~~~~~~~~~^
2026-01-06T15:02:55.951162477Z [err]          """
2026-01-06T15:02:55.951168026Z [err]          ^^^
2026-01-06T15:02:55.951174259Z [err]      ...<7 lines>...
2026-01-06T15:02:55.951179610Z [err]          (day_of_week, current_time),
2026-01-06T15:02:55.951184914Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:02:55.951190169Z [err]      )
2026-01-06T15:02:55.951195655Z [err]      ^
2026-01-06T15:02:55.951201710Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:02:55.952027785Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:02:55.952033022Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:02:55.952037166Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:02:55.952049493Z [err]      return super().execute(query, vars)
2026-01-06T15:02:55.952059694Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:02:55.952065573Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:02:55.952070156Z [err]  LINE 5:           AND active = 1
2026-01-06T15:02:55.952074701Z [err]                               ^
2026-01-06T15:02:55.952078992Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:02:55.952083449Z [err]  
2026-01-06T15:02:55.952088170Z [inf]  ðŸ“¨ 27722135094: OPEN SUBMISSION
2026-01-06T15:02:55.952092822Z [inf]  INFO:     100.64.0.7:45264 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:02:55.952097164Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:02:55.952101087Z [err]  Traceback (most recent call last):
2026-01-06T15:02:55.952105487Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:02:55.952109935Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:02:55.952114228Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:02:55.952118095Z [err]          self.scope, self.receive, self.send
2026-01-06T15:02:55.952122339Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:02:55.952126343Z [err]      )
2026-01-06T15:02:55.952130593Z [err]      ^
2026-01-06T15:02:55.952134771Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:02:55.952599196Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:02:55.952604660Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:02:55.952608841Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:02:55.952612867Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:02:55.952617277Z [err]      raise exc
2026-01-06T15:02:55.952621659Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:02:55.952625326Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:02:55.952630430Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:02:55.952634943Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:02:55.952639286Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:02:55.952643197Z [err]      raise exc
2026-01-06T15:02:55.952647050Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:02:55.952651025Z [err]      await app(scope, receive, sender)
2026-01-06T15:02:55.952655185Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:02:55.952659337Z [err]      await self.app(scope, receive, send)
2026-01-06T15:02:55.952663522Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:02:55.952667525Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:02:55.952671644Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:02:55.953368603Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:02:55.953371030Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:02:55.953375427Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:02:55.953380346Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:02:55.953380862Z [err]      ...<3 lines>...
2026-01-06T15:02:55.953387093Z [err]      )
2026-01-06T15:02:55.953388954Z [err]      await self.app(scope, receive, send)
2026-01-06T15:02:55.953392943Z [err]      ^
2026-01-06T15:02:55.953394424Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:02:55.953399455Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:02:55.953399673Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:02:55.953405014Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:02:55.953405700Z [err]      return await dependant.call(**values)
2026-01-06T15:02:55.953410126Z [err]      raise exc
2026-01-06T15:02:55.953411600Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:02:55.953414865Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:02:55.953418600Z [err]      await app(scope, receive, sender)
2026-01-06T15:02:55.953422265Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:02:55.953425893Z [err]      response = await f(request)
2026-01-06T15:02:55.953429509Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:02:55.953433256Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:02:55.954174265Z [err]    File "/app/app/webhook.py", line 112, in webhook
2026-01-06T15:02:55.954184320Z [err]      event = get_active_event()
2026-01-06T15:02:55.954192420Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:02:55.954201625Z [err]      cur.execute(
2026-01-06T15:02:55.954210453Z [err]      ~~~~~~~~~~~^
2026-01-06T15:02:55.954218956Z [err]          """
2026-01-06T15:02:55.954227628Z [err]          ^^^
2026-01-06T15:02:55.954235964Z [err]      ...<7 lines>...
2026-01-06T15:02:55.954243561Z [err]          (day_of_week, current_time),
2026-01-06T15:02:55.954252653Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:02:55.954261636Z [err]      )
2026-01-06T15:02:55.954269860Z [err]      ^
2026-01-06T15:02:55.954277892Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:02:55.954286229Z [err]      return super().execute(query, vars)
2026-01-06T15:02:55.954294511Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:02:55.954302677Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:02:55.954311211Z [err]  LINE 5:           AND active = 1
2026-01-06T15:02:55.954320324Z [err]                               ^
2026-01-06T15:02:55.954327918Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:02:55.954336699Z [err]  
2026-01-06T15:02:56.608639982Z [err]  2026-01-06 15:02:47.679 UTC [8209] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:02:56.608657565Z [err]  2026-01-06 15:02:47.679 UTC [8209] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:02:56.608666806Z [err]  2026-01-06 15:02:47.679 UTC [8209] STATEMENT:  
2026-01-06T15:02:56.608675097Z [err]  	        SELECT event
2026-01-06T15:02:56.608780042Z [err]  	        FROM event_config
2026-01-06T15:02:56.609175522Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:02:56.609184758Z [err]  	          AND active = 1
2026-01-06T15:02:56.609193910Z [err]  	          AND '15:02' BETWEEN open_time AND close_time
2026-01-06T15:02:56.609204132Z [err]  	        LIMIT 1;
2026-01-06T15:02:56.609213193Z [err]  	        
2026-01-06T15:02:56.609221602Z [err]  2026-01-06 15:02:49.817 UTC [8211] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:02:56.614217164Z [err]  2026-01-06 15:02:49.817 UTC [8211] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:02:56.614243118Z [err]  2026-01-06 15:02:49.817 UTC [8211] STATEMENT:  
2026-01-06T15:02:56.614251283Z [err]  	        SELECT event
2026-01-06T15:02:56.614257972Z [err]  	        FROM event_config
2026-01-06T15:02:56.614265590Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:02:56.614271235Z [err]  	          AND active = 1
2026-01-06T15:02:56.614277287Z [err]  	          AND '15:02' BETWEEN open_time AND close_time
2026-01-06T15:02:56.614285468Z [err]  	        LIMIT 1;
2026-01-06T15:02:56.614293413Z [err]  	        
2026-01-06T15:03:03.994310088Z [inf]  ðŸ“¨ 27722135094: OPEN SUBMISSION
2026-01-06T15:03:04.269819338Z [inf]  INFO:     100.64.0.6:18402 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:03:04.269832417Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:03:04.269842220Z [err]  Traceback (most recent call last):
2026-01-06T15:03:04.269850439Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:03:04.269858028Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:03:04.269864871Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:03:04.269872009Z [err]          self.scope, self.receive, self.send
2026-01-06T15:03:04.269878282Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:03:04.269884541Z [err]      )
2026-01-06T15:03:04.269891579Z [err]      ^
2026-01-06T15:03:04.269897866Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:03:04.269904766Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:03:04.269911106Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:03:04.269916277Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:03:04.269920708Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:03:04.269924902Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:03:04.269929721Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:03:04.269935472Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:03:04.269939492Z [err]      raise exc
2026-01-06T15:03:04.269943254Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:03:04.270911516Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:03:04.270911518Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:03:04.270919576Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:03:04.270920022Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:03:04.270926703Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:03:04.270927207Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:03:04.270933422Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:03:04.270935064Z [err]      await self.app(scope, receive, send)
2026-01-06T15:03:04.270939967Z [err]      raise exc
2026-01-06T15:03:04.270942415Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:03:04.270946997Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:03:04.270949579Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:03:04.270956237Z [err]      await app(scope, receive, sender)
2026-01-06T15:03:04.270956787Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:03:04.270962578Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:03:04.270968576Z [err]      await self.app(scope, receive, send)
2026-01-06T15:03:04.270975188Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:03:04.270981438Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:03:04.272092184Z [err]      raise exc
2026-01-06T15:03:04.272095662Z [err]    File "/app/app/webhook.py", line 112, in webhook
2026-01-06T15:03:04.272101483Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:03:04.272110392Z [err]      await app(scope, receive, sender)
2026-01-06T15:03:04.272110617Z [err]      event = get_active_event()
2026-01-06T15:03:04.272120099Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:03:04.272122662Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:03:04.272129413Z [err]      response = await f(request)
2026-01-06T15:03:04.272133335Z [err]      cur.execute(
2026-01-06T15:03:04.272137780Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:03:04.272144655Z [err]      ~~~~~~~~~~~^
2026-01-06T15:03:04.272146040Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:03:04.272153285Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:03:04.272155929Z [err]          """
2026-01-06T15:03:04.272161624Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:03:04.272166950Z [err]          ^^^
2026-01-06T15:03:04.272170133Z [err]      ...<3 lines>...
2026-01-06T15:03:04.272177854Z [err]      ...<7 lines>...
2026-01-06T15:03:04.272179187Z [err]      )
2026-01-06T15:03:04.272187529Z [err]      ^
2026-01-06T15:03:04.272190934Z [err]          (day_of_week, current_time),
2026-01-06T15:03:04.272195275Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:03:04.272202387Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:03:04.272203842Z [err]      return await dependant.call(**values)
2026-01-06T15:03:04.272211392Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:03:04.273349182Z [err]      )
2026-01-06T15:03:04.273357285Z [err]      ^
2026-01-06T15:03:04.273363778Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:03:04.273369815Z [err]      return super().execute(query, vars)
2026-01-06T15:03:04.273375825Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:03:04.273381608Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:03:04.273387698Z [err]  LINE 5:           AND active = 1
2026-01-06T15:03:04.273393741Z [err]                               ^
2026-01-06T15:03:04.273399685Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:03:04.273405885Z [err]  
2026-01-06T15:03:04.731117962Z [err]  2026-01-06 15:03:04.251 UTC [8214] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:03:04.731126301Z [err]  2026-01-06 15:03:04.251 UTC [8214] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:03:04.731135854Z [err]  2026-01-06 15:03:04.251 UTC [8214] STATEMENT:  
2026-01-06T15:03:04.731145790Z [err]  	        SELECT event
2026-01-06T15:03:04.731155168Z [err]  	        FROM event_config
2026-01-06T15:03:04.731165502Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:03:04.731181026Z [err]  	          AND active = 1
2026-01-06T15:03:04.731192663Z [err]  	          AND '15:03' BETWEEN open_time AND close_time
2026-01-06T15:03:04.731203090Z [err]  	        LIMIT 1;
2026-01-06T15:03:04.731211607Z [err]  	        
2026-01-06T15:07:44.535124318Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T15:07:44.535131301Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T15:07:44.535136859Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T15:07:44.535141397Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T15:07:44.535148981Z [inf]  ðŸ“¤ Status: 200
2026-01-06T15:07:44.535155909Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27825528772","wa_id":"27825528772"}],"messages":[{"id":"wamid.HBgLMjc4MjU1Mjg3NzIVAgARGBJCQ0Y0RjhGOTI1NTgzMzYzREYA"}]}
2026-01-06T15:07:44.535163114Z [inf]  INFO:     100.64.0.8:42430 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:07:44.535172189Z [inf]  INFO:     100.64.0.3:11252 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:07:44.535296149Z [inf]  ðŸ“¨ 27825528772: Hi
2026-01-06T15:07:45.548278584Z [inf]  INFO:     100.64.0.8:42430 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:07:57.510381034Z [err]  2026-01-06 15:07:46.575 UTC [76] LOG:  checkpoint starting: time
2026-01-06T15:07:57.510387973Z [err]  2026-01-06 15:07:47.019 UTC [76] LOG:  checkpoint complete: wrote 5 buffers (0.0%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.407 s, sync=0.010 s, total=0.445 s; sync files=5, longest=0.006 s, average=0.002 s; distance=7 kB, estimate=57 kB; lsn=0/19FBDB8, redo lsn=0/19FBD60
2026-01-06T15:09:05.450714602Z [inf]  ðŸ“¨ 27722135094: Open Submissions
2026-01-06T15:09:05.450724886Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:09:05.450725787Z [inf]  INFO:     100.64.0.3:47954 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:09:05.450738679Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:09:05.450740298Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:09:05.450748422Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:09:05.450749436Z [err]  Traceback (most recent call last):
2026-01-06T15:09:05.450758606Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:09:05.450758830Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:09:05.450767979Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:09:05.450768626Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:09:05.450777359Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:09:05.450777943Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:09:05.450786005Z [err]          self.scope, self.receive, self.send
2026-01-06T15:09:05.450787059Z [err]      raise exc
2026-01-06T15:09:05.450794088Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:09:05.450796391Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:09:05.450801399Z [err]      )
2026-01-06T15:09:05.450806118Z [err]      ^
2026-01-06T15:09:05.450810383Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:09:05.450814369Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:09:05.454165519Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:09:05.454172152Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:09:05.454176476Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:09:05.454180451Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:09:05.454184240Z [err]      raise exc
2026-01-06T15:09:05.454187884Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:09:05.454193712Z [err]      await app(scope, receive, sender)
2026-01-06T15:09:05.454197607Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:09:05.454201537Z [err]      await self.app(scope, receive, send)
2026-01-06T15:09:05.454205317Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:09:05.454211222Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:09:05.454216086Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:09:05.454220069Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:09:05.454223896Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:09:05.454228255Z [err]      await self.app(scope, receive, send)
2026-01-06T15:09:05.454232066Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:09:05.454235850Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:09:05.454240309Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:09:05.454244533Z [err]      raise exc
2026-01-06T15:09:05.454248481Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:09:05.454253437Z [err]      await app(scope, receive, sender)
2026-01-06T15:09:05.454257353Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:09:05.454261364Z [err]      response = await f(request)
2026-01-06T15:09:05.454265134Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:09:05.454269370Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:09:05.454273120Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:09:05.454277252Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:09:05.454281358Z [err]      ...<3 lines>...
2026-01-06T15:09:05.454285063Z [err]      )
2026-01-06T15:09:05.454289004Z [err]      ^
2026-01-06T15:09:05.454293249Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:09:05.454297838Z [err]      return await dependant.call(**values)
2026-01-06T15:09:05.454301782Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:09:05.454305712Z [err]    File "/app/app/webhook.py", line 223, in webhook
2026-01-06T15:09:05.454309845Z [err]      event = get_active_event()
2026-01-06T15:09:05.454313980Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:09:05.454318823Z [err]      cur.execute(
2026-01-06T15:09:05.454322972Z [err]      ~~~~~~~~~~~^
2026-01-06T15:09:05.454326955Z [err]          """
2026-01-06T15:09:05.454330749Z [err]          ^^^
2026-01-06T15:09:05.454334482Z [err]      ...<7 lines>...
2026-01-06T15:09:05.454339031Z [err]          (day_of_week, current_time),
2026-01-06T15:09:05.454343180Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:09:05.454347028Z [err]      )
2026-01-06T15:09:05.454351283Z [err]      ^
2026-01-06T15:09:05.454355233Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:09:05.454359548Z [err]      return super().execute(query, vars)
2026-01-06T15:09:05.454363779Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:09:05.454367801Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:09:05.454372300Z [err]  LINE 5:           AND active = 1
2026-01-06T15:09:05.454375819Z [err]                               ^
2026-01-06T15:09:05.454380096Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:09:05.454384373Z [err]  
2026-01-06T15:09:08.682423827Z [err]  	        
2026-01-06T15:09:08.682491670Z [err]  2026-01-06 15:09:04.488 UTC [8235] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:09:08.682499759Z [err]  2026-01-06 15:09:04.488 UTC [8235] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:09:08.682507380Z [err]  2026-01-06 15:09:04.488 UTC [8235] STATEMENT:  
2026-01-06T15:09:08.682520410Z [err]  	        SELECT event
2026-01-06T15:09:08.682527608Z [err]  	        FROM event_config
2026-01-06T15:09:08.682535385Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:09:08.682542126Z [err]  	          AND active = 1
2026-01-06T15:09:08.682549194Z [err]  	          AND '15:09' BETWEEN open_time AND close_time
2026-01-06T15:09:08.682560235Z [err]  	        LIMIT 1;
2026-01-06T15:09:14.086601242Z [inf]  ðŸ“¨ 27722135094: OPEN SUBMISSION
2026-01-06T15:09:14.385990492Z [inf]  INFO:     100.64.0.9:18816 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:09:14.385992957Z [err]      raise exc
2026-01-06T15:09:14.386000368Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:09:14.386002843Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:09:14.386006238Z [err]  Traceback (most recent call last):
2026-01-06T15:09:14.386012098Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:09:14.386017633Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:09:14.386022057Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:09:14.386027357Z [err]          self.scope, self.receive, self.send
2026-01-06T15:09:14.386031658Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:09:14.386036802Z [err]      )
2026-01-06T15:09:14.386042501Z [err]      ^
2026-01-06T15:09:14.386047061Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:09:14.386052386Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:09:14.386058714Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:09:14.386063481Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:09:14.386068195Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:09:14.386072977Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:09:14.386077503Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:09:14.386085208Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:09:14.387085960Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:09:14.387091101Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:09:14.387103039Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:09:14.387104909Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:09:14.387110776Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:09:14.387119506Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:09:14.387120685Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:09:14.387127133Z [err]      raise exc
2026-01-06T15:09:14.387131703Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:09:14.387136178Z [err]      await app(scope, receive, sender)
2026-01-06T15:09:14.387140350Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:09:14.387144933Z [err]      await self.app(scope, receive, send)
2026-01-06T15:09:14.387149074Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:09:14.387154016Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:09:14.387159830Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:09:14.387164641Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:09:14.387169276Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:09:14.387174701Z [err]      await self.app(scope, receive, send)
2026-01-06T15:09:14.388011281Z [err]      raise exc
2026-01-06T15:09:14.388017984Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:09:14.388020447Z [err]          ^^^
2026-01-06T15:09:14.388023117Z [err]      await app(scope, receive, sender)
2026-01-06T15:09:14.388028168Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:09:14.388029653Z [err]      ...<7 lines>...
2026-01-06T15:09:14.388035360Z [err]      response = await f(request)
2026-01-06T15:09:14.388037140Z [err]          (day_of_week, current_time),
2026-01-06T15:09:14.388041210Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:09:14.388045174Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:09:14.388045226Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:09:14.388050379Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:09:14.388056844Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:09:14.388061641Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:09:14.388066292Z [err]      return await dependant.call(**values)
2026-01-06T15:09:14.388069646Z [err]      ...<3 lines>...
2026-01-06T15:09:14.388077634Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:09:14.388078908Z [err]      )
2026-01-06T15:09:14.388088318Z [err]      ^
2026-01-06T15:09:14.388090283Z [err]    File "/app/app/webhook.py", line 112, in webhook
2026-01-06T15:09:14.388097807Z [err]      event = get_active_event()
2026-01-06T15:09:14.388103178Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:09:14.388108009Z [err]      cur.execute(
2026-01-06T15:09:14.388113947Z [err]      ~~~~~~~~~~~^
2026-01-06T15:09:14.388125184Z [err]          """
2026-01-06T15:09:14.388955011Z [err]      )
2026-01-06T15:09:14.388960631Z [err]      ^
2026-01-06T15:09:14.388964957Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:09:14.388968996Z [err]      return super().execute(query, vars)
2026-01-06T15:09:14.388973471Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:09:14.388977350Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:09:14.388981723Z [err]  LINE 5:           AND active = 1
2026-01-06T15:09:14.388986191Z [err]                               ^
2026-01-06T15:09:14.388990581Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:09:14.388994591Z [err]  
2026-01-06T15:09:15.764828987Z [err]  2026-01-06 15:09:14.352 UTC [8237] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:09:15.764834677Z [err]  2026-01-06 15:09:14.352 UTC [8237] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:09:15.764840558Z [err]  2026-01-06 15:09:14.352 UTC [8237] STATEMENT:  
2026-01-06T15:09:15.764846940Z [err]  	        SELECT event
2026-01-06T15:09:15.764853330Z [err]  	        FROM event_config
2026-01-06T15:09:15.764858779Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:09:15.764865517Z [err]  	          AND active = 1
2026-01-06T15:09:15.764871651Z [err]  	          AND '15:09' BETWEEN open_time AND close_time
2026-01-06T15:09:15.764878145Z [err]  	        LIMIT 1;
2026-01-06T15:09:15.764884955Z [err]  	        
2026-01-06T15:10:52.000000000Z [inf]  Starting Container
2026-01-06T15:10:54.284817711Z [err]  INFO:     Started server process [1]
2026-01-06T15:10:54.284822589Z [err]  INFO:     Waiting for application startup.
2026-01-06T15:10:54.284830368Z [inf]  ðŸš€ Initialising database...
2026-01-06T15:10:54.284837327Z [inf]  âœ… Database ready
2026-01-06T15:10:54.284844480Z [err]  INFO:     Application startup complete.
2026-01-06T15:10:54.284852574Z [err]  INFO:     Uvicorn running on http://0.0.0.0:8080 (Press CTRL+C to quit)
2026-01-06T15:10:59.000000000Z [inf]  Stopping Container
2026-01-06T15:11:04.809793057Z [err]  INFO:     Shutting down
2026-01-06T15:11:04.809804327Z [err]  INFO:     Waiting for application shutdown.
2026-01-06T15:11:04.809813893Z [err]  INFO:     Application shutdown complete.
2026-01-06T15:11:04.809825112Z [err]  INFO:     Finished server process [1]
2026-01-06T15:12:34.337539625Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T15:12:34.337548684Z [inf]  ðŸ“¤ Status: 200
2026-01-06T15:12:34.337555216Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27835096203","wa_id":"27835096203"}],"messages":[{"id":"wamid.HBgLMjc4MzUwOTYyMDMVAgARGBIyQUM5MkVENTk2NDdCRTcxMzMA"}]}
2026-01-06T15:12:34.337561522Z [inf]  INFO:     100.64.0.2:23060 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:12:34.337566903Z [inf]  ðŸ“¨ 27835096203: Hi
2026-01-06T15:12:34.337567204Z [inf]  INFO:     100.64.0.3:44816 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:12:34.337577133Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T15:12:34.337583908Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T15:12:34.337588667Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T15:12:47.555816317Z [err]  2026-01-06 15:12:46.117 UTC [76] LOG:  checkpoint starting: time
2026-01-06T15:12:47.555821048Z [err]  2026-01-06 15:12:47.129 UTC [76] LOG:  checkpoint complete: wrote 5 buffers (0.0%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.410 s, sync=0.020 s, total=1.012 s; sync files=5, longest=0.017 s, average=0.004 s; distance=7 kB, estimate=52 kB; lsn=0/19FDD18, redo lsn=0/19FDCC0
2026-01-06T15:12:54.337993332Z [inf]  ðŸ“¨ 27832637248: Hi
2026-01-06T15:12:54.337997272Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T15:12:54.338002602Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T15:12:54.338006772Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T15:12:54.338011072Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T15:12:54.338015422Z [inf]  ðŸ“¤ Status: 200
2026-01-06T15:12:54.338020586Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27832637248","wa_id":"27832637248"}],"messages":[{"id":"wamid.HBgLMjc4MzI2MzcyNDgVAgARGBJBRTkxOTE1QzY0MTE4RUNENEMA"}]}
2026-01-06T15:12:54.338025447Z [inf]  INFO:     100.64.0.4:59880 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:12:54.338030636Z [inf]  INFO:     100.64.0.5:61986 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:12:54.338035807Z [inf]  INFO:     100.64.0.6:58604 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:13:14.335346761Z [inf]  ðŸ“¨ 27832637248: Runner
2026-01-06T15:13:14.335350831Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T15:13:14.335359418Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T15:13:14.335363359Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T15:13:14.335367320Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T15:13:14.335371067Z [inf]  ðŸ“¤ Status: 200
2026-01-06T15:13:14.335380251Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27832637248","wa_id":"27832637248"}],"messages":[{"id":"wamid.HBgLMjc4MzI2MzcyNDgVAgARGBI5M0YyOUQ4NDU2RTI2NDRFRDcA"}]}
2026-01-06T15:13:14.335384524Z [inf]  INFO:     100.64.0.7:45194 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:13:14.335388608Z [inf]  INFO:     100.64.0.2:57284 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:13:14.335393014Z [inf]  INFO:     100.64.0.5:44684 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:13:23.481812009Z [inf]  ðŸ“¨ 27832637248: Walker
2026-01-06T15:13:23.747140598Z [err]      )
2026-01-06T15:13:23.747147796Z [inf]  INFO:     100.64.0.8:55464 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:13:23.747152577Z [err]      ^
2026-01-06T15:13:23.747158636Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:13:23.747160891Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:13:23.747165035Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:13:23.747171332Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:13:23.747171862Z [err]  Traceback (most recent call last):
2026-01-06T15:13:23.747176948Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:13:23.747180752Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:13:23.747183482Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:13:23.747188205Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:13:23.747189897Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:13:23.747193753Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:13:23.747199387Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:13:23.747201163Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:13:23.747206640Z [err]      raise exc
2026-01-06T15:13:23.747208899Z [err]          self.scope, self.receive, self.send
2026-01-06T15:13:23.747212272Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:13:23.747217098Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:13:23.748141872Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:13:23.748148353Z [err]      await app(scope, receive, sender)
2026-01-06T15:13:23.748150972Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:13:23.748156249Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:13:23.748159862Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:13:23.748161931Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:13:23.748162376Z [err]      await self.app(scope, receive, send)
2026-01-06T15:13:23.748167982Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:13:23.748168947Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:13:23.748175845Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:13:23.748176269Z [err]      raise exc
2026-01-06T15:13:23.748176669Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:13:23.748181896Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:13:23.748186217Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:13:23.748188154Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:13:23.748189060Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:13:23.748193197Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:13:23.748197239Z [err]      await self.app(scope, receive, send)
2026-01-06T15:13:23.749280503Z [err]      raise exc
2026-01-06T15:13:23.749285859Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:13:23.749290415Z [err]      await app(scope, receive, sender)
2026-01-06T15:13:23.749296903Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:13:23.749296971Z [err]          """
2026-01-06T15:13:23.749297243Z [err]      ^
2026-01-06T15:13:23.749302772Z [err]      response = await f(request)
2026-01-06T15:13:23.749305216Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:13:23.749307896Z [err]          ^^^
2026-01-06T15:13:23.749309251Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:13:23.749311679Z [err]      return await dependant.call(**values)
2026-01-06T15:13:23.749315716Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:13:23.749318086Z [err]      ...<7 lines>...
2026-01-06T15:13:23.749318328Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:13:23.749322280Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:13:23.749324742Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:13:23.749327094Z [err]          (day_of_week, current_time),
2026-01-06T15:13:23.749329661Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:13:23.749334751Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:13:23.749335192Z [err]      ...<3 lines>...
2026-01-06T15:13:23.749337286Z [err]      event = get_active_event()
2026-01-06T15:13:23.749341380Z [err]      )
2026-01-06T15:13:23.749343336Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:13:23.749347329Z [err]      cur.execute(
2026-01-06T15:13:23.749351227Z [err]      ~~~~~~~~~~~^
2026-01-06T15:13:23.750454688Z [err]  LINE 5:           AND active = 1
2026-01-06T15:13:23.750463609Z [err]                               ^
2026-01-06T15:13:23.750464809Z [err]      )
2026-01-06T15:13:23.750469955Z [err]      ^
2026-01-06T15:13:23.750470891Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:13:23.750474766Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:13:23.750478529Z [err]  
2026-01-06T15:13:23.750480136Z [err]      return super().execute(query, vars)
2026-01-06T15:13:23.750484433Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:13:23.750488246Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:13:24.674810043Z [inf]  ðŸ“¨ 27832637248: Walker
2026-01-06T15:13:24.750260924Z [err]      raise exc
2026-01-06T15:13:24.750262979Z [err]      )
2026-01-06T15:13:24.750263206Z [inf]  INFO:     100.64.0.7:22286 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:13:24.750270404Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:13:24.750274606Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:13:24.750274945Z [err]      ^
2026-01-06T15:13:24.750282944Z [err]  Traceback (most recent call last):
2026-01-06T15:13:24.750285677Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:13:24.750290266Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:13:24.750294568Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:13:24.750297444Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:13:24.750305141Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:13:24.750306065Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:13:24.750312546Z [err]          self.scope, self.receive, self.send
2026-01-06T15:13:24.750316372Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:13:24.750319584Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:13:24.750325180Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:13:24.750332149Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:13:24.750338786Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:13:24.750345356Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:13:24.750977275Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:13:24.750983476Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:13:24.750984340Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:13:24.750989829Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:13:24.750991181Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:13:24.750994771Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:13:24.750996214Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:13:24.751003343Z [err]      raise exc
2026-01-06T15:13:24.751004254Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:13:24.751010388Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:13:24.751011804Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:13:24.751015977Z [err]      await app(scope, receive, sender)
2026-01-06T15:13:24.751018710Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:13:24.751021826Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:13:24.751026522Z [err]      await self.app(scope, receive, send)
2026-01-06T15:13:24.751026904Z [err]      await self.app(scope, receive, send)
2026-01-06T15:13:24.751033716Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:13:24.751034153Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:13:24.751942049Z [err]      raise exc
2026-01-06T15:13:24.751955772Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:13:24.751964388Z [err]      await app(scope, receive, sender)
2026-01-06T15:13:24.751972232Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:13:24.751981212Z [err]      response = await f(request)
2026-01-06T15:13:24.751990634Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:13:24.752000172Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:13:24.752011079Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:13:24.752019677Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:13:24.752028096Z [err]      ...<3 lines>...
2026-01-06T15:13:24.752036605Z [err]      )
2026-01-06T15:13:24.752044896Z [err]      ^
2026-01-06T15:13:24.752054084Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:13:24.752062354Z [err]      return await dependant.call(**values)
2026-01-06T15:13:24.752070343Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:13:24.752079634Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:13:24.752111442Z [err]      event = get_active_event()
2026-01-06T15:13:24.752120813Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:13:24.752128431Z [err]      cur.execute(
2026-01-06T15:13:24.752136969Z [err]      ~~~~~~~~~~~^
2026-01-06T15:13:24.752145569Z [err]          """
2026-01-06T15:13:24.752156967Z [err]          ^^^
2026-01-06T15:13:24.752166436Z [err]      ...<7 lines>...
2026-01-06T15:13:24.752174176Z [err]          (day_of_week, current_time),
2026-01-06T15:13:24.752183585Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:13:24.752807442Z [err]      )
2026-01-06T15:13:24.752813718Z [err]      ^
2026-01-06T15:13:24.752818999Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:13:24.752823949Z [err]      return super().execute(query, vars)
2026-01-06T15:13:24.752829863Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:13:24.752833856Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:13:24.752837796Z [err]  LINE 5:           AND active = 1
2026-01-06T15:13:24.752841830Z [err]                               ^
2026-01-06T15:13:24.752845770Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:13:24.752851849Z [err]  
2026-01-06T15:13:25.463609305Z [inf]  ðŸ“¨ 27832637248: Walker
2026-01-06T15:13:25.678847646Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:13:25.678860485Z [err]      )
2026-01-06T15:13:25.678869818Z [err]      ^
2026-01-06T15:13:25.678874478Z [inf]  INFO:     100.64.0.4:49338 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:13:25.678879000Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:13:25.678882297Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:13:25.678887999Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:13:25.678889724Z [err]  Traceback (most recent call last):
2026-01-06T15:13:25.678897156Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:13:25.678897397Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:13:25.678903223Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:13:25.678905994Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:13:25.678909510Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:13:25.678913151Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:13:25.678915874Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:13:25.678919853Z [err]          self.scope, self.receive, self.send
2026-01-06T15:13:25.678921255Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:13:25.678925859Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:13:25.678930038Z [err]      raise exc
2026-01-06T15:13:25.678934708Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:13:25.679906129Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:13:25.679916372Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:13:25.679924219Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:13:25.679932719Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:13:25.679939594Z [err]      raise exc
2026-01-06T15:13:25.679947725Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:13:25.679954377Z [err]      await app(scope, receive, sender)
2026-01-06T15:13:25.679960919Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:13:25.679968097Z [err]      await self.app(scope, receive, send)
2026-01-06T15:13:25.679975626Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:13:25.679982842Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:13:25.679990168Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:13:25.679996665Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:13:25.680003784Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:13:25.680011146Z [err]      await self.app(scope, receive, send)
2026-01-06T15:13:25.680017717Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:13:25.680024836Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:13:25.680033951Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:13:25.681040224Z [err]      raise exc
2026-01-06T15:13:25.681044548Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:13:25.681048994Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:13:25.681051265Z [err]      await app(scope, receive, sender)
2026-01-06T15:13:25.681055315Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:13:25.681059676Z [err]      event = get_active_event()
2026-01-06T15:13:25.681060278Z [err]      response = await f(request)
2026-01-06T15:13:25.681065761Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:13:25.681065952Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:13:25.681071216Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:13:25.681072644Z [err]      cur.execute(
2026-01-06T15:13:25.681076482Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:13:25.681078299Z [err]      ~~~~~~~~~~~^
2026-01-06T15:13:25.681081936Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:13:25.681084285Z [err]          """
2026-01-06T15:13:25.681087558Z [err]      ...<3 lines>...
2026-01-06T15:13:25.681089926Z [err]          ^^^
2026-01-06T15:13:25.681093879Z [err]      )
2026-01-06T15:13:25.681096242Z [err]      ...<7 lines>...
2026-01-06T15:13:25.681099813Z [err]      ^
2026-01-06T15:13:25.681102012Z [err]          (day_of_week, current_time),
2026-01-06T15:13:25.681105160Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:13:25.681107921Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:13:25.681110317Z [err]      return await dependant.call(**values)
2026-01-06T15:13:25.681114451Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:13:25.682871707Z [err]      )
2026-01-06T15:13:25.682879555Z [err]      ^
2026-01-06T15:13:25.682885948Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:13:25.682892097Z [err]      return super().execute(query, vars)
2026-01-06T15:13:25.682898191Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:13:25.682903955Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:13:25.682911059Z [err]  LINE 5:           AND active = 1
2026-01-06T15:13:25.682917333Z [err]                               ^
2026-01-06T15:13:25.682925098Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:13:25.682933860Z [err]  
2026-01-06T15:13:26.542216245Z [inf]  ðŸ“¨ 27832637248: Walker
2026-01-06T15:13:26.819331768Z [inf]  INFO:     100.64.0.4:49348 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:13:26.819333243Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:13:26.819342814Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:13:26.819343267Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:13:26.819351156Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:13:26.819352983Z [err]  Traceback (most recent call last):
2026-01-06T15:13:26.819357692Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:13:26.819361757Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:13:26.819363391Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:13:26.819369983Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:13:26.819371023Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:13:26.819376388Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:13:26.819379895Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:13:26.819382018Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:13:26.819385963Z [err]          self.scope, self.receive, self.send
2026-01-06T15:13:26.819388254Z [err]      raise exc
2026-01-06T15:13:26.819391116Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:13:26.819396101Z [err]      )
2026-01-06T15:13:26.819396253Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:13:26.819402020Z [err]      ^
2026-01-06T15:13:26.820202198Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:13:26.820205269Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:13:26.820213083Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:13:26.820213432Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:13:26.820221453Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:13:26.820222847Z [err]      await self.app(scope, receive, send)
2026-01-06T15:13:26.820228753Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:13:26.820231776Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:13:26.820235480Z [err]      raise exc
2026-01-06T15:13:26.820242317Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:13:26.820243035Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:13:26.820250967Z [err]      await app(scope, receive, sender)
2026-01-06T15:13:26.820251680Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:13:26.820258286Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:13:26.820263638Z [err]      await self.app(scope, receive, send)
2026-01-06T15:13:26.820268633Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:13:26.820274403Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:13:26.820279709Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:13:26.821355310Z [err]      raise exc
2026-01-06T15:13:26.821361950Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:13:26.821366403Z [err]      await app(scope, receive, sender)
2026-01-06T15:13:26.821372639Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:13:26.821375466Z [err]      event = get_active_event()
2026-01-06T15:13:26.821375596Z [err]      ...<3 lines>...
2026-01-06T15:13:26.821376855Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:13:26.821379246Z [err]      response = await f(request)
2026-01-06T15:13:26.821385755Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:13:26.821386421Z [err]      )
2026-01-06T15:13:26.821390819Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:13:26.821396204Z [err]      ^
2026-01-06T15:13:26.821397203Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:13:26.821397314Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:13:26.821403632Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:13:26.821406092Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:13:26.821406420Z [err]      cur.execute(
2026-01-06T15:13:26.821412622Z [err]          ^^^
2026-01-06T15:13:26.821413465Z [err]      return await dependant.call(**values)
2026-01-06T15:13:26.821416059Z [err]      ~~~~~~~~~~~^
2026-01-06T15:13:26.821420240Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:13:26.821424955Z [err]          """
2026-01-06T15:13:26.821426723Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:13:26.821431474Z [err]      ...<7 lines>...
2026-01-06T15:13:26.821442278Z [err]          (day_of_week, current_time),
2026-01-06T15:13:26.822036543Z [err]      )
2026-01-06T15:13:26.822045316Z [err]      ^
2026-01-06T15:13:26.822051916Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:13:26.822058523Z [err]      return super().execute(query, vars)
2026-01-06T15:13:26.822066366Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:13:26.822073288Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:13:26.822080746Z [err]  LINE 5:           AND active = 1
2026-01-06T15:13:26.822089945Z [err]                               ^
2026-01-06T15:13:26.822096580Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:13:26.822102909Z [err]  
2026-01-06T15:13:28.391174248Z [err]  2026-01-06 15:13:23.736 UTC [8256] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:13:28.391180241Z [err]  2026-01-06 15:13:23.736 UTC [8256] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:13:28.391187649Z [err]  2026-01-06 15:13:23.736 UTC [8256] STATEMENT:  
2026-01-06T15:13:28.391195323Z [err]  	        SELECT event
2026-01-06T15:13:28.391202484Z [err]  	        FROM event_config
2026-01-06T15:13:28.391210072Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:13:28.391217180Z [err]  	          AND active = 1
2026-01-06T15:13:28.391225066Z [err]  	          AND '15:13' BETWEEN open_time AND close_time
2026-01-06T15:13:28.391233166Z [err]  	        LIMIT 1;
2026-01-06T15:13:28.391250017Z [err]  	        
2026-01-06T15:13:28.391258282Z [err]  2026-01-06 15:13:24.734 UTC [8258] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:13:28.391265391Z [err]  2026-01-06 15:13:24.734 UTC [8258] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:13:28.391272658Z [err]  2026-01-06 15:13:24.734 UTC [8258] STATEMENT:  
2026-01-06T15:13:28.391284032Z [err]  	        SELECT event
2026-01-06T15:13:28.391290998Z [err]  	        FROM event_config
2026-01-06T15:13:28.391299054Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:13:28.391308878Z [err]  	          AND active = 1
2026-01-06T15:13:28.391316066Z [err]  	          AND '15:13' BETWEEN open_time AND close_time
2026-01-06T15:13:28.391323368Z [err]  	        LIMIT 1;
2026-01-06T15:13:28.391330852Z [err]  	        
2026-01-06T15:13:28.391337971Z [err]  2026-01-06 15:13:25.602 UTC [8260] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:13:28.391344754Z [err]  2026-01-06 15:13:25.602 UTC [8260] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:13:29.529205525Z [err]  2026-01-06 15:13:25.602 UTC [8260] STATEMENT:  
2026-01-06T15:13:29.529213105Z [err]  	        SELECT event
2026-01-06T15:13:29.529221524Z [err]  	        FROM event_config
2026-01-06T15:13:29.529232803Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:13:29.529240082Z [err]  	          AND active = 1
2026-01-06T15:13:29.529246344Z [err]  	          AND '15:13' BETWEEN open_time AND close_time
2026-01-06T15:13:29.529259503Z [err]  	        LIMIT 1;
2026-01-06T15:13:29.529273810Z [err]  	        
2026-01-06T15:13:29.529283031Z [err]  2026-01-06 15:13:26.811 UTC [8262] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:13:29.529290921Z [err]  2026-01-06 15:13:26.811 UTC [8262] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:13:29.529299794Z [err]  2026-01-06 15:13:26.811 UTC [8262] STATEMENT:  
2026-01-06T15:13:29.529306831Z [err]  	        SELECT event
2026-01-06T15:13:29.529313882Z [err]  	        FROM event_config
2026-01-06T15:13:29.529320680Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:13:29.529328387Z [err]  	          AND active = 1
2026-01-06T15:13:29.529334793Z [err]  	          AND '15:13' BETWEEN open_time AND close_time
2026-01-06T15:13:29.529346745Z [err]  	        LIMIT 1;
2026-01-06T15:13:29.529354388Z [err]  	        
2026-01-06T15:13:46.837924591Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:13:46.837937566Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:13:46.837946229Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:13:46.837953008Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:13:46.837960773Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:13:46.837970853Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:13:46.837979203Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:13:46.837986388Z [err]      raise exc
2026-01-06T15:13:46.837998085Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:13:46.838001426Z [inf]  ðŸ“¨ 27832637248: Walker
2026-01-06T15:13:46.838006476Z [inf]  INFO:     100.64.0.9:18600 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:13:46.838011426Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:13:46.838016999Z [err]  Traceback (most recent call last):
2026-01-06T15:13:46.838020723Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:13:46.838024346Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:13:46.838027843Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:13:46.838031470Z [err]          self.scope, self.receive, self.send
2026-01-06T15:13:46.838038009Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:13:46.838041632Z [err]      )
2026-01-06T15:13:46.838045135Z [err]      ^
2026-01-06T15:13:46.838048939Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:13:46.838638543Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:13:46.838647673Z [err]      await self.app(scope, receive, send)
2026-01-06T15:13:46.838650143Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:13:46.838656186Z [err]      await app(scope, receive, sender)
2026-01-06T15:13:46.838659742Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:13:46.838663290Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:13:46.838663747Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:13:46.838664788Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:13:46.838669746Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:13:46.838669868Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:13:46.838671080Z [err]      await self.app(scope, receive, send)
2026-01-06T15:13:46.838676258Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:13:46.838678301Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:13:46.838680168Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:13:46.838681918Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:13:46.838688520Z [err]      raise exc
2026-01-06T15:13:46.838691477Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:13:46.838699781Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:13:46.839561390Z [err]      raise exc
2026-01-06T15:13:46.839569054Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:13:46.839571621Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:13:46.839574244Z [err]      await app(scope, receive, sender)
2026-01-06T15:13:46.839578267Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:13:46.839581943Z [err]      response = await f(request)
2026-01-06T15:13:46.839585881Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:13:46.839589690Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:13:46.839595597Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:13:46.839601571Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:13:46.839607321Z [err]      ...<3 lines>...
2026-01-06T15:13:46.839613628Z [err]      )
2026-01-06T15:13:46.839620770Z [err]      ^
2026-01-06T15:13:46.839624694Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:13:46.839628108Z [err]      return await dependant.call(**values)
2026-01-06T15:13:46.839631787Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:13:46.839635474Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:13:46.839638998Z [err]      event = get_active_event()
2026-01-06T15:13:46.839642771Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:13:46.839646615Z [err]      cur.execute(
2026-01-06T15:13:46.839650246Z [err]      ~~~~~~~~~~~^
2026-01-06T15:13:46.839653752Z [err]          """
2026-01-06T15:13:46.839657556Z [err]          ^^^
2026-01-06T15:13:46.839661280Z [err]      ...<7 lines>...
2026-01-06T15:13:46.839665085Z [err]          (day_of_week, current_time),
2026-01-06T15:13:46.840390368Z [err]      )
2026-01-06T15:13:46.840390646Z [err]                               ^
2026-01-06T15:13:46.840398518Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:13:46.840400246Z [err]      ^
2026-01-06T15:13:46.840406228Z [err]  
2026-01-06T15:13:46.840408524Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:13:46.840415313Z [err]      return super().execute(query, vars)
2026-01-06T15:13:46.840421716Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:13:46.840427604Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:13:46.840433973Z [err]  LINE 5:           AND active = 1
2026-01-06T15:13:49.202780606Z [err]  2026-01-06 15:13:43.263 UTC [8265] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:13:49.202790404Z [err]  2026-01-06 15:13:43.263 UTC [8265] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:13:49.202800854Z [err]  2026-01-06 15:13:43.263 UTC [8265] STATEMENT:  
2026-01-06T15:13:49.202807339Z [err]  	        SELECT event
2026-01-06T15:13:49.202813225Z [err]  	        FROM event_config
2026-01-06T15:13:49.202818984Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:13:49.202824926Z [err]  	          AND active = 1
2026-01-06T15:13:49.202837372Z [err]  	          AND '15:13' BETWEEN open_time AND close_time
2026-01-06T15:13:49.202845030Z [err]  	        LIMIT 1;
2026-01-06T15:13:49.202852388Z [err]  	        
2026-01-06T15:15:02.528949579Z [err]  2026-01-06 15:15:01.297 UTC [8271] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:15:02.528954822Z [err]  2026-01-06 15:15:01.297 UTC [8271] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:15:02.528960636Z [err]  2026-01-06 15:15:01.297 UTC [8271] STATEMENT:  
2026-01-06T15:15:02.528966735Z [err]  	        SELECT event
2026-01-06T15:15:02.528972328Z [err]  	        FROM event_config
2026-01-06T15:15:02.528977698Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:15:02.528984729Z [err]  	          AND active = 1
2026-01-06T15:15:02.528992230Z [err]  	          AND '15:15' BETWEEN open_time AND close_time
2026-01-06T15:15:02.528999856Z [err]  	        LIMIT 1;
2026-01-06T15:15:02.529022921Z [err]  	        
2026-01-06T15:15:06.895963910Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:15:06.895970058Z [inf]  ðŸ“¨ 27832637248: Walker
2026-01-06T15:15:06.895975543Z [inf]  INFO:     100.64.0.4:11426 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:15:06.895977319Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:15:06.895980631Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:15:06.895985463Z [err]  Traceback (most recent call last):
2026-01-06T15:15:06.895988233Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:15:06.895990598Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:15:06.895995480Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:15:06.895997308Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:15:06.896001108Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:15:06.896006263Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:15:06.896009231Z [err]          self.scope, self.receive, self.send
2026-01-06T15:15:06.896014083Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:15:06.896016271Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:15:06.896019082Z [err]      )
2026-01-06T15:15:06.896024472Z [err]      ^
2026-01-06T15:15:06.896025803Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:15:06.896033277Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:15:06.896039979Z [err]      raise exc
2026-01-06T15:15:06.896046427Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:15:06.897675058Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:15:06.897686389Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:15:06.897695425Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:15:06.897704547Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:15:06.897714508Z [err]      raise exc
2026-01-06T15:15:06.897722978Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:15:06.897729287Z [err]      await app(scope, receive, sender)
2026-01-06T15:15:06.897735662Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:15:06.897742491Z [err]      await self.app(scope, receive, send)
2026-01-06T15:15:06.897749915Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:15:06.897755731Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:15:06.897762122Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:15:06.897768421Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:15:06.897775265Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:15:06.897781405Z [err]      await self.app(scope, receive, send)
2026-01-06T15:15:06.897788225Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:15:06.897794728Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:15:06.897800235Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:15:06.899827559Z [err]      ...<7 lines>...
2026-01-06T15:15:06.899840180Z [err]          (day_of_week, current_time),
2026-01-06T15:15:06.899841640Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:15:06.899850741Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:15:06.899857440Z [err]      event = get_active_event()
2026-01-06T15:15:06.899858404Z [err]      ...<3 lines>...
2026-01-06T15:15:06.899865565Z [err]      raise exc
2026-01-06T15:15:06.899872419Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:15:06.899876519Z [err]      )
2026-01-06T15:15:06.899878646Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:15:06.899883806Z [err]      cur.execute(
2026-01-06T15:15:06.899890517Z [err]      await app(scope, receive, sender)
2026-01-06T15:15:06.899893072Z [err]      ^
2026-01-06T15:15:06.899896461Z [err]      ~~~~~~~~~~~^
2026-01-06T15:15:06.899903058Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:15:06.899906113Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:15:06.899909770Z [err]          """
2026-01-06T15:15:06.899914563Z [err]      response = await f(request)
2026-01-06T15:15:06.899918352Z [err]      return await dependant.call(**values)
2026-01-06T15:15:06.899922979Z [err]          ^^^
2026-01-06T15:15:06.899926523Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:15:06.899929213Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:15:06.899938810Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:15:06.899938979Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:15:06.899948054Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:15:06.901325487Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:15:06.901332814Z [err]      )
2026-01-06T15:15:06.901337997Z [err]      )
2026-01-06T15:15:06.901341693Z [err]      ^
2026-01-06T15:15:06.901345512Z [err]      ^
2026-01-06T15:15:06.901348264Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:15:06.901353184Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:15:06.901354866Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:15:06.901360424Z [err]      return super().execute(query, vars)
2026-01-06T15:15:06.901366453Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:15:06.901372762Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:15:06.901380136Z [err]  LINE 5:           AND active = 1
2026-01-06T15:15:06.901386718Z [err]                               ^
2026-01-06T15:15:06.901393429Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:15:06.901400127Z [err]  
2026-01-06T15:15:06.901406859Z [inf]  ðŸ“¨ 27832637248: Hi
2026-01-06T15:15:06.901415077Z [inf]  INFO:     100.64.0.5:62366 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:15:06.901421857Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:15:06.901427967Z [err]  Traceback (most recent call last):
2026-01-06T15:15:06.901432258Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:15:06.901435983Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:15:06.901439677Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:15:06.901443699Z [err]          self.scope, self.receive, self.send
2026-01-06T15:15:06.902902348Z [err]      raise exc
2026-01-06T15:15:06.902903091Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:15:06.902914321Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:15:06.902918648Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:15:06.902923270Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:15:06.902932909Z [err]      await app(scope, receive, sender)
2026-01-06T15:15:06.902934034Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:15:06.902940061Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:15:06.902945975Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:15:06.902948570Z [err]      await self.app(scope, receive, send)
2026-01-06T15:15:06.902956855Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:15:06.902961649Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:15:06.902968120Z [err]      raise exc
2026-01-06T15:15:06.902975081Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:15:06.902982669Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:15:06.902989779Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:15:06.902997776Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:15:06.903004252Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:15:06.904601722Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:15:06.904611478Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:15:06.904621399Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:15:06.904630504Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:15:06.904640568Z [err]      await self.app(scope, receive, send)
2026-01-06T15:15:06.904649145Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:15:06.904657895Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:15:06.904666824Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:15:06.904675954Z [err]      raise exc
2026-01-06T15:15:06.904684361Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:15:06.904693179Z [err]      await app(scope, receive, sender)
2026-01-06T15:15:06.904700786Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:15:06.904707932Z [err]      response = await f(request)
2026-01-06T15:15:06.904714803Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:15:06.904722312Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:15:06.904729789Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:15:06.904736802Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:15:06.904743738Z [err]      ...<3 lines>...
2026-01-06T15:15:06.904750422Z [err]      )
2026-01-06T15:15:06.904756871Z [err]      ^
2026-01-06T15:15:06.904763164Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:15:06.906409011Z [err]      ^
2026-01-06T15:15:06.906412931Z [err]      return await dependant.call(**values)
2026-01-06T15:15:06.906423354Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:15:06.906424711Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:15:06.906433371Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:15:06.906437863Z [err]      return super().execute(query, vars)
2026-01-06T15:15:06.906443781Z [err]      event = get_active_event()
2026-01-06T15:15:06.906452117Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:15:06.906456544Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:15:06.906460184Z [err]      cur.execute(
2026-01-06T15:15:06.906467449Z [err]      ~~~~~~~~~~~^
2026-01-06T15:15:06.906474311Z [err]          """
2026-01-06T15:15:06.906475455Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:15:06.906482091Z [err]          ^^^
2026-01-06T15:15:06.906490423Z [err]      ...<7 lines>...
2026-01-06T15:15:06.906491452Z [err]  LINE 5:           AND active = 1
2026-01-06T15:15:06.906498751Z [err]          (day_of_week, current_time),
2026-01-06T15:15:06.906507675Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:15:06.906508837Z [err]                               ^
2026-01-06T15:15:06.906515024Z [err]      )
2026-01-06T15:15:06.906523639Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:15:06.906541455Z [err]  
2026-01-06T15:15:07.615975409Z [err]  2026-01-06 15:15:06.817 UTC [8273] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:15:07.615982588Z [err]  2026-01-06 15:15:06.817 UTC [8273] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:15:07.615989711Z [err]  2026-01-06 15:15:06.817 UTC [8273] STATEMENT:  
2026-01-06T15:15:07.615995702Z [err]  	        SELECT event
2026-01-06T15:15:07.616003038Z [err]  	        FROM event_config
2026-01-06T15:15:07.616011433Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:15:07.616018059Z [err]  	          AND active = 1
2026-01-06T15:15:07.616024329Z [err]  	          AND '15:15' BETWEEN open_time AND close_time
2026-01-06T15:15:07.616031187Z [err]  	        LIMIT 1;
2026-01-06T15:15:07.616037805Z [err]  	        
2026-01-06T15:15:07.626740731Z [inf]  ðŸ“¨ 27832637248: Hi
2026-01-06T15:15:07.789878825Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:15:07.789890837Z [err]      )
2026-01-06T15:15:07.789897054Z [err]      ^
2026-01-06T15:15:07.789903102Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:15:07.789908745Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:15:07.789915459Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:15:07.789921421Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:15:07.789939400Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:15:07.789945013Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:15:07.789951099Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:15:07.789957338Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:15:07.789963520Z [err]      raise exc
2026-01-06T15:15:07.789969361Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:15:07.789995769Z [inf]  INFO:     100.64.0.4:11436 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:15:07.790003257Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:15:07.790009318Z [err]  Traceback (most recent call last):
2026-01-06T15:15:07.790014794Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:15:07.790020098Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:15:07.790025272Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:15:07.790029384Z [err]          self.scope, self.receive, self.send
2026-01-06T15:15:07.790798279Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:15:07.790805907Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:15:07.790812217Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:15:07.790816597Z [err]      raise exc
2026-01-06T15:15:07.790821135Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:15:07.790834053Z [err]      await app(scope, receive, sender)
2026-01-06T15:15:07.790839675Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:15:07.790844265Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:15:07.790845397Z [err]      await self.app(scope, receive, send)
2026-01-06T15:15:07.790888062Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:15:07.790903872Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:15:07.790922569Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:15:07.791282985Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:15:07.791295017Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:15:07.791303030Z [err]      await self.app(scope, receive, send)
2026-01-06T15:15:07.791310647Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:15:07.791317375Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:15:07.791323962Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:15:07.792890898Z [err]      event = get_active_event()
2026-01-06T15:15:07.792894886Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:15:07.792905912Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:15:07.792908879Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:15:07.792915823Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:15:07.792925270Z [err]      cur.execute(
2026-01-06T15:15:07.792926692Z [err]      ...<3 lines>...
2026-01-06T15:15:07.792938302Z [err]      )
2026-01-06T15:15:07.792941629Z [err]      ~~~~~~~~~~~^
2026-01-06T15:15:07.792949127Z [err]      ^
2026-01-06T15:15:07.792957524Z [err]          """
2026-01-06T15:15:07.792959454Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:15:07.792969092Z [err]      return await dependant.call(**values)
2026-01-06T15:15:07.792973102Z [err]          ^^^
2026-01-06T15:15:07.792980416Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:15:07.792982781Z [err]      raise exc
2026-01-06T15:15:07.792989868Z [err]      ...<7 lines>...
2026-01-06T15:15:07.792993519Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:15:07.792994408Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:15:07.793001780Z [err]      await app(scope, receive, sender)
2026-01-06T15:15:07.793005035Z [err]          (day_of_week, current_time),
2026-01-06T15:15:07.793010143Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:15:07.793018972Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:15:07.793019304Z [err]      response = await f(request)
2026-01-06T15:15:07.793026199Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:15:07.794294070Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:15:07.794305640Z [err]      return super().execute(query, vars)
2026-01-06T15:15:07.794316342Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:15:07.794325191Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:15:07.794334952Z [err]  LINE 5:           AND active = 1
2026-01-06T15:15:07.794343236Z [err]                               ^
2026-01-06T15:15:07.794351257Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:15:07.794361705Z [err]  
2026-01-06T15:15:07.794403121Z [err]      )
2026-01-06T15:15:07.794410988Z [err]      ^
2026-01-06T15:15:08.311541146Z [inf]  ðŸ“¨ 27832637248: Hi
2026-01-06T15:15:08.447224011Z [inf]  INFO:     100.64.0.8:49196 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:15:08.447234904Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:15:08.447243995Z [err]  Traceback (most recent call last):
2026-01-06T15:15:08.447252435Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:15:08.447259953Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:15:08.447268266Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:15:08.447276375Z [err]          self.scope, self.receive, self.send
2026-01-06T15:15:08.447282745Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:15:08.447289887Z [err]      )
2026-01-06T15:15:08.447297042Z [err]      ^
2026-01-06T15:15:08.447303334Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:15:08.447309527Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:15:08.447320401Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:15:08.447327479Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:15:08.447327940Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:15:08.447334527Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:15:08.447340475Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:15:08.447347349Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:15:08.447353525Z [err]      raise exc
2026-01-06T15:15:08.447359985Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:15:08.448319752Z [err]      await app(scope, receive, sender)
2026-01-06T15:15:08.448325420Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:15:08.448328154Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:15:08.448330352Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:15:08.448333915Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:15:08.448339740Z [err]      await self.app(scope, receive, send)
2026-01-06T15:15:08.448339773Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:15:08.448341654Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:15:08.448346455Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:15:08.448349672Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:15:08.448351409Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:15:08.448352858Z [err]      raise exc
2026-01-06T15:15:08.448359459Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:15:08.448359769Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:15:08.448360400Z [err]      await self.app(scope, receive, send)
2026-01-06T15:15:08.448367813Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:15:08.448368931Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:15:08.448375041Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:15:08.449970410Z [err]      raise exc
2026-01-06T15:15:08.449973970Z [err]          (day_of_week, current_time),
2026-01-06T15:15:08.449980359Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:15:08.449980569Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:15:08.449982382Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:15:08.449988254Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:15:08.449990032Z [err]      await app(scope, receive, sender)
2026-01-06T15:15:08.449990036Z [err]      ...<3 lines>...
2026-01-06T15:15:08.449997438Z [err]      ~~~~~~~~~~~^
2026-01-06T15:15:08.449998874Z [err]      )
2026-01-06T15:15:08.449999227Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:15:08.450002081Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:15:08.450007659Z [err]      ^
2026-01-06T15:15:08.450008115Z [err]      response = await f(request)
2026-01-06T15:15:08.450008156Z [err]          """
2026-01-06T15:15:08.450012323Z [err]      event = get_active_event()
2026-01-06T15:15:08.450016503Z [err]          ^^^
2026-01-06T15:15:08.450016902Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:15:08.450016905Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:15:08.450024490Z [err]      ...<7 lines>...
2026-01-06T15:15:08.450025810Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:15:08.450025912Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:15:08.450026435Z [err]      return await dependant.call(**values)
2026-01-06T15:15:08.450035590Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:15:08.450035965Z [err]      cur.execute(
2026-01-06T15:15:08.451336213Z [err]      )
2026-01-06T15:15:08.451343173Z [err]      ^
2026-01-06T15:15:08.451348181Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:15:08.451352049Z [err]      return super().execute(query, vars)
2026-01-06T15:15:08.451356781Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:15:08.451360732Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:15:08.451364546Z [err]  LINE 5:           AND active = 1
2026-01-06T15:15:08.451368453Z [err]                               ^
2026-01-06T15:15:08.451372479Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:15:08.451377090Z [err]  
2026-01-06T15:15:08.732325909Z [err]  2026-01-06 15:15:07.726 UTC [8275] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:15:08.732337284Z [err]  2026-01-06 15:15:07.726 UTC [8275] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:15:08.732343978Z [err]  2026-01-06 15:15:07.726 UTC [8275] STATEMENT:  
2026-01-06T15:15:08.732354941Z [err]  	        SELECT event
2026-01-06T15:15:08.732360129Z [err]  	        FROM event_config
2026-01-06T15:15:08.732364941Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:15:08.732370399Z [err]  	          AND active = 1
2026-01-06T15:15:08.732376502Z [err]  	          AND '15:15' BETWEEN open_time AND close_time
2026-01-06T15:15:08.732381812Z [err]  	        LIMIT 1;
2026-01-06T15:15:08.732386477Z [err]  	        
2026-01-06T15:15:08.732391891Z [err]  2026-01-06 15:15:08.420 UTC [8277] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:15:08.732396699Z [err]  2026-01-06 15:15:08.420 UTC [8277] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:15:08.732401381Z [err]  2026-01-06 15:15:08.420 UTC [8277] STATEMENT:  
2026-01-06T15:15:08.732406467Z [err]  	        SELECT event
2026-01-06T15:15:08.732411274Z [err]  	        FROM event_config
2026-01-06T15:15:08.740057861Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:15:08.740071593Z [err]  	          AND active = 1
2026-01-06T15:15:08.740081329Z [err]  	          AND '15:15' BETWEEN open_time AND close_time
2026-01-06T15:15:08.740088338Z [err]  	        LIMIT 1;
2026-01-06T15:15:08.740095007Z [err]  	        
2026-01-06T15:15:09.194603596Z [inf]  ðŸ“¨ 27832637248: Hi
2026-01-06T15:15:09.504843025Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:15:09.504850430Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:15:09.504855122Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:15:09.504859431Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:15:09.504870174Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:15:09.504881628Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:15:09.504888395Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:15:09.504902929Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:15:09.504903767Z [err]      raise exc
2026-01-06T15:15:09.504913472Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:15:09.504924609Z [inf]  INFO:     100.64.0.4:21748 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:15:09.504929680Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:15:09.504933764Z [err]  Traceback (most recent call last):
2026-01-06T15:15:09.504938248Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:15:09.504942110Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:15:09.504946573Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:15:09.504950751Z [err]          self.scope, self.receive, self.send
2026-01-06T15:15:09.504954675Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:15:09.504959678Z [err]      )
2026-01-06T15:15:09.504964300Z [err]      ^
2026-01-06T15:15:09.505675695Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:15:09.505683180Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:15:09.505694440Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:15:09.505701711Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:15:09.505709208Z [err]      raise exc
2026-01-06T15:15:09.505716548Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:15:09.505724717Z [err]      await app(scope, receive, sender)
2026-01-06T15:15:09.505732021Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:15:09.505739688Z [err]      await self.app(scope, receive, send)
2026-01-06T15:15:09.505746971Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:15:09.505753590Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:15:09.505761246Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:15:09.505768753Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:15:09.505775685Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:15:09.505783030Z [err]      await self.app(scope, receive, send)
2026-01-06T15:15:09.505791160Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:15:09.505797250Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:15:09.505803784Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:15:09.507048937Z [err]      raise exc
2026-01-06T15:15:09.507057942Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:15:09.507065785Z [err]      await app(scope, receive, sender)
2026-01-06T15:15:09.507069758Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:15:09.507084160Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:15:09.507093558Z [err]      cur.execute(
2026-01-06T15:15:09.507093938Z [err]      response = await f(request)
2026-01-06T15:15:09.507106447Z [err]      ~~~~~~~~~~~^
2026-01-06T15:15:09.507106567Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:15:09.507116257Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:15:09.507119786Z [err]          """
2026-01-06T15:15:09.507126212Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:15:09.507133564Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:15:09.507140754Z [err]          ^^^
2026-01-06T15:15:09.507143063Z [err]      ...<3 lines>...
2026-01-06T15:15:09.507149843Z [err]      )
2026-01-06T15:15:09.507159108Z [err]      ...<7 lines>...
2026-01-06T15:15:09.507159180Z [err]      ^
2026-01-06T15:15:09.507166918Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:15:09.507175372Z [err]          (day_of_week, current_time),
2026-01-06T15:15:09.507175719Z [err]      return await dependant.call(**values)
2026-01-06T15:15:09.507184133Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:15:09.507191319Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:15:09.507193628Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:15:09.507199383Z [err]      event = get_active_event()
2026-01-06T15:15:09.508472591Z [err]      )
2026-01-06T15:15:09.508480311Z [err]      ^
2026-01-06T15:15:09.508486261Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:15:09.508492006Z [err]      return super().execute(query, vars)
2026-01-06T15:15:09.508497748Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:15:09.508503210Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:15:09.508508932Z [err]  LINE 5:           AND active = 1
2026-01-06T15:15:09.508514530Z [err]                               ^
2026-01-06T15:15:09.508520514Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:15:09.508526180Z [err]  
2026-01-06T15:15:09.609868623Z [err]  	          AND active = 1
2026-01-06T15:15:09.609883761Z [err]  	          AND '15:15' BETWEEN open_time AND close_time
2026-01-06T15:15:09.609897940Z [err]  	        LIMIT 1;
2026-01-06T15:15:09.609905352Z [err]  	        
2026-01-06T15:15:09.610026578Z [err]  2026-01-06 15:15:09.449 UTC [8279] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:15:09.610032667Z [err]  2026-01-06 15:15:09.449 UTC [8279] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:15:09.610039047Z [err]  2026-01-06 15:15:09.449 UTC [8279] STATEMENT:  
2026-01-06T15:15:09.610047895Z [err]  	        SELECT event
2026-01-06T15:15:09.610053814Z [err]  	        FROM event_config
2026-01-06T15:15:09.610060497Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:15:29.462551163Z [inf]  ðŸ“¨ 27832637248: Hi
2026-01-06T15:15:29.628932086Z [err]  2026-01-06 15:15:29.551 UTC [8282] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:15:29.628936954Z [err]  2026-01-06 15:15:29.551 UTC [8282] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:15:29.628945960Z [err]  2026-01-06 15:15:29.551 UTC [8282] STATEMENT:  
2026-01-06T15:15:29.628951184Z [err]  	        SELECT event
2026-01-06T15:15:29.628956862Z [err]  	        FROM event_config
2026-01-06T15:15:29.628966449Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:15:29.628970939Z [err]  	          AND active = 1
2026-01-06T15:15:29.628975201Z [err]  	          AND '15:15' BETWEEN open_time AND close_time
2026-01-06T15:15:29.628979997Z [err]  	        LIMIT 1;
2026-01-06T15:15:29.628986080Z [err]  	        
2026-01-06T15:15:29.653509681Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:15:29.653517631Z [err]      raise exc
2026-01-06T15:15:29.653522520Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:15:29.653539604Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:15:29.653548936Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:15:29.653556255Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:15:29.653557979Z [inf]  INFO:     100.64.0.4:40518 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:15:29.653565244Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:15:29.653565298Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:15:29.653571345Z [err]  Traceback (most recent call last):
2026-01-06T15:15:29.653572731Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:15:29.653576535Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:15:29.653581701Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:15:29.653582167Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:15:29.653587347Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:15:29.653592638Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:15:29.653593026Z [err]          self.scope, self.receive, self.send
2026-01-06T15:15:29.653600120Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:15:29.653608271Z [err]      )
2026-01-06T15:15:29.653616325Z [err]      ^
2026-01-06T15:15:29.658651323Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:15:29.658658169Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:15:29.658664770Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:15:29.658671960Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:15:29.658678468Z [err]      raise exc
2026-01-06T15:15:29.658683270Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:15:29.658687298Z [err]      await app(scope, receive, sender)
2026-01-06T15:15:29.658692899Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:15:29.658697191Z [err]      await self.app(scope, receive, send)
2026-01-06T15:15:29.658703215Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:15:29.658706770Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:15:29.658710291Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:15:29.658714253Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:15:29.658717768Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:15:29.658721184Z [err]      await self.app(scope, receive, send)
2026-01-06T15:15:29.658725530Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:15:29.658729117Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:15:29.658733022Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:15:29.658741072Z [err]      raise exc
2026-01-06T15:15:29.658745946Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:15:29.658749527Z [err]      await app(scope, receive, sender)
2026-01-06T15:15:29.658756784Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:15:29.658760843Z [err]      response = await f(request)
2026-01-06T15:15:29.658764439Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:15:29.658767932Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:15:29.658771510Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:15:29.658775440Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:15:29.658779678Z [err]      ...<3 lines>...
2026-01-06T15:15:29.658783729Z [err]      )
2026-01-06T15:15:29.658787530Z [err]      ^
2026-01-06T15:15:29.658791126Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:15:29.658795008Z [err]      return await dependant.call(**values)
2026-01-06T15:15:29.658799158Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:15:29.658802674Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:15:29.658806128Z [err]      event = get_active_event()
2026-01-06T15:15:29.658811397Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:15:29.658815571Z [err]      cur.execute(
2026-01-06T15:15:29.658819315Z [err]      ~~~~~~~~~~~^
2026-01-06T15:15:29.658822914Z [err]          """
2026-01-06T15:15:29.658827314Z [err]          ^^^
2026-01-06T15:15:29.658831889Z [err]      ...<7 lines>...
2026-01-06T15:15:29.658835448Z [err]          (day_of_week, current_time),
2026-01-06T15:15:29.658840158Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:15:29.658843844Z [err]      )
2026-01-06T15:15:29.658867865Z [err]      ^
2026-01-06T15:15:29.658872036Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:15:29.658875889Z [err]      return super().execute(query, vars)
2026-01-06T15:15:29.658880091Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:15:29.658883710Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:15:29.658887700Z [err]  LINE 5:           AND active = 1
2026-01-06T15:15:29.658891835Z [err]                               ^
2026-01-06T15:15:29.658895598Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:15:29.658900179Z [err]  
2026-01-06T15:17:39.679856927Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:17:39.679859190Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:17:39.679870756Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:17:39.679878372Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:17:39.679878665Z [err]          self.scope, self.receive, self.send
2026-01-06T15:17:39.679885375Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:17:39.679894088Z [err]      raise exc
2026-01-06T15:17:39.679898798Z [inf]  ðŸ“¨ 27832637248: Hi
2026-01-06T15:17:39.679901426Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:17:39.679906890Z [inf]  INFO:     100.64.0.7:36882 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:17:39.679909565Z [err]      )
2026-01-06T15:17:39.679913930Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:17:39.679916492Z [err]      ^
2026-01-06T15:17:39.679920502Z [err]  Traceback (most recent call last):
2026-01-06T15:17:39.679922908Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:17:39.679926750Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:17:39.679930643Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:17:39.679933086Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:17:39.679936784Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:17:39.679939440Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:17:39.679942573Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:17:39.680746892Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:17:39.680748868Z [err]      await self.app(scope, receive, send)
2026-01-06T15:17:39.680749040Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:17:39.680757236Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:17:39.680757456Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:17:39.680761015Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:17:39.680765421Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:17:39.680766251Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:17:39.680769685Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:17:39.680772805Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:17:39.680776158Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:17:39.680780069Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:17:39.680786324Z [err]      raise exc
2026-01-06T15:17:39.680786516Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:17:39.680792933Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:17:39.680793145Z [err]      await self.app(scope, receive, send)
2026-01-06T15:17:39.680799521Z [err]      await app(scope, receive, sender)
2026-01-06T15:17:39.680804947Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:17:39.681802936Z [err]      raise exc
2026-01-06T15:17:39.681809938Z [err]      ...<7 lines>...
2026-01-06T15:17:39.681812198Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:17:39.681819274Z [err]          (day_of_week, current_time),
2026-01-06T15:17:39.681819413Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:17:39.681820505Z [err]      await app(scope, receive, sender)
2026-01-06T15:17:39.681827026Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:17:39.681829112Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:17:39.681829248Z [err]      event = get_active_event()
2026-01-06T15:17:39.681863341Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:17:39.681865206Z [err]      response = await f(request)
2026-01-06T15:17:39.681870890Z [err]      cur.execute(
2026-01-06T15:17:39.681872095Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:17:39.681878117Z [err]      ~~~~~~~~~~~^
2026-01-06T15:17:39.681878579Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:17:39.681884831Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:17:39.681886925Z [err]          """
2026-01-06T15:17:39.681891440Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:17:39.681893880Z [err]          ^^^
2026-01-06T15:17:39.681897815Z [err]      ...<3 lines>...
2026-01-06T15:17:39.681903694Z [err]      )
2026-01-06T15:17:39.681909434Z [err]      ^
2026-01-06T15:17:39.681915788Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:17:39.681921825Z [err]      return await dependant.call(**values)
2026-01-06T15:17:39.681928212Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:17:39.682746964Z [err]      )
2026-01-06T15:17:39.682755390Z [err]      ^
2026-01-06T15:17:39.682762351Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:17:39.682768817Z [err]      return super().execute(query, vars)
2026-01-06T15:17:39.682776657Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:17:39.682783483Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:17:39.682789810Z [err]  LINE 5:           AND active = 1
2026-01-06T15:17:39.682796022Z [err]                               ^
2026-01-06T15:17:39.682803267Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:17:39.682809753Z [err]  
2026-01-06T15:17:40.065302660Z [inf]  ðŸ“¨ 27832637248: Hi
2026-01-06T15:17:40.218910573Z [err]      )
2026-01-06T15:17:40.218922491Z [err]      ^
2026-01-06T15:17:40.218924624Z [inf]  INFO:     100.64.0.7:36890 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:17:40.218931100Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:17:40.218937493Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:17:40.218940723Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:17:40.218945339Z [err]  Traceback (most recent call last):
2026-01-06T15:17:40.218946807Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:17:40.218953209Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:17:40.218953559Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:17:40.218959166Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:17:40.218962475Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:17:40.218964993Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:17:40.218969739Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:17:40.218970769Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:17:40.218976596Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:17:40.218977247Z [err]          self.scope, self.receive, self.send
2026-01-06T15:17:40.218981652Z [err]      raise exc
2026-01-06T15:17:40.218984370Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:17:40.218986782Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:17:40.219932370Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:17:40.219932375Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:17:40.219941822Z [err]      await self.app(scope, receive, send)
2026-01-06T15:17:40.219942774Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:17:40.219946666Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:17:40.219950195Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:17:40.219951249Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:17:40.219958036Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:17:40.219959219Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:17:40.219959890Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:17:40.219966109Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:17:40.219967296Z [err]      raise exc
2026-01-06T15:17:40.219971846Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:17:40.219974176Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:17:40.219976651Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:17:40.219981180Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:17:40.219983689Z [err]      await app(scope, receive, sender)
2026-01-06T15:17:40.219987722Z [err]      await self.app(scope, receive, send)
2026-01-06T15:17:40.220931774Z [err]      cur.execute(
2026-01-06T15:17:40.220931928Z [err]      raise exc
2026-01-06T15:17:40.220940005Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:17:40.220940543Z [err]      ~~~~~~~~~~~^
2026-01-06T15:17:40.220947006Z [err]      await app(scope, receive, sender)
2026-01-06T15:17:40.220947954Z [err]          """
2026-01-06T15:17:40.220953589Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:17:40.220954809Z [err]          ^^^
2026-01-06T15:17:40.220960885Z [err]      response = await f(request)
2026-01-06T15:17:40.220963214Z [err]      ...<7 lines>...
2026-01-06T15:17:40.220967832Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:17:40.220970048Z [err]          (day_of_week, current_time),
2026-01-06T15:17:40.220974408Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:17:40.220976516Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:17:40.220980792Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:17:40.220986586Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:17:40.220992873Z [err]      ...<3 lines>...
2026-01-06T15:17:40.220999802Z [err]      )
2026-01-06T15:17:40.221006617Z [err]      ^
2026-01-06T15:17:40.221023942Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:17:40.221030782Z [err]      return await dependant.call(**values)
2026-01-06T15:17:40.221038432Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:17:40.221045010Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:17:40.221051660Z [err]      event = get_active_event()
2026-01-06T15:17:40.221058646Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:17:40.221758608Z [err]      )
2026-01-06T15:17:40.221767762Z [err]      ^
2026-01-06T15:17:40.221775137Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:17:40.221781669Z [err]      return super().execute(query, vars)
2026-01-06T15:17:40.221787895Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:17:40.221794245Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:17:40.221799806Z [err]  LINE 5:           AND active = 1
2026-01-06T15:17:40.221803538Z [err]                               ^
2026-01-06T15:17:40.221807502Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:17:40.221811519Z [err]  
2026-01-06T15:17:40.694090362Z [inf]  ðŸ“¨ 27832637248: Hi
2026-01-06T15:17:40.842946097Z [inf]  INFO:     100.64.0.7:36898 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:17:40.842953360Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:17:40.842961868Z [err]  Traceback (most recent call last):
2026-01-06T15:17:40.842973239Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:17:40.842981835Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:17:40.842991304Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:17:40.842999688Z [err]          self.scope, self.receive, self.send
2026-01-06T15:17:40.843008146Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:17:40.843015752Z [err]      )
2026-01-06T15:17:40.843023263Z [err]      ^
2026-01-06T15:17:40.843029991Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:17:40.843039208Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:17:40.843046866Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:17:40.843055388Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:17:40.843064272Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:17:40.843073648Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:17:40.843082220Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:17:40.843089480Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:17:40.843096238Z [err]      raise exc
2026-01-06T15:17:40.843104818Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:17:40.843762358Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:17:40.843767066Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:17:40.843775990Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:17:40.843782978Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:17:40.843790113Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:17:40.843797141Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:17:40.843806228Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:17:40.843815193Z [err]      raise exc
2026-01-06T15:17:40.843823770Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:17:40.843832810Z [err]      await app(scope, receive, sender)
2026-01-06T15:17:40.843845823Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:17:40.843858221Z [err]      await self.app(scope, receive, send)
2026-01-06T15:17:40.843867152Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:17:40.843875389Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:17:40.843885457Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:17:40.843894702Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:17:40.843903903Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:17:40.843913823Z [err]      await self.app(scope, receive, send)
2026-01-06T15:17:40.844883842Z [err]      raise exc
2026-01-06T15:17:40.844884470Z [err]          ^^^
2026-01-06T15:17:40.844894252Z [err]      ...<7 lines>...
2026-01-06T15:17:40.844894935Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:17:40.844900299Z [err]          (day_of_week, current_time),
2026-01-06T15:17:40.844903289Z [err]      await app(scope, receive, sender)
2026-01-06T15:17:40.844906002Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:17:40.844911149Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:17:40.844916174Z [err]      response = await f(request)
2026-01-06T15:17:40.844920144Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:17:40.844924429Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:17:40.844928187Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:17:40.844931842Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:17:40.844936805Z [err]      ...<3 lines>...
2026-01-06T15:17:40.844940846Z [err]      )
2026-01-06T15:17:40.844944870Z [err]      ^
2026-01-06T15:17:40.844949310Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:17:40.844952830Z [err]      return await dependant.call(**values)
2026-01-06T15:17:40.844956476Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:17:40.844960279Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:17:40.844964430Z [err]      event = get_active_event()
2026-01-06T15:17:40.844968867Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:17:40.844972670Z [err]      cur.execute(
2026-01-06T15:17:40.844976267Z [err]      ~~~~~~~~~~~^
2026-01-06T15:17:40.844979933Z [err]          """
2026-01-06T15:17:40.845760044Z [err]      )
2026-01-06T15:17:40.845768143Z [err]      ^
2026-01-06T15:17:40.845774630Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:17:40.845780786Z [err]      return super().execute(query, vars)
2026-01-06T15:17:40.845787061Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:17:40.845793313Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:17:40.845800847Z [err]  LINE 5:           AND active = 1
2026-01-06T15:17:40.845807458Z [err]                               ^
2026-01-06T15:17:40.845813936Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:17:40.845820184Z [err]  
2026-01-06T15:17:41.922151027Z [inf]  ðŸ“¨ 27832637248: Hi
2026-01-06T15:17:42.051607700Z [inf]  INFO:     100.64.0.2:10160 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:17:42.051617292Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:17:42.051624421Z [err]  Traceback (most recent call last):
2026-01-06T15:17:42.051627220Z [err]          self.scope, self.receive, self.send
2026-01-06T15:17:42.051627223Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:17:42.051630528Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:17:42.051631065Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:17:42.051637370Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:17:42.051639192Z [err]      raise exc
2026-01-06T15:17:42.051640464Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:17:42.051641170Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:17:42.051647155Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:17:42.051647672Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:17:42.051651835Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:17:42.051652268Z [err]      )
2026-01-06T15:17:42.051660872Z [err]      ^
2026-01-06T15:17:42.051663235Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:17:42.051668868Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:17:42.051678377Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:17:42.051689287Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:17:42.052808415Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:17:42.052808462Z [err]      await self.app(scope, receive, send)
2026-01-06T15:17:42.052819360Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:17:42.052819619Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:17:42.052828780Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:17:42.052828965Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:17:42.052837726Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:17:42.052838088Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:17:42.052846176Z [err]      raise exc
2026-01-06T15:17:42.052854277Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:17:42.052861084Z [err]      await app(scope, receive, sender)
2026-01-06T15:17:42.052868615Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:17:42.052875722Z [err]      await self.app(scope, receive, send)
2026-01-06T15:17:42.052883950Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:17:42.052891178Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:17:42.052898073Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:17:42.052904407Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:17:42.052910834Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:17:42.054069879Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:17:42.054075275Z [err]      raise exc
2026-01-06T15:17:42.054083916Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:17:42.054090484Z [err]      await app(scope, receive, sender)
2026-01-06T15:17:42.054096866Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:17:42.054104355Z [err]      response = await f(request)
2026-01-06T15:17:42.054112231Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:17:42.054119458Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:17:42.054130347Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:17:42.054136985Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:17:42.054142125Z [err]      ...<3 lines>...
2026-01-06T15:17:42.054146354Z [err]      )
2026-01-06T15:17:42.054151176Z [err]      ^
2026-01-06T15:17:42.054157273Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:17:42.054160944Z [err]      return await dependant.call(**values)
2026-01-06T15:17:42.054164598Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:17:42.054168117Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:17:42.054172827Z [err]      event = get_active_event()
2026-01-06T15:17:42.054176592Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:17:42.054180173Z [err]      cur.execute(
2026-01-06T15:17:42.054184472Z [err]      ~~~~~~~~~~~^
2026-01-06T15:17:42.054188043Z [err]          """
2026-01-06T15:17:42.054192086Z [err]          ^^^
2026-01-06T15:17:42.054196279Z [err]      ...<7 lines>...
2026-01-06T15:17:42.054201489Z [err]          (day_of_week, current_time),
2026-01-06T15:17:42.055103507Z [err]      )
2026-01-06T15:17:42.055115082Z [err]      ^
2026-01-06T15:17:42.055123226Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:17:42.055130389Z [err]      return super().execute(query, vars)
2026-01-06T15:17:42.055135386Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:17:42.055139716Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:17:42.055143756Z [err]  LINE 5:           AND active = 1
2026-01-06T15:17:42.055149784Z [err]                               ^
2026-01-06T15:17:42.055156656Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:17:42.055163200Z [err]  
2026-01-06T15:17:46.709403168Z [err]  2026-01-06 15:17:39.539 UTC [8290] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:17:46.709410255Z [err]  2026-01-06 15:17:39.539 UTC [8290] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:17:46.709417039Z [err]  2026-01-06 15:17:39.539 UTC [8290] STATEMENT:  
2026-01-06T15:17:46.709424536Z [err]  	        SELECT event
2026-01-06T15:17:46.709431908Z [err]  	        FROM event_config
2026-01-06T15:17:46.709438566Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:17:46.709445316Z [err]  	          AND active = 1
2026-01-06T15:17:46.709452948Z [err]  	          AND '15:17' BETWEEN open_time AND close_time
2026-01-06T15:17:46.709461980Z [err]  	        LIMIT 1;
2026-01-06T15:17:46.709469501Z [err]  	        
2026-01-06T15:17:46.709479043Z [err]  2026-01-06 15:17:40.202 UTC [8292] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:17:46.709487716Z [err]  2026-01-06 15:17:40.202 UTC [8292] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:17:46.709495712Z [err]  2026-01-06 15:17:40.202 UTC [8292] STATEMENT:  
2026-01-06T15:17:46.709509286Z [err]  	        SELECT event
2026-01-06T15:17:46.709522282Z [err]  	        FROM event_config
2026-01-06T15:17:46.709530072Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:17:46.709536458Z [err]  	          AND active = 1
2026-01-06T15:17:46.709543749Z [err]  	          AND '15:17' BETWEEN open_time AND close_time
2026-01-06T15:17:46.709550775Z [err]  	        LIMIT 1;
2026-01-06T15:17:46.709557460Z [err]  	        
2026-01-06T15:17:46.709564490Z [err]  2026-01-06 15:17:40.825 UTC [8294] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:17:46.709572027Z [err]  2026-01-06 15:17:40.825 UTC [8294] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:17:47.768247964Z [err]  2026-01-06 15:17:40.825 UTC [8294] STATEMENT:  
2026-01-06T15:17:47.768255373Z [err]  	        SELECT event
2026-01-06T15:17:47.768262550Z [err]  	        FROM event_config
2026-01-06T15:17:47.768268937Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:17:47.768275170Z [err]  	          AND active = 1
2026-01-06T15:17:47.768281504Z [err]  	          AND '15:17' BETWEEN open_time AND close_time
2026-01-06T15:17:47.768288415Z [err]  	        LIMIT 1;
2026-01-06T15:17:47.768294826Z [err]  	        
2026-01-06T15:17:47.768299269Z [err]  2026-01-06 15:17:42.044 UTC [8296] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:17:47.768303591Z [err]  2026-01-06 15:17:42.044 UTC [8296] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:17:47.768308115Z [err]  2026-01-06 15:17:42.044 UTC [8296] STATEMENT:  
2026-01-06T15:17:47.768313199Z [err]  	        SELECT event
2026-01-06T15:17:47.768319640Z [err]  	        FROM event_config
2026-01-06T15:17:47.768324683Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:17:47.768329507Z [err]  	          AND active = 1
2026-01-06T15:17:47.768334086Z [err]  	          AND '15:17' BETWEEN open_time AND close_time
2026-01-06T15:17:47.768341049Z [err]  	        LIMIT 1;
2026-01-06T15:17:47.770759123Z [err]  	        
2026-01-06T15:17:47.770771534Z [err]  2026-01-06 15:17:46.227 UTC [76] LOG:  checkpoint starting: time
2026-01-06T15:17:47.770778101Z [err]  2026-01-06 15:17:46.708 UTC [76] LOG:  checkpoint complete: wrote 5 buffers (0.0%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.418 s, sync=0.021 s, total=0.482 s; sync files=5, longest=0.011 s, average=0.005 s; distance=7 kB, estimate=48 kB; lsn=0/19FFC70, redo lsn=0/19FFC18
2026-01-06T15:17:50.042089025Z [inf]  ðŸ“¨ 27832637248: Hi
2026-01-06T15:17:50.287801460Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:17:50.287810988Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:17:50.287818415Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:17:50.287822947Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:17:50.287827481Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:17:50.287832263Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:17:50.287841095Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:17:50.287843002Z [inf]  INFO:     100.64.0.6:12908 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:17:50.287848715Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:17:50.287851621Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:17:50.287857152Z [err]      raise exc
2026-01-06T15:17:50.287860504Z [err]  Traceback (most recent call last):
2026-01-06T15:17:50.287868332Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:17:50.287869158Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:17:50.287876544Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:17:50.287884466Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:17:50.287892968Z [err]          self.scope, self.receive, self.send
2026-01-06T15:17:50.287899303Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:17:50.287905695Z [err]      )
2026-01-06T15:17:50.287910253Z [err]      ^
2026-01-06T15:17:50.288695873Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:17:50.288704675Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:17:50.288711265Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:17:50.288717612Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:17:50.288724595Z [err]      raise exc
2026-01-06T15:17:50.288731232Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:17:50.288737837Z [err]      await app(scope, receive, sender)
2026-01-06T15:17:50.288744318Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:17:50.288749812Z [err]      await self.app(scope, receive, send)
2026-01-06T15:17:50.288757248Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:17:50.288763571Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:17:50.288770131Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:17:50.288776261Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:17:50.288788630Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:17:50.288795054Z [err]      await self.app(scope, receive, send)
2026-01-06T15:17:50.288801949Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:17:50.288808047Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:17:50.288813554Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:17:50.289506633Z [err]      raise exc
2026-01-06T15:17:50.289506690Z [err]      cur.execute(
2026-01-06T15:17:50.289514445Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:17:50.289514812Z [err]      ~~~~~~~~~~~^
2026-01-06T15:17:50.289521520Z [err]      await app(scope, receive, sender)
2026-01-06T15:17:50.289522066Z [err]          """
2026-01-06T15:17:50.289528478Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:17:50.289529384Z [err]          ^^^
2026-01-06T15:17:50.289535727Z [err]      response = await f(request)
2026-01-06T15:17:50.289535973Z [err]      ...<7 lines>...
2026-01-06T15:17:50.289541880Z [err]          (day_of_week, current_time),
2026-01-06T15:17:50.289547618Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:17:50.289596243Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:17:50.289602531Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:17:50.289609126Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:17:50.289616722Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:17:50.289621585Z [err]      ...<3 lines>...
2026-01-06T15:17:50.289625213Z [err]      )
2026-01-06T15:17:50.289628625Z [err]      ^
2026-01-06T15:17:50.289632582Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:17:50.289636802Z [err]      return await dependant.call(**values)
2026-01-06T15:17:50.289640246Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:17:50.289643626Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:17:50.289648212Z [err]      event = get_active_event()
2026-01-06T15:17:50.289652094Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:17:50.290230492Z [err]      )
2026-01-06T15:17:50.290239635Z [err]      ^
2026-01-06T15:17:50.290245550Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:17:50.290252665Z [err]      return super().execute(query, vars)
2026-01-06T15:17:50.290258786Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:17:50.290266178Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:17:50.290272963Z [err]  LINE 5:           AND active = 1
2026-01-06T15:17:50.290279538Z [err]                               ^
2026-01-06T15:17:50.290292316Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:17:50.290297212Z [err]  
2026-01-06T15:17:50.701663085Z [err]  2026-01-06 15:17:50.271 UTC [8299] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:17:50.701671251Z [err]  2026-01-06 15:17:50.271 UTC [8299] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:17:50.701678834Z [err]  2026-01-06 15:17:50.271 UTC [8299] STATEMENT:  
2026-01-06T15:17:50.701685841Z [err]  	        SELECT event
2026-01-06T15:17:50.701693743Z [err]  	        FROM event_config
2026-01-06T15:17:50.701702698Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:17:50.701710258Z [err]  	          AND active = 1
2026-01-06T15:17:50.701719416Z [err]  	          AND '15:17' BETWEEN open_time AND close_time
2026-01-06T15:17:50.701730079Z [err]  	        LIMIT 1;
2026-01-06T15:17:50.701736634Z [err]  	        
2026-01-06T15:18:10.227833028Z [err]  2026-01-06 15:18:04.068 UTC [8302] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:18:10.227840722Z [err]  2026-01-06 15:18:04.068 UTC [8302] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:18:10.227847834Z [err]  2026-01-06 15:18:04.068 UTC [8302] STATEMENT:  
2026-01-06T15:18:10.227855685Z [err]  	        SELECT event
2026-01-06T15:18:10.227865965Z [err]  	        FROM event_config
2026-01-06T15:18:10.227876540Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:18:10.227884090Z [err]  	          AND active = 1
2026-01-06T15:18:10.227890826Z [err]  	          AND '15:18' BETWEEN open_time AND close_time
2026-01-06T15:18:10.227896298Z [err]  	        LIMIT 1;
2026-01-06T15:18:10.227901925Z [err]  	        
2026-01-06T15:18:10.293027730Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:18:10.293031142Z [inf]  ðŸ“¨ 27832637248: Hi
2026-01-06T15:18:10.293038506Z [err]      raise exc
2026-01-06T15:18:10.293042073Z [inf]  INFO:     100.64.0.6:23364 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:18:10.293046643Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:18:10.293048829Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:18:10.293053629Z [err]  Traceback (most recent call last):
2026-01-06T15:18:10.293058283Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:18:10.293063048Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:18:10.293068022Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:18:10.293072554Z [err]          self.scope, self.receive, self.send
2026-01-06T15:18:10.293076897Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:18:10.293081469Z [err]      )
2026-01-06T15:18:10.293086348Z [err]      ^
2026-01-06T15:18:10.293090856Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:18:10.293095648Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:18:10.293100062Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:18:10.293104360Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:18:10.293109608Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:18:10.293117775Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:18:10.293122508Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:18:10.295014442Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:18:10.295023571Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:18:10.295028894Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:18:10.295034348Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:18:10.295039319Z [err]      raise exc
2026-01-06T15:18:10.295044122Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:18:10.295048351Z [err]      await app(scope, receive, sender)
2026-01-06T15:18:10.295052550Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:18:10.295057497Z [err]      await self.app(scope, receive, send)
2026-01-06T15:18:10.295062850Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:18:10.295067615Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:18:10.295071932Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:18:10.295076863Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:18:10.295136357Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:18:10.295141910Z [err]      await self.app(scope, receive, send)
2026-01-06T15:18:10.295146505Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:18:10.295150833Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:18:10.295155752Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:18:10.295795947Z [err]      raise exc
2026-01-06T15:18:10.295801548Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:18:10.295806322Z [err]      await app(scope, receive, sender)
2026-01-06T15:18:10.295807720Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:18:10.295811768Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:18:10.295817646Z [err]      response = await f(request)
2026-01-06T15:18:10.295819184Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:18:10.295822559Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:18:10.295827013Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:18:10.295830358Z [err]      event = get_active_event()
2026-01-06T15:18:10.295831844Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:18:10.295836624Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:18:10.295839448Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:18:10.295841421Z [err]      ...<3 lines>...
2026-01-06T15:18:10.295846704Z [err]      cur.execute(
2026-01-06T15:18:10.295847156Z [err]      )
2026-01-06T15:18:10.295852265Z [err]      ^
2026-01-06T15:18:10.295854727Z [err]      ~~~~~~~~~~~^
2026-01-06T15:18:10.295858542Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:18:10.295863710Z [err]      return await dependant.call(**values)
2026-01-06T15:18:10.295865315Z [err]          """
2026-01-06T15:18:10.295872940Z [err]          ^^^
2026-01-06T15:18:10.295880881Z [err]      ...<7 lines>...
2026-01-06T15:18:10.295888976Z [err]          (day_of_week, current_time),
2026-01-06T15:18:10.295898948Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:18:10.296814230Z [err]      )
2026-01-06T15:18:10.296822536Z [err]      ^
2026-01-06T15:18:10.296828754Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:18:10.296834388Z [err]      return super().execute(query, vars)
2026-01-06T15:18:10.296839875Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:18:10.296845760Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:18:10.296851260Z [err]  LINE 5:           AND active = 1
2026-01-06T15:18:10.296856800Z [err]                               ^
2026-01-06T15:18:10.296862501Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:18:10.296868392Z [err]  
2026-01-06T15:18:40.302612403Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:18:40.302613368Z [err]          self.scope, self.receive, self.send
2026-01-06T15:18:40.302623164Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:18:40.302625510Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:18:40.302628202Z [inf]  ðŸ“¨ 27832637248: Hallo I made a mistake should register as walker
2026-01-06T15:18:40.302630638Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:18:40.302636795Z [err]      )
2026-01-06T15:18:40.302637568Z [inf]  INFO:     100.64.0.4:34988 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:18:40.302637691Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:18:40.302645197Z [err]      raise exc
2026-01-06T15:18:40.302646645Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:18:40.302648097Z [err]      ^
2026-01-06T15:18:40.302654782Z [err]  Traceback (most recent call last):
2026-01-06T15:18:40.302657220Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:18:40.302663574Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:18:40.302666490Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:18:40.302670956Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:18:40.302675628Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:18:40.302678477Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:18:40.302684224Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:18:40.309134634Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:18:40.309145888Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:18:40.309154022Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:18:40.309161255Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:18:40.309168537Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:18:40.309175762Z [err]      raise exc
2026-01-06T15:18:40.309185048Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:18:40.309185287Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:18:40.309194501Z [err]      await app(scope, receive, sender)
2026-01-06T15:18:40.309201988Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:18:40.309210121Z [err]      await self.app(scope, receive, send)
2026-01-06T15:18:40.309217722Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:18:40.309224926Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:18:40.309231988Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:18:40.309238648Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:18:40.309252754Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:18:40.309260043Z [err]      await self.app(scope, receive, send)
2026-01-06T15:18:40.309267920Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:18:40.309275633Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:18:40.309282945Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:18:40.309290771Z [err]      raise exc
2026-01-06T15:18:40.309299587Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:18:40.309300714Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:18:40.309310417Z [err]      await app(scope, receive, sender)
2026-01-06T15:18:40.309312960Z [err]      ...<3 lines>...
2026-01-06T15:18:40.309319420Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:18:40.309323601Z [err]      )
2026-01-06T15:18:40.309325952Z [err]  LINE 5:           AND active = 1
2026-01-06T15:18:40.309328890Z [err]      response = await f(request)
2026-01-06T15:18:40.309333913Z [err]      ^
2026-01-06T15:18:40.309334563Z [err]                               ^
2026-01-06T15:18:40.309338118Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:18:40.309341920Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:18:40.309342390Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:18:40.309347444Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:18:40.309350988Z [err]  
2026-01-06T15:18:40.309353239Z [err]      return await dependant.call(**values)
2026-01-06T15:18:40.309356791Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:18:40.309359290Z [inf]  ðŸ“¨ 27832637248: Hallo I made a mistake should register as walker
2026-01-06T15:18:40.309364884Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:18:40.309371960Z [err]      ...<3 lines>...
2026-01-06T15:18:40.309379038Z [err]      )
2026-01-06T15:18:40.309379638Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:18:40.309388243Z [err]      ^
2026-01-06T15:18:40.309389370Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:18:40.309397464Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:18:40.309397973Z [err]      event = get_active_event()
2026-01-06T15:18:40.309406099Z [err]      return await dependant.call(**values)
2026-01-06T15:18:40.309408446Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:18:40.309415312Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:18:40.309416476Z [err]      cur.execute(
2026-01-06T15:18:40.309424186Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:18:40.309425353Z [err]      ~~~~~~~~~~~^
2026-01-06T15:18:40.309433289Z [err]          """
2026-01-06T15:18:40.309435905Z [err]      event = get_active_event()
2026-01-06T15:18:40.309441447Z [err]          ^^^
2026-01-06T15:18:40.309445082Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:18:40.309452650Z [err]      ...<7 lines>...
2026-01-06T15:18:40.309453668Z [err]      cur.execute(
2026-01-06T15:18:40.309461456Z [err]          (day_of_week, current_time),
2026-01-06T15:18:40.309462813Z [err]      ~~~~~~~~~~~^
2026-01-06T15:18:40.309469700Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:18:40.309471718Z [err]          """
2026-01-06T15:18:40.309479215Z [err]      )
2026-01-06T15:18:40.309481186Z [err]          ^^^
2026-01-06T15:18:40.309488094Z [err]      ^
2026-01-06T15:18:40.309490368Z [err]      ...<7 lines>...
2026-01-06T15:18:40.309498939Z [err]          (day_of_week, current_time),
2026-01-06T15:18:40.309502450Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:18:40.309507494Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:18:40.309515417Z [err]      return super().execute(query, vars)
2026-01-06T15:18:40.309515848Z [err]      )
2026-01-06T15:18:40.309523372Z [err]      ^
2026-01-06T15:18:40.309531644Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:18:40.309533104Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:18:40.309539248Z [err]      return super().execute(query, vars)
2026-01-06T15:18:40.309547100Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:18:40.309554543Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:18:40.309555430Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:18:40.309562707Z [err]  LINE 5:           AND active = 1
2026-01-06T15:18:40.309569600Z [err]                               ^
2026-01-06T15:18:40.309576536Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:18:40.309583536Z [err]  
2026-01-06T15:18:40.309590412Z [inf]  ðŸ“¨ 27832637248: Hallo I made a mistake should register as walker
2026-01-06T15:18:40.309597231Z [inf]  INFO:     100.64.0.5:47458 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:18:40.309604254Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:18:40.309612223Z [err]  Traceback (most recent call last):
2026-01-06T15:18:40.309618898Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:18:40.309625840Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:18:40.309633445Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:18:40.309640226Z [err]          self.scope, self.receive, self.send
2026-01-06T15:18:40.309646818Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:18:40.309657380Z [err]      )
2026-01-06T15:18:40.309664038Z [err]      ^
2026-01-06T15:18:40.309671157Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:18:40.309678561Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:18:40.309685184Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:18:40.309692015Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:18:40.309699316Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:18:40.309705998Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:18:40.309712673Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:18:40.309719840Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:18:40.309726474Z [err]      raise exc
2026-01-06T15:18:40.309733141Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:18:40.309739894Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:18:40.309746620Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:18:40.309753388Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:18:40.309760430Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:18:40.309767313Z [err]      raise exc
2026-01-06T15:18:40.309775036Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:18:40.309781668Z [err]      await app(scope, receive, sender)
2026-01-06T15:18:40.309788270Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:18:40.309795051Z [err]      await self.app(scope, receive, send)
2026-01-06T15:18:40.309801843Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:18:40.309808634Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:18:40.309815418Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:18:40.309822221Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:18:40.309829073Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:18:40.309863674Z [err]      await self.app(scope, receive, send)
2026-01-06T15:18:40.309871594Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:18:40.309879151Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:18:40.309886547Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:18:40.309893312Z [err]      raise exc
2026-01-06T15:18:40.309900604Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:18:40.309907762Z [err]      await app(scope, receive, sender)
2026-01-06T15:18:40.309914958Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:18:40.309921621Z [err]      response = await f(request)
2026-01-06T15:18:40.309928999Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:18:40.309937152Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:18:40.310998304Z [inf]  INFO:     100.64.0.4:55116 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:18:40.311007608Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:18:40.311014747Z [err]  Traceback (most recent call last):
2026-01-06T15:18:40.311021805Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:18:40.311028666Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:18:40.311035633Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:18:40.311043246Z [err]          self.scope, self.receive, self.send
2026-01-06T15:18:40.311050296Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:18:40.311057414Z [err]      )
2026-01-06T15:18:40.311064583Z [err]      ^
2026-01-06T15:18:40.311071493Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:18:40.311078266Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:18:40.311085286Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:18:40.311092100Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:18:40.311098901Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:18:40.311106036Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:18:40.311112750Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:18:40.311119596Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:18:40.311127533Z [err]      raise exc
2026-01-06T15:18:40.311134400Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:18:40.311643743Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:18:40.311654533Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:18:40.311661267Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:18:40.311667326Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:18:40.311674736Z [err]      raise exc
2026-01-06T15:18:40.311680619Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:18:40.311687153Z [err]      await app(scope, receive, sender)
2026-01-06T15:18:40.311693626Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:18:40.311699288Z [err]      await self.app(scope, receive, send)
2026-01-06T15:18:40.311705014Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:18:40.311711139Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:18:40.311718236Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:18:40.311724384Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:18:40.311731647Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:18:40.311738598Z [err]      await self.app(scope, receive, send)
2026-01-06T15:18:40.311744500Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:18:40.311751009Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:18:40.311757109Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:18:40.312850550Z [err]      raise exc
2026-01-06T15:18:40.312852618Z [err]          """
2026-01-06T15:18:40.312861689Z [err]          ^^^
2026-01-06T15:18:40.312865540Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:18:40.312871944Z [err]      ...<7 lines>...
2026-01-06T15:18:40.312875304Z [err]      await app(scope, receive, sender)
2026-01-06T15:18:40.312881672Z [err]          (day_of_week, current_time),
2026-01-06T15:18:40.312884436Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:18:40.312885840Z [err]      return await dependant.call(**values)
2026-01-06T15:18:40.312893213Z [err]      response = await f(request)
2026-01-06T15:18:40.312893707Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:18:40.312903243Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:18:40.312903710Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:18:40.312914363Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:18:40.312917922Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:18:40.312924186Z [err]      event = get_active_event()
2026-01-06T15:18:40.312928538Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:18:40.312934615Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:18:40.312938560Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:18:40.312944426Z [err]      cur.execute(
2026-01-06T15:18:40.312949218Z [err]      ...<3 lines>...
2026-01-06T15:18:40.312953322Z [err]      ~~~~~~~~~~~^
2026-01-06T15:18:40.312958783Z [err]      )
2026-01-06T15:18:40.312964300Z [err]      ^
2026-01-06T15:18:40.312969745Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:18:40.313696183Z [err]      )
2026-01-06T15:18:40.313706409Z [err]      ^
2026-01-06T15:18:40.313714776Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:18:40.313722416Z [err]      return super().execute(query, vars)
2026-01-06T15:18:40.313731841Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:18:40.313739168Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:18:40.313746910Z [err]  LINE 5:           AND active = 1
2026-01-06T15:18:40.313753477Z [err]                               ^
2026-01-06T15:18:40.313761099Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:18:40.313769807Z [err]  
2026-01-06T15:18:40.567903497Z [inf]  ðŸ“¨ 27832637248: Hallo I made a mistake should register as walker
2026-01-06T15:18:40.824287238Z [inf]  INFO:     100.64.0.7:48390 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:18:40.829185084Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:18:40.829192225Z [err]  Traceback (most recent call last):
2026-01-06T15:18:40.829196856Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:18:40.829200891Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:18:40.829204981Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:18:40.829209566Z [err]          self.scope, self.receive, self.send
2026-01-06T15:18:40.829213821Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:18:40.829219799Z [err]      )
2026-01-06T15:18:40.829223883Z [err]      ^
2026-01-06T15:18:40.829228691Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:18:40.829232594Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:18:40.829237188Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:18:40.829241871Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:18:40.829246881Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:18:40.829250709Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:18:40.829255002Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:18:40.829258650Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:18:40.829263382Z [err]      raise exc
2026-01-06T15:18:40.829267690Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:18:40.829271623Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:18:40.829275766Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:18:40.829279506Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:18:40.829289224Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:18:40.829293376Z [err]      raise exc
2026-01-06T15:18:40.829297207Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:18:40.829301168Z [err]      await app(scope, receive, sender)
2026-01-06T15:18:40.829305566Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:18:40.829309386Z [err]      await self.app(scope, receive, send)
2026-01-06T15:18:40.829313843Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:18:40.829319098Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:18:40.829325582Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:18:40.829332756Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:18:40.829338855Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:18:40.829345037Z [err]      await self.app(scope, receive, send)
2026-01-06T15:18:40.829351163Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:18:40.829357206Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:18:40.829363090Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:18:40.829367283Z [err]      raise exc
2026-01-06T15:18:40.829371146Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:18:40.829375059Z [err]      await app(scope, receive, sender)
2026-01-06T15:18:40.829378713Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:18:40.829383284Z [err]      response = await f(request)
2026-01-06T15:18:40.829387505Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:18:40.829392368Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:18:40.829396050Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:18:40.829400336Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:18:40.829404594Z [err]      ...<3 lines>...
2026-01-06T15:18:40.829408321Z [err]      )
2026-01-06T15:18:40.829411943Z [err]      ^
2026-01-06T15:18:40.829415623Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:18:40.829420704Z [err]      return await dependant.call(**values)
2026-01-06T15:18:40.829425202Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:18:40.829429083Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:18:40.829432719Z [err]      event = get_active_event()
2026-01-06T15:18:40.829436220Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:18:40.829440184Z [err]      cur.execute(
2026-01-06T15:18:40.829444309Z [err]      ~~~~~~~~~~~^
2026-01-06T15:18:40.829448746Z [err]          """
2026-01-06T15:18:40.829452341Z [err]          ^^^
2026-01-06T15:18:40.829455905Z [err]      ...<7 lines>...
2026-01-06T15:18:40.829459856Z [err]          (day_of_week, current_time),
2026-01-06T15:18:40.829464093Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:18:40.829468167Z [err]      )
2026-01-06T15:18:40.829472380Z [err]      ^
2026-01-06T15:18:40.829476513Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:18:40.829480613Z [err]      return super().execute(query, vars)
2026-01-06T15:18:40.829484830Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:18:40.829488665Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:18:40.829492658Z [err]  LINE 5:           AND active = 1
2026-01-06T15:18:40.829497059Z [err]                               ^
2026-01-06T15:18:40.829500831Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:18:40.829506426Z [err]  
2026-01-06T15:18:41.684839890Z [err]  2026-01-06 15:18:37.549 UTC [8305] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:18:41.684847490Z [err]  2026-01-06 15:18:37.549 UTC [8305] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:18:41.684860190Z [err]  2026-01-06 15:18:37.549 UTC [8305] STATEMENT:  
2026-01-06T15:18:41.684867178Z [err]  	        SELECT event
2026-01-06T15:18:41.684874042Z [err]  	        FROM event_config
2026-01-06T15:18:41.684881119Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:18:41.684890415Z [err]  	          AND active = 1
2026-01-06T15:18:41.684897726Z [err]  	          AND '15:18' BETWEEN open_time AND close_time
2026-01-06T15:18:41.684907524Z [err]  	        LIMIT 1;
2026-01-06T15:18:41.684915772Z [err]  	        
2026-01-06T15:18:41.684927162Z [err]  2026-01-06 15:18:38.100 UTC [8307] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:18:41.684939806Z [err]  2026-01-06 15:18:38.100 UTC [8307] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:18:41.684946719Z [err]  2026-01-06 15:18:38.100 UTC [8307] STATEMENT:  
2026-01-06T15:18:41.684953723Z [err]  	        SELECT event
2026-01-06T15:18:41.684960075Z [err]  	        FROM event_config
2026-01-06T15:18:41.684967774Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:18:41.684976904Z [err]  	          AND active = 1
2026-01-06T15:18:41.684982899Z [err]  	          AND '15:18' BETWEEN open_time AND close_time
2026-01-06T15:18:41.684990160Z [err]  	        LIMIT 1;
2026-01-06T15:18:41.684996499Z [err]  	        
2026-01-06T15:18:41.685004526Z [err]  2026-01-06 15:18:38.710 UTC [8309] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:18:41.685011804Z [err]  2026-01-06 15:18:38.710 UTC [8309] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:18:41.721787603Z [err]  	          AND '15:18' BETWEEN open_time AND close_time
2026-01-06T15:18:41.721799033Z [err]  2026-01-06 15:18:38.710 UTC [8309] STATEMENT:  
2026-01-06T15:18:41.721805366Z [err]  	        LIMIT 1;
2026-01-06T15:18:41.721813380Z [err]  	        
2026-01-06T15:18:41.721821045Z [err]  2026-01-06 15:18:40.818 UTC [8311] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:18:41.721828673Z [err]  	        SELECT event
2026-01-06T15:18:41.721830463Z [err]  2026-01-06 15:18:40.818 UTC [8311] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:18:41.721839712Z [err]  	        FROM event_config
2026-01-06T15:18:41.721839773Z [err]  2026-01-06 15:18:40.818 UTC [8311] STATEMENT:  
2026-01-06T15:18:41.721848296Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:18:41.721855861Z [err]  	          AND active = 1
2026-01-06T15:18:41.721867875Z [err]  	        LIMIT 1;
2026-01-06T15:18:41.721872026Z [err]  	        SELECT event
2026-01-06T15:18:41.721880059Z [err]  	        
2026-01-06T15:18:41.721882804Z [err]  	        FROM event_config
2026-01-06T15:18:41.721887893Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:18:41.721893790Z [err]  	          AND active = 1
2026-01-06T15:18:41.721901759Z [err]  	          AND '15:18' BETWEEN open_time AND close_time
2026-01-06T15:19:00.834325109Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:19:00.834330116Z [inf]  ðŸ“¨ 27832637248: Hallo I made a mistake should register as walker
2026-01-06T15:19:00.834335683Z [inf]  INFO:     100.64.0.8:14944 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:19:00.834336547Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:19:00.834341980Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:19:00.834343839Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:19:00.834348780Z [err]  Traceback (most recent call last):
2026-01-06T15:19:00.834351738Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:19:00.834354249Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:19:00.834359464Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:19:00.834360362Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:19:00.834366365Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:19:00.834366989Z [err]      raise exc
2026-01-06T15:19:00.834371352Z [err]          self.scope, self.receive, self.send
2026-01-06T15:19:00.834375806Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:19:00.834379917Z [err]      )
2026-01-06T15:19:00.834384287Z [err]      ^
2026-01-06T15:19:00.834389348Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:19:00.834393228Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:19:00.834397043Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:19:00.835304855Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:19:00.835312515Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:19:00.835312643Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:19:00.835318979Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:19:00.835320204Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:19:00.835326069Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:19:00.835326231Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:19:00.835332130Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:19:00.835332325Z [err]      await self.app(scope, receive, send)
2026-01-06T15:19:00.835338369Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:19:00.835338483Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:19:00.835344806Z [err]      raise exc
2026-01-06T15:19:00.835344889Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:19:00.835349815Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:19:00.835353586Z [err]      await app(scope, receive, sender)
2026-01-06T15:19:00.835357435Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:19:00.835361276Z [err]      await self.app(scope, receive, send)
2026-01-06T15:19:00.835365045Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:19:00.836385219Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:19:00.836394430Z [err]      raise exc
2026-01-06T15:19:00.836397217Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:19:00.836402918Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:19:00.836407070Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:19:00.836407143Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:19:00.836407146Z [err]      )
2026-01-06T15:19:00.836409547Z [err]      await app(scope, receive, sender)
2026-01-06T15:19:00.836415443Z [err]      ...<3 lines>...
2026-01-06T15:19:00.836416955Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:19:00.836418472Z [err]      cur.execute(
2026-01-06T15:19:00.836419154Z [err]      ^
2026-01-06T15:19:00.836423637Z [err]      response = await f(request)
2026-01-06T15:19:00.836428053Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:19:00.836428059Z [err]      ~~~~~~~~~~~^
2026-01-06T15:19:00.836429595Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:19:00.836435020Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:19:00.836437266Z [err]      return await dependant.call(**values)
2026-01-06T15:19:00.836437642Z [err]          """
2026-01-06T15:19:00.836444121Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:19:00.836444790Z [err]          ^^^
2026-01-06T15:19:00.836450820Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:19:00.836452305Z [err]      ...<7 lines>...
2026-01-06T15:19:00.836457285Z [err]      event = get_active_event()
2026-01-06T15:19:00.837138201Z [err]          (day_of_week, current_time),
2026-01-06T15:19:00.837145428Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:19:00.837152380Z [err]      )
2026-01-06T15:19:00.837160173Z [err]      ^
2026-01-06T15:19:00.837167243Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:19:00.837174202Z [err]      return super().execute(query, vars)
2026-01-06T15:19:00.837179943Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:19:00.837185535Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:19:00.837193080Z [err]  LINE 5:           AND active = 1
2026-01-06T15:19:00.837199512Z [err]                               ^
2026-01-06T15:19:00.837207354Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:19:00.837214247Z [err]  
2026-01-06T15:19:02.108124706Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:19:02.108134220Z [err]  	          AND active = 1
2026-01-06T15:19:02.108142395Z [err]  	          AND '15:18' BETWEEN open_time AND close_time
2026-01-06T15:19:02.108151787Z [err]  	        LIMIT 1;
2026-01-06T15:19:02.108158263Z [err]  	        
2026-01-06T15:19:02.108348912Z [err]  2026-01-06 15:18:58.791 UTC [8314] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:19:02.108356841Z [err]  2026-01-06 15:18:58.791 UTC [8314] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:19:02.108363064Z [err]  2026-01-06 15:18:58.791 UTC [8314] STATEMENT:  
2026-01-06T15:19:02.108374081Z [err]  	        SELECT event
2026-01-06T15:19:02.108380834Z [err]  	        FROM event_config
2026-01-06T15:19:04.534560800Z [inf]  ðŸ“¨ 27832637248: Hallo I made a mistake should register as walker
2026-01-06T15:19:04.787801875Z [err]      raise exc
2026-01-06T15:19:04.787802386Z [inf]  INFO:     100.64.0.3:20184 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:19:04.787811764Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:19:04.787814873Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:19:04.787822152Z [err]  Traceback (most recent call last):
2026-01-06T15:19:04.787829051Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:19:04.787835790Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:19:04.787843585Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:19:04.787848514Z [err]          self.scope, self.receive, self.send
2026-01-06T15:19:04.787852322Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:19:04.787855918Z [err]      )
2026-01-06T15:19:04.787859735Z [err]      ^
2026-01-06T15:19:04.787863549Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:19:04.787868273Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:19:04.787872333Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:19:04.787876196Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:19:04.787880305Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:19:04.787884859Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:19:04.787889605Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:19:04.787894287Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:19:04.788917477Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:19:04.788918870Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:19:04.788927945Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:19:04.788928163Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:19:04.788935479Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:19:04.788942057Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:19:04.788945947Z [err]      raise exc
2026-01-06T15:19:04.788949541Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:19:04.788953021Z [err]      await app(scope, receive, sender)
2026-01-06T15:19:04.788956627Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:19:04.788959966Z [err]      await self.app(scope, receive, send)
2026-01-06T15:19:04.788963461Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:19:04.788967004Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:19:04.788970458Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:19:04.788973913Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:19:04.788977453Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:19:04.788980857Z [err]      await self.app(scope, receive, send)
2026-01-06T15:19:04.788984526Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:19:04.790667525Z [err]      raise exc
2026-01-06T15:19:04.790677097Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:19:04.790677817Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:19:04.790684784Z [err]      await app(scope, receive, sender)
2026-01-06T15:19:04.790685818Z [err]          ^^^
2026-01-06T15:19:04.790686187Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:19:04.790692423Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:19:04.790694063Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:19:04.790699980Z [err]      response = await f(request)
2026-01-06T15:19:04.790701895Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:19:04.790702367Z [err]      ...<7 lines>...
2026-01-06T15:19:04.790703585Z [err]      return await dependant.call(**values)
2026-01-06T15:19:04.790709542Z [err]      ...<3 lines>...
2026-01-06T15:19:04.790713828Z [err]          (day_of_week, current_time),
2026-01-06T15:19:04.790717060Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:19:04.790717073Z [err]      )
2026-01-06T15:19:04.790723789Z [err]      ^
2026-01-06T15:19:04.790729196Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:19:04.790729771Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:19:04.790731477Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:19:04.790738375Z [err]      event = get_active_event()
2026-01-06T15:19:04.790747148Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:19:04.790758079Z [err]      cur.execute(
2026-01-06T15:19:04.790765832Z [err]      ~~~~~~~~~~~^
2026-01-06T15:19:04.790772906Z [err]          """
2026-01-06T15:19:04.791927136Z [err]      )
2026-01-06T15:19:04.791936618Z [err]      ^
2026-01-06T15:19:04.791943871Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:19:04.791951454Z [err]      return super().execute(query, vars)
2026-01-06T15:19:04.791958085Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:19:04.791962765Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:19:04.791966696Z [err]  LINE 5:           AND active = 1
2026-01-06T15:19:04.791970666Z [err]                               ^
2026-01-06T15:19:04.791974863Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:19:04.791979632Z [err]  
2026-01-06T15:19:05.165276324Z [err]  2026-01-06 15:19:04.777 UTC [8317] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:19:05.165288282Z [err]  2026-01-06 15:19:04.777 UTC [8317] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:19:05.165295529Z [err]  2026-01-06 15:19:04.777 UTC [8317] STATEMENT:  
2026-01-06T15:19:05.165302979Z [err]  	        SELECT event
2026-01-06T15:19:05.165309208Z [err]  	        FROM event_config
2026-01-06T15:19:05.165315270Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:19:05.165320852Z [err]  	          AND active = 1
2026-01-06T15:19:05.165325870Z [err]  	          AND '15:19' BETWEEN open_time AND close_time
2026-01-06T15:19:05.165330906Z [err]  	        LIMIT 1;
2026-01-06T15:19:05.165337178Z [err]  	        
2026-01-06T15:19:24.753515260Z [err]  2026-01-06 15:19:21.718 UTC [8320] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:19:24.753521453Z [err]  2026-01-06 15:19:21.718 UTC [8320] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:19:24.753527950Z [err]  2026-01-06 15:19:21.718 UTC [8320] STATEMENT:  
2026-01-06T15:19:24.753533520Z [err]  	        SELECT event
2026-01-06T15:19:24.753539067Z [err]  	        FROM event_config
2026-01-06T15:19:24.753545427Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:19:24.756045872Z [err]  	          AND active = 1
2026-01-06T15:19:24.756061366Z [err]  	          AND '15:19' BETWEEN open_time AND close_time
2026-01-06T15:19:24.756071107Z [err]  	        LIMIT 1;
2026-01-06T15:19:24.756079027Z [err]  	        
2026-01-06T15:19:24.788593775Z [inf]  ðŸ“¨ 27722135094: OPEN SUBMISSION
2026-01-06T15:19:24.788601406Z [inf]  INFO:     100.64.0.6:19894 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:19:24.788606350Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:19:24.788613277Z [err]  Traceback (most recent call last):
2026-01-06T15:19:24.788617725Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:19:24.788622169Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:19:24.788626279Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:19:24.788630709Z [err]          self.scope, self.receive, self.send
2026-01-06T15:19:24.788635347Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:19:24.788639659Z [err]      )
2026-01-06T15:19:24.788643558Z [err]      ^
2026-01-06T15:19:24.788647447Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:19:24.788654047Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:19:24.788658281Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:19:24.788662836Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:19:24.788666924Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:19:24.788671487Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:19:24.788676243Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:19:24.788680332Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:19:24.788684599Z [err]      raise exc
2026-01-06T15:19:24.788688687Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:19:24.789865376Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:19:24.789871692Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:19:24.789876291Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:19:24.789882258Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:19:24.789890102Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:19:24.789897638Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:19:24.789905644Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:19:24.789912925Z [err]      raise exc
2026-01-06T15:19:24.789919382Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:19:24.789924982Z [err]      await app(scope, receive, sender)
2026-01-06T15:19:24.789928751Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:19:24.789932407Z [err]      await self.app(scope, receive, send)
2026-01-06T15:19:24.789937241Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:19:24.789941625Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:19:24.789945446Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:19:24.789949062Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:19:24.789953462Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:19:24.789959920Z [err]      await self.app(scope, receive, send)
2026-01-06T15:19:24.791202933Z [err]      ^
2026-01-06T15:19:24.791212466Z [err]      raise exc
2026-01-06T15:19:24.791215441Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:19:24.791218449Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:19:24.791223724Z [err]      await app(scope, receive, sender)
2026-01-06T15:19:24.791225845Z [err]      return await dependant.call(**values)
2026-01-06T15:19:24.791228811Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:19:24.791233594Z [err]      response = await f(request)
2026-01-06T15:19:24.791236047Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:19:24.791242261Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:19:24.791245668Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:19:24.791247161Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:19:24.791252457Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:19:24.791255578Z [err]      event = get_active_event()
2026-01-06T15:19:24.791258486Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:19:24.791263941Z [err]      ...<3 lines>...
2026-01-06T15:19:24.791265975Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:19:24.791269241Z [err]      )
2026-01-06T15:19:24.791274954Z [err]      cur.execute(
2026-01-06T15:19:24.791283099Z [err]      ~~~~~~~~~~~^
2026-01-06T15:19:24.791291451Z [err]          """
2026-01-06T15:19:24.791300096Z [err]          ^^^
2026-01-06T15:19:24.791309806Z [err]      ...<7 lines>...
2026-01-06T15:19:24.791319629Z [err]          (day_of_week, current_time),
2026-01-06T15:19:24.791333771Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:19:24.792096879Z [err]      )
2026-01-06T15:19:24.792101971Z [err]      ^
2026-01-06T15:19:24.792105809Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:19:24.792109515Z [err]      return super().execute(query, vars)
2026-01-06T15:19:24.792113167Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:19:24.792116744Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:19:24.792120332Z [err]  LINE 5:           AND active = 1
2026-01-06T15:19:24.792124301Z [err]                               ^
2026-01-06T15:19:24.792127909Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:19:24.792131664Z [err]  
2026-01-06T15:20:04.796999605Z [inf]  INFO:     100.64.0.5:10524 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:20:12.612109715Z [inf]  ðŸ“¨ 27832637248: Hi
2026-01-06T15:20:12.888990952Z [err]      )
2026-01-06T15:20:12.888999761Z [err]      ^
2026-01-06T15:20:12.889004820Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:20:12.889009754Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:20:12.889014483Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:20:12.889019399Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:20:12.889024192Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:20:12.889029267Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:20:12.889036542Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:20:12.889041916Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:20:12.889046368Z [err]      raise exc
2026-01-06T15:20:12.889050562Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:20:12.889072455Z [inf]  INFO:     100.64.0.4:46966 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:20:12.889078729Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:20:12.889085340Z [err]  Traceback (most recent call last):
2026-01-06T15:20:12.889091200Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:20:12.889097096Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:20:12.889103520Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:20:12.889109405Z [err]          self.scope, self.receive, self.send
2026-01-06T15:20:12.889115468Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:20:12.893651272Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:20:12.893660546Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:20:12.893667380Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:20:12.893674200Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:20:12.893680420Z [err]      raise exc
2026-01-06T15:20:12.893687945Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:20:12.893695902Z [err]      await app(scope, receive, sender)
2026-01-06T15:20:12.893702754Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:20:12.893708637Z [err]      await self.app(scope, receive, send)
2026-01-06T15:20:12.893715257Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:20:12.893722859Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:20:12.893728525Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:20:12.893734861Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:20:12.893741255Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:20:12.893747784Z [err]      await self.app(scope, receive, send)
2026-01-06T15:20:12.893753610Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:20:12.893760120Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:20:12.893768095Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:20:12.893782121Z [err]      raise exc
2026-01-06T15:20:12.893791127Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:20:12.893797449Z [err]      await app(scope, receive, sender)
2026-01-06T15:20:12.893803934Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:20:12.893810623Z [err]      response = await f(request)
2026-01-06T15:20:12.893816895Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:20:12.893822992Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:20:12.893829893Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:20:12.893917390Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:20:12.893925106Z [err]      ...<3 lines>...
2026-01-06T15:20:12.893933130Z [err]      )
2026-01-06T15:20:12.893940757Z [err]      ^
2026-01-06T15:20:12.893947268Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:20:12.893954360Z [err]      return await dependant.call(**values)
2026-01-06T15:20:12.893961523Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:20:12.893968135Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:20:12.893975354Z [err]      event = get_active_event()
2026-01-06T15:20:12.893985635Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:20:12.893993287Z [err]      cur.execute(
2026-01-06T15:20:12.893999602Z [err]      ~~~~~~~~~~~^
2026-01-06T15:20:12.894006222Z [err]          """
2026-01-06T15:20:12.894012735Z [err]          ^^^
2026-01-06T15:20:12.894019577Z [err]      ...<7 lines>...
2026-01-06T15:20:12.894025646Z [err]          (day_of_week, current_time),
2026-01-06T15:20:12.894031966Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:20:12.895178879Z [err]      )
2026-01-06T15:20:12.895187958Z [err]      ^
2026-01-06T15:20:12.895195026Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:20:12.895201741Z [err]      return super().execute(query, vars)
2026-01-06T15:20:12.895208117Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:20:12.895215478Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:20:12.895225697Z [err]  LINE 5:           AND active = 1
2026-01-06T15:20:12.895232297Z [err]                               ^
2026-01-06T15:20:12.895241396Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:20:12.895248133Z [err]  
2026-01-06T15:20:16.005833099Z [err]  2026-01-06 15:20:12.868 UTC [8324] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:20:16.005838719Z [err]  2026-01-06 15:20:12.868 UTC [8324] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:20:16.005845040Z [err]  2026-01-06 15:20:12.868 UTC [8324] STATEMENT:  
2026-01-06T15:20:16.005851127Z [err]  	        SELECT event
2026-01-06T15:20:16.005858632Z [err]  	        FROM event_config
2026-01-06T15:20:16.005866446Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:20:16.005874287Z [err]  	          AND active = 1
2026-01-06T15:20:16.005881251Z [err]  	          AND '15:20' BETWEEN open_time AND close_time
2026-01-06T15:20:16.005887894Z [err]  	        LIMIT 1;
2026-01-06T15:20:16.005898815Z [err]  	        
2026-01-06T15:20:32.751581260Z [inf]  ðŸ“¨ 27738870757: Hi
2026-01-06T15:20:32.751584533Z [inf]  INFO:     100.64.0.3:24130 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:20:32.751588354Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T15:20:32.751593179Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T15:20:32.751596659Z [inf]  INFO:     100.64.0.3:24130 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:20:32.751598786Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T15:20:32.751604290Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T15:20:32.751605886Z [inf]  INFO:     100.64.0.2:12434 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:20:32.751611015Z [inf]  ðŸ“¤ Status: 200
2026-01-06T15:20:32.751613066Z [inf]  ðŸ“¨ 27738870757: Runner
2026-01-06T15:20:32.751616355Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27738870757","wa_id":"27738870757"}],"messages":[{"id":"wamid.HBgLMjc3Mzg4NzA3NTcVAgARGBI0MjdCMUNGNTA5MUZBNzQzMzYA"}]}
2026-01-06T15:20:32.751621258Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T15:20:32.751622570Z [inf]  INFO:     100.64.0.4:29518 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:20:32.751628279Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T15:20:32.751634067Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T15:20:33.505043402Z [inf]  INFO:     100.64.0.7:28116 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:20:33.505091767Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T15:20:33.505096624Z [inf]  ðŸ“¤ Status: 200
2026-01-06T15:20:33.505101131Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27738870757","wa_id":"27738870757"}],"messages":[{"id":"wamid.HBgLMjc3Mzg4NzA3NTcVAgARGBIxQkE0NEM0N0NEQjBFMDY3OUEA"}]}
2026-01-06T15:20:34.392302760Z [inf]  INFO:     100.64.0.3:26316 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:20:35.277343413Z [inf]  INFO:     100.64.0.9:23884 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:20:35.538560238Z [inf]  INFO:     100.64.0.5:50830 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:21:08.259869956Z [err]  	          AND active = 1
2026-01-06T15:21:08.259883370Z [err]  	          AND '15:21' BETWEEN open_time AND close_time
2026-01-06T15:21:08.259894127Z [err]  	        LIMIT 1;
2026-01-06T15:21:08.259904000Z [err]  	        
2026-01-06T15:21:08.259977954Z [err]  2026-01-06 15:21:07.514 UTC [8331] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:21:08.259988465Z [err]  2026-01-06 15:21:07.514 UTC [8331] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:21:08.259998666Z [err]  2026-01-06 15:21:07.514 UTC [8331] STATEMENT:  
2026-01-06T15:21:08.260006670Z [err]  	        SELECT event
2026-01-06T15:21:08.260013247Z [err]  	        FROM event_config
2026-01-06T15:21:08.260018111Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:21:09.411571006Z [err]  2026-01-06 15:21:08.332 UTC [8333] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:21:09.411578755Z [err]  2026-01-06 15:21:08.332 UTC [8333] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:21:09.411587472Z [err]  2026-01-06 15:21:08.332 UTC [8333] STATEMENT:  
2026-01-06T15:21:09.411593757Z [err]  	        SELECT event
2026-01-06T15:21:09.411601235Z [err]  	        FROM event_config
2026-01-06T15:21:09.411607010Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:21:09.411613333Z [err]  	          AND active = 1
2026-01-06T15:21:09.411620102Z [err]  	          AND '15:21' BETWEEN open_time AND close_time
2026-01-06T15:21:09.411628049Z [err]  	        LIMIT 1;
2026-01-06T15:21:09.411633384Z [err]  	        
2026-01-06T15:21:09.411640164Z [err]  2026-01-06 15:21:08.969 UTC [8335] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:21:09.411646611Z [err]  2026-01-06 15:21:08.969 UTC [8335] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:21:09.411654324Z [err]  2026-01-06 15:21:08.969 UTC [8335] STATEMENT:  
2026-01-06T15:21:09.411663700Z [err]  	        SELECT event
2026-01-06T15:21:09.411670448Z [err]  	        FROM event_config
2026-01-06T15:21:09.411677772Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:21:09.411685911Z [err]  	          AND active = 1
2026-01-06T15:21:09.411692758Z [err]  	          AND '15:21' BETWEEN open_time AND close_time
2026-01-06T15:21:09.411698656Z [err]  	        LIMIT 1;
2026-01-06T15:21:09.411705651Z [err]  	        
2026-01-06T15:21:11.564170795Z [err]  2026-01-06 15:21:11.123 UTC [8337] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:21:11.564178772Z [err]  2026-01-06 15:21:11.123 UTC [8337] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:21:11.564190119Z [err]  2026-01-06 15:21:11.123 UTC [8337] STATEMENT:  
2026-01-06T15:21:11.564197002Z [err]  	        SELECT event
2026-01-06T15:21:11.564205569Z [err]  	        FROM event_config
2026-01-06T15:21:11.564213893Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:21:11.564220213Z [err]  	          AND active = 1
2026-01-06T15:21:11.564226370Z [err]  	          AND '15:21' BETWEEN open_time AND close_time
2026-01-06T15:21:11.564233038Z [err]  	        LIMIT 1;
2026-01-06T15:21:11.564240636Z [err]  	        
2026-01-06T15:21:15.533872580Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:21:15.533885170Z [err]      raise exc
2026-01-06T15:21:15.533886325Z [inf]  ðŸ“¨ 27634045059: ðŸƒðŸ¼â€â™€ï¸â€âž¡ï¸ Runner
2026-01-06T15:21:15.533893377Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:21:15.533893402Z [inf]  INFO:     100.64.0.4:25746 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:21:15.533898903Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:21:15.533904152Z [err]  Traceback (most recent call last):
2026-01-06T15:21:15.533909532Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:21:15.533914307Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:21:15.533918882Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:21:15.533923815Z [err]          self.scope, self.receive, self.send
2026-01-06T15:21:15.533933211Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:21:15.533937575Z [err]      )
2026-01-06T15:21:15.533941900Z [err]      ^
2026-01-06T15:21:15.533947453Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:21:15.533953702Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:21:15.533958310Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:21:15.533963131Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:21:15.533967500Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:21:15.533972064Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:21:15.533976678Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:21:15.538469268Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:21:15.538477812Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:21:15.538484079Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:21:15.538490391Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:21:15.538496103Z [err]      raise exc
2026-01-06T15:21:15.538502495Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:21:15.538508699Z [err]      await app(scope, receive, sender)
2026-01-06T15:21:15.538515875Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:21:15.538521884Z [err]      await self.app(scope, receive, send)
2026-01-06T15:21:15.538527937Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:21:15.538533079Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:21:15.538538507Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:21:15.538545125Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:21:15.538551258Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:21:15.538556441Z [err]      await self.app(scope, receive, send)
2026-01-06T15:21:15.538561689Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:21:15.538566998Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:21:15.538581466Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:21:15.538589022Z [err]      raise exc
2026-01-06T15:21:15.538596650Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:21:15.538603459Z [err]      await app(scope, receive, sender)
2026-01-06T15:21:15.538609102Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:21:15.538614661Z [err]      response = await f(request)
2026-01-06T15:21:15.538620229Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:21:15.538625339Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:21:15.538630392Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:21:15.538635335Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:21:15.538641016Z [err]      ...<3 lines>...
2026-01-06T15:21:15.538646383Z [err]      )
2026-01-06T15:21:15.538652321Z [err]      ^
2026-01-06T15:21:15.538657801Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:21:15.538663084Z [err]      return await dependant.call(**values)
2026-01-06T15:21:15.538668998Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:21:15.538675469Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:21:15.538681567Z [err]      event = get_active_event()
2026-01-06T15:21:15.538689291Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:21:15.538696250Z [err]      cur.execute(
2026-01-06T15:21:15.538703248Z [err]      ~~~~~~~~~~~^
2026-01-06T15:21:15.538710792Z [err]          """
2026-01-06T15:21:15.538719623Z [err]          ^^^
2026-01-06T15:21:15.538727158Z [err]      ...<7 lines>...
2026-01-06T15:21:15.538734241Z [err]          (day_of_week, current_time),
2026-01-06T15:21:15.538742088Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:21:15.538749847Z [err]      )
2026-01-06T15:21:15.538757798Z [err]      ^
2026-01-06T15:21:15.538765196Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:21:15.538774502Z [err]      return super().execute(query, vars)
2026-01-06T15:21:15.538782453Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:21:15.538788047Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:21:15.538793716Z [err]  LINE 5:           AND active = 1
2026-01-06T15:21:15.538799370Z [err]                               ^
2026-01-06T15:21:15.538804875Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:21:15.538811205Z [err]  
2026-01-06T15:21:15.538816472Z [inf]  ðŸ“¨ 27634045059: ðŸƒðŸ¼â€â™€ï¸â€âž¡ï¸ Runner
2026-01-06T15:21:15.538821726Z [inf]  INFO:     100.64.0.3:36020 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:21:15.538827673Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:21:15.538833271Z [err]  Traceback (most recent call last):
2026-01-06T15:21:15.538839001Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:21:15.538843969Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:21:15.538849469Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:21:15.538854866Z [err]          self.scope, self.receive, self.send
2026-01-06T15:21:15.538860170Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:21:15.538865493Z [err]      )
2026-01-06T15:21:15.538871443Z [err]      ^
2026-01-06T15:21:15.538876429Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:21:15.538882108Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:21:15.539207843Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:21:15.539214415Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:21:15.539220429Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:21:15.539225967Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:21:15.539231182Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:21:15.539237029Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:21:15.539243236Z [err]      raise exc
2026-01-06T15:21:15.539248851Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:21:15.539254203Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:21:15.539259670Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:21:15.539265428Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:21:15.539270763Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:21:15.539275841Z [err]      raise exc
2026-01-06T15:21:15.539281024Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:21:15.539287606Z [err]      await app(scope, receive, sender)
2026-01-06T15:21:15.539294091Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:21:15.539299236Z [err]      await self.app(scope, receive, send)
2026-01-06T15:21:15.539305273Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:21:15.540292211Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:21:15.540297858Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:21:15.540302496Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:21:15.540307781Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:21:15.540312591Z [err]      await self.app(scope, receive, send)
2026-01-06T15:21:15.540312858Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:21:15.540317449Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:21:15.540323309Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:21:15.540324358Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:21:15.540329677Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:21:15.540332521Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:21:15.540335146Z [err]      raise exc
2026-01-06T15:21:15.540340036Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:21:15.540342695Z [err]      ...<3 lines>...
2026-01-06T15:21:15.540345079Z [err]      await app(scope, receive, sender)
2026-01-06T15:21:15.540350279Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:21:15.540351999Z [err]      )
2026-01-06T15:21:15.540355073Z [err]      response = await f(request)
2026-01-06T15:21:15.540360340Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:21:15.540361739Z [err]      ^
2026-01-06T15:21:15.540368571Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:21:15.541510758Z [err]  LINE 5:           AND active = 1
2026-01-06T15:21:15.541519269Z [err]                               ^
2026-01-06T15:21:15.541520356Z [err]      return await dependant.call(**values)
2026-01-06T15:21:15.541527893Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:21:15.541532051Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:21:15.541534923Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:21:15.541539441Z [err]  
2026-01-06T15:21:15.541541726Z [err]      event = get_active_event()
2026-01-06T15:21:15.541546524Z [inf]  ðŸ“¨ 27634045059: ðŸƒðŸ¼â€â™€ï¸â€âž¡ï¸ Runner
2026-01-06T15:21:15.541548449Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:21:15.541556369Z [inf]  INFO:     100.64.0.8:62232 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:21:15.541556585Z [err]      cur.execute(
2026-01-06T15:21:15.541563241Z [err]      ~~~~~~~~~~~^
2026-01-06T15:21:15.541564623Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:21:15.541569667Z [err]          """
2026-01-06T15:21:15.541575797Z [err]          ^^^
2026-01-06T15:21:15.541581992Z [err]      ...<7 lines>...
2026-01-06T15:21:15.541588889Z [err]          (day_of_week, current_time),
2026-01-06T15:21:15.541595856Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:21:15.541602353Z [err]      )
2026-01-06T15:21:15.541608902Z [err]      ^
2026-01-06T15:21:15.541615204Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:21:15.541621694Z [err]      return super().execute(query, vars)
2026-01-06T15:21:15.541630215Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:21:15.541636775Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:21:15.542658516Z [err]  Traceback (most recent call last):
2026-01-06T15:21:15.542658642Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:21:15.542665943Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:21:15.542666854Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:21:15.542673501Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:21:15.542673706Z [err]      raise exc
2026-01-06T15:21:15.542680212Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:21:15.542680701Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:21:15.542687216Z [err]          self.scope, self.receive, self.send
2026-01-06T15:21:15.542688023Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:21:15.542693410Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:21:15.542696989Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:21:15.542702552Z [err]      )
2026-01-06T15:21:15.542708954Z [err]      ^
2026-01-06T15:21:15.542717516Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:21:15.542724037Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:21:15.542730371Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:21:15.542736610Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:21:15.542742952Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:21:15.542749906Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:21:15.543696294Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:21:15.543704201Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:21:15.543711380Z [err]      raise exc
2026-01-06T15:21:15.543719465Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:21:15.543722652Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:21:15.543732910Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:21:15.543739238Z [err]      raise exc
2026-01-06T15:21:15.543744866Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:21:15.543749488Z [err]      await app(scope, receive, sender)
2026-01-06T15:21:15.543753599Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:21:15.543757612Z [err]      await self.app(scope, receive, send)
2026-01-06T15:21:15.543761425Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:21:15.543765552Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:21:15.543769889Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:21:15.543773968Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:21:15.543777756Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:21:15.543786943Z [err]      await self.app(scope, receive, send)
2026-01-06T15:21:15.543793189Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:21:15.545194649Z [err]      await app(scope, receive, sender)
2026-01-06T15:21:15.545198265Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:21:15.545205984Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:21:15.545209046Z [err]      cur.execute(
2026-01-06T15:21:15.545214625Z [err]      response = await f(request)
2026-01-06T15:21:15.545219123Z [err]      ~~~~~~~~~~~^
2026-01-06T15:21:15.545222819Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:21:15.545229275Z [err]          """
2026-01-06T15:21:15.545230561Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:21:15.545235712Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:21:15.545240496Z [err]          ^^^
2026-01-06T15:21:15.545240954Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:21:15.545246211Z [err]      ...<3 lines>...
2026-01-06T15:21:15.545251615Z [err]      ...<7 lines>...
2026-01-06T15:21:15.545251646Z [err]      )
2026-01-06T15:21:15.545256300Z [err]      ^
2026-01-06T15:21:15.545261516Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:21:15.545262322Z [err]          (day_of_week, current_time),
2026-01-06T15:21:15.545266419Z [err]      return await dependant.call(**values)
2026-01-06T15:21:15.545272316Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:21:15.545272935Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:21:15.545277440Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:21:15.545281509Z [err]      )
2026-01-06T15:21:15.545282399Z [err]      event = get_active_event()
2026-01-06T15:21:15.545287772Z [err]      ^
2026-01-06T15:21:15.545293056Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:21:15.546430151Z [err]                               ^
2026-01-06T15:21:15.546434876Z [err]      return super().execute(query, vars)
2026-01-06T15:21:15.546436127Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:21:15.546436834Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:21:15.546442203Z [err]  
2026-01-06T15:21:15.546446302Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:21:15.546448524Z [inf]  ðŸ“¨ 27634045059: ðŸƒðŸ¼â€â™€ï¸â€âž¡ï¸ Runner
2026-01-06T15:21:15.546453651Z [inf]  INFO:     100.64.0.8:62242 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:21:15.546453923Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:21:15.546456063Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:21:15.546459563Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:21:15.546461201Z [err]  LINE 5:           AND active = 1
2026-01-06T15:21:15.546465182Z [err]  Traceback (most recent call last):
2026-01-06T15:21:15.546470329Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:21:15.546470410Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:21:15.546482190Z [err]          self.scope, self.receive, self.send
2026-01-06T15:21:15.546490619Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:21:15.546499826Z [err]      )
2026-01-06T15:21:15.546508773Z [err]      ^
2026-01-06T15:21:15.546516873Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:21:15.546525460Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:21:15.546533935Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:21:15.547932210Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:21:15.547934983Z [err]      raise exc
2026-01-06T15:21:15.547941519Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:21:15.547948997Z [err]      await app(scope, receive, sender)
2026-01-06T15:21:15.547952141Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:21:15.547956939Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:21:15.547965668Z [err]      await self.app(scope, receive, send)
2026-01-06T15:21:15.547966524Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:21:15.547976582Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:21:15.547981813Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:21:15.547985201Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:21:15.547992189Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:21:15.547999144Z [err]      raise exc
2026-01-06T15:21:15.548005357Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:21:15.548011791Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:21:15.548018488Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:21:15.548024663Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:21:15.548031164Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:21:15.548841300Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:21:15.548844892Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:21:15.548852194Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:21:15.548852489Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:21:15.548858086Z [err]      await self.app(scope, receive, send)
2026-01-06T15:21:15.548860142Z [err]      ...<3 lines>...
2026-01-06T15:21:15.548864740Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:21:15.548865060Z [err]      )
2026-01-06T15:21:15.548870517Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:21:15.548872752Z [err]      ^
2026-01-06T15:21:15.548875983Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:21:15.548881411Z [err]      raise exc
2026-01-06T15:21:15.548881808Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:21:15.548886534Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:21:15.548891269Z [err]      return await dependant.call(**values)
2026-01-06T15:21:15.548893585Z [err]      await app(scope, receive, sender)
2026-01-06T15:21:15.548898846Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:21:15.548900111Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:21:15.548903827Z [err]      response = await f(request)
2026-01-06T15:21:15.548907573Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:21:15.548911384Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:21:15.549754151Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:21:15.549758515Z [err]      event = get_active_event()
2026-01-06T15:21:15.549762369Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:21:15.549766149Z [err]      cur.execute(
2026-01-06T15:21:15.549771294Z [err]      ~~~~~~~~~~~^
2026-01-06T15:21:15.549775654Z [err]          """
2026-01-06T15:21:15.549779532Z [err]          ^^^
2026-01-06T15:21:15.549783645Z [err]      ...<7 lines>...
2026-01-06T15:21:15.549788141Z [err]          (day_of_week, current_time),
2026-01-06T15:21:15.549792250Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:21:15.549796324Z [err]      )
2026-01-06T15:21:15.549800299Z [err]      ^
2026-01-06T15:21:15.549804068Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:21:15.549808443Z [err]      return super().execute(query, vars)
2026-01-06T15:21:15.549813171Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:21:15.549817260Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:21:15.549821266Z [err]  LINE 5:           AND active = 1
2026-01-06T15:21:15.549825057Z [err]                               ^
2026-01-06T15:21:15.549829061Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:21:15.549857134Z [err]  
2026-01-06T15:21:35.463930644Z [inf]  ðŸ“¨ 27634045059: ðŸƒðŸ¼â€â™€ï¸â€âž¡ï¸ Runner
2026-01-06T15:21:35.632505133Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:21:35.632553113Z [inf]  INFO:     100.64.0.8:34578 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:21:35.632561856Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:21:35.632570408Z [err]  Traceback (most recent call last):
2026-01-06T15:21:35.632578805Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:21:35.632587860Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:21:35.632595680Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:21:35.632605536Z [err]          self.scope, self.receive, self.send
2026-01-06T15:21:35.632613379Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:21:35.632621715Z [err]      )
2026-01-06T15:21:35.632630847Z [err]      ^
2026-01-06T15:21:35.632638773Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:21:35.632647805Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:21:35.632656217Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:21:35.632665171Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:21:35.632676495Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:21:35.632684564Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:21:35.632694343Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:21:35.632704460Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:21:35.632713603Z [err]      raise exc
2026-01-06T15:21:35.633692976Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:21:35.633702075Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:21:35.633702610Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:21:35.633711088Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:21:35.633717317Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:21:35.633719622Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:21:35.633728276Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:21:35.633729019Z [err]      raise exc
2026-01-06T15:21:35.633737861Z [err]      await self.app(scope, receive, send)
2026-01-06T15:21:35.633739968Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:21:35.633749635Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:21:35.633752026Z [err]      await app(scope, receive, sender)
2026-01-06T15:21:35.633758835Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:21:35.633760286Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:21:35.633767864Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:21:35.633769719Z [err]      await self.app(scope, receive, send)
2026-01-06T15:21:35.633776746Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:21:35.633785574Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:21:35.635077425Z [err]      raise exc
2026-01-06T15:21:35.635086532Z [err]      return await dependant.call(**values)
2026-01-06T15:21:35.635089330Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:21:35.635097417Z [err]      await app(scope, receive, sender)
2026-01-06T15:21:35.635099748Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:21:35.635107318Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:21:35.635109479Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:21:35.635115453Z [err]      response = await f(request)
2026-01-06T15:21:35.635123790Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:21:35.635127736Z [err]      event = get_active_event()
2026-01-06T15:21:35.635131304Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:21:35.635137025Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:21:35.635140599Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:21:35.635147119Z [err]      cur.execute(
2026-01-06T15:21:35.635149077Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:21:35.635155046Z [err]      ~~~~~~~~~~~^
2026-01-06T15:21:35.635158029Z [err]      ...<3 lines>...
2026-01-06T15:21:35.635162763Z [err]          """
2026-01-06T15:21:35.635167548Z [err]      )
2026-01-06T15:21:35.635170821Z [err]          ^^^
2026-01-06T15:21:35.635177937Z [err]      ^
2026-01-06T15:21:35.635178573Z [err]      ...<7 lines>...
2026-01-06T15:21:35.635187108Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:21:35.635188090Z [err]          (day_of_week, current_time),
2026-01-06T15:21:35.635194543Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:21:35.635948351Z [err]      )
2026-01-06T15:21:35.635959760Z [err]      ^
2026-01-06T15:21:35.635968467Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:21:35.635978899Z [err]      return super().execute(query, vars)
2026-01-06T15:21:35.635988885Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:21:35.635997693Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:21:35.636006066Z [err]  LINE 5:           AND active = 1
2026-01-06T15:21:35.636015362Z [err]                               ^
2026-01-06T15:21:35.636023451Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:21:35.636031661Z [err]  
2026-01-06T15:21:41.609015750Z [err]  2026-01-06 15:21:35.507 UTC [8341] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:21:41.609033586Z [err]  2026-01-06 15:21:35.507 UTC [8341] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:21:41.609049890Z [err]  2026-01-06 15:21:35.507 UTC [8341] STATEMENT:  
2026-01-06T15:21:41.609057441Z [err]  	        SELECT event
2026-01-06T15:21:41.609064704Z [err]  	        FROM event_config
2026-01-06T15:21:41.609072037Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:21:41.609077786Z [err]  	          AND active = 1
2026-01-06T15:21:41.609084593Z [err]  	          AND '15:21' BETWEEN open_time AND close_time
2026-01-06T15:21:41.609091301Z [err]  	        LIMIT 1;
2026-01-06T15:21:41.609098620Z [err]  	        
2026-01-06T15:22:53.791739553Z [err]  2026-01-06 15:22:46.809 UTC [76] LOG:  checkpoint starting: time
2026-01-06T15:22:53.791746545Z [err]  2026-01-06 15:22:47.264 UTC [76] LOG:  checkpoint complete: wrote 5 buffers (0.0%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.408 s, sync=0.015 s, total=0.456 s; sync files=5, longest=0.011 s, average=0.003 s; distance=8 kB, estimate=44 kB; lsn=0/1A01CC8, redo lsn=0/1A01C70
2026-01-06T15:23:15.741573505Z [inf]  INFO:     100.64.0.5:25944 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:23:15.741581955Z [inf]  INFO:     100.64.0.6:34388 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:23:15.741582850Z [inf]  ðŸ“¨ 27722135094: ADD CODES
2026-01-06T15:23:15.741592104Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T15:23:15.741599148Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T15:23:15.741605097Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T15:23:15.741611085Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T15:23:15.741617152Z [inf]  ðŸ“¤ Status: 200
2026-01-06T15:23:15.741624908Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27722135094","wa_id":"27722135094"}],"messages":[{"id":"wamid.HBgLMjc3MjIxMzUwOTQVAgARGBI1QUMxQzAzN0UwMUZFRTFCQjIA"}]}
2026-01-06T15:23:15.741630908Z [inf]  INFO:     100.64.0.3:11738 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:23:15.741637338Z [inf]  INFO:     100.64.0.2:22754 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:25:15.835399404Z [inf]  ðŸ“¨ 27722135094: Hi
2026-01-06T15:25:15.835413855Z [inf]  INFO:     100.64.0.7:26506 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:25:15.835421900Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:25:15.835429379Z [err]  Traceback (most recent call last):
2026-01-06T15:25:15.835436385Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:25:15.835443100Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:25:15.835450108Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:25:15.835455917Z [err]          self.scope, self.receive, self.send
2026-01-06T15:25:15.835463209Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:25:15.835470078Z [err]      )
2026-01-06T15:25:15.835477607Z [err]      ^
2026-01-06T15:25:15.835484263Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:25:15.835490354Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:25:15.835495716Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:25:15.835502205Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:25:15.835508911Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:25:15.835513343Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:25:15.835518521Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:25:15.835523081Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:25:15.835527125Z [err]      raise exc
2026-01-06T15:25:15.835531218Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:25:15.836484310Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:25:15.836492565Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:25:15.836498705Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:25:15.836503581Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:25:15.836508866Z [err]      raise exc
2026-01-06T15:25:15.836514508Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:25:15.836519058Z [err]      await app(scope, receive, sender)
2026-01-06T15:25:15.836523472Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:25:15.836672267Z [err]      await self.app(scope, receive, send)
2026-01-06T15:25:15.836681469Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:25:15.836687892Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:25:15.836692122Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:25:15.836696711Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:25:15.836701278Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:25:15.836706186Z [err]      await self.app(scope, receive, send)
2026-01-06T15:25:15.836710472Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:25:15.836714620Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:25:15.836719943Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:25:15.837584303Z [err]      cur.execute(
2026-01-06T15:25:15.837586010Z [err]      raise exc
2026-01-06T15:25:15.837593101Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:25:15.837593675Z [err]      ~~~~~~~~~~~^
2026-01-06T15:25:15.837602691Z [err]      await app(scope, receive, sender)
2026-01-06T15:25:15.837603165Z [err]          """
2026-01-06T15:25:15.837606551Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:25:15.837614081Z [err]          ^^^
2026-01-06T15:25:15.837615251Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:25:15.837620618Z [err]      return await dependant.call(**values)
2026-01-06T15:25:15.837630132Z [err]      response = await f(request)
2026-01-06T15:25:15.837630251Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:25:15.837632064Z [err]      ...<7 lines>...
2026-01-06T15:25:15.837641553Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:25:15.837642358Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:25:15.837642636Z [err]          (day_of_week, current_time),
2026-01-06T15:25:15.837651668Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:25:15.837653558Z [err]      event = get_active_event()
2026-01-06T15:25:15.837654042Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:25:15.837662070Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:25:15.837665008Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:25:15.837670165Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:25:15.837675279Z [err]      ...<3 lines>...
2026-01-06T15:25:15.837681221Z [err]      )
2026-01-06T15:25:15.837686634Z [err]      ^
2026-01-06T15:25:15.838586344Z [err]                               ^
2026-01-06T15:25:15.838594158Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:25:15.838594856Z [err]      )
2026-01-06T15:25:15.838599768Z [err]  
2026-01-06T15:25:15.838602480Z [err]      ^
2026-01-06T15:25:15.838608511Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:25:15.838614436Z [err]      return super().execute(query, vars)
2026-01-06T15:25:15.838623788Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:25:15.838630904Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:25:15.838636985Z [err]  LINE 5:           AND active = 1
2026-01-06T15:25:18.660038906Z [err]  2026-01-06 15:25:10.578 UTC [8355] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:25:18.660046308Z [err]  2026-01-06 15:25:10.578 UTC [8355] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:25:18.660055135Z [err]  2026-01-06 15:25:10.578 UTC [8355] STATEMENT:  
2026-01-06T15:25:18.660063879Z [err]  	        SELECT event
2026-01-06T15:25:18.660070773Z [err]  	        FROM event_config
2026-01-06T15:25:18.660077482Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:25:18.660085171Z [err]  	          AND active = 1
2026-01-06T15:25:18.660092659Z [err]  	          AND '15:25' BETWEEN open_time AND close_time
2026-01-06T15:25:18.660101994Z [err]  	        LIMIT 1;
2026-01-06T15:25:18.660112521Z [err]  	        
2026-01-06T15:26:30.122979028Z [err]  2026-01-06 15:26:28.638 UTC [8361] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:26:30.122994260Z [err]  2026-01-06 15:26:28.638 UTC [8361] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:26:30.123009472Z [err]  2026-01-06 15:26:28.638 UTC [8361] STATEMENT:  
2026-01-06T15:26:30.123019019Z [err]  	        SELECT event
2026-01-06T15:26:30.123037697Z [err]  	        FROM event_config
2026-01-06T15:26:30.123049981Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:26:30.123061215Z [err]  	          AND active = 1
2026-01-06T15:26:30.123072326Z [err]  	          AND '15:26' BETWEEN open_time AND close_time
2026-01-06T15:26:30.123083151Z [err]  	        LIMIT 1;
2026-01-06T15:26:30.123096653Z [err]  	        
2026-01-06T15:26:35.864361324Z [err]  Traceback (most recent call last):
2026-01-06T15:26:35.864371148Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:26:35.864377450Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:26:35.864383504Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:26:35.864388819Z [err]          self.scope, self.receive, self.send
2026-01-06T15:26:35.864394757Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:26:35.864399660Z [err]      )
2026-01-06T15:26:35.864405731Z [err]      ^
2026-01-06T15:26:35.864410542Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:26:35.864415309Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:26:35.864420047Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:26:35.864424894Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:26:35.864429638Z [inf]  ðŸ“¨ 27634045059: ðŸƒðŸ¼â€â™€ï¸â€âž¡ï¸ Runner
2026-01-06T15:26:35.864430425Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:26:35.864435972Z [inf]  INFO:     100.64.0.2:49146 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:26:35.864436267Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:26:35.864441696Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:26:35.864443669Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:26:35.864448054Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:26:35.864453007Z [err]      raise exc
2026-01-06T15:26:35.864457623Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:26:35.864880780Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:26:35.864888787Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:26:35.864895191Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:26:35.864900510Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:26:35.864905261Z [err]      raise exc
2026-01-06T15:26:35.864910586Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:26:35.864914938Z [err]      await app(scope, receive, sender)
2026-01-06T15:26:35.864919418Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:26:35.864924253Z [err]      await self.app(scope, receive, send)
2026-01-06T15:26:35.864928758Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:26:35.864933743Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:26:35.864938172Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:26:35.864943116Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:26:35.864947724Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:26:35.864953122Z [err]      await self.app(scope, receive, send)
2026-01-06T15:26:35.864957762Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:26:35.864962061Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:26:35.864966265Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:26:35.865952064Z [err]      raise exc
2026-01-06T15:26:35.865958119Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:26:35.865960699Z [err]          """
2026-01-06T15:26:35.865964250Z [err]      )
2026-01-06T15:26:35.865964805Z [err]      await app(scope, receive, sender)
2026-01-06T15:26:35.865968967Z [err]          ^^^
2026-01-06T15:26:35.865973349Z [err]      ^
2026-01-06T15:26:35.865974527Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:26:35.865975537Z [err]      ...<7 lines>...
2026-01-06T15:26:35.865980477Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:26:35.865982354Z [err]          (day_of_week, current_time),
2026-01-06T15:26:35.865983581Z [err]      response = await f(request)
2026-01-06T15:26:35.865988857Z [err]      return await dependant.call(**values)
2026-01-06T15:26:35.865989268Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:26:35.865993118Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:26:35.865995172Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:26:35.866001030Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:26:35.866002143Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:26:35.866009737Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:26:35.866010551Z [err]      event = get_active_event()
2026-01-06T15:26:35.866016530Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:26:35.866016745Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:26:35.866022073Z [err]      ...<3 lines>...
2026-01-06T15:26:35.866024607Z [err]      cur.execute(
2026-01-06T15:26:35.866032189Z [err]      ~~~~~~~~~~~^
2026-01-06T15:26:35.866857967Z [err]      )
2026-01-06T15:26:35.866866708Z [err]      ^
2026-01-06T15:26:35.866874185Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:26:35.866881321Z [err]      return super().execute(query, vars)
2026-01-06T15:26:35.866888373Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:26:35.866894914Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:26:35.866901380Z [err]  LINE 5:           AND active = 1
2026-01-06T15:26:35.866909734Z [err]                               ^
2026-01-06T15:26:35.866914818Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:26:35.866919326Z [err]  
2026-01-06T15:26:37.789813159Z [err]  2026-01-06 15:26:37.702 UTC [8339] LOG:  could not receive data from client: Connection reset by peer
2026-01-06T15:26:40.287489912Z [inf]  ðŸ“¨ 27832637248: Hallo I made a mistake should register as walker
2026-01-06T15:26:40.485374433Z [inf]  INFO:     100.64.0.2:37996 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:26:40.485375120Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:26:40.485384909Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:26:40.485388864Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:26:40.485394725Z [err]  Traceback (most recent call last):
2026-01-06T15:26:40.485399258Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:26:40.485404245Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:26:40.485409854Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:26:40.485413423Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:26:40.485421651Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:26:40.485422030Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:26:40.485431199Z [err]          self.scope, self.receive, self.send
2026-01-06T15:26:40.485434729Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:26:40.485440938Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:26:40.485445551Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:26:40.485449547Z [err]      )
2026-01-06T15:26:40.485457386Z [err]      raise exc
2026-01-06T15:26:40.485458681Z [err]      ^
2026-01-06T15:26:40.485468160Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:26:40.485469741Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:26:40.486313315Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:26:40.486319423Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:26:40.486321730Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:26:40.486327572Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:26:40.486329809Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:26:40.486333958Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:26:40.486337837Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:26:40.486340437Z [err]      await self.app(scope, receive, send)
2026-01-06T15:26:40.486345109Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:26:40.486350942Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:26:40.486352503Z [err]      raise exc
2026-01-06T15:26:40.486359792Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:26:40.486361909Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:26:40.486365841Z [err]      await app(scope, receive, sender)
2026-01-06T15:26:40.486370349Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:26:40.486372919Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:26:40.486379081Z [err]      await self.app(scope, receive, send)
2026-01-06T15:26:40.486386741Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:26:40.487505055Z [err]      raise exc
2026-01-06T15:26:40.487511176Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:26:40.487515672Z [err]      await app(scope, receive, sender)
2026-01-06T15:26:40.487519663Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:26:40.487524882Z [err]      response = await f(request)
2026-01-06T15:26:40.487525517Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:26:40.487527617Z [err]          (day_of_week, current_time),
2026-01-06T15:26:40.487530249Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:26:40.487534433Z [err]      return await dependant.call(**values)
2026-01-06T15:26:40.487536006Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:26:40.487540017Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:26:40.487542160Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:26:40.487542778Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:26:40.487546959Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:26:40.487550391Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:26:40.487553149Z [err]      ...<3 lines>...
2026-01-06T15:26:40.487560819Z [err]      )
2026-01-06T15:26:40.487568516Z [err]      event = get_active_event()
2026-01-06T15:26:40.487569160Z [err]      ^
2026-01-06T15:26:40.487576733Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:26:40.487582771Z [err]      cur.execute(
2026-01-06T15:26:40.487588517Z [err]      ~~~~~~~~~~~^
2026-01-06T15:26:40.487594204Z [err]          """
2026-01-06T15:26:40.487600648Z [err]          ^^^
2026-01-06T15:26:40.487606809Z [err]      ...<7 lines>...
2026-01-06T15:26:40.488662175Z [err]      )
2026-01-06T15:26:40.488672196Z [err]      ^
2026-01-06T15:26:40.488679779Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:26:40.488687327Z [err]      return super().execute(query, vars)
2026-01-06T15:26:40.488694246Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:26:40.488700543Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:26:40.488707731Z [err]  LINE 5:           AND active = 1
2026-01-06T15:26:40.488714975Z [err]                               ^
2026-01-06T15:26:40.488722246Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:26:40.488729343Z [err]  
2026-01-06T15:26:40.792239417Z [err]  2026-01-06 15:26:40.477 UTC [8363] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:26:40.792246743Z [err]  2026-01-06 15:26:40.477 UTC [8363] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:26:40.792253865Z [err]  2026-01-06 15:26:40.477 UTC [8363] STATEMENT:  
2026-01-06T15:26:40.792261324Z [err]  	        SELECT event
2026-01-06T15:26:40.792268021Z [err]  	        FROM event_config
2026-01-06T15:26:40.792275596Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:26:40.792293364Z [err]  	          AND active = 1
2026-01-06T15:26:40.792307198Z [err]  	          AND '15:26' BETWEEN open_time AND close_time
2026-01-06T15:26:40.792314636Z [err]  	        LIMIT 1;
2026-01-06T15:26:40.792321757Z [err]  	        
2026-01-06T15:27:40.467138643Z [err]          self.scope, self.receive, self.send
2026-01-06T15:27:40.467147709Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.467154484Z [err]      )
2026-01-06T15:27:40.467155149Z [inf]  ðŸ“¨ 27634045059: Sbk03e.  SBK03E
2026-01-06T15:27:40.467160400Z [inf]  INFO:     100.64.0.5:38952 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:27:40.467160771Z [err]      ^
2026-01-06T15:27:40.467167002Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:27:40.467167773Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:27:40.467173601Z [err]  Traceback (most recent call last):
2026-01-06T15:27:40.467175551Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:27:40.467179462Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:27:40.467182236Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.467185799Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:27:40.467188934Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:27:40.467191762Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.467196363Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:27:40.467201777Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:27:40.467206185Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:27:40.467210747Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:27:40.467215717Z [err]      raise exc
2026-01-06T15:27:40.467220843Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:27:40.467774683Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:27:40.467781116Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:27:40.467783541Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:27:40.467787033Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:27:40.467792547Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:27:40.467792625Z [err]      await self.app(scope, receive, send)
2026-01-06T15:27:40.467797985Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:27:40.467799823Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:27:40.467802823Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:27:40.467806943Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:27:40.467808384Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:27:40.467811755Z [err]      raise exc
2026-01-06T15:27:40.467816319Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:27:40.467821141Z [err]      await app(scope, receive, sender)
2026-01-06T15:27:40.467825665Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:27:40.467833163Z [err]      await self.app(scope, receive, send)
2026-01-06T15:27:40.467837482Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:27:40.467842182Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:27:40.469019120Z [err]      raise exc
2026-01-06T15:27:40.469029399Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:27:40.469037085Z [err]      await app(scope, receive, sender)
2026-01-06T15:27:40.469045042Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:27:40.469053289Z [err]      response = await f(request)
2026-01-06T15:27:40.469061961Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.469069643Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:27:40.469076936Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:27:40.469083759Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.469091209Z [err]      ...<3 lines>...
2026-01-06T15:27:40.469098221Z [err]      )
2026-01-06T15:27:40.469106494Z [err]      ^
2026-01-06T15:27:40.469113874Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:27:40.469120812Z [err]      return await dependant.call(**values)
2026-01-06T15:27:40.469127989Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.469135349Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:27:40.469143236Z [err]      event = get_active_event()
2026-01-06T15:27:40.469150552Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:27:40.469157763Z [err]      cur.execute(
2026-01-06T15:27:40.469164703Z [err]      ~~~~~~~~~~~^
2026-01-06T15:27:40.469171803Z [err]          """
2026-01-06T15:27:40.469178993Z [err]          ^^^
2026-01-06T15:27:40.469186427Z [err]      ...<7 lines>...
2026-01-06T15:27:40.469194390Z [err]          (day_of_week, current_time),
2026-01-06T15:27:40.469201428Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.470019245Z [err]      )
2026-01-06T15:27:40.470026068Z [err]      ^
2026-01-06T15:27:40.470028963Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.470031792Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:27:40.470037198Z [err]      return super().execute(query, vars)
2026-01-06T15:27:40.470039683Z [err]          self.scope, self.receive, self.send
2026-01-06T15:27:40.470042379Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:27:40.470047664Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.470048716Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:27:40.470054911Z [err]  LINE 5:           AND active = 1
2026-01-06T15:27:40.470055988Z [err]      )
2026-01-06T15:27:40.470060270Z [err]                               ^
2026-01-06T15:27:40.470065066Z [err]      ^
2026-01-06T15:27:40.470065413Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:27:40.470071002Z [err]  
2026-01-06T15:27:40.470073720Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:27:40.470076962Z [inf]  ðŸ“¨ 27634045059: Sbk03e.  SBK03E
2026-01-06T15:27:40.470082557Z [inf]  INFO:     100.64.0.4:46324 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:27:40.470083603Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:27:40.470086813Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:27:40.470090499Z [err]  Traceback (most recent call last):
2026-01-06T15:27:40.470094200Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:27:40.470099507Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:27:40.471037456Z [err]      await app(scope, receive, sender)
2026-01-06T15:27:40.471045681Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:27:40.471046730Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.471054011Z [err]      await self.app(scope, receive, send)
2026-01-06T15:27:40.471057399Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:27:40.471061296Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:27:40.471062882Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:27:40.471067969Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:27:40.471072080Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:27:40.471076601Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:27:40.471081186Z [err]      raise exc
2026-01-06T15:27:40.471086031Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:27:40.471089839Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:27:40.471093759Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:27:40.471097813Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:27:40.471102205Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:27:40.471106982Z [err]      raise exc
2026-01-06T15:27:40.471110546Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:27:40.472324029Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:27:40.472329231Z [err]      response = await f(request)
2026-01-06T15:27:40.472334674Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.472337734Z [err]      raise exc
2026-01-06T15:27:40.472345441Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:27:40.472347090Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:27:40.472350831Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:27:40.472352868Z [err]      await app(scope, receive, sender)
2026-01-06T15:27:40.472355835Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:27:40.472357744Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:27:40.472362478Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.472363278Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:27:40.472366986Z [err]      ...<3 lines>...
2026-01-06T15:27:40.472372320Z [err]      )
2026-01-06T15:27:40.472373126Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:27:40.472377331Z [err]      ^
2026-01-06T15:27:40.472380967Z [err]      await self.app(scope, receive, send)
2026-01-06T15:27:40.472382607Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:27:40.472388095Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:27:40.472393501Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:27:40.472399562Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:27:40.473054000Z [err]  LINE 5:           AND active = 1
2026-01-06T15:27:40.473055759Z [err]      return await dependant.call(**values)
2026-01-06T15:27:40.473061329Z [err]                               ^
2026-01-06T15:27:40.473062015Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.473067801Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:27:40.473068299Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:27:40.473073781Z [err]  
2026-01-06T15:27:40.473074558Z [err]      event = get_active_event()
2026-01-06T15:27:40.473080517Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:27:40.473081117Z [inf]  ðŸ“¨ 27634045059: Sbk03e.  SBK03E
2026-01-06T15:27:40.473086036Z [err]      cur.execute(
2026-01-06T15:27:40.473087664Z [inf]  INFO:     100.64.0.5:38966 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:27:40.473092512Z [err]      ~~~~~~~~~~~^
2026-01-06T15:27:40.473093341Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:27:40.473097524Z [err]          """
2026-01-06T15:27:40.473101178Z [err]          ^^^
2026-01-06T15:27:40.473105008Z [err]      ...<7 lines>...
2026-01-06T15:27:40.473109354Z [err]          (day_of_week, current_time),
2026-01-06T15:27:40.473113189Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.473117711Z [err]      )
2026-01-06T15:27:40.473121360Z [err]      ^
2026-01-06T15:27:40.473125045Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:27:40.473128573Z [err]      return super().execute(query, vars)
2026-01-06T15:27:40.473132312Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:27:40.473136674Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:27:40.474242335Z [err]  Traceback (most recent call last):
2026-01-06T15:27:40.474243311Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:27:40.474250640Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:27:40.474251524Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:27:40.474252106Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:27:40.474258869Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:27:40.474259705Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:27:40.474262966Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:27:40.474266855Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.474273319Z [err]      raise exc
2026-01-06T15:27:40.474273401Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.474273444Z [err]          self.scope, self.receive, self.send
2026-01-06T15:27:40.474281052Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:27:40.474281723Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.474286161Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:27:40.474287901Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:27:40.474289485Z [err]      )
2026-01-06T15:27:40.474295949Z [err]      ^
2026-01-06T15:27:40.474296145Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:27:40.474301042Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:27:40.475015077Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:27:40.475027063Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:27:40.475034286Z [err]      raise exc
2026-01-06T15:27:40.475040010Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:27:40.475045555Z [err]      await app(scope, receive, sender)
2026-01-06T15:27:40.475052092Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:27:40.475057482Z [err]      await self.app(scope, receive, send)
2026-01-06T15:27:40.475062999Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:27:40.475068511Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:27:40.475074386Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:27:40.475080196Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:27:40.475085266Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:27:40.475090435Z [err]      await self.app(scope, receive, send)
2026-01-06T15:27:40.475097201Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:27:40.475102879Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:27:40.475108444Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:27:40.475116206Z [err]      raise exc
2026-01-06T15:27:40.475121779Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:27:40.476094992Z [err]      await app(scope, receive, sender)
2026-01-06T15:27:40.476095505Z [err]      )
2026-01-06T15:27:40.476102034Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:27:40.476102718Z [err]      ^
2026-01-06T15:27:40.476108272Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:27:40.476110138Z [err]      response = await f(request)
2026-01-06T15:27:40.476114797Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.476119239Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:27:40.476123969Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:27:40.476128930Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.476133023Z [err]      ...<3 lines>...
2026-01-06T15:27:40.476136762Z [err]      )
2026-01-06T15:27:40.476141299Z [err]      ^
2026-01-06T15:27:40.476145499Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:27:40.476149999Z [err]      return await dependant.call(**values)
2026-01-06T15:27:40.476154345Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.476158506Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:27:40.476162459Z [err]      event = get_active_event()
2026-01-06T15:27:40.476166181Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:27:40.476170473Z [err]      cur.execute(
2026-01-06T15:27:40.476175009Z [err]      ~~~~~~~~~~~^
2026-01-06T15:27:40.476179167Z [err]          """
2026-01-06T15:27:40.476182981Z [err]          ^^^
2026-01-06T15:27:40.476186834Z [err]      ...<7 lines>...
2026-01-06T15:27:40.476190367Z [err]          (day_of_week, current_time),
2026-01-06T15:27:40.476195459Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.477106891Z [err]      return super().execute(query, vars)
2026-01-06T15:27:40.477113538Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:27:40.477118679Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:27:40.477127042Z [err]  LINE 5:           AND active = 1
2026-01-06T15:27:40.477131784Z [err]                               ^
2026-01-06T15:27:40.477135949Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:27:40.477142517Z [err]  
2026-01-06T15:27:40.477144964Z [err]          self.scope, self.receive, self.send
2026-01-06T15:27:40.477150153Z [inf]  ðŸ“¨ 27634045059: Sbk03e.  SBK03E
2026-01-06T15:27:40.477162419Z [inf]  INFO:     100.64.0.8:49692 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:27:40.477165770Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.477169795Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:27:40.477178192Z [err]  Traceback (most recent call last):
2026-01-06T15:27:40.477182253Z [err]      )
2026-01-06T15:27:40.477188654Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:27:40.477200561Z [err]      ^
2026-01-06T15:27:40.477200638Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:27:40.477211414Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.477215884Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:27:40.477224291Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:27:40.477233167Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.477242447Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:27:40.477887955Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:27:40.477893354Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:27:40.477897114Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:27:40.477902496Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:27:40.477907739Z [err]      raise exc
2026-01-06T15:27:40.477913913Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:27:40.477917739Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:27:40.477921492Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:27:40.477925542Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:27:40.477929313Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:27:40.477932862Z [err]      raise exc
2026-01-06T15:27:40.477936242Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:27:40.477939862Z [err]      await app(scope, receive, sender)
2026-01-06T15:27:40.477943344Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:27:40.477947077Z [err]      await self.app(scope, receive, send)
2026-01-06T15:27:40.477950623Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:27:40.477955514Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:27:40.477958888Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:27:40.479002755Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:27:40.479014927Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:27:40.479024851Z [err]      await self.app(scope, receive, send)
2026-01-06T15:27:40.479033874Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:27:40.479066304Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:27:40.479074558Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:27:40.479081512Z [err]      raise exc
2026-01-06T15:27:40.479088673Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:27:40.479096536Z [err]      await app(scope, receive, sender)
2026-01-06T15:27:40.479104033Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:27:40.479112159Z [err]      response = await f(request)
2026-01-06T15:27:40.479119188Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.479127604Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:27:40.479140545Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:27:40.479147370Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.479154642Z [err]      ...<3 lines>...
2026-01-06T15:27:40.479161711Z [err]      )
2026-01-06T15:27:40.479181822Z [err]      ^
2026-01-06T15:27:40.479188777Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:27:40.479195816Z [err]      return await dependant.call(**values)
2026-01-06T15:27:40.479204089Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.480178591Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:27:40.480182334Z [inf]  ðŸ“¨ 27722135094: 4Km 27:11 SBK03E
2026-01-06T15:27:40.480191074Z [err]      event = get_active_event()
2026-01-06T15:27:40.480192958Z [inf]  INFO:     100.64.0.2:11712 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:27:40.480203110Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:27:40.480203313Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:27:40.480209593Z [err]      return super().execute(query, vars)
2026-01-06T15:27:40.480215165Z [err]  Traceback (most recent call last):
2026-01-06T15:27:40.480216469Z [err]      cur.execute(
2026-01-06T15:27:40.480225532Z [err]      ~~~~~~~~~~~^
2026-01-06T15:27:40.480227320Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:27:40.480228212Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:27:40.480234638Z [err]          """
2026-01-06T15:27:40.480243392Z [err]          ^^^
2026-01-06T15:27:40.480244035Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:27:40.480253018Z [err]  LINE 5:           AND active = 1
2026-01-06T15:27:40.480257426Z [err]      ...<7 lines>...
2026-01-06T15:27:40.480267734Z [err]          (day_of_week, current_time),
2026-01-06T15:27:40.480268574Z [err]                               ^
2026-01-06T15:27:40.480275880Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.480284597Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:27:40.480286308Z [err]      )
2026-01-06T15:27:40.480295778Z [err]      ^
2026-01-06T15:27:40.480299619Z [err]  
2026-01-06T15:27:40.480304898Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:27:40.481452767Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:27:40.481461418Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.481462964Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:27:40.481470919Z [err]          self.scope, self.receive, self.send
2026-01-06T15:27:40.481476170Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:27:40.481479982Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:27:40.481481435Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.481493959Z [err]      )
2026-01-06T15:27:40.481496754Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:27:40.481508884Z [err]      ^
2026-01-06T15:27:40.481512950Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:27:40.481521500Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:27:40.481527802Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:27:40.481533827Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:27:40.481542805Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:27:40.481545532Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.481554832Z [err]      raise exc
2026-01-06T15:27:40.481560902Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:27:40.481565780Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:27:40.481571772Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:27:40.482192435Z [err]      raise exc
2026-01-06T15:27:40.482204654Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:27:40.482213799Z [err]      await app(scope, receive, sender)
2026-01-06T15:27:40.482223460Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:27:40.482233353Z [err]      await self.app(scope, receive, send)
2026-01-06T15:27:40.482243301Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:27:40.482252645Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:27:40.482262046Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:27:40.482270376Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:27:40.482279549Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:27:40.482288147Z [err]      await self.app(scope, receive, send)
2026-01-06T15:27:40.482297804Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:27:40.482308584Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:27:40.482318139Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:27:40.482327091Z [err]      raise exc
2026-01-06T15:27:40.482336080Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:27:40.482345233Z [err]      await app(scope, receive, sender)
2026-01-06T15:27:40.482354342Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:27:40.482364331Z [err]      response = await f(request)
2026-01-06T15:27:40.483561573Z [err]      )
2026-01-06T15:27:40.483562716Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.483562954Z [err]      event = get_active_event()
2026-01-06T15:27:40.483572465Z [err]      ^
2026-01-06T15:27:40.483572809Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:27:40.483573810Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:27:40.483581421Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:27:40.483582148Z [err]      cur.execute(
2026-01-06T15:27:40.483584237Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:27:40.483589831Z [err]      return super().execute(query, vars)
2026-01-06T15:27:40.483590576Z [err]      ~~~~~~~~~~~^
2026-01-06T15:27:40.483592532Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.483598652Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:27:40.483599788Z [err]          """
2026-01-06T15:27:40.483601240Z [err]      ...<3 lines>...
2026-01-06T15:27:40.483607151Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:27:40.483608928Z [err]          ^^^
2026-01-06T15:27:40.483609968Z [err]      )
2026-01-06T15:27:40.483617549Z [err]      ...<7 lines>...
2026-01-06T15:27:40.483618862Z [err]      ^
2026-01-06T15:27:40.483625508Z [err]          (day_of_week, current_time),
2026-01-06T15:27:40.483628327Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:27:40.483634332Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.483637695Z [err]      return await dependant.call(**values)
2026-01-06T15:27:40.483645971Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.483653223Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:27:40.484466464Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:27:40.484476589Z [err]  LINE 5:           AND active = 1
2026-01-06T15:27:40.484481729Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:27:40.484491611Z [err]                               ^
2026-01-06T15:27:40.484495200Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.484505541Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:27:40.484508947Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:27:40.484516750Z [err]  
2026-01-06T15:27:40.484522196Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:27:40.484528077Z [inf]  ðŸ“¨ 27722135094: 4Km 27:11 SBK03E
2026-01-06T15:27:40.484539118Z [inf]  INFO:     100.64.0.7:25478 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:27:40.484543209Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:27:40.484550052Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:27:40.484556568Z [err]  Traceback (most recent call last):
2026-01-06T15:27:40.484564437Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:27:40.484571699Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:27:40.484578998Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.484586054Z [err]          self.scope, self.receive, self.send
2026-01-06T15:27:40.484593318Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.484599721Z [err]      )
2026-01-06T15:27:40.484607051Z [err]      ^
2026-01-06T15:27:40.485277207Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:27:40.485282836Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:27:40.485290615Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:27:40.485300298Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:27:40.485304274Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:27:40.485321967Z [err]      raise exc
2026-01-06T15:27:40.485326106Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:27:40.485330800Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:27:40.485335862Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:27:40.485340015Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:27:40.485345773Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:27:40.485350853Z [err]      raise exc
2026-01-06T15:27:40.485355902Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:27:40.485359994Z [err]      await app(scope, receive, sender)
2026-01-06T15:27:40.485363987Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:27:40.485368648Z [err]      await self.app(scope, receive, send)
2026-01-06T15:27:40.485373162Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:27:40.485378756Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:27:40.486405600Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:27:40.486406735Z [err]      await self.app(scope, receive, send)
2026-01-06T15:27:40.486416422Z [err]      event = get_active_event()
2026-01-06T15:27:40.486418242Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:27:40.486425520Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:27:40.486428090Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:27:40.486429497Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.486435905Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:27:40.486444776Z [err]      ...<3 lines>...
2026-01-06T15:27:40.486445105Z [err]      raise exc
2026-01-06T15:27:40.486454649Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:27:40.486456844Z [err]      )
2026-01-06T15:27:40.486463080Z [err]      await app(scope, receive, sender)
2026-01-06T15:27:40.486467197Z [err]      ^
2026-01-06T15:27:40.486472094Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:27:40.486477465Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:27:40.486479460Z [err]      response = await f(request)
2026-01-06T15:27:40.486485404Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.486488439Z [err]      return await dependant.call(**values)
2026-01-06T15:27:40.486491558Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:27:40.486496847Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:27:40.486501136Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.487596358Z [err]      cur.execute(
2026-01-06T15:27:40.487607525Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:27:40.487613241Z [err]      ~~~~~~~~~~~^
2026-01-06T15:27:40.487625208Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:27:40.487625455Z [err]          """
2026-01-06T15:27:40.487635400Z [err]          ^^^
2026-01-06T15:27:40.487643109Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.487647256Z [err]      ...<7 lines>...
2026-01-06T15:27:40.487651878Z [err]          (day_of_week, current_time),
2026-01-06T15:27:40.487656578Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.487660232Z [err]      )
2026-01-06T15:27:40.487665209Z [err]      ^
2026-01-06T15:27:40.487669800Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:27:40.487673991Z [err]      return super().execute(query, vars)
2026-01-06T15:27:40.487677895Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:27:40.487681540Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:27:40.487686658Z [err]  LINE 5:           AND active = 1
2026-01-06T15:27:40.487690535Z [err]                               ^
2026-01-06T15:27:40.487694373Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:27:40.487698618Z [err]  
2026-01-06T15:27:40.487705615Z [inf]  ðŸ“¨ 27634045059: Sbk03e.  SBK03E
2026-01-06T15:27:40.487712401Z [inf]  INFO:     100.64.0.3:44068 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:27:40.487718785Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:27:40.487724933Z [err]  Traceback (most recent call last):
2026-01-06T15:27:40.488623900Z [err]          self.scope, self.receive, self.send
2026-01-06T15:27:40.488628918Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.488633985Z [err]      )
2026-01-06T15:27:40.488638220Z [err]      ^
2026-01-06T15:27:40.488638568Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:27:40.488644097Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:27:40.488647165Z [err]      raise exc
2026-01-06T15:27:40.488649141Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:27:40.488654108Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:27:40.488654135Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.488658693Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:27:40.488663787Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:27:40.488663801Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:27:40.488667932Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:27:40.488672020Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:27:40.488677603Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:27:40.488685216Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:27:40.488689805Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:27:40.488694024Z [err]      raise exc
2026-01-06T15:27:40.488700638Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:27:40.489799553Z [err]      await app(scope, receive, sender)
2026-01-06T15:27:40.489808282Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:27:40.489815159Z [err]      await self.app(scope, receive, send)
2026-01-06T15:27:40.489822187Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:27:40.489828870Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:27:40.489860655Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:27:40.489867750Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:27:40.489874063Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:27:40.489881195Z [err]      await self.app(scope, receive, send)
2026-01-06T15:27:40.489887658Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:27:40.489894007Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:27:40.489900558Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:27:40.489907626Z [err]      raise exc
2026-01-06T15:27:40.489915321Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:27:40.489922553Z [err]      await app(scope, receive, sender)
2026-01-06T15:27:40.489930235Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:27:40.489936276Z [err]      response = await f(request)
2026-01-06T15:27:40.489942775Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.489949019Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:27:40.491152068Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:27:40.491162385Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.491170332Z [err]      ...<3 lines>...
2026-01-06T15:27:40.491177360Z [err]      )
2026-01-06T15:27:40.491185878Z [err]      ^
2026-01-06T15:27:40.491193810Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:27:40.491200053Z [err]      return await dependant.call(**values)
2026-01-06T15:27:40.491206382Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.491212571Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:27:40.491219278Z [err]      event = get_active_event()
2026-01-06T15:27:40.491224622Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:27:40.491230377Z [err]      cur.execute(
2026-01-06T15:27:40.491235893Z [err]      ~~~~~~~~~~~^
2026-01-06T15:27:40.491240941Z [err]          """
2026-01-06T15:27:40.491246225Z [err]          ^^^
2026-01-06T15:27:40.491250195Z [err]      ...<7 lines>...
2026-01-06T15:27:40.491255016Z [err]          (day_of_week, current_time),
2026-01-06T15:27:40.491259185Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.491264167Z [err]      )
2026-01-06T15:27:40.491269895Z [err]      ^
2026-01-06T15:27:40.491274371Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:27:40.491282211Z [err]      return super().execute(query, vars)
2026-01-06T15:27:40.779198178Z [inf]  ðŸ“¨ 27722135094: 4Km 27:11 SBK03E
2026-01-06T15:27:40.809264502Z [inf]  INFO:     100.64.0.8:49694 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:27:40.809268103Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.809275869Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:27:40.809278316Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:27:40.809286353Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:27:40.809286572Z [err]  Traceback (most recent call last):
2026-01-06T15:27:40.809292260Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:27:40.809295318Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:27:40.809298789Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:27:40.809304760Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:27:40.809305910Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:27:40.809310641Z [err]      raise exc
2026-01-06T15:27:40.809316393Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.809317459Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:27:40.809324222Z [err]          self.scope, self.receive, self.send
2026-01-06T15:27:40.809329594Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.809335189Z [err]      )
2026-01-06T15:27:40.809341669Z [err]      ^
2026-01-06T15:27:40.809345343Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:27:40.809348972Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:27:40.810360893Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:27:40.810370114Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:27:40.810374829Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:27:40.810378444Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:27:40.810380862Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:27:40.810383110Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:27:40.810387906Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:27:40.810390012Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:27:40.810395223Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:27:40.810397396Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:27:40.810404015Z [err]      await self.app(scope, receive, send)
2026-01-06T15:27:40.810404847Z [err]      raise exc
2026-01-06T15:27:40.810412309Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:27:40.810418936Z [err]      await app(scope, receive, sender)
2026-01-06T15:27:40.810426106Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:27:40.810433121Z [err]      await self.app(scope, receive, send)
2026-01-06T15:27:40.810438454Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:27:40.810442556Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:27:40.811245084Z [err]      ...<7 lines>...
2026-01-06T15:27:40.811245168Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.811257913Z [err]      raise exc
2026-01-06T15:27:40.811258410Z [err]          (day_of_week, current_time),
2026-01-06T15:27:40.811258414Z [err]      ...<3 lines>...
2026-01-06T15:27:40.811259533Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.811268732Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:27:40.811268893Z [err]      )
2026-01-06T15:27:40.811269075Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.811277438Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:27:40.811278026Z [err]      event = get_active_event()
2026-01-06T15:27:40.811281873Z [err]      ^
2026-01-06T15:27:40.811287433Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:27:40.811291083Z [err]      await app(scope, receive, sender)
2026-01-06T15:27:40.811296936Z [err]      cur.execute(
2026-01-06T15:27:40.811296946Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:27:40.811303083Z [err]      ~~~~~~~~~~~^
2026-01-06T15:27:40.811308717Z [err]      return await dependant.call(**values)
2026-01-06T15:27:40.811309110Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:27:40.811313841Z [err]          """
2026-01-06T15:27:40.811321458Z [err]      response = await f(request)
2026-01-06T15:27:40.811323952Z [err]          ^^^
2026-01-06T15:27:40.811331110Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:27:40.811339460Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:27:40.811346143Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:27:40.811768042Z [err]      )
2026-01-06T15:27:40.811773447Z [err]      ^
2026-01-06T15:27:40.811782024Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:27:40.811785953Z [err]      return super().execute(query, vars)
2026-01-06T15:27:40.811789728Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:27:40.811793783Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:27:40.811797903Z [err]  LINE 5:           AND active = 1
2026-01-06T15:27:40.811802192Z [err]                               ^
2026-01-06T15:27:40.811806455Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:27:40.811810290Z [err]  
2026-01-06T15:27:41.927206822Z [inf]  ðŸ“¨ 27722135094: 4Km 27:11 SBK03E
2026-01-06T15:27:42.278243056Z [err]  	        
2026-01-06T15:27:42.278256165Z [err]  2026-01-06 15:27:33.693 UTC [8370] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:27:42.278266856Z [err]  2026-01-06 15:27:33.693 UTC [8370] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:27:42.278273851Z [err]  2026-01-06 15:27:33.693 UTC [8370] STATEMENT:  
2026-01-06T15:27:42.278282503Z [err]  	        SELECT event
2026-01-06T15:27:42.278288767Z [err]  	        FROM event_config
2026-01-06T15:27:42.278294785Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:27:42.278301068Z [err]  	          AND active = 1
2026-01-06T15:27:42.278308846Z [err]  	          AND '15:27' BETWEEN open_time AND close_time
2026-01-06T15:27:42.278316482Z [err]  	        LIMIT 1;
2026-01-06T15:27:42.278325784Z [err]  	        
2026-01-06T15:27:42.278333431Z [err]  2026-01-06 15:27:34.272 UTC [8372] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:27:42.278342123Z [err]  2026-01-06 15:27:34.272 UTC [8372] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:27:42.278400825Z [err]  2026-01-06 15:27:33.132 UTC [8368] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:27:42.278407695Z [err]  2026-01-06 15:27:33.132 UTC [8368] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:27:42.278414031Z [err]  2026-01-06 15:27:33.132 UTC [8368] STATEMENT:  
2026-01-06T15:27:42.278420161Z [err]  	        SELECT event
2026-01-06T15:27:42.278426107Z [err]  	        FROM event_config
2026-01-06T15:27:42.278433263Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:27:42.278457199Z [err]  	          AND active = 1
2026-01-06T15:27:42.278465874Z [err]  	          AND '15:27' BETWEEN open_time AND close_time
2026-01-06T15:27:42.278472458Z [err]  	        LIMIT 1;
2026-01-06T15:27:42.285947929Z [err]  2026-01-06 15:27:34.272 UTC [8372] STATEMENT:  
2026-01-06T15:27:42.285961854Z [err]  	        SELECT event
2026-01-06T15:27:42.285970102Z [err]  	        FROM event_config
2026-01-06T15:27:42.285978692Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:27:42.285988167Z [err]  	          AND active = 1
2026-01-06T15:27:42.285988232Z [err]  2026-01-06 15:27:38.938 UTC [8376] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:27:42.285996283Z [err]  	          AND '15:27' BETWEEN open_time AND close_time
2026-01-06T15:27:42.286001789Z [err]  2026-01-06 15:27:38.938 UTC [8376] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:27:42.286007000Z [err]  	        LIMIT 1;
2026-01-06T15:27:42.286010364Z [err]  2026-01-06 15:27:38.938 UTC [8376] STATEMENT:  
2026-01-06T15:27:42.286015808Z [err]  	        
2026-01-06T15:27:42.286019160Z [err]  	        SELECT event
2026-01-06T15:27:42.286025555Z [err]  2026-01-06 15:27:36.244 UTC [8374] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:27:42.286026229Z [err]  	        FROM event_config
2026-01-06T15:27:42.286034368Z [err]  2026-01-06 15:27:36.244 UTC [8374] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:27:42.286041256Z [err]  2026-01-06 15:27:36.244 UTC [8374] STATEMENT:  
2026-01-06T15:27:42.286052778Z [err]  	        SELECT event
2026-01-06T15:27:42.286061756Z [err]  	        FROM event_config
2026-01-06T15:27:42.286069566Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:27:42.286076046Z [err]  	          AND active = 1
2026-01-06T15:27:42.286082572Z [err]  	          AND '15:27' BETWEEN open_time AND close_time
2026-01-06T15:27:42.286089814Z [err]  	        LIMIT 1;
2026-01-06T15:27:42.286098056Z [err]  	        
2026-01-06T15:27:42.290117517Z [err]  2026-01-06 15:27:40.081 UTC [8380] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:27:42.290130902Z [err]  2026-01-06 15:27:40.081 UTC [8380] STATEMENT:  
2026-01-06T15:27:42.290139294Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:27:42.290141836Z [err]  	        SELECT event
2026-01-06T15:27:42.290152888Z [err]  	          AND active = 1
2026-01-06T15:27:42.290153806Z [err]  	        FROM event_config
2026-01-06T15:27:42.290162640Z [err]  	          AND '15:27' BETWEEN open_time AND close_time
2026-01-06T15:27:42.290164391Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:27:42.290174323Z [err]  	          AND active = 1
2026-01-06T15:27:42.290180791Z [err]  	        LIMIT 1;
2026-01-06T15:27:42.290184155Z [err]  	          AND '15:27' BETWEEN open_time AND close_time
2026-01-06T15:27:42.290189176Z [err]  	        
2026-01-06T15:27:42.290197308Z [err]  2026-01-06 15:27:39.805 UTC [8378] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:27:42.290204132Z [err]  2026-01-06 15:27:39.805 UTC [8378] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:27:42.290212496Z [err]  2026-01-06 15:27:39.805 UTC [8378] STATEMENT:  
2026-01-06T15:27:42.290220644Z [err]  	        SELECT event
2026-01-06T15:27:42.290227764Z [err]  	        FROM event_config
2026-01-06T15:27:42.290234591Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:27:42.290240467Z [err]  	          AND active = 1
2026-01-06T15:27:42.290247766Z [err]  	          AND '15:27' BETWEEN open_time AND close_time
2026-01-06T15:27:42.290253949Z [err]  	        LIMIT 1;
2026-01-06T15:27:42.290260580Z [err]  	        
2026-01-06T15:27:42.290266472Z [err]  2026-01-06 15:27:40.081 UTC [8380] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:27:42.295951450Z [err]  	        LIMIT 1;
2026-01-06T15:27:42.295966181Z [err]  	        
2026-01-06T15:27:42.295977288Z [err]  2026-01-06 15:27:40.802 UTC [8382] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:27:42.295988695Z [err]  2026-01-06 15:27:40.802 UTC [8382] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:27:42.295998515Z [err]  2026-01-06 15:27:40.802 UTC [8382] STATEMENT:  
2026-01-06T15:27:42.296007767Z [err]  	        SELECT event
2026-01-06T15:27:42.296015999Z [err]  	        FROM event_config
2026-01-06T15:27:42.296025079Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:27:42.296033424Z [err]  	          AND active = 1
2026-01-06T15:27:42.296389197Z [err]  	          AND '15:27' BETWEEN open_time AND close_time
2026-01-06T15:27:42.296400629Z [err]  	        LIMIT 1;
2026-01-06T15:27:42.296407911Z [err]  	        
2026-01-06T15:27:42.296415030Z [err]  2026-01-06 15:27:42.171 UTC [8384] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:27:42.296423070Z [err]  2026-01-06 15:27:42.171 UTC [8384] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:27:42.296430943Z [err]  2026-01-06 15:27:42.171 UTC [8384] STATEMENT:  
2026-01-06T15:27:42.296436426Z [err]  	        SELECT event
2026-01-06T15:27:42.296441302Z [err]  	        FROM event_config
2026-01-06T15:27:42.296447142Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:27:42.296454042Z [err]  	          AND active = 1
2026-01-06T15:27:42.296460691Z [err]  	          AND '15:27' BETWEEN open_time AND close_time
2026-01-06T15:27:42.296466757Z [err]  	        LIMIT 1;
2026-01-06T15:27:42.296471492Z [err]  	        
2026-01-06T15:27:42.312006578Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:27:42.312019945Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:27:42.312022550Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:27:42.312024650Z [err]      ^
2026-01-06T15:27:42.312027183Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:42.312030172Z [inf]  INFO:     100.64.0.6:33450 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:27:42.312030215Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:27:42.312035612Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:27:42.312036732Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:27:42.312038480Z [err]      raise exc
2026-01-06T15:27:42.312040864Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:27:42.312042628Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:27:42.312048669Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:27:42.312050284Z [err]          self.scope, self.receive, self.send
2026-01-06T15:27:42.312052959Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:42.312061844Z [err]  Traceback (most recent call last):
2026-01-06T15:27:42.312069466Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:27:42.312074449Z [err]      )
2026-01-06T15:27:42.312078134Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:27:42.312085579Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:42.317034307Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:27:42.317039216Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:27:42.317043719Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:27:42.317049152Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:27:42.317053500Z [err]      raise exc
2026-01-06T15:27:42.317059303Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:27:42.317064177Z [err]      await app(scope, receive, sender)
2026-01-06T15:27:42.317070225Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:27:42.317075221Z [err]      await self.app(scope, receive, send)
2026-01-06T15:27:42.317079584Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:27:42.317085695Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:27:42.317090233Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:27:42.317094230Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:27:42.317098357Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:27:42.317101963Z [err]      await self.app(scope, receive, send)
2026-01-06T15:27:42.317105706Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:27:42.317109654Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:27:42.317114160Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:27:42.317118700Z [err]      raise exc
2026-01-06T15:27:42.317122660Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:27:42.317126876Z [err]      await app(scope, receive, sender)
2026-01-06T15:27:42.317130670Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:27:42.317135169Z [err]      response = await f(request)
2026-01-06T15:27:42.317139411Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:27:42.317144953Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:27:42.317149448Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:27:42.317154011Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:42.317159486Z [err]      ...<3 lines>...
2026-01-06T15:27:42.317163717Z [err]      )
2026-01-06T15:27:42.317169742Z [err]      ^
2026-01-06T15:27:42.317173709Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:27:42.317177924Z [err]      return await dependant.call(**values)
2026-01-06T15:27:42.317181885Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:42.317186256Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:27:42.317190620Z [err]      event = get_active_event()
2026-01-06T15:27:42.317194352Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:27:42.317198420Z [err]      cur.execute(
2026-01-06T15:27:42.317203737Z [err]      ~~~~~~~~~~~^
2026-01-06T15:27:42.317207498Z [err]          """
2026-01-06T15:27:42.317211920Z [err]          ^^^
2026-01-06T15:27:42.317215891Z [err]      ...<7 lines>...
2026-01-06T15:27:42.317219775Z [err]          (day_of_week, current_time),
2026-01-06T15:27:42.317224282Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:27:42.317229251Z [err]      )
2026-01-06T15:27:42.317233226Z [err]      ^
2026-01-06T15:27:42.317243408Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:27:42.317250250Z [err]      return super().execute(query, vars)
2026-01-06T15:27:42.317257890Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:27:42.317266060Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:27:42.317273299Z [err]  LINE 5:           AND active = 1
2026-01-06T15:27:42.317278618Z [err]                               ^
2026-01-06T15:27:42.317283404Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:27:42.317288365Z [err]  
2026-01-06T15:27:46.410318282Z [err]  2026-01-06 15:27:46.363 UTC [76] LOG:  checkpoint starting: time
2026-01-06T15:27:47.400096707Z [err]  2026-01-06 15:27:46.707 UTC [76] LOG:  checkpoint complete: wrote 4 buffers (0.0%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.308 s, sync=0.018 s, total=0.344 s; sync files=4, longest=0.016 s, average=0.005 s; distance=1 kB, estimate=39 kB; lsn=0/1A02378, redo lsn=0/1A02320
2026-01-06T15:27:58.280999216Z [err]  Railway rate limit of 500 logs/sec reached for replica, update your application to reduce the logging rate. Messages dropped: 6
2026-01-06T15:28:07.594690202Z [err]  2026-01-06 15:28:06.468 UTC [8388] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:28:07.594697211Z [err]  2026-01-06 15:28:06.468 UTC [8388] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:28:07.594704340Z [err]  2026-01-06 15:28:06.468 UTC [8388] STATEMENT:  
2026-01-06T15:28:07.594711317Z [err]  	        SELECT event
2026-01-06T15:28:07.594718347Z [err]  	        FROM event_config
2026-01-06T15:28:07.594724417Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:28:07.594731847Z [err]  	          AND active = 1
2026-01-06T15:28:07.594739227Z [err]  	          AND '15:28' BETWEEN open_time AND close_time
2026-01-06T15:28:07.594746002Z [err]  	        LIMIT 1;
2026-01-06T15:28:07.594753381Z [err]  	        
2026-01-06T15:28:12.285579333Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:28:12.285582611Z [err]      )
2026-01-06T15:28:12.285595580Z [inf]  ðŸ“¨ 27722135094: 4Km 27:11 SBK03E
2026-01-06T15:28:12.285596350Z [err]      ^
2026-01-06T15:28:12.285601688Z [inf]  INFO:     100.64.0.5:29212 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:28:12.285606372Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:28:12.285607946Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:28:12.285613600Z [err]  Traceback (most recent call last):
2026-01-06T15:28:12.285617967Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:28:12.285620463Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:28:12.285626330Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:28:12.285627666Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:28:12.285631553Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:28:12.285637674Z [err]          self.scope, self.receive, self.send
2026-01-06T15:28:12.285638213Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:28:12.285645290Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:28:12.285647681Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:28:12.285655910Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:28:12.285697370Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:28:12.285707780Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:28:12.285716457Z [err]      raise exc
2026-01-06T15:28:12.286522194Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:28:12.286532547Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:28:12.286532591Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:28:12.286542549Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:28:12.286546754Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:28:12.286551109Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:28:12.286555051Z [err]      raise exc
2026-01-06T15:28:12.286559264Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:28:12.286564148Z [err]      await app(scope, receive, sender)
2026-01-06T15:28:12.286567880Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:28:12.286571799Z [err]      await self.app(scope, receive, send)
2026-01-06T15:28:12.286575597Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:28:12.286581455Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:28:12.286586831Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:28:12.286590750Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:28:12.286594385Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:28:12.286598217Z [err]      await self.app(scope, receive, send)
2026-01-06T15:28:12.286602305Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:28:12.287885893Z [err]          """
2026-01-06T15:28:12.287892404Z [err]      raise exc
2026-01-06T15:28:12.287893787Z [err]          ^^^
2026-01-06T15:28:12.287897044Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:28:12.287902573Z [err]      ...<7 lines>...
2026-01-06T15:28:12.287908121Z [err]      return await dependant.call(**values)
2026-01-06T15:28:12.287910967Z [err]          (day_of_week, current_time),
2026-01-06T15:28:12.287912318Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:28:12.287917408Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:28:12.287919900Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:28:12.287926067Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:28:12.287929106Z [err]      await app(scope, receive, sender)
2026-01-06T15:28:12.287935417Z [err]      event = get_active_event()
2026-01-06T15:28:12.287944870Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:28:12.287944942Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:28:12.287950668Z [err]      cur.execute(
2026-01-06T15:28:12.287957976Z [err]      response = await f(request)
2026-01-06T15:28:12.287961737Z [err]      ~~~~~~~~~~~^
2026-01-06T15:28:12.287970047Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:28:12.287978029Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:28:12.287985994Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:28:12.287993143Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:28:12.288001061Z [err]      ...<3 lines>...
2026-01-06T15:28:12.288008634Z [err]      )
2026-01-06T15:28:12.288015343Z [err]      ^
2026-01-06T15:28:12.288900790Z [err]      )
2026-01-06T15:28:12.288902805Z [err]  
2026-01-06T15:28:12.288908190Z [err]      ^
2026-01-06T15:28:12.288914484Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:28:12.288922631Z [err]      return super().execute(query, vars)
2026-01-06T15:28:12.288928935Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:28:12.288935171Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:28:12.288941297Z [err]  LINE 5:           AND active = 1
2026-01-06T15:28:12.288947693Z [err]                               ^
2026-01-06T15:28:12.288954731Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:29:09.548616771Z [err]  2026-01-06 15:29:05.953 UTC [8393] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:29:09.548626778Z [err]  2026-01-06 15:29:05.953 UTC [8393] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:29:09.548634792Z [err]  2026-01-06 15:29:05.953 UTC [8393] STATEMENT:  
2026-01-06T15:29:09.548643969Z [err]  	        SELECT event
2026-01-06T15:29:09.548651918Z [err]  	        FROM event_config
2026-01-06T15:29:09.548907565Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:29:09.548919136Z [err]  	          AND active = 1
2026-01-06T15:29:09.548927547Z [err]  	          AND '15:29' BETWEEN open_time AND close_time
2026-01-06T15:29:09.548935227Z [err]  	        LIMIT 1;
2026-01-06T15:29:09.548941218Z [err]  	        
2026-01-06T15:29:09.548947243Z [err]  2026-01-06 15:29:07.067 UTC [8395] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:29:09.548953800Z [err]  2026-01-06 15:29:07.067 UTC [8395] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:29:09.548959847Z [err]  2026-01-06 15:29:07.067 UTC [8395] STATEMENT:  
2026-01-06T15:29:09.548969584Z [err]  	        SELECT event
2026-01-06T15:29:09.548975782Z [err]  	        FROM event_config
2026-01-06T15:29:09.548982205Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:29:09.548988531Z [err]  	          AND active = 1
2026-01-06T15:29:09.548995595Z [err]  	          AND '15:29' BETWEEN open_time AND close_time
2026-01-06T15:29:09.549009381Z [err]  	        LIMIT 1;
2026-01-06T15:29:09.549017282Z [err]  	        
2026-01-06T15:29:09.549023520Z [err]  2026-01-06 15:29:08.397 UTC [8397] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:29:09.549029838Z [err]  2026-01-06 15:29:08.397 UTC [8397] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:29:10.442632043Z [err]  2026-01-06 15:29:08.397 UTC [8397] STATEMENT:  
2026-01-06T15:29:10.442637794Z [err]  	        SELECT event
2026-01-06T15:29:10.442644060Z [err]  	        FROM event_config
2026-01-06T15:29:10.442650496Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:29:10.442658910Z [err]  	          AND active = 1
2026-01-06T15:29:10.442664578Z [err]  	          AND '15:29' BETWEEN open_time AND close_time
2026-01-06T15:29:10.442670958Z [err]  	        LIMIT 1;
2026-01-06T15:29:10.442678423Z [err]  	        
2026-01-06T15:29:11.664206496Z [err]  2026-01-06 15:29:10.935 UTC [8399] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:29:11.664214674Z [err]  2026-01-06 15:29:10.935 UTC [8399] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:29:11.664221700Z [err]  2026-01-06 15:29:10.935 UTC [8399] STATEMENT:  
2026-01-06T15:29:11.664229381Z [err]  	        SELECT event
2026-01-06T15:29:11.664237761Z [err]  	        FROM event_config
2026-01-06T15:29:11.664246862Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:29:11.664255441Z [err]  	          AND active = 1
2026-01-06T15:29:11.664412988Z [err]  	          AND '15:29' BETWEEN open_time AND close_time
2026-01-06T15:29:11.664425822Z [err]  	        LIMIT 1;
2026-01-06T15:29:11.664433922Z [err]  	        
2026-01-06T15:29:12.316453520Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:29:12.316463347Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:29:12.316486194Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:29:12.316487153Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:29:12.316488257Z [inf]  ðŸ“¨ 27634045059: Johanna (Jolanda) Potgieter
2026-01-06T15:29:12.316494673Z [inf]  INFO:     100.64.0.7:20416 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:29:12.316497237Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:29:12.316497955Z [err]      raise exc
2026-01-06T15:29:12.316502424Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:29:12.316503091Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:29:12.316510256Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:29:12.316510320Z [err]  Traceback (most recent call last):
2026-01-06T15:29:12.316514913Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:29:12.316518871Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:29:12.316521016Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:29:12.316526664Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:29:12.316534231Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:29:12.316541533Z [err]          self.scope, self.receive, self.send
2026-01-06T15:29:12.316547460Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:29:12.316553487Z [err]      )
2026-01-06T15:29:12.316560799Z [err]      ^
2026-01-06T15:29:12.317658416Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:29:12.317658859Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:29:12.317669937Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:29:12.317678950Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:29:12.317680823Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:29:12.317691966Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:29:12.317692337Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:29:12.317700327Z [err]      raise exc
2026-01-06T15:29:12.317704990Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:29:12.317706897Z [err]      await self.app(scope, receive, send)
2026-01-06T15:29:12.317709814Z [err]      await app(scope, receive, sender)
2026-01-06T15:29:12.317715685Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:29:12.317717320Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:29:12.317721081Z [err]      await self.app(scope, receive, send)
2026-01-06T15:29:12.317727549Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:29:12.317728305Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:29:12.317732658Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:29:12.317737631Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:29:12.319376100Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:29:12.319382771Z [err]      raise exc
2026-01-06T15:29:12.319385094Z [err]      event = get_active_event()
2026-01-06T15:29:12.319389810Z [err]      )
2026-01-06T15:29:12.319396498Z [err]      ^
2026-01-06T15:29:12.319396822Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:29:12.319397903Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:29:12.319402365Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:29:12.319406072Z [err]          ^^^
2026-01-06T15:29:12.319407174Z [err]      cur.execute(
2026-01-06T15:29:12.319407697Z [err]      await app(scope, receive, sender)
2026-01-06T15:29:12.319409028Z [err]      return await dependant.call(**values)
2026-01-06T15:29:12.319414732Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:29:12.319415558Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:29:12.319417422Z [err]      ~~~~~~~~~~~^
2026-01-06T15:29:12.319418520Z [err]      ...<7 lines>...
2026-01-06T15:29:12.319421741Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:29:12.319423696Z [err]      response = await f(request)
2026-01-06T15:29:12.319426621Z [err]          """
2026-01-06T15:29:12.319428439Z [err]          (day_of_week, current_time),
2026-01-06T15:29:12.319432861Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:29:12.319439777Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:29:12.319447473Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:29:12.319457311Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:29:12.319464879Z [err]      ...<3 lines>...
2026-01-06T15:29:12.320659563Z [err]  Traceback (most recent call last):
2026-01-06T15:29:12.320662718Z [err]      )
2026-01-06T15:29:12.320668867Z [err]      ^
2026-01-06T15:29:12.320670172Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:29:12.320674201Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:29:12.320679954Z [err]      return super().execute(query, vars)
2026-01-06T15:29:12.320680841Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:29:12.320685024Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:29:12.320690586Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:29:12.320691056Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:29:12.320697135Z [err]  LINE 5:           AND active = 1
2026-01-06T15:29:12.320700667Z [err]          self.scope, self.receive, self.send
2026-01-06T15:29:12.320705427Z [err]                               ^
2026-01-06T15:29:12.320709969Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:29:12.320713601Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:29:12.320719104Z [err]      )
2026-01-06T15:29:12.320724213Z [err]  
2026-01-06T15:29:12.320727835Z [err]      ^
2026-01-06T15:29:12.320733387Z [inf]  ðŸ“¨ 27634045059: Johanna (Jolanda) Potgieter
2026-01-06T15:29:12.320736605Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:29:12.320742495Z [inf]  INFO:     100.64.0.5:10706 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:29:12.320743001Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:29:12.320750286Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:29:12.321942123Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:29:12.321953842Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:29:12.321958234Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:29:12.321961833Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:29:12.321967205Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:29:12.321970215Z [err]      await app(scope, receive, sender)
2026-01-06T15:29:12.321972856Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:29:12.321978379Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:29:12.321980534Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:29:12.321984274Z [err]      raise exc
2026-01-06T15:29:12.321990494Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:29:12.321992182Z [err]      await self.app(scope, receive, send)
2026-01-06T15:29:12.321996401Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:29:12.322000940Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:29:12.322004215Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:29:12.322010688Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:29:12.322017220Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:29:12.322023573Z [err]      raise exc
2026-01-06T15:29:12.323771126Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:29:12.323782686Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:29:12.323790796Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:29:12.323796664Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:29:12.323801657Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:29:12.323806471Z [err]      await self.app(scope, receive, send)
2026-01-06T15:29:12.323811498Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:29:12.323815939Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:29:12.323819904Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:29:12.323823991Z [err]      raise exc
2026-01-06T15:29:12.323828113Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:29:12.323834271Z [err]      await app(scope, receive, sender)
2026-01-06T15:29:12.323838414Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:29:12.323843122Z [err]      response = await f(request)
2026-01-06T15:29:12.323847100Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:29:12.323850886Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:29:12.323854831Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:29:12.323858646Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:29:12.323864027Z [err]      ...<3 lines>...
2026-01-06T15:29:12.323869564Z [err]      )
2026-01-06T15:29:12.323874500Z [err]      ^
2026-01-06T15:29:12.325220259Z [err]      return await dependant.call(**values)
2026-01-06T15:29:12.325229062Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:29:12.325237057Z [err]      ^
2026-01-06T15:29:12.325237140Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:29:12.325242793Z [err]      event = get_active_event()
2026-01-06T15:29:12.325250471Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:29:12.325251285Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:29:12.325257953Z [err]      cur.execute(
2026-01-06T15:29:12.325262519Z [err]      return super().execute(query, vars)
2026-01-06T15:29:12.325266285Z [err]      ~~~~~~~~~~~^
2026-01-06T15:29:12.325272901Z [err]          """
2026-01-06T15:29:12.325275641Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:29:12.325282735Z [err]          ^^^
2026-01-06T15:29:12.325287135Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:29:12.325295261Z [err]      ...<7 lines>...
2026-01-06T15:29:12.325297320Z [err]  LINE 5:           AND active = 1
2026-01-06T15:29:12.325308867Z [err]          (day_of_week, current_time),
2026-01-06T15:29:12.325309014Z [err]                               ^
2026-01-06T15:29:12.325320977Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:29:12.325322655Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:29:12.325334834Z [err]  
2026-01-06T15:29:12.325335354Z [err]      )
2026-01-06T15:29:12.325344091Z [inf]  ðŸ“¨ 27634045059: Johanna (Jolanda) Potgieter
2026-01-06T15:29:12.325350467Z [inf]  INFO:     100.64.0.4:10362 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:29:12.325357548Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:29:12.376129411Z [err]  Traceback (most recent call last):
2026-01-06T15:29:12.376140281Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:29:12.376147056Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:29:12.376153952Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:29:12.376160367Z [err]          self.scope, self.receive, self.send
2026-01-06T15:29:12.376166825Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:29:12.376173258Z [err]      )
2026-01-06T15:29:12.376181915Z [err]      ^
2026-01-06T15:29:12.376190601Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:29:12.376199288Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:29:12.376207108Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:29:12.376215542Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:29:12.376223682Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:29:12.376231749Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:29:12.376241130Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:29:12.376250460Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:29:12.376260704Z [err]      raise exc
2026-01-06T15:29:12.376266301Z [err]      await self.app(scope, receive, send)
2026-01-06T15:29:12.376271662Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:29:12.376278100Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:29:12.376283377Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:29:12.376289528Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:29:12.376293605Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:29:12.376302789Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:29:12.376307493Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:29:12.376312620Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:29:12.376314934Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:29:12.376321746Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:29:12.376322150Z [err]      raise exc
2026-01-06T15:29:12.376330071Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:29:12.376334473Z [err]      event = get_active_event()
2026-01-06T15:29:12.376336272Z [err]          """
2026-01-06T15:29:12.376339670Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:29:12.376339720Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:29:12.376340307Z [err]      await app(scope, receive, sender)
2026-01-06T15:29:12.376349263Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:29:12.376349450Z [err]          ^^^
2026-01-06T15:29:12.376351146Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:29:12.376351814Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:29:12.376359285Z [err]      ^
2026-01-06T15:29:12.376360345Z [err]      await self.app(scope, receive, send)
2026-01-06T15:29:12.376360513Z [err]      await self.app(scope, receive, send)
2026-01-06T15:29:12.376362505Z [err]      ...<7 lines>...
2026-01-06T15:29:12.376366552Z [err]  LINE 5:           AND active = 1
2026-01-06T15:29:12.376367073Z [err]      cur.execute(
2026-01-06T15:29:12.376367413Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:29:12.376367630Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:29:12.376373733Z [err]  
2026-01-06T15:29:12.376376501Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:29:12.376377850Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:29:12.376378234Z [err]          (day_of_week, current_time),
2026-01-06T15:29:12.376381034Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:29:12.376382054Z [err]      ...<3 lines>...
2026-01-06T15:29:12.376382217Z [err]      ~~~~~~~~~~~^
2026-01-06T15:29:12.376382842Z [err]                               ^
2026-01-06T15:29:12.376385225Z [err]      return super().execute(query, vars)
2026-01-06T15:29:12.376389491Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:29:12.376394115Z [err]      return await dependant.call(**values)
2026-01-06T15:29:12.376394983Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:29:12.376395667Z [err]      )
2026-01-06T15:29:12.376397502Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:29:12.376400204Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:29:12.376401249Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:29:12.376406149Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:29:12.376409209Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:29:12.376411742Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:29:12.376413454Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:29:12.376414558Z [err]      )
2026-01-06T15:29:12.376423499Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:29:12.376424357Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:29:12.376426707Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:29:12.376428113Z [err]      ^
2026-01-06T15:29:12.376438181Z [err]      raise exc
2026-01-06T15:29:12.376438733Z [err]      await self.app(scope, receive, send)
2026-01-06T15:29:12.376452751Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:29:12.376454293Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:29:12.376468198Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:29:12.376469066Z [err]      await app(scope, receive, sender)
2026-01-06T15:29:12.376482563Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:29:12.376484422Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:29:12.376496465Z [err]      response = await f(request)
2026-01-06T15:29:12.376498534Z [err]      raise exc
2026-01-06T15:29:12.376508126Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:29:12.376516763Z [err]      await app(scope, receive, sender)
2026-01-06T15:29:12.376530988Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:29:12.376536780Z [err]      response = await f(request)
2026-01-06T15:29:12.376542104Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:29:12.376547938Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:29:12.376561302Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:29:12.376567340Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:29:12.376576007Z [err]      ...<3 lines>...
2026-01-06T15:29:12.376582126Z [err]      )
2026-01-06T15:29:12.376588069Z [err]      ^
2026-01-06T15:29:12.376593756Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:29:12.376599260Z [err]      return await dependant.call(**values)
2026-01-06T15:29:12.376606605Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:29:12.376612628Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:29:12.376618147Z [err]      event = get_active_event()
2026-01-06T15:29:12.376623550Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:29:12.376629394Z [err]      cur.execute(
2026-01-06T15:29:12.376636596Z [err]      ~~~~~~~~~~~^
2026-01-06T15:29:12.376642372Z [err]          """
2026-01-06T15:29:12.376647865Z [err]          ^^^
2026-01-06T15:29:12.376654061Z [err]      ...<7 lines>...
2026-01-06T15:29:12.376660798Z [err]          (day_of_week, current_time),
2026-01-06T15:29:12.376671325Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:29:12.376681217Z [err]      )
2026-01-06T15:29:12.376689942Z [err]      ^
2026-01-06T15:29:12.376697756Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:29:12.376705339Z [err]      return super().execute(query, vars)
2026-01-06T15:29:12.376711481Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:29:12.376721388Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:29:12.376727006Z [err]  LINE 5:           AND active = 1
2026-01-06T15:29:12.376732747Z [err]                               ^
2026-01-06T15:29:12.376738363Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:29:12.376744317Z [err]  
2026-01-06T15:29:12.376753810Z [inf]  ðŸ“¨ 27634045059: Johanna (Jolanda) Potgieter
2026-01-06T15:29:12.376759577Z [inf]  INFO:     100.64.0.4:13758 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:29:12.376764875Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:29:12.376770901Z [err]  Traceback (most recent call last):
2026-01-06T15:29:12.376776068Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:29:12.376782845Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:29:12.376789195Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:29:12.376797955Z [err]          self.scope, self.receive, self.send
2026-01-06T15:29:12.376805721Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:29:12.376813510Z [err]      )
2026-01-06T15:29:12.376821569Z [err]      ^
2026-01-06T15:29:12.376831684Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:29:12.376837148Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:29:12.376842506Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:29:12.376848327Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:29:12.376854155Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:29:12.376861546Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:29:12.376868169Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:29:12.376873878Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:29:12.376878908Z [err]      raise exc
2026-01-06T15:29:12.376884135Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:29:12.376889190Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:29:12.376896120Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:29:12.376900998Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:29:12.376906133Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:29:12.376911201Z [err]      raise exc
2026-01-06T15:29:12.376916419Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:29:12.376931088Z [err]      await app(scope, receive, sender)
2026-01-06T15:29:12.376936253Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:29:42.305540498Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:29:42.305550793Z [err]      raise exc
2026-01-06T15:29:42.305559507Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:29:42.305599485Z [inf]  ðŸ“¨ 27634045059: Johanna (Jolanda) Potgieter
2026-01-06T15:29:42.305608848Z [inf]  INFO:     100.64.0.7:49012 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:29:42.305619985Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:29:42.305628789Z [err]  Traceback (most recent call last):
2026-01-06T15:29:42.305636069Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:29:42.305641978Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:29:42.305647858Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:29:42.305653138Z [err]          self.scope, self.receive, self.send
2026-01-06T15:29:42.305658642Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:29:42.305663780Z [err]      )
2026-01-06T15:29:42.305668974Z [err]      ^
2026-01-06T15:29:42.305675289Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:29:42.305680490Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:29:42.305687549Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:29:42.305693063Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:29:42.305698234Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:29:42.305703694Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:29:42.305708657Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:29:42.306551866Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:29:42.306554096Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:29:42.306560712Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:29:42.306562272Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:29:42.306564757Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:29:42.306568771Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:29:42.306574170Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:29:42.306576394Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:29:42.306579864Z [err]      raise exc
2026-01-06T15:29:42.306586124Z [err]      await self.app(scope, receive, send)
2026-01-06T15:29:42.306586177Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:29:42.306590915Z [err]      await app(scope, receive, sender)
2026-01-06T15:29:42.306595587Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:29:42.306596057Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:29:42.306601961Z [err]      await self.app(scope, receive, send)
2026-01-06T15:29:42.306607016Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:29:42.306611811Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:29:42.306617778Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:29:42.307769591Z [err]      ...<7 lines>...
2026-01-06T15:29:42.307776386Z [err]          (day_of_week, current_time),
2026-01-06T15:29:42.307781386Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:29:42.307792364Z [err]      raise exc
2026-01-06T15:29:42.307801183Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:29:42.307808458Z [err]      await app(scope, receive, sender)
2026-01-06T15:29:42.307814296Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:29:42.307820616Z [err]      response = await f(request)
2026-01-06T15:29:42.307827798Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:29:42.307833437Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:29:42.307838888Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:29:42.307844434Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:29:42.307850097Z [err]      ...<3 lines>...
2026-01-06T15:29:42.307855931Z [err]      )
2026-01-06T15:29:42.307861950Z [err]      ^
2026-01-06T15:29:42.307867590Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:29:42.307873120Z [err]      return await dependant.call(**values)
2026-01-06T15:29:42.307879548Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:29:42.307885893Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:29:42.307891764Z [err]      event = get_active_event()
2026-01-06T15:29:42.307897686Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:29:42.307903260Z [err]      cur.execute(
2026-01-06T15:29:42.307908990Z [err]      ~~~~~~~~~~~^
2026-01-06T15:29:42.307914158Z [err]          """
2026-01-06T15:29:42.307920322Z [err]          ^^^
2026-01-06T15:29:42.308956338Z [err]  
2026-01-06T15:29:42.308956924Z [err]      )
2026-01-06T15:29:42.308964110Z [err]      ^
2026-01-06T15:29:42.308968842Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:29:42.308975762Z [err]      return super().execute(query, vars)
2026-01-06T15:29:42.308982438Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:29:42.308989448Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:29:42.308997093Z [err]  LINE 5:           AND active = 1
2026-01-06T15:29:42.309004553Z [err]                               ^
2026-01-06T15:29:42.309011211Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:29:42.565310825Z [err]  2026-01-06 15:29:33.853 UTC [8402] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:29:42.565319835Z [err]  2026-01-06 15:29:33.853 UTC [8402] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:29:42.565326504Z [err]  2026-01-06 15:29:33.853 UTC [8402] STATEMENT:  
2026-01-06T15:29:42.565334526Z [err]  	        SELECT event
2026-01-06T15:29:42.565341829Z [err]  	        FROM event_config
2026-01-06T15:29:42.565348495Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:29:42.565355876Z [err]  	          AND active = 1
2026-01-06T15:29:42.565363548Z [err]  	          AND '15:29' BETWEEN open_time AND close_time
2026-01-06T15:29:42.565371043Z [err]  	        LIMIT 1;
2026-01-06T15:29:42.565377990Z [err]  	        
2026-01-06T15:30:22.375957901Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:30:22.375971516Z [err]      )
2026-01-06T15:30:22.375980196Z [err]      ^
2026-01-06T15:30:22.375987298Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:30:22.375996994Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:30:22.376003804Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:30:22.376011741Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:30:22.376018816Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:30:22.376025663Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:30:22.376038389Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:30:22.376047813Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:30:22.376047947Z [inf]  ðŸ“¨ 27634045059: Johanna (Jolanda) Potgieter
2026-01-06T15:30:22.376056541Z [inf]  INFO:     100.64.0.9:55864 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:30:22.376057347Z [err]      raise exc
2026-01-06T15:30:22.376063814Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:30:22.376065938Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:30:22.376070332Z [err]  Traceback (most recent call last):
2026-01-06T15:30:22.376077532Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:30:22.376086111Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:30:22.376092320Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:30:22.376100677Z [err]          self.scope, self.receive, self.send
2026-01-06T15:30:22.377805755Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:30:22.377813873Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:30:22.377819102Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:30:22.377824128Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:30:22.377829711Z [err]      raise exc
2026-01-06T15:30:22.377855349Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:30:22.377862353Z [err]      await app(scope, receive, sender)
2026-01-06T15:30:22.377869766Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:30:22.377879886Z [err]      await self.app(scope, receive, send)
2026-01-06T15:30:22.377885421Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:30:22.377889921Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:30:22.377894541Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:30:22.377900513Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:30:22.377905126Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:30:22.377910982Z [err]      await self.app(scope, receive, send)
2026-01-06T15:30:22.377916394Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:30:22.377920793Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:30:22.377925199Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:30:22.378021307Z [err]      raise exc
2026-01-06T15:30:22.378026374Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:30:22.378030221Z [err]      await app(scope, receive, sender)
2026-01-06T15:30:22.378036178Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:30:22.378040939Z [err]      response = await f(request)
2026-01-06T15:30:22.378046093Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:30:22.378049705Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:30:22.378053649Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:30:22.378057568Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:30:22.378061376Z [err]      ...<3 lines>...
2026-01-06T15:30:22.378066062Z [err]      )
2026-01-06T15:30:22.378069712Z [err]      ^
2026-01-06T15:30:22.378073516Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:30:22.378078269Z [err]      return await dependant.call(**values)
2026-01-06T15:30:22.378082358Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:30:22.378086080Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:30:22.378090054Z [err]      event = get_active_event()
2026-01-06T15:30:22.378094200Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:30:22.378098196Z [err]      cur.execute(
2026-01-06T15:30:22.378105388Z [err]      ~~~~~~~~~~~^
2026-01-06T15:30:22.378109596Z [err]          """
2026-01-06T15:30:22.378113251Z [err]          ^^^
2026-01-06T15:30:22.378117173Z [err]      ...<7 lines>...
2026-01-06T15:30:22.378121451Z [err]          (day_of_week, current_time),
2026-01-06T15:30:22.378125023Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:30:22.378181841Z [err]      )
2026-01-06T15:30:22.378185669Z [err]      ^
2026-01-06T15:30:22.378189312Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:30:22.378193898Z [err]      return super().execute(query, vars)
2026-01-06T15:30:22.378198029Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:30:22.378202311Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:30:22.378206156Z [err]  LINE 5:           AND active = 1
2026-01-06T15:30:22.378209714Z [err]                               ^
2026-01-06T15:30:22.378216260Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:30:22.378219814Z [err]  
2026-01-06T15:30:23.294665532Z [err]  2026-01-06 15:30:17.050 UTC [8406] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:30:23.294673486Z [err]  2026-01-06 15:30:17.050 UTC [8406] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:30:23.294680915Z [err]  2026-01-06 15:30:17.050 UTC [8406] STATEMENT:  
2026-01-06T15:30:23.294687032Z [err]  	        SELECT event
2026-01-06T15:30:23.294693579Z [err]  	        FROM event_config
2026-01-06T15:30:23.294700361Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:30:23.294707606Z [err]  	          AND active = 1
2026-01-06T15:30:23.294713330Z [err]  	          AND '15:30' BETWEEN open_time AND close_time
2026-01-06T15:30:23.294720087Z [err]  	        LIMIT 1;
2026-01-06T15:30:23.294727409Z [err]  	        
2026-01-06T15:32:02.396897304Z [inf]  ðŸ“¨ 27832637248: Hi
2026-01-06T15:32:02.396897316Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:32:02.396906087Z [inf]  INFO:     100.64.0.7:30818 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:32:02.396913464Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:32:02.396920783Z [err]  Traceback (most recent call last):
2026-01-06T15:32:02.396927608Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:32:02.396934869Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:32:02.396941663Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:32:02.396957724Z [err]          self.scope, self.receive, self.send
2026-01-06T15:32:02.396965261Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:32:02.396972797Z [err]      )
2026-01-06T15:32:02.396980213Z [err]      ^
2026-01-06T15:32:02.396987297Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:32:02.396993670Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:32:02.397002271Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:32:02.397012847Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:32:02.397018753Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:32:02.397022414Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:32:02.397027886Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:32:02.397032987Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:32:02.397037050Z [err]      raise exc
2026-01-06T15:32:02.398092581Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:32:02.398098607Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:32:02.398103422Z [err]      await self.app(scope, receive, send)
2026-01-06T15:32:02.398112540Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:32:02.398119103Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:32:02.398127149Z [err]      await app(scope, receive, sender)
2026-01-06T15:32:02.398128616Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:32:02.398137585Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:32:02.398141182Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:32:02.398147481Z [err]      raise exc
2026-01-06T15:32:02.398151301Z [err]      await self.app(scope, receive, send)
2026-01-06T15:32:02.398156541Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:32:02.398160237Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:32:02.398169086Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:32:02.398177561Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:32:02.398178598Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:32:02.398186914Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:32:02.398195930Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:32:02.399621477Z [err]      raise exc
2026-01-06T15:32:02.399631849Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:32:02.399638390Z [err]      event = get_active_event()
2026-01-06T15:32:02.399641076Z [err]          (day_of_week, current_time),
2026-01-06T15:32:02.399641355Z [err]      await app(scope, receive, sender)
2026-01-06T15:32:02.399652239Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:32:02.399653807Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:32:02.399654408Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:32:02.399660117Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:32:02.399666242Z [err]      cur.execute(
2026-01-06T15:32:02.399676593Z [err]      ...<3 lines>...
2026-01-06T15:32:02.399677259Z [err]      response = await f(request)
2026-01-06T15:32:02.399678923Z [err]      ~~~~~~~~~~~^
2026-01-06T15:32:02.399690237Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:32:02.399690593Z [err]      )
2026-01-06T15:32:02.399693233Z [err]          """
2026-01-06T15:32:02.399702891Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:32:02.399703136Z [err]      ^
2026-01-06T15:32:02.399706828Z [err]          ^^^
2026-01-06T15:32:02.399714524Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:32:02.399717080Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:32:02.399719838Z [err]      ...<7 lines>...
2026-01-06T15:32:02.399725901Z [err]      return await dependant.call(**values)
2026-01-06T15:32:02.399731851Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:32:02.399739190Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:32:02.400590469Z [err]      )
2026-01-06T15:32:02.400599681Z [err]      ^
2026-01-06T15:32:02.400608621Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:32:02.400616787Z [err]      return super().execute(query, vars)
2026-01-06T15:32:02.400624495Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:32:02.400631925Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:32:02.400639258Z [err]  LINE 5:           AND active = 1
2026-01-06T15:32:02.400646581Z [err]                               ^
2026-01-06T15:32:02.400655047Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:32:02.400662597Z [err]  
2026-01-06T15:32:05.611698982Z [err]  2026-01-06 15:32:00.475 UTC [8414] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:32:05.611706862Z [err]  2026-01-06 15:32:00.475 UTC [8414] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:32:05.611714458Z [err]  2026-01-06 15:32:00.475 UTC [8414] STATEMENT:  
2026-01-06T15:32:05.611723304Z [err]  	        SELECT event
2026-01-06T15:32:05.611731803Z [err]  	        FROM event_config
2026-01-06T15:32:05.611739010Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:32:05.611746467Z [err]  	          AND active = 1
2026-01-06T15:32:05.611754605Z [err]  	          AND '15:32' BETWEEN open_time AND close_time
2026-01-06T15:32:05.611767309Z [err]  	        LIMIT 1;
2026-01-06T15:32:05.611775373Z [err]  	        
2026-01-06T15:32:11.918416893Z [inf]  ðŸ“¨ 27722135094: 4Km 27:11 SBK03E
2026-01-06T15:32:12.186342106Z [err]      raise exc
2026-01-06T15:32:12.186343984Z [inf]  INFO:     100.64.0.8:49494 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:32:12.186350572Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:32:12.186353395Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:32:12.186355710Z [err]  Traceback (most recent call last):
2026-01-06T15:32:12.186359786Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:32:12.186364006Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:32:12.186367882Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:32:12.186371755Z [err]          self.scope, self.receive, self.send
2026-01-06T15:32:12.186375906Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:32:12.186379584Z [err]      )
2026-01-06T15:32:12.186383457Z [err]      ^
2026-01-06T15:32:12.186387014Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:32:12.186390893Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:32:12.186394902Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:32:12.186398574Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:32:12.186402160Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:32:12.186405876Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:32:12.186410453Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:32:12.186414746Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:32:12.191773504Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:32:12.191780874Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:32:12.191787113Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:32:12.191793057Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:32:12.191799957Z [err]      raise exc
2026-01-06T15:32:12.191807078Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:32:12.191812714Z [err]      await app(scope, receive, sender)
2026-01-06T15:32:12.191818488Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:32:12.191824133Z [err]      await self.app(scope, receive, send)
2026-01-06T15:32:12.191829821Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:32:12.191835281Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:32:12.191841376Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:32:12.191847894Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:32:12.191853621Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:32:12.191858739Z [err]      await self.app(scope, receive, send)
2026-01-06T15:32:12.191864420Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:32:12.191869709Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:32:12.191875183Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:32:12.191881497Z [err]      raise exc
2026-01-06T15:32:12.191887188Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:32:12.191893013Z [err]      await app(scope, receive, sender)
2026-01-06T15:32:12.191899157Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:32:12.191904389Z [err]      response = await f(request)
2026-01-06T15:32:12.191909683Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:32:12.191916123Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:32:12.191921569Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:32:12.191927190Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:32:12.191932644Z [err]      ...<3 lines>...
2026-01-06T15:32:12.191938409Z [err]      )
2026-01-06T15:32:12.191943842Z [err]      ^
2026-01-06T15:32:12.191949211Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:32:12.191954395Z [err]      return await dependant.call(**values)
2026-01-06T15:32:12.191959818Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:32:12.191965295Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:32:12.191970430Z [err]      event = get_active_event()
2026-01-06T15:32:12.191975445Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:32:12.191980618Z [err]      cur.execute(
2026-01-06T15:32:12.191986358Z [err]      ~~~~~~~~~~~^
2026-01-06T15:32:12.191992563Z [err]          """
2026-01-06T15:32:12.191997581Z [err]          ^^^
2026-01-06T15:32:12.192005106Z [err]      ...<7 lines>...
2026-01-06T15:32:12.192010289Z [err]          (day_of_week, current_time),
2026-01-06T15:32:12.192015437Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:32:12.192020984Z [err]      )
2026-01-06T15:32:12.192026224Z [err]      ^
2026-01-06T15:32:12.192031281Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:32:12.192036757Z [err]      return super().execute(query, vars)
2026-01-06T15:32:12.192042988Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:32:12.192048526Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:32:12.192053562Z [err]  LINE 5:           AND active = 1
2026-01-06T15:32:12.192059031Z [err]                               ^
2026-01-06T15:32:12.192064422Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:32:12.192069893Z [err]  
2026-01-06T15:32:12.993454881Z [err]  	        LIMIT 1;
2026-01-06T15:32:12.993550816Z [err]  2026-01-06 15:32:12.179 UTC [8417] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:32:12.993558650Z [err]  2026-01-06 15:32:12.179 UTC [8417] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:32:12.993565706Z [err]  2026-01-06 15:32:12.179 UTC [8417] STATEMENT:  
2026-01-06T15:32:12.993572893Z [err]  	        SELECT event
2026-01-06T15:32:12.993581838Z [err]  	        FROM event_config
2026-01-06T15:32:12.993590720Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:32:12.993597791Z [err]  	          AND active = 1
2026-01-06T15:32:12.993605604Z [err]  	          AND '15:32' BETWEEN open_time AND close_time
2026-01-06T15:32:12.993632876Z [err]  	        
2026-01-06T15:33:05.704805253Z [err]  2026-01-06 15:33:02.538 UTC [8422] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:33:05.704812173Z [err]  2026-01-06 15:33:02.538 UTC [8422] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:33:05.704818246Z [err]  2026-01-06 15:33:02.538 UTC [8422] STATEMENT:  
2026-01-06T15:33:05.704824184Z [err]  	        SELECT event
2026-01-06T15:33:05.704830149Z [err]  	        FROM event_config
2026-01-06T15:33:05.704836141Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:33:05.705513758Z [err]  	          AND active = 1
2026-01-06T15:33:05.705523509Z [err]  	          AND '15:33' BETWEEN open_time AND close_time
2026-01-06T15:33:05.705530749Z [err]  	        LIMIT 1;
2026-01-06T15:33:05.705537595Z [err]  	        
2026-01-06T15:33:05.705547857Z [err]  2026-01-06 15:33:02.907 UTC [8424] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:33:05.705555494Z [err]  2026-01-06 15:33:02.907 UTC [8424] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:33:05.705562261Z [err]  2026-01-06 15:33:02.907 UTC [8424] STATEMENT:  
2026-01-06T15:33:05.705568798Z [err]  	        SELECT event
2026-01-06T15:33:05.705575295Z [err]  	        FROM event_config
2026-01-06T15:33:05.705668917Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:33:05.705675803Z [err]  	          AND active = 1
2026-01-06T15:33:05.705682942Z [err]  	          AND '15:33' BETWEEN open_time AND close_time
2026-01-06T15:33:05.705688865Z [err]  	        LIMIT 1;
2026-01-06T15:33:05.705695463Z [err]  	        
2026-01-06T15:33:05.705701468Z [err]  2026-01-06 15:33:03.780 UTC [8426] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:33:05.705711077Z [err]  2026-01-06 15:33:03.780 UTC [8426] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:33:05.711854330Z [err]  2026-01-06 15:33:03.780 UTC [8426] STATEMENT:  
2026-01-06T15:33:05.711868010Z [err]  	        SELECT event
2026-01-06T15:33:05.711877649Z [err]  	        FROM event_config
2026-01-06T15:33:05.711886206Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:33:05.711890408Z [err]  	        FROM event_config
2026-01-06T15:33:05.711894969Z [err]  	          AND active = 1
2026-01-06T15:33:05.711904709Z [err]  	          AND '15:33' BETWEEN open_time AND close_time
2026-01-06T15:33:05.711905044Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:33:05.711913305Z [err]  	        LIMIT 1;
2026-01-06T15:33:05.711915299Z [err]  	          AND active = 1
2026-01-06T15:33:05.711922903Z [err]  	        
2026-01-06T15:33:05.711924881Z [err]  	          AND '15:33' BETWEEN open_time AND close_time
2026-01-06T15:33:05.711931590Z [err]  2026-01-06 15:33:04.705 UTC [8428] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:33:05.711934134Z [err]  	        LIMIT 1;
2026-01-06T15:33:05.711943091Z [err]  2026-01-06 15:33:04.705 UTC [8428] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:33:05.711944868Z [err]  	        
2026-01-06T15:33:05.711950570Z [err]  2026-01-06 15:33:04.705 UTC [8428] STATEMENT:  
2026-01-06T15:33:05.711957339Z [err]  	        SELECT event
2026-01-06T15:33:07.831419148Z [err]  2026-01-06 15:33:07.025 UTC [8430] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:33:07.831425593Z [err]  2026-01-06 15:33:07.025 UTC [8430] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:33:07.831436892Z [err]  2026-01-06 15:33:07.025 UTC [8430] STATEMENT:  
2026-01-06T15:33:07.831444742Z [err]  	        SELECT event
2026-01-06T15:33:07.831451084Z [err]  	        FROM event_config
2026-01-06T15:33:07.831457615Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:33:07.831464362Z [err]  	          AND active = 1
2026-01-06T15:33:07.831475796Z [err]  	          AND '15:33' BETWEEN open_time AND close_time
2026-01-06T15:33:07.831483020Z [err]  	        LIMIT 1;
2026-01-06T15:33:07.831489218Z [err]  	        
2026-01-06T15:33:12.206834042Z [err]  Traceback (most recent call last):
2026-01-06T15:33:12.206846810Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:33:12.206855690Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:33:12.206864486Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:33:12.206872482Z [err]          self.scope, self.receive, self.send
2026-01-06T15:33:12.206880237Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:33:12.206888186Z [err]      )
2026-01-06T15:33:12.206895683Z [err]      ^
2026-01-06T15:33:12.206903567Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:33:12.206911630Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:33:12.206919729Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:33:12.206927446Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:33:12.206934601Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:33:12.206941392Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:33:12.206949339Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:33:12.206956829Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:33:12.206963729Z [err]      raise exc
2026-01-06T15:33:12.206971219Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:33:12.206981012Z [inf]  ðŸ“¨ 27634045059: Sbk03e.  SBK03E
2026-01-06T15:33:12.206987105Z [inf]  INFO:     100.64.0.5:37828 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:33:12.206993209Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:33:12.208159942Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:33:12.208171454Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:33:12.208174642Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:33:12.208175660Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:33:12.208181950Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:33:12.208183437Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:33:12.208185599Z [err]      await self.app(scope, receive, send)
2026-01-06T15:33:12.208187762Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:33:12.208190434Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:33:12.208195823Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:33:12.208201806Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:33:12.208205853Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:33:12.208206936Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:33:12.208211983Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:33:12.208219807Z [err]      raise exc
2026-01-06T15:33:12.208222117Z [err]      await self.app(scope, receive, send)
2026-01-06T15:33:12.208229224Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:33:12.208237769Z [err]      await app(scope, receive, sender)
2026-01-06T15:33:12.208971470Z [err]      raise exc
2026-01-06T15:33:12.208980130Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:33:12.208986495Z [err]      await app(scope, receive, sender)
2026-01-06T15:33:12.208993035Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:33:12.208999750Z [err]      response = await f(request)
2026-01-06T15:33:12.209008774Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:33:12.209015583Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:33:12.209022184Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:33:12.209028676Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:33:12.209035443Z [err]      ...<3 lines>...
2026-01-06T15:33:12.209042693Z [err]      )
2026-01-06T15:33:12.209049281Z [err]      ^
2026-01-06T15:33:12.209054877Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:33:12.209060448Z [err]      return await dependant.call(**values)
2026-01-06T15:33:12.209064476Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:33:12.209068080Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:33:12.209071750Z [err]      event = get_active_event()
2026-01-06T15:33:12.209076870Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:33:12.209083199Z [err]      cur.execute(
2026-01-06T15:33:12.209087613Z [err]      ~~~~~~~~~~~^
2026-01-06T15:33:12.209091334Z [err]          """
2026-01-06T15:33:12.209095023Z [err]          ^^^
2026-01-06T15:33:12.209099853Z [err]      ...<7 lines>...
2026-01-06T15:33:12.209103765Z [err]          (day_of_week, current_time),
2026-01-06T15:33:12.209107297Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:33:12.210056142Z [inf]  INFO:     100.64.0.4:56594 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:33:12.210056361Z [err]      )
2026-01-06T15:33:12.210059770Z [err]      )
2026-01-06T15:33:12.210064580Z [err]      ^
2026-01-06T15:33:12.210065754Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:33:12.210070451Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:33:12.210071588Z [err]      ^
2026-01-06T15:33:12.210074063Z [err]  Traceback (most recent call last):
2026-01-06T15:33:12.210077003Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:33:12.210081178Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:33:12.210082230Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:33:12.210088727Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:33:12.210089300Z [err]      return super().execute(query, vars)
2026-01-06T15:33:12.210095287Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:33:12.210096907Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:33:12.210101510Z [err]          self.scope, self.receive, self.send
2026-01-06T15:33:12.210104691Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:33:12.210107938Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:33:12.210113725Z [err]  LINE 5:           AND active = 1
2026-01-06T15:33:12.210120765Z [err]                               ^
2026-01-06T15:33:12.210127765Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:33:12.210134984Z [err]  
2026-01-06T15:33:12.210143618Z [inf]  ðŸ“¨ 27634045059: 8 km 47:57 SBK03E
2026-01-06T15:33:12.210959862Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:33:12.210967450Z [err]      await self.app(scope, receive, send)
2026-01-06T15:33:12.210970018Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:33:12.210976218Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:33:12.210978680Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:33:12.210980970Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:33:12.210985465Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:33:12.210990107Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:33:12.210992335Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:33:12.210997187Z [err]      raise exc
2026-01-06T15:33:12.210999485Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:33:12.211004700Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:33:12.211007765Z [err]      raise exc
2026-01-06T15:33:12.211011893Z [err]      await app(scope, receive, sender)
2026-01-06T15:33:12.211014201Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:33:12.211019707Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:33:12.211020891Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:33:12.211035275Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:33:12.211938162Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:33:12.211947133Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:33:12.211955444Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:33:12.211961851Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:33:12.211970131Z [err]      await self.app(scope, receive, send)
2026-01-06T15:33:12.211977833Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:33:12.211985211Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:33:12.211991624Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:33:12.211998778Z [err]      raise exc
2026-01-06T15:33:12.212006446Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:33:12.212014209Z [err]      await app(scope, receive, sender)
2026-01-06T15:33:12.212020820Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:33:12.212027085Z [err]      response = await f(request)
2026-01-06T15:33:12.212033195Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:33:12.212039853Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:33:12.212046294Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:33:12.212052755Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:33:12.212059042Z [err]      ...<3 lines>...
2026-01-06T15:33:12.212065084Z [err]      )
2026-01-06T15:33:12.212071203Z [err]      ^
2026-01-06T15:33:12.212077419Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:33:12.213208411Z [inf]  INFO:     100.64.0.3:28486 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:33:12.213210099Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:33:12.213212894Z [err]      return await dependant.call(**values)
2026-01-06T15:33:12.213215715Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:33:12.213218518Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:33:12.213220017Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:33:12.213225771Z [err]  LINE 5:           AND active = 1
2026-01-06T15:33:12.213226464Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:33:12.213227851Z [err]          ^^^
2026-01-06T15:33:12.213233467Z [err]      event = get_active_event()
2026-01-06T15:33:12.213233578Z [err]                               ^
2026-01-06T15:33:12.213234935Z [err]      ...<7 lines>...
2026-01-06T15:33:12.213241115Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:33:12.213241345Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:33:12.213242020Z [err]          (day_of_week, current_time),
2026-01-06T15:33:12.213247708Z [err]      cur.execute(
2026-01-06T15:33:12.213249299Z [err]  
2026-01-06T15:33:12.213250054Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:33:12.213256105Z [inf]  ðŸ“¨ 27634045059: 8 km 47:57 SBK03E
2026-01-06T15:33:12.213257600Z [err]      )
2026-01-06T15:33:12.213262418Z [err]      ~~~~~~~~~~~^
2026-01-06T15:33:12.213262528Z [err]      ^
2026-01-06T15:33:12.213268489Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:33:12.213269139Z [err]          """
2026-01-06T15:33:12.213273081Z [err]      return super().execute(query, vars)
2026-01-06T15:33:12.214681514Z [err]  Traceback (most recent call last):
2026-01-06T15:33:12.214683973Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:33:12.214688357Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:33:12.214691500Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:33:12.214691603Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:33:12.214699348Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:33:12.214699533Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:33:12.214704809Z [err]      ^
2026-01-06T15:33:12.214709513Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:33:12.214709753Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:33:12.214713788Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:33:12.214718885Z [err]          self.scope, self.receive, self.send
2026-01-06T15:33:12.214719208Z [err]      raise exc
2026-01-06T15:33:12.214720852Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:33:12.214727584Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:33:12.214728798Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:33:12.214729204Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:33:12.214734595Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:33:12.214739026Z [err]      )
2026-01-06T15:33:12.214740585Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:33:12.215680503Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:33:12.215688046Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:33:12.215694673Z [err]      raise exc
2026-01-06T15:33:12.215700766Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:33:12.215707137Z [err]      await app(scope, receive, sender)
2026-01-06T15:33:12.215713305Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:33:12.215720123Z [err]      await self.app(scope, receive, send)
2026-01-06T15:33:12.215726693Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:33:12.215733239Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:33:12.215740057Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:33:12.215746291Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:33:12.215753194Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:33:12.215760048Z [err]      await self.app(scope, receive, send)
2026-01-06T15:33:12.215766552Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:33:12.215774215Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:33:12.215780559Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:33:12.215786713Z [err]      raise exc
2026-01-06T15:33:12.215793475Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:33:12.217077294Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:33:12.217080592Z [err]      await app(scope, receive, sender)
2026-01-06T15:33:12.217089489Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:33:12.217097553Z [err]      response = await f(request)
2026-01-06T15:33:12.217099330Z [err]      ~~~~~~~~~~~^
2026-01-06T15:33:12.217105281Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:33:12.217109840Z [err]          """
2026-01-06T15:33:12.217114017Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:33:12.217117697Z [err]          ^^^
2026-01-06T15:33:12.217122094Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:33:12.217122878Z [err]      ...<7 lines>...
2026-01-06T15:33:12.217127141Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:33:12.217128930Z [err]          (day_of_week, current_time),
2026-01-06T15:33:12.217132063Z [err]      ...<3 lines>...
2026-01-06T15:33:12.217135350Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:33:12.217137460Z [err]      )
2026-01-06T15:33:12.217141417Z [err]      )
2026-01-06T15:33:12.217142896Z [err]      ^
2026-01-06T15:33:12.217146626Z [err]      ^
2026-01-06T15:33:12.217149109Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:33:12.217153021Z [err]      return await dependant.call(**values)
2026-01-06T15:33:12.217156542Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:33:12.217160213Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:33:12.217164279Z [err]      event = get_active_event()
2026-01-06T15:33:12.217168074Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:33:12.217171534Z [err]      cur.execute(
2026-01-06T15:33:12.218360322Z [err]      return super().execute(query, vars)
2026-01-06T15:33:12.218366031Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:33:12.218370346Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:33:12.218374301Z [err]  LINE 5:           AND active = 1
2026-01-06T15:33:12.218378294Z [err]                               ^
2026-01-06T15:33:12.218382197Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:33:12.218386673Z [err]  
2026-01-06T15:33:12.218390798Z [inf]  ðŸ“¨ 27634045059: 8 km 47:57 SBK03E
2026-01-06T15:33:12.218395179Z [inf]  INFO:     100.64.0.6:39674 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:33:12.218399464Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:33:12.218403299Z [err]  Traceback (most recent call last):
2026-01-06T15:33:12.218407381Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:33:12.218411347Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:33:12.218415359Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:33:12.218419043Z [err]          self.scope, self.receive, self.send
2026-01-06T15:33:12.218422881Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:33:12.218426824Z [err]      )
2026-01-06T15:33:12.218431130Z [err]      ^
2026-01-06T15:33:12.218436568Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:33:12.218443654Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:33:12.218451097Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:33:12.218456676Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:33:12.219805876Z [err]      await app(scope, receive, sender)
2026-01-06T15:33:12.219816783Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:33:12.219822988Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:33:12.219831824Z [err]      await self.app(scope, receive, send)
2026-01-06T15:33:12.219833321Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:33:12.219841179Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:33:12.219845723Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:33:12.219849282Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:33:12.219856447Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:33:12.219858298Z [err]      raise exc
2026-01-06T15:33:12.219866616Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:33:12.219867864Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:33:12.219871721Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:33:12.219876281Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:33:12.219880051Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:33:12.219883873Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:33:12.219888542Z [err]      raise exc
2026-01-06T15:33:12.219892392Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:33:12.221151171Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:33:12.221155836Z [err]      return await dependant.call(**values)
2026-01-06T15:33:12.221163118Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:33:12.221165522Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:33:12.221172076Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:33:12.221173070Z [err]      await self.app(scope, receive, send)
2026-01-06T15:33:12.221181646Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:33:12.221182788Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:33:12.221189225Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:33:12.221192181Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:33:12.221196694Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:33:12.221200190Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:33:12.221203746Z [err]      ...<3 lines>...
2026-01-06T15:33:12.221206601Z [err]      raise exc
2026-01-06T15:33:12.221211278Z [err]      )
2026-01-06T15:33:12.221213743Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:33:12.221218644Z [err]      ^
2026-01-06T15:33:12.221220357Z [err]      await app(scope, receive, sender)
2026-01-06T15:33:12.221225128Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:33:12.221237527Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:33:12.221243754Z [err]      response = await f(request)
2026-01-06T15:33:12.222454528Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:33:12.222460340Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:33:12.222461490Z [err]      )
2026-01-06T15:33:12.222467260Z [err]      event = get_active_event()
2026-01-06T15:33:12.222467339Z [err]      ^
2026-01-06T15:33:12.222469045Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:33:12.222474245Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:33:12.222474276Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:33:12.222479103Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:33:12.222480015Z [err]      cur.execute(
2026-01-06T15:33:12.222481568Z [err]      return super().execute(query, vars)
2026-01-06T15:33:12.222487596Z [err]      ~~~~~~~~~~~^
2026-01-06T15:33:12.222488734Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:33:12.222493361Z [err]  LINE 5:           AND active = 1
2026-01-06T15:33:12.222493651Z [err]          """
2026-01-06T15:33:12.222500156Z [err]          ^^^
2026-01-06T15:33:12.222501669Z [inf]  ðŸ“¨ 27634045059: 8 km 47:57 SBK03E
2026-01-06T15:33:12.222507164Z [err]                               ^
2026-01-06T15:33:12.222507651Z [err]      ...<7 lines>...
2026-01-06T15:33:12.222511346Z [inf]  INFO:     100.64.0.7:46928 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:33:12.222514726Z [err]          (day_of_week, current_time),
2026-01-06T15:33:12.222518690Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:33:12.222519127Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:33:12.222524119Z [err]  Traceback (most recent call last):
2026-01-06T15:33:12.222529810Z [err]  
2026-01-06T15:33:12.223630721Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:33:12.223636915Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:33:12.223638015Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:33:12.223638474Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:33:12.223649006Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:33:12.223650566Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:33:12.223658168Z [err]          self.scope, self.receive, self.send
2026-01-06T15:33:12.223658724Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:33:12.223664890Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:33:12.223667644Z [err]      raise exc
2026-01-06T15:33:12.223671899Z [err]      )
2026-01-06T15:33:12.223677346Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:33:12.223679524Z [err]      ^
2026-01-06T15:33:12.223685695Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:33:12.223686028Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:33:12.223693898Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:33:12.223694564Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:33:12.223700349Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:33:12.223706290Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:33:12.223711628Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:33:12.224643986Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:33:12.224647497Z [err]      raise exc
2026-01-06T15:33:12.224651023Z [err]      response = await f(request)
2026-01-06T15:33:12.224656934Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:33:12.224663132Z [err]      await app(scope, receive, sender)
2026-01-06T15:33:12.224669236Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:33:12.224675881Z [err]      await self.app(scope, receive, send)
2026-01-06T15:33:12.224682965Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:33:12.224688551Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:33:12.224692274Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:33:12.224696636Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:33:12.224701162Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:33:12.224704791Z [err]      await self.app(scope, receive, send)
2026-01-06T15:33:12.224709183Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:33:12.224713077Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:33:12.224716799Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:33:12.224721562Z [err]      raise exc
2026-01-06T15:33:12.224725173Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:33:12.224729379Z [err]      await app(scope, receive, sender)
2026-01-06T15:33:12.225818154Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:33:12.225824813Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:33:12.225860874Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:33:12.225866136Z [err]          """
2026-01-06T15:33:12.225868447Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:33:12.225868530Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:33:12.225876137Z [err]          ^^^
2026-01-06T15:33:12.225878459Z [err]      ...<3 lines>...
2026-01-06T15:33:12.225878958Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:33:12.225882287Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:33:12.225886324Z [err]      ...<7 lines>...
2026-01-06T15:33:12.225888225Z [err]      ^
2026-01-06T15:33:12.225891334Z [err]      )
2026-01-06T15:33:12.225894686Z [err]      event = get_active_event()
2026-01-06T15:33:12.225896974Z [err]          (day_of_week, current_time),
2026-01-06T15:33:12.225897386Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:33:12.225902179Z [err]      ^
2026-01-06T15:33:12.225905554Z [err]      return super().execute(query, vars)
2026-01-06T15:33:12.225906526Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:33:12.225907021Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:33:12.225911439Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:33:12.225917546Z [err]      )
2026-01-06T15:33:12.225918037Z [err]      cur.execute(
2026-01-06T15:33:12.225919250Z [err]      return await dependant.call(**values)
2026-01-06T15:33:12.225926471Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:33:12.225928355Z [err]      ~~~~~~~~~~~^
2026-01-06T15:33:12.226585537Z [err]  LINE 5:           AND active = 1
2026-01-06T15:33:12.226591287Z [err]                               ^
2026-01-06T15:33:12.226597933Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:33:12.226602086Z [err]  
2026-01-06T15:33:32.221384663Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:33:32.221391353Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:33:32.221396852Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:33:32.221402748Z [err]      raise exc
2026-01-06T15:33:32.221413945Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:33:32.221416172Z [inf]  ðŸ“¨ 27634045059: 8 km 47:57 SBK03E
2026-01-06T15:33:32.221439740Z [inf]  INFO:     100.64.0.9:56570 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:33:32.221445131Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:33:32.221449753Z [err]  Traceback (most recent call last):
2026-01-06T15:33:32.221454021Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:33:32.221478296Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:33:32.221484247Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:33:32.221489098Z [err]          self.scope, self.receive, self.send
2026-01-06T15:33:32.221494320Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:33:32.221500762Z [err]      )
2026-01-06T15:33:32.221508356Z [err]      ^
2026-01-06T15:33:32.221523277Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:33:32.221530207Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:33:32.221537229Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:33:32.221543624Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:33:32.221547883Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:33:32.222790485Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:33:32.222790508Z [err]      await self.app(scope, receive, send)
2026-01-06T15:33:32.222800037Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:33:32.222803422Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:33:32.222807890Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:33:32.222817311Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:33:32.222817382Z [err]      await app(scope, receive, sender)
2026-01-06T15:33:32.222818849Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:33:32.222830679Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:33:32.222832564Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:33:32.222843982Z [err]      await self.app(scope, receive, send)
2026-01-06T15:33:32.222846874Z [err]      raise exc
2026-01-06T15:33:32.222855929Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:33:32.222860436Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:33:32.222870098Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:33:32.222880737Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:33:32.222890155Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:33:32.222900897Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:33:32.223897913Z [err]      raise exc
2026-01-06T15:33:32.223905380Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:33:32.223911882Z [err]          (day_of_week, current_time),
2026-01-06T15:33:32.223913528Z [err]      await app(scope, receive, sender)
2026-01-06T15:33:32.223914887Z [err]      event = get_active_event()
2026-01-06T15:33:32.223921023Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:33:32.223925909Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:33:32.223929753Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:33:32.223929893Z [err]      response = await f(request)
2026-01-06T15:33:32.223935602Z [err]      cur.execute(
2026-01-06T15:33:32.223936971Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:33:32.223942882Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:33:32.223944199Z [err]      ~~~~~~~~~~~^
2026-01-06T15:33:32.223947509Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:33:32.223949893Z [err]          """
2026-01-06T15:33:32.223952699Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:33:32.223956175Z [err]          ^^^
2026-01-06T15:33:32.223957889Z [err]      ...<3 lines>...
2026-01-06T15:33:32.223961956Z [err]      ...<7 lines>...
2026-01-06T15:33:32.223963446Z [err]      )
2026-01-06T15:33:32.223968604Z [err]      ^
2026-01-06T15:33:32.223974097Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:33:32.223977614Z [err]      return await dependant.call(**values)
2026-01-06T15:33:32.223981911Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:33:32.223986133Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:33:32.225345237Z [err]      )
2026-01-06T15:33:32.225351580Z [err]      ^
2026-01-06T15:33:32.225356357Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:33:32.225361933Z [err]      return super().execute(query, vars)
2026-01-06T15:33:32.225367175Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:33:32.225371517Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:33:32.225376602Z [err]  LINE 5:           AND active = 1
2026-01-06T15:33:32.225381100Z [err]                               ^
2026-01-06T15:33:32.225385405Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:33:32.225390389Z [err]  
2026-01-06T15:33:37.496584376Z [err]  2026-01-06 15:33:28.168 UTC [8433] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:33:37.496597848Z [err]  2026-01-06 15:33:28.168 UTC [8433] STATEMENT:  
2026-01-06T15:33:37.496608645Z [err]  	        SELECT event
2026-01-06T15:33:37.496617385Z [err]  	        FROM event_config
2026-01-06T15:33:37.496623215Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:33:37.496630418Z [err]  	          AND active = 1
2026-01-06T15:33:37.496637758Z [err]  	          AND '15:33' BETWEEN open_time AND close_time
2026-01-06T15:33:37.496643202Z [err]  	        LIMIT 1;
2026-01-06T15:33:37.496650294Z [err]  	        
2026-01-06T15:33:37.496771393Z [err]  2026-01-06 15:33:28.168 UTC [8433] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:33:52.223662876Z [inf]  ðŸ“¨ 27634045059: 8 km 47:57 SBK03E
2026-01-06T15:33:52.223673922Z [inf]  INFO:     100.64.0.9:51980 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:33:52.223680445Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:33:52.223689081Z [err]  Traceback (most recent call last):
2026-01-06T15:33:52.223697097Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:33:52.223705279Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:33:52.223713735Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:33:52.223722502Z [err]          self.scope, self.receive, self.send
2026-01-06T15:33:52.223731480Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:33:52.223741161Z [err]      )
2026-01-06T15:33:52.223750161Z [err]      ^
2026-01-06T15:33:52.223758652Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:33:52.223766364Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:33:52.223771794Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:33:52.223780006Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:33:52.223788470Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:33:52.223797570Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:33:52.223806316Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:33:52.223814344Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:33:52.223822381Z [err]      raise exc
2026-01-06T15:33:52.223830515Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:33:52.224751793Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:33:52.224762763Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:33:52.224770564Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:33:52.224779357Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:33:52.224787895Z [err]      raise exc
2026-01-06T15:33:52.224797114Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:33:52.224805806Z [err]      await app(scope, receive, sender)
2026-01-06T15:33:52.224814441Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:33:52.224823142Z [err]      await self.app(scope, receive, send)
2026-01-06T15:33:52.224832562Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:33:52.224841016Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:33:52.224849740Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:33:52.224856013Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:33:52.224862640Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:33:52.224869660Z [err]      await self.app(scope, receive, send)
2026-01-06T15:33:52.224876279Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:33:52.224883179Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:33:52.224890265Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:33:52.225780911Z [err]      event = get_active_event()
2026-01-06T15:33:52.225783228Z [err]      raise exc
2026-01-06T15:33:52.225793567Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:33:52.225794266Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:33:52.225803571Z [err]      cur.execute(
2026-01-06T15:33:52.225804151Z [err]      await app(scope, receive, sender)
2026-01-06T15:33:52.225812816Z [err]      ~~~~~~~~~~~^
2026-01-06T15:33:52.225813159Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:33:52.225820252Z [err]      response = await f(request)
2026-01-06T15:33:52.225822450Z [err]          """
2026-01-06T15:33:52.225825225Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:33:52.225829979Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:33:52.225863384Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:33:52.225865360Z [err]          ^^^
2026-01-06T15:33:52.225872326Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:33:52.225875130Z [err]      ...<7 lines>...
2026-01-06T15:33:52.225883538Z [err]          (day_of_week, current_time),
2026-01-06T15:33:52.225883899Z [err]      ...<3 lines>...
2026-01-06T15:33:52.225892948Z [err]      )
2026-01-06T15:33:52.225893662Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:33:52.225899753Z [err]      ^
2026-01-06T15:33:52.225906510Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:33:52.225912551Z [err]      return await dependant.call(**values)
2026-01-06T15:33:52.225919709Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:33:52.225927771Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:33:52.226699041Z [err]                               ^
2026-01-06T15:33:52.226705429Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:33:52.226707710Z [err]      )
2026-01-06T15:33:52.226711576Z [err]  
2026-01-06T15:33:52.226717228Z [err]      ^
2026-01-06T15:33:52.226723139Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:33:52.226729475Z [err]      return super().execute(query, vars)
2026-01-06T15:33:52.226735146Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:33:52.226741535Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:33:52.226747562Z [err]  LINE 5:           AND active = 1
2026-01-06T15:33:58.196909438Z [err]  2026-01-06 15:33:48.960 UTC [8436] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:33:58.196925084Z [err]  2026-01-06 15:33:48.960 UTC [8436] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:33:58.196937160Z [err]  2026-01-06 15:33:48.960 UTC [8436] STATEMENT:  
2026-01-06T15:33:58.196950288Z [err]  	        SELECT event
2026-01-06T15:33:58.197167017Z [err]  	        FROM event_config
2026-01-06T15:33:58.197178917Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:33:58.197186352Z [err]  	          AND active = 1
2026-01-06T15:33:58.197194825Z [err]  	          AND '15:33' BETWEEN open_time AND close_time
2026-01-06T15:33:58.197203077Z [err]  	        LIMIT 1;
2026-01-06T15:33:58.197211131Z [err]  	        
2026-01-06T15:36:44.839163026Z [err]  2026-01-06 15:36:44.196 UTC [8411] LOG:  could not receive data from client: Connection reset by peer
2026-01-06T15:37:02.658607696Z [inf]  ðŸ“¨ 27722135094: OPEN SUBMISSION
2026-01-06T15:37:02.658617631Z [inf]  INFO:     100.64.0.3:16588 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:37:02.658627047Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:37:02.658637510Z [err]  Traceback (most recent call last):
2026-01-06T15:37:02.658647744Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:37:02.658657084Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:37:02.658669349Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:37:02.658679910Z [err]          self.scope, self.receive, self.send
2026-01-06T15:37:02.658689790Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:37:02.658701547Z [err]      )
2026-01-06T15:37:02.658712247Z [err]      ^
2026-01-06T15:37:02.658721180Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:37:02.658743152Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:37:02.658753629Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:37:02.658761244Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:37:02.658767439Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:37:02.658773433Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:37:02.658780741Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:37:02.658788174Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:37:02.658795087Z [err]      raise exc
2026-01-06T15:37:02.658802387Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:37:02.659245710Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:37:02.659253374Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:37:02.659260797Z [err]      await self.app(scope, receive, send)
2026-01-06T15:37:02.659268940Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:37:02.659275849Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:37:02.659282167Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:37:02.659292664Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:37:02.659301108Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:37:02.659307860Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:37:02.659314398Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:37:02.659324995Z [err]      raise exc
2026-01-06T15:37:02.659339314Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:37:02.659347281Z [err]      await app(scope, receive, sender)
2026-01-06T15:37:02.659354594Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:37:02.659361140Z [err]      await self.app(scope, receive, send)
2026-01-06T15:37:02.659368049Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:37:02.659375188Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:37:02.659382011Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:37:02.660172867Z [err]      raise exc
2026-01-06T15:37:02.660180788Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:37:02.660186174Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:37:02.660189670Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:37:02.660192291Z [err]      await app(scope, receive, sender)
2026-01-06T15:37:02.660196445Z [err]      event = get_active_event()
2026-01-06T15:37:02.660198317Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:37:02.660202972Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:37:02.660203709Z [err]      response = await f(request)
2026-01-06T15:37:02.660209154Z [err]      cur.execute(
2026-01-06T15:37:02.660209215Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:37:02.660214991Z [err]      ~~~~~~~~~~~^
2026-01-06T15:37:02.660215365Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:37:02.660220510Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:37:02.660221060Z [err]          """
2026-01-06T15:37:02.660225927Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:37:02.660226610Z [err]          ^^^
2026-01-06T15:37:02.660231781Z [err]      ...<3 lines>...
2026-01-06T15:37:02.660232496Z [err]      ...<7 lines>...
2026-01-06T15:37:02.660237888Z [err]          (day_of_week, current_time),
2026-01-06T15:37:02.660238736Z [err]      )
2026-01-06T15:37:02.660243757Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:37:02.660244525Z [err]      ^
2026-01-06T15:37:02.660249022Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:37:02.660252939Z [err]      return await dependant.call(**values)
2026-01-06T15:37:02.661185654Z [err]      )
2026-01-06T15:37:02.661192262Z [err]      ^
2026-01-06T15:37:02.661196636Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:37:02.661200870Z [err]      return super().execute(query, vars)
2026-01-06T15:37:02.661204464Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:37:02.661208304Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:37:02.661213270Z [err]  LINE 5:           AND active = 1
2026-01-06T15:37:02.661217465Z [err]                               ^
2026-01-06T15:37:02.661221280Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:37:02.661225067Z [err]  
2026-01-06T15:37:04.746586496Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:37:04.746602171Z [err]  	          AND active = 1
2026-01-06T15:37:04.746610069Z [err]  	          AND '15:36' BETWEEN open_time AND close_time
2026-01-06T15:37:04.746616611Z [err]  	        LIMIT 1;
2026-01-06T15:37:04.746637305Z [err]  	        
2026-01-06T15:37:04.746638421Z [err]  2026-01-06 15:36:59.775 UTC [8447] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:37:04.746645727Z [err]  2026-01-06 15:36:59.775 UTC [8447] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:37:04.746652963Z [err]  2026-01-06 15:36:59.775 UTC [8447] STATEMENT:  
2026-01-06T15:37:04.746662786Z [err]  	        SELECT event
2026-01-06T15:37:04.746670878Z [err]  	        FROM event_config
2026-01-06T15:38:08.226327222Z [err]  2026-01-06 15:38:07.045 UTC [8453] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:38:08.226334178Z [err]  2026-01-06 15:38:07.045 UTC [8453] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:38:08.226342174Z [err]  2026-01-06 15:38:07.045 UTC [8453] STATEMENT:  
2026-01-06T15:38:08.226349352Z [err]  	        SELECT event
2026-01-06T15:38:08.226356530Z [err]  	        FROM event_config
2026-01-06T15:38:08.226363623Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:38:08.226371087Z [err]  	          AND active = 1
2026-01-06T15:38:08.226378025Z [err]  	          AND '15:38' BETWEEN open_time AND close_time
2026-01-06T15:38:08.226387957Z [err]  	        LIMIT 1;
2026-01-06T15:38:08.226394494Z [err]  	        
2026-01-06T15:38:12.642293120Z [inf]  ðŸ“¨ 27722135094: 4Km 27:11 SBK03E
2026-01-06T15:38:12.642306680Z [inf]  INFO:     100.64.0.2:12922 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:38:12.642314410Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:38:12.642320754Z [err]  Traceback (most recent call last):
2026-01-06T15:38:12.642326883Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:38:12.642333145Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:38:12.642339760Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:38:12.642345567Z [err]          self.scope, self.receive, self.send
2026-01-06T15:38:12.642353857Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:38:12.642360785Z [err]      )
2026-01-06T15:38:12.642368087Z [err]      ^
2026-01-06T15:38:12.642375113Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:38:12.642381123Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:38:12.642390761Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:38:12.642397185Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:38:12.642401837Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:38:12.642406704Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:38:12.642411306Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:38:12.642416176Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:38:12.642420905Z [err]      raise exc
2026-01-06T15:38:12.642426130Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:38:12.643688218Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:38:12.643690738Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:38:12.643700123Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:38:12.643708011Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:38:12.643715181Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:38:12.643722616Z [err]      raise exc
2026-01-06T15:38:12.643729625Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:38:12.643736130Z [err]      await app(scope, receive, sender)
2026-01-06T15:38:12.643742950Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:38:12.643749830Z [err]      await self.app(scope, receive, send)
2026-01-06T15:38:12.643756796Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:38:12.643764110Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:38:12.643770791Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:38:12.643777645Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:38:12.643785714Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:38:12.643793129Z [err]      await self.app(scope, receive, send)
2026-01-06T15:38:12.643800251Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:38:12.643806024Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:38:12.644807975Z [err]      raise exc
2026-01-06T15:38:12.644815801Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:38:12.644816008Z [err]      ~~~~~~~~~~~^
2026-01-06T15:38:12.644820701Z [err]      await app(scope, receive, sender)
2026-01-06T15:38:12.644825560Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:38:12.644827930Z [err]          """
2026-01-06T15:38:12.644831098Z [err]      response = await f(request)
2026-01-06T15:38:12.644837925Z [err]          ^^^
2026-01-06T15:38:12.644837938Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:38:12.644843325Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:38:12.644848969Z [err]      ...<7 lines>...
2026-01-06T15:38:12.644849139Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:38:12.644854485Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:38:12.644859416Z [err]      ...<3 lines>...
2026-01-06T15:38:12.644860281Z [err]          (day_of_week, current_time),
2026-01-06T15:38:12.644864302Z [err]      )
2026-01-06T15:38:12.644870091Z [err]      ^
2026-01-06T15:38:12.644870778Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:38:12.644874667Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:38:12.644878480Z [err]      return await dependant.call(**values)
2026-01-06T15:38:12.644882457Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:38:12.644888225Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:38:12.644893009Z [err]      event = get_active_event()
2026-01-06T15:38:12.644897162Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:38:12.644901540Z [err]      cur.execute(
2026-01-06T15:38:12.645696374Z [err]      )
2026-01-06T15:38:12.645702866Z [err]      ^
2026-01-06T15:38:12.645709544Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:38:12.645714794Z [err]      return super().execute(query, vars)
2026-01-06T15:38:12.645720220Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:38:12.645726199Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:38:12.645731933Z [err]  LINE 5:           AND active = 1
2026-01-06T15:38:12.645737479Z [err]                               ^
2026-01-06T15:38:12.645742615Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:38:12.645748846Z [err]  
2026-01-06T15:39:02.738966473Z [err]      ^
2026-01-06T15:39:02.738975827Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:39:02.738981778Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:39:02.738986668Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:39:02.738993754Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:39:02.738999968Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:39:02.739005167Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:39:02.739010223Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:39:02.739018144Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:39:02.739028779Z [err]      raise exc
2026-01-06T15:39:02.739036593Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:39:02.739094625Z [inf]  ðŸ“¨ 27722135094: Open submissions
2026-01-06T15:39:02.739101887Z [inf]  INFO:     100.64.0.5:21790 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:39:02.739112424Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:39:02.739120659Z [err]  Traceback (most recent call last):
2026-01-06T15:39:02.739128487Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:39:02.739136385Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:39:02.739143373Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:39:02.739150127Z [err]          self.scope, self.receive, self.send
2026-01-06T15:39:02.739157171Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:39:02.739165446Z [err]      )
2026-01-06T15:39:02.739770330Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:39:02.739774481Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:39:02.739779318Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:39:02.739784050Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:39:02.739788872Z [err]      raise exc
2026-01-06T15:39:02.739793834Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:39:02.739798198Z [err]      await app(scope, receive, sender)
2026-01-06T15:39:02.739802951Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:39:02.739808469Z [err]      await self.app(scope, receive, send)
2026-01-06T15:39:02.739813353Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:39:02.739818753Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:39:02.739823802Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:39:02.739828961Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:39:02.739833325Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:39:02.739837431Z [err]      await self.app(scope, receive, send)
2026-01-06T15:39:02.739842282Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:39:02.739847558Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:39:02.739852396Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:39:02.740566480Z [err]      raise exc
2026-01-06T15:39:02.740572661Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:39:02.740576773Z [err]      await app(scope, receive, sender)
2026-01-06T15:39:02.740580349Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:39:02.740584386Z [err]      response = await f(request)
2026-01-06T15:39:02.740587863Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:39:02.740591445Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:39:02.740595707Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:39:02.740599502Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:39:02.740604372Z [err]      ...<3 lines>...
2026-01-06T15:39:02.740608229Z [err]      )
2026-01-06T15:39:02.740612651Z [err]      ^
2026-01-06T15:39:02.740616614Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:39:02.740619887Z [err]      return await dependant.call(**values)
2026-01-06T15:39:02.740623289Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:39:02.740628854Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:39:02.740633260Z [err]      event = get_active_event()
2026-01-06T15:39:02.740637195Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:39:02.740641818Z [err]      cur.execute(
2026-01-06T15:39:02.740645911Z [err]      ~~~~~~~~~~~^
2026-01-06T15:39:02.740649386Z [err]          """
2026-01-06T15:39:02.740653065Z [err]          ^^^
2026-01-06T15:39:02.740656901Z [err]      ...<7 lines>...
2026-01-06T15:39:02.740660789Z [err]          (day_of_week, current_time),
2026-01-06T15:39:02.740664618Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:39:02.741267896Z [err]      )
2026-01-06T15:39:02.741274679Z [err]      ^
2026-01-06T15:39:02.741281654Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:39:02.741293120Z [err]      return super().execute(query, vars)
2026-01-06T15:39:02.741297628Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:39:02.741302052Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:39:02.741305975Z [err]  LINE 5:           AND active = 1
2026-01-06T15:39:02.741309953Z [err]                               ^
2026-01-06T15:39:02.741313970Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:39:02.741318758Z [err]  
2026-01-06T15:39:08.573429171Z [err]  2026-01-06 15:39:00.444 UTC [8458] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:39:08.573431778Z [err]  	          AND active = 1
2026-01-06T15:39:08.573439768Z [err]  	          AND '15:39' BETWEEN open_time AND close_time
2026-01-06T15:39:08.573441259Z [err]  2026-01-06 15:39:00.444 UTC [8458] STATEMENT:  
2026-01-06T15:39:08.573447398Z [err]  	        LIMIT 1;
2026-01-06T15:39:08.573448802Z [err]  	        SELECT event
2026-01-06T15:39:08.573455186Z [err]  	        
2026-01-06T15:39:08.573456942Z [err]  	        FROM event_config
2026-01-06T15:39:08.573463148Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:39:08.573499601Z [err]  2026-01-06 15:39:00.444 UTC [8458] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:41:32.989397095Z [inf]  ðŸ“¨ 27605473353: Hi
2026-01-06T15:41:32.989403061Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T15:41:32.989408269Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T15:41:32.989413152Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T15:41:32.989417962Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T15:41:32.989422293Z [inf]  ðŸ“¤ Status: 200
2026-01-06T15:41:32.989439299Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27605473353","wa_id":"27605473353"}],"messages":[{"id":"wamid.HBgLMjc2MDU0NzMzNTMVAgARGBJGNjUwNTY2MTNDODY4RUE0OTIA"}]}
2026-01-06T15:41:32.989443746Z [inf]  INFO:     100.64.0.5:41662 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:41:32.989449412Z [inf]  INFO:     100.64.0.4:28770 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:41:32.989453929Z [inf]  INFO:     100.64.0.5:41662 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:42:32.965480711Z [inf]  ðŸ“¨ 27605473353: Runner
2026-01-06T15:42:32.965480729Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T15:42:32.965492310Z [inf]  ðŸ“¤ Status: 200
2026-01-06T15:42:32.965492772Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T15:42:32.965500874Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27605473353","wa_id":"27605473353"}],"messages":[{"id":"wamid.HBgLMjc2MDU0NzMzNTMVAgARGBJGRUE1RDJDMjE1N0UwNTU0RDUA"}]}
2026-01-06T15:42:32.965508277Z [inf]  INFO:     100.64.0.4:57720 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:42:32.965515709Z [inf]  INFO:     100.64.0.2:45992 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:42:32.965523390Z [inf]  INFO:     100.64.0.8:36476 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:42:32.965558977Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T15:42:32.965568723Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T15:42:37.667256936Z [inf]  ðŸ“¨ 27605473353: Thank you
2026-01-06T15:42:37.932234800Z [inf]  INFO:     100.64.0.2:13898 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:42:37.932245496Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:42:37.932251567Z [err]  Traceback (most recent call last):
2026-01-06T15:42:37.932257636Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:42:37.932262750Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:42:37.932268329Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:42:37.932275696Z [err]          self.scope, self.receive, self.send
2026-01-06T15:42:37.932280047Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:42:37.932284759Z [err]      )
2026-01-06T15:42:37.932290028Z [err]      ^
2026-01-06T15:42:37.932294924Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:42:37.932300213Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:42:37.932305059Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:42:37.932309566Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:42:37.932314461Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:42:37.932319468Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:42:37.932325121Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:42:37.932331948Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:42:37.932337725Z [err]      raise exc
2026-01-06T15:42:37.932344337Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:42:37.933578986Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:42:37.933587729Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:42:37.933597498Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:42:37.933598636Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:42:37.933604819Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:42:37.933612627Z [err]      raise exc
2026-01-06T15:42:37.933614231Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:42:37.933620456Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:42:37.933625787Z [err]      await self.app(scope, receive, send)
2026-01-06T15:42:37.933629110Z [err]      await app(scope, receive, sender)
2026-01-06T15:42:37.933635695Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:42:37.933637402Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:42:37.933644917Z [err]      await self.app(scope, receive, send)
2026-01-06T15:42:37.933651407Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:42:37.933655730Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:42:37.933659724Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:42:37.933666037Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:42:37.933669052Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:42:37.934775221Z [err]      raise exc
2026-01-06T15:42:37.934781445Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:42:37.934783238Z [err]      ~~~~~~~~~~~^
2026-01-06T15:42:37.934787086Z [err]      await app(scope, receive, sender)
2026-01-06T15:42:37.934792507Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:42:37.934793601Z [err]          """
2026-01-06T15:42:37.934797874Z [err]      response = await f(request)
2026-01-06T15:42:37.934801421Z [err]          ^^^
2026-01-06T15:42:37.934804289Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:42:37.934808516Z [err]      ...<7 lines>...
2026-01-06T15:42:37.934809720Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:42:37.934815418Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:42:37.934816462Z [err]          (day_of_week, current_time),
2026-01-06T15:42:37.934819937Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:42:37.934824733Z [err]      ...<3 lines>...
2026-01-06T15:42:37.934826678Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:42:37.934829657Z [err]      )
2026-01-06T15:42:37.934833741Z [err]      ^
2026-01-06T15:42:37.934838884Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:42:37.934842938Z [err]      return await dependant.call(**values)
2026-01-06T15:42:37.934846724Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:42:37.934850521Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:42:37.934854158Z [err]      event = get_active_event()
2026-01-06T15:42:37.934858327Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:42:37.934862109Z [err]      cur.execute(
2026-01-06T15:42:37.935732846Z [err]      )
2026-01-06T15:42:37.935737967Z [err]      ^
2026-01-06T15:42:37.935741996Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:42:37.935746017Z [err]      return super().execute(query, vars)
2026-01-06T15:42:37.935750223Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:42:37.935754448Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:42:37.935758667Z [err]  LINE 5:           AND active = 1
2026-01-06T15:42:37.935762664Z [err]                               ^
2026-01-06T15:42:37.935766683Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:42:37.935771028Z [err]  
2026-01-06T15:42:38.267222766Z [inf]  ðŸ“¨ 27605473353: Thank you
2026-01-06T15:42:38.454723124Z [inf]  INFO:     100.64.0.3:33528 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:42:38.454731394Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:42:38.454738411Z [err]  Traceback (most recent call last):
2026-01-06T15:42:38.454746039Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:42:38.454753301Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:42:38.454757244Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:42:38.454761160Z [err]          self.scope, self.receive, self.send
2026-01-06T15:42:38.454764881Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:42:38.454769249Z [err]      )
2026-01-06T15:42:38.454775622Z [err]      ^
2026-01-06T15:42:38.454782333Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:42:38.454788052Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:42:38.454794382Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:42:38.454800889Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:42:38.454807435Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:42:38.454814794Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:42:38.454821465Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:42:38.454827993Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:42:38.454834597Z [err]      raise exc
2026-01-06T15:42:38.454841602Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:42:38.455295898Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:42:38.455307746Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:42:38.455312028Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:42:38.455312936Z [err]      await self.app(scope, receive, send)
2026-01-06T15:42:38.455320188Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:42:38.455322289Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:42:38.455327318Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:42:38.455331291Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:42:38.455332213Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:42:38.455338243Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:42:38.455341388Z [err]      raise exc
2026-01-06T15:42:38.455342916Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:42:38.455349058Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:42:38.455350543Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:42:38.455352361Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:42:38.455361451Z [err]      await app(scope, receive, sender)
2026-01-06T15:42:38.455367712Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:42:38.455372448Z [err]      await self.app(scope, receive, send)
2026-01-06T15:42:38.456542503Z [err]      ~~~~~~~~~~~^
2026-01-06T15:42:38.456544748Z [err]      raise exc
2026-01-06T15:42:38.456544789Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:42:38.456553310Z [err]          """
2026-01-06T15:42:38.456556512Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:42:38.456558493Z [err]      return await dependant.call(**values)
2026-01-06T15:42:38.456562107Z [err]          ^^^
2026-01-06T15:42:38.456566283Z [err]      await app(scope, receive, sender)
2026-01-06T15:42:38.456568917Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:42:38.456571093Z [err]      ...<7 lines>...
2026-01-06T15:42:38.456572780Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:42:38.456575415Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:42:38.456579348Z [err]      response = await f(request)
2026-01-06T15:42:38.456580446Z [err]          (day_of_week, current_time),
2026-01-06T15:42:38.456583845Z [err]      event = get_active_event()
2026-01-06T15:42:38.456586008Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:42:38.456589136Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:42:38.456593595Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:42:38.456593981Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:42:38.456601995Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:42:38.456602624Z [err]      cur.execute(
2026-01-06T15:42:38.456609416Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:42:38.456618014Z [err]      ...<3 lines>...
2026-01-06T15:42:38.456624434Z [err]      )
2026-01-06T15:42:38.456630841Z [err]      ^
2026-01-06T15:42:38.457320846Z [err]      )
2026-01-06T15:42:38.457325962Z [err]      ^
2026-01-06T15:42:38.457330438Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:42:38.457335548Z [err]      return super().execute(query, vars)
2026-01-06T15:42:38.457339366Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:42:38.457343827Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:42:38.457347853Z [err]  LINE 5:           AND active = 1
2026-01-06T15:42:38.457351465Z [err]                               ^
2026-01-06T15:42:38.457355604Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:42:38.457360114Z [err]  
2026-01-06T15:42:38.882317718Z [inf]  ðŸ“¨ 27605473353: Thank you
2026-01-06T15:42:39.026157796Z [inf]  INFO:     100.64.0.6:14414 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:42:39.026166071Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:42:39.026171557Z [err]  Traceback (most recent call last):
2026-01-06T15:42:39.026176764Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:42:39.026182499Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:42:39.026182791Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:42:39.026187456Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:42:39.026194509Z [err]          self.scope, self.receive, self.send
2026-01-06T15:42:39.026196711Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:42:39.026200052Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:42:39.026205191Z [err]      )
2026-01-06T15:42:39.026209020Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:42:39.026214793Z [err]      ^
2026-01-06T15:42:39.026219135Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:42:39.026222953Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:42:39.026230897Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:42:39.026234247Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:42:39.026243548Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:42:39.026251837Z [err]      raise exc
2026-01-06T15:42:39.026260153Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:42:39.027364976Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:42:39.027373626Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:42:39.027377989Z [err]      await self.app(scope, receive, send)
2026-01-06T15:42:39.027380308Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:42:39.027386838Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:42:39.027388440Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:42:39.027389831Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:42:39.027397297Z [err]      raise exc
2026-01-06T15:42:39.027399140Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:42:39.027399851Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:42:39.027406868Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:42:39.027409206Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:42:39.027416266Z [err]      await app(scope, receive, sender)
2026-01-06T15:42:39.027418213Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:42:39.027424832Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:42:39.027427293Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:42:39.027434080Z [err]      await self.app(scope, receive, send)
2026-01-06T15:42:39.027441308Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:42:39.028363084Z [err]      raise exc
2026-01-06T15:42:39.028363969Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:42:39.028372478Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:42:39.028375097Z [err]      cur.execute(
2026-01-06T15:42:39.028381188Z [err]      await app(scope, receive, sender)
2026-01-06T15:42:39.028384179Z [err]      ~~~~~~~~~~~^
2026-01-06T15:42:39.028389113Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:42:39.028395229Z [err]          """
2026-01-06T15:42:39.028397668Z [err]      response = await f(request)
2026-01-06T15:42:39.028403574Z [err]          ^^^
2026-01-06T15:42:39.028407191Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:42:39.028414048Z [err]      ...<7 lines>...
2026-01-06T15:42:39.028415464Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:42:39.028423342Z [err]          (day_of_week, current_time),
2026-01-06T15:42:39.028423851Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:42:39.028432272Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:42:39.028433545Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:42:39.028440409Z [err]      ...<3 lines>...
2026-01-06T15:42:39.028454672Z [err]      )
2026-01-06T15:42:39.028461668Z [err]      ^
2026-01-06T15:42:39.028468056Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:42:39.028474554Z [err]      return await dependant.call(**values)
2026-01-06T15:42:39.028481045Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:42:39.028487712Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:42:39.028494932Z [err]      event = get_active_event()
2026-01-06T15:42:39.029240872Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:42:39.029248763Z [err]  LINE 5:           AND active = 1
2026-01-06T15:42:39.029255902Z [err]                               ^
2026-01-06T15:42:39.029263287Z [err]      )
2026-01-06T15:42:39.029264738Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:42:39.029273552Z [err]  
2026-01-06T15:42:39.029274382Z [err]      ^
2026-01-06T15:42:39.029279862Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:42:39.029284791Z [err]      return super().execute(query, vars)
2026-01-06T15:42:39.029289034Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:42:39.518751959Z [inf]  ðŸ“¨ 27605473353: Thank you
2026-01-06T15:42:39.654200184Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:42:39.654206083Z [inf]  INFO:     100.64.0.5:58572 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:42:39.654211091Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:42:39.654212386Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:42:39.654215650Z [err]  Traceback (most recent call last):
2026-01-06T15:42:39.654219650Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:42:39.654225107Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:42:39.654226603Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:42:39.654230543Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:42:39.654233579Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:42:39.654236938Z [err]          self.scope, self.receive, self.send
2026-01-06T15:42:39.654239863Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:42:39.654242477Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:42:39.654246682Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:42:39.654248223Z [err]      )
2026-01-06T15:42:39.654253224Z [err]      raise exc
2026-01-06T15:42:39.654254369Z [err]      ^
2026-01-06T15:42:39.654258893Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:42:39.654260009Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:42:39.654264058Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:42:39.654979087Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:42:39.654991613Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:42:39.654999575Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:42:39.655007019Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:42:39.655013986Z [err]      raise exc
2026-01-06T15:42:39.655021510Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:42:39.655028659Z [err]      await app(scope, receive, sender)
2026-01-06T15:42:39.655038954Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:42:39.655046879Z [err]      await self.app(scope, receive, send)
2026-01-06T15:42:39.655056791Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:42:39.655063587Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:42:39.655070847Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:42:39.655077701Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:42:39.655084302Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:42:39.655091396Z [err]      await self.app(scope, receive, send)
2026-01-06T15:42:39.655098617Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:42:39.655105993Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:42:39.655113888Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:42:39.656153884Z [err]      raise exc
2026-01-06T15:42:39.656156199Z [err]      cur.execute(
2026-01-06T15:42:39.656157983Z [err]      )
2026-01-06T15:42:39.656162015Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:42:39.656167946Z [err]      await app(scope, receive, sender)
2026-01-06T15:42:39.656169987Z [err]      ~~~~~~~~~~~^
2026-01-06T15:42:39.656170979Z [err]      ^
2026-01-06T15:42:39.656174813Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:42:39.656180647Z [err]      response = await f(request)
2026-01-06T15:42:39.656180954Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:42:39.656182193Z [err]          """
2026-01-06T15:42:39.656186613Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:42:39.656190417Z [err]      return await dependant.call(**values)
2026-01-06T15:42:39.656192584Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:42:39.656193883Z [err]          ^^^
2026-01-06T15:42:39.656198998Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:42:39.656199902Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:42:39.656205130Z [err]      ...<7 lines>...
2026-01-06T15:42:39.656205164Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:42:39.656210035Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:42:39.656210561Z [err]      ...<3 lines>...
2026-01-06T15:42:39.656216065Z [err]          (day_of_week, current_time),
2026-01-06T15:42:39.656226286Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:42:39.656226738Z [err]      event = get_active_event()
2026-01-06T15:42:39.656234387Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:42:39.656731073Z [err]      )
2026-01-06T15:42:39.656738763Z [err]      ^
2026-01-06T15:42:39.656743835Z [err]                               ^
2026-01-06T15:42:39.656745789Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:42:39.656751616Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:42:39.656752683Z [err]      return super().execute(query, vars)
2026-01-06T15:42:39.656758393Z [err]  
2026-01-06T15:42:39.656759132Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:42:39.656766669Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:42:39.656772933Z [err]  LINE 5:           AND active = 1
2026-01-06T15:42:46.025803973Z [inf]  ðŸ“¨ 27605473353: Thank you
2026-01-06T15:42:46.304924142Z [inf]  INFO:     100.64.0.9:19324 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:42:46.304931441Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:42:46.304936871Z [err]  Traceback (most recent call last):
2026-01-06T15:42:46.304943484Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:42:46.304949583Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:42:46.304954156Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:42:46.304959707Z [err]          self.scope, self.receive, self.send
2026-01-06T15:42:46.304964771Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:42:46.304968674Z [err]      )
2026-01-06T15:42:46.304972413Z [err]      ^
2026-01-06T15:42:46.304976463Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:42:46.304980308Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:42:46.304984648Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:42:46.304988988Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:42:46.304995552Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:42:46.304999250Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:42:46.305003141Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:42:46.305007858Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:42:46.305012615Z [err]      raise exc
2026-01-06T15:42:46.305017502Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:42:46.306330654Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:42:46.306337708Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:42:46.306343344Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:42:46.306349780Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:42:46.306355653Z [err]      raise exc
2026-01-06T15:42:46.306361081Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:42:46.306367978Z [err]      await app(scope, receive, sender)
2026-01-06T15:42:46.306373812Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:42:46.306379068Z [err]      await self.app(scope, receive, send)
2026-01-06T15:42:46.306384560Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:42:46.306389579Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:42:46.306395196Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:42:46.306401355Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:42:46.306406464Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:42:46.306411731Z [err]      await self.app(scope, receive, send)
2026-01-06T15:42:46.306417883Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:42:46.306422413Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:42:46.306427662Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:42:46.307698497Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:42:46.307698499Z [err]      cur.execute(
2026-01-06T15:42:46.307709479Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:42:46.307710331Z [err]      ~~~~~~~~~~~^
2026-01-06T15:42:46.307712144Z [err]      raise exc
2026-01-06T15:42:46.307717088Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:42:46.307718673Z [err]          """
2026-01-06T15:42:46.307725961Z [err]      ...<3 lines>...
2026-01-06T15:42:46.307726412Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:42:46.307727027Z [err]          ^^^
2026-01-06T15:42:46.307733619Z [err]      )
2026-01-06T15:42:46.307735997Z [err]      ...<7 lines>...
2026-01-06T15:42:46.307737098Z [err]      await app(scope, receive, sender)
2026-01-06T15:42:46.307741799Z [err]      ^
2026-01-06T15:42:46.307744329Z [err]          (day_of_week, current_time),
2026-01-06T15:42:46.307745940Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:42:46.307749576Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:42:46.307753738Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:42:46.307754804Z [err]      response = await f(request)
2026-01-06T15:42:46.307757106Z [err]      return await dependant.call(**values)
2026-01-06T15:42:46.307764737Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:42:46.307765035Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:42:46.307772878Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:42:46.307781253Z [err]      event = get_active_event()
2026-01-06T15:42:46.307788475Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:42:46.308587045Z [err]      )
2026-01-06T15:42:46.308594575Z [err]                               ^
2026-01-06T15:42:46.308594853Z [err]      ^
2026-01-06T15:42:46.308600346Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:42:46.308604224Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:42:46.308606015Z [err]      return super().execute(query, vars)
2026-01-06T15:42:46.308611528Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:42:46.308611753Z [err]  
2026-01-06T15:42:46.308616839Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:42:46.308621348Z [err]  LINE 5:           AND active = 1
2026-01-06T15:42:47.233881603Z [err]  2026-01-06 15:42:37.917 UTC [8473] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:42:47.233888163Z [err]  2026-01-06 15:42:37.917 UTC [8473] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:42:47.233895676Z [err]  2026-01-06 15:42:37.917 UTC [8473] STATEMENT:  
2026-01-06T15:42:47.233902326Z [err]  	        SELECT event
2026-01-06T15:42:47.233909708Z [err]  	        FROM event_config
2026-01-06T15:42:47.233918149Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:42:47.233926140Z [err]  	          AND active = 1
2026-01-06T15:42:47.233933587Z [err]  	          AND '15:42' BETWEEN open_time AND close_time
2026-01-06T15:42:47.233941226Z [err]  	        LIMIT 1;
2026-01-06T15:42:47.233948747Z [err]  	        
2026-01-06T15:42:47.233955521Z [err]  2026-01-06 15:42:38.407 UTC [8475] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:42:47.233963335Z [err]  2026-01-06 15:42:38.407 UTC [8475] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:42:47.233972920Z [err]  2026-01-06 15:42:38.407 UTC [8475] STATEMENT:  
2026-01-06T15:42:47.233979910Z [err]  	        SELECT event
2026-01-06T15:42:47.233997848Z [err]  	        FROM event_config
2026-01-06T15:42:47.234005239Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:42:47.234011750Z [err]  	          AND active = 1
2026-01-06T15:42:47.234018839Z [err]  	          AND '15:42' BETWEEN open_time AND close_time
2026-01-06T15:42:47.234026518Z [err]  	        LIMIT 1;
2026-01-06T15:42:47.234035777Z [err]  	        
2026-01-06T15:42:47.234042696Z [err]  2026-01-06 15:42:39.012 UTC [8477] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:42:47.234050084Z [err]  2026-01-06 15:42:39.012 UTC [8477] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:42:48.499950348Z [err]  2026-01-06 15:42:39.012 UTC [8477] STATEMENT:  
2026-01-06T15:42:48.499956601Z [err]  	        SELECT event
2026-01-06T15:42:48.499962633Z [err]  	        FROM event_config
2026-01-06T15:42:48.499968753Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:42:48.499977234Z [err]  	          AND active = 1
2026-01-06T15:42:48.499984461Z [err]  	          AND '15:42' BETWEEN open_time AND close_time
2026-01-06T15:42:48.499991706Z [err]  	        LIMIT 1;
2026-01-06T15:42:48.499999827Z [err]  	        
2026-01-06T15:42:48.500007856Z [err]  2026-01-06 15:42:39.644 UTC [8479] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:42:48.500014576Z [err]  2026-01-06 15:42:39.644 UTC [8479] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:42:48.500021911Z [err]  2026-01-06 15:42:39.644 UTC [8479] STATEMENT:  
2026-01-06T15:42:48.500030541Z [err]  	        SELECT event
2026-01-06T15:42:48.500038709Z [err]  	        FROM event_config
2026-01-06T15:42:48.506192503Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:42:48.506211702Z [err]  	          AND active = 1
2026-01-06T15:42:48.506221002Z [err]  	          AND '15:42' BETWEEN open_time AND close_time
2026-01-06T15:42:48.506246321Z [err]  	        LIMIT 1;
2026-01-06T15:42:48.506256041Z [err]  	        
2026-01-06T15:42:48.506265027Z [err]  2026-01-06 15:42:46.295 UTC [8482] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:42:48.506275675Z [err]  2026-01-06 15:42:46.295 UTC [8482] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:42:48.506282760Z [err]  2026-01-06 15:42:46.295 UTC [8482] STATEMENT:  
2026-01-06T15:42:48.506295566Z [err]  	        SELECT event
2026-01-06T15:42:48.506306454Z [err]  	        FROM event_config
2026-01-06T15:42:49.443076396Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:42:49.443082424Z [err]  	          AND active = 1
2026-01-06T15:42:49.443089828Z [err]  	          AND '15:42' BETWEEN open_time AND close_time
2026-01-06T15:42:49.443096089Z [err]  	        LIMIT 1;
2026-01-06T15:42:49.443102922Z [err]  	        
2026-01-06T15:42:49.443111206Z [err]  2026-01-06 15:42:46.999 UTC [76] LOG:  checkpoint starting: time
2026-01-06T15:42:49.443118703Z [err]  2026-01-06 15:42:47.455 UTC [76] LOG:  checkpoint complete: wrote 5 buffers (0.0%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.411 s, sync=0.010 s, total=0.456 s; sync files=5, longest=0.006 s, average=0.002 s; distance=8 kB, estimate=36 kB; lsn=0/1A04488, redo lsn=0/1A04430
2026-01-06T15:44:01.993435742Z [err]  2026-01-06 15:44:00.023 UTC [8487] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:44:01.993444868Z [err]  2026-01-06 15:44:00.023 UTC [8487] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:44:01.993451491Z [err]  2026-01-06 15:44:00.023 UTC [8487] STATEMENT:  
2026-01-06T15:44:01.993458469Z [err]  	        SELECT event
2026-01-06T15:44:01.993466720Z [err]  	        FROM event_config
2026-01-06T15:44:01.993477455Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:44:01.993484475Z [err]  	          AND active = 1
2026-01-06T15:44:01.993493877Z [err]  	          AND '15:43' BETWEEN open_time AND close_time
2026-01-06T15:44:01.993500677Z [err]  	        LIMIT 1;
2026-01-06T15:44:01.993508540Z [err]  	        
2026-01-06T15:44:06.304820687Z [inf]  ðŸ“¨ 27605473353: Thank you
2026-01-06T15:44:06.304828476Z [inf]  INFO:     100.64.0.3:19474 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:44:06.304833972Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:44:06.304839352Z [err]  Traceback (most recent call last):
2026-01-06T15:44:06.304844703Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:44:06.304850715Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:44:06.304855735Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:44:06.304862836Z [err]          self.scope, self.receive, self.send
2026-01-06T15:44:06.304867447Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:44:06.304872905Z [err]      )
2026-01-06T15:44:06.304877185Z [err]      ^
2026-01-06T15:44:06.304881693Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:44:06.304886905Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:44:06.304905280Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:44:06.304922528Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:44:06.304935661Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:44:06.304949458Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:44:06.304968633Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:44:06.304977280Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:44:06.304986288Z [err]      raise exc
2026-01-06T15:44:06.304994681Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:44:06.305878251Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:44:06.305884842Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:44:06.305891780Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:44:06.305898100Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:44:06.305903150Z [err]      raise exc
2026-01-06T15:44:06.305910306Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:44:06.305916350Z [err]      await app(scope, receive, sender)
2026-01-06T15:44:06.305922090Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:44:06.305930719Z [err]      await self.app(scope, receive, send)
2026-01-06T15:44:06.305938337Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:44:06.305944236Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:44:06.305951262Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:44:06.305957727Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:44:06.305963785Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:44:06.305970800Z [err]      await self.app(scope, receive, send)
2026-01-06T15:44:06.305977667Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:44:06.305983130Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:44:06.305987817Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:44:06.307068119Z [err]      raise exc
2026-01-06T15:44:06.307085262Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:44:06.307085373Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:44:06.307098453Z [err]      await app(scope, receive, sender)
2026-01-06T15:44:06.307100473Z [err]          """
2026-01-06T15:44:06.307102742Z [err]      ...<3 lines>...
2026-01-06T15:44:06.307103432Z [err]      response = await f(request)
2026-01-06T15:44:06.307110992Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:44:06.307113111Z [err]          ^^^
2026-01-06T15:44:06.307116133Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:44:06.307120630Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:44:06.307122676Z [err]      ...<7 lines>...
2026-01-06T15:44:06.307126614Z [err]      )
2026-01-06T15:44:06.307129922Z [err]          (day_of_week, current_time),
2026-01-06T15:44:06.307131353Z [err]      return await dependant.call(**values)
2026-01-06T15:44:06.307132870Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:44:06.307146885Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:44:06.307148228Z [err]      ^
2026-01-06T15:44:06.307148357Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:44:06.307162199Z [err]      event = get_active_event()
2026-01-06T15:44:06.307165175Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:44:06.307168213Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:44:06.307175648Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:44:06.307184924Z [err]      cur.execute(
2026-01-06T15:44:06.307198093Z [err]      ~~~~~~~~~~~^
2026-01-06T15:44:06.307728249Z [err]  LINE 5:           AND active = 1
2026-01-06T15:44:06.307733870Z [err]                               ^
2026-01-06T15:44:06.307738013Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:44:06.307742752Z [err]  
2026-01-06T15:44:06.307754075Z [err]      )
2026-01-06T15:44:06.307767188Z [err]      ^
2026-01-06T15:44:06.307774806Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:44:06.307809046Z [err]      return super().execute(query, vars)
2026-01-06T15:44:06.307814797Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:44:06.307819477Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:44:22.201337915Z [err]  2026-01-06 15:44:15.962 UTC [8456] LOG:  could not receive data from client: Connection reset by peer
2026-01-06T15:45:56.433333038Z [inf]  ðŸ“¨ 27828296669: Hi
2026-01-06T15:45:56.433337637Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T15:45:56.433348387Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T15:45:56.433352775Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T15:45:56.600211038Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T15:45:56.600218392Z [inf]  ðŸ“¤ Status: 200
2026-01-06T15:45:56.600224280Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27828296669","wa_id":"27828296669"}],"messages":[{"id":"wamid.HBgLMjc4MjgyOTY2NjkVAgARGBI1MzAxMjdENDAzRTg2Qjk5MDAA"}]}
2026-01-06T15:45:56.600230370Z [inf]  INFO:     100.64.0.9:48202 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:45:59.671505577Z [inf]  INFO:     100.64.0.7:16396 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:46:05.558520380Z [inf]  INFO:     100.64.0.8:60904 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:46:25.571333154Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T15:46:25.571342831Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T15:46:25.571353784Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T15:46:25.571362621Z [inf]  ðŸ“¤ Status: 200
2026-01-06T15:46:25.571369911Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27825642545","wa_id":"27825642545"}],"messages":[{"id":"wamid.HBgLMjc4MjU2NDI1NDUVAgARGBJFMTQwMjkxRTE0QjhCRTQ5QTEA"}]}
2026-01-06T15:46:25.571375627Z [inf]  INFO:     100.64.0.8:34322 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:46:25.571380145Z [inf]  INFO:     100.64.0.8:34322 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:46:25.571385499Z [inf]  ðŸ“¨ 27825642545: Hi
2026-01-06T15:46:25.571385661Z [inf]  INFO:     100.64.0.8:34322 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:46:25.571391236Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T15:46:25.571392837Z [inf]  INFO:     100.64.0.9:14608 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:46:35.515106293Z [inf]  ðŸ“¨ 27825642545: Runner
2026-01-06T15:46:35.710033145Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T15:46:35.710038348Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T15:46:35.710042933Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T15:46:36.425151222Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T15:46:36.425157080Z [inf]  ðŸ“¤ Status: 200
2026-01-06T15:46:36.425161148Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27825642545","wa_id":"27825642545"}],"messages":[{"id":"wamid.HBgLMjc4MjU2NDI1NDUVAgARGBJDRDY4MUIzOTRDNUY3OUJBNDkA"}]}
2026-01-06T15:46:36.425164849Z [inf]  INFO:     100.64.0.7:33436 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:46:37.629372931Z [inf]  INFO:     100.64.0.2:60986 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:46:37.934969095Z [inf]  INFO:     100.64.0.4:48524 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:46:38.265497982Z [inf]  INFO:     100.64.0.3:38258 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:47:28.228305080Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27832794122","wa_id":"27832794122"}],"messages":[{"id":"wamid.HBgLMjc4MzI3OTQxMjIVAgARGBIzRjYzQUIwRDE5NDhFRkQzMDYA"}]}
2026-01-06T15:47:28.228307920Z [inf]  ðŸ“¨ 27832794122: Hi
2026-01-06T15:47:28.228319067Z [inf]  INFO:     100.64.0.7:25662 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:47:28.228320520Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T15:47:28.228329807Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T15:47:28.228332576Z [inf]  INFO:     100.64.0.3:61806 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:47:28.228340748Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T15:47:28.228341369Z [inf]  INFO:     100.64.0.6:46288 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:47:28.228350492Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T15:47:28.228358984Z [inf]  ðŸ“¤ Status: 200
2026-01-06T15:47:52.449285046Z [err]  2026-01-06 15:47:46.556 UTC [76] LOG:  checkpoint starting: time
2026-01-06T15:47:52.449295643Z [err]  2026-01-06 15:47:47.054 UTC [76] LOG:  checkpoint complete: wrote 5 buffers (0.0%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.415 s, sync=0.039 s, total=0.499 s; sync files=5, longest=0.033 s, average=0.008 s; distance=9 kB, estimate=33 kB; lsn=0/1A068F0, redo lsn=0/1A06898
2026-01-06T15:48:12.942995476Z [err]  2026-01-06 15:48:09.265 UTC [8506] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:48:12.943003265Z [err]  2026-01-06 15:48:09.265 UTC [8506] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:48:12.943010389Z [err]  2026-01-06 15:48:09.265 UTC [8506] STATEMENT:  
2026-01-06T15:48:12.943017560Z [err]  	        SELECT event
2026-01-06T15:48:12.943024670Z [err]  	        FROM event_config
2026-01-06T15:48:12.943031409Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:48:12.943038493Z [err]  	          AND active = 1
2026-01-06T15:48:12.943045671Z [err]  	          AND '15:48' BETWEEN open_time AND close_time
2026-01-06T15:48:12.943052224Z [err]  	        LIMIT 1;
2026-01-06T15:48:12.943061865Z [err]  	        
2026-01-06T15:48:12.943087883Z [err]  2026-01-06 15:48:10.273 UTC [8508] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:48:12.943096182Z [err]  2026-01-06 15:48:10.273 UTC [8508] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:48:12.943102967Z [err]  2026-01-06 15:48:10.273 UTC [8508] STATEMENT:  
2026-01-06T15:48:12.943109205Z [err]  	        SELECT event
2026-01-06T15:48:12.943116495Z [err]  	        FROM event_config
2026-01-06T15:48:12.943123501Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:48:12.972887923Z [err]  	          AND active = 1
2026-01-06T15:48:12.972907485Z [err]  	          AND '15:48' BETWEEN open_time AND close_time
2026-01-06T15:48:12.973063254Z [err]  	        LIMIT 1;
2026-01-06T15:48:12.973077360Z [err]  	        
2026-01-06T15:48:12.973084645Z [err]  2026-01-06 15:48:10.923 UTC [8510] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:48:12.973093689Z [err]  2026-01-06 15:48:10.923 UTC [8510] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:48:14.898511908Z [err]  2026-01-06 15:48:10.923 UTC [8510] STATEMENT:  
2026-01-06T15:48:14.898517328Z [err]  	        SELECT event
2026-01-06T15:48:14.898523326Z [err]  	        FROM event_config
2026-01-06T15:48:14.898529457Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:48:14.898535768Z [err]  	          AND active = 1
2026-01-06T15:48:14.898542151Z [err]  	          AND '15:48' BETWEEN open_time AND close_time
2026-01-06T15:48:14.898548368Z [err]  	        LIMIT 1;
2026-01-06T15:48:14.898554814Z [err]  	        
2026-01-06T15:48:14.898567490Z [err]  2026-01-06 15:48:12.725 UTC [8512] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:48:14.898642476Z [err]  2026-01-06 15:48:12.725 UTC [8512] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:48:14.898652329Z [err]  2026-01-06 15:48:12.725 UTC [8512] STATEMENT:  
2026-01-06T15:48:14.898659987Z [err]  	        SELECT event
2026-01-06T15:48:14.898668346Z [err]  	        FROM event_config
2026-01-06T15:48:14.898675495Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:48:14.898686144Z [err]  	          AND active = 1
2026-01-06T15:48:14.898692529Z [err]  	          AND '15:48' BETWEEN open_time AND close_time
2026-01-06T15:48:14.898700831Z [err]  	        LIMIT 1;
2026-01-06T15:48:14.898712636Z [err]  	        
2026-01-06T15:48:18.247196658Z [err]      raise exc
2026-01-06T15:48:18.247208530Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:48:18.247208905Z [inf]  ðŸ“¨ 27825642545: 8 1:19:33 SBK03E
2026-01-06T15:48:18.247214476Z [inf]  INFO:     100.64.0.3:30080 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:48:18.247219253Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:48:18.247223481Z [err]  Traceback (most recent call last):
2026-01-06T15:48:18.247227616Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:48:18.247231872Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:48:18.247239689Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:48:18.247244112Z [err]          self.scope, self.receive, self.send
2026-01-06T15:48:18.247248725Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:48:18.247253029Z [err]      )
2026-01-06T15:48:18.247256817Z [err]      ^
2026-01-06T15:48:18.247260658Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:48:18.247264512Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:48:18.247268765Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:48:18.247273903Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:48:18.247277693Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:48:18.247281708Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:48:18.247285478Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:48:18.247289387Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:48:18.248256522Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:48:18.248262177Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:48:18.248263093Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:48:18.248267935Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:48:18.248269098Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:48:18.248274614Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:48:18.248280250Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:48:18.248281212Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:48:18.248287035Z [err]      await self.app(scope, receive, send)
2026-01-06T15:48:18.248289199Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:48:18.248292831Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:48:18.248297416Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:48:18.248303975Z [err]      raise exc
2026-01-06T15:48:18.248310716Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:48:18.248317322Z [err]      await app(scope, receive, sender)
2026-01-06T15:48:18.248323767Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:48:18.248330139Z [err]      await self.app(scope, receive, send)
2026-01-06T15:48:18.248342477Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:48:18.250709265Z [err]      raise exc
2026-01-06T15:48:18.250715735Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:48:18.250722222Z [err]      await app(scope, receive, sender)
2026-01-06T15:48:18.250728415Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:48:18.250736377Z [err]      response = await f(request)
2026-01-06T15:48:18.250742369Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:48:18.250749312Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:48:18.250755855Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:48:18.250762462Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:48:18.250769099Z [err]      ...<3 lines>...
2026-01-06T15:48:18.250775638Z [err]      )
2026-01-06T15:48:18.250782682Z [err]      ^
2026-01-06T15:48:18.250791724Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:48:18.250798283Z [err]      return await dependant.call(**values)
2026-01-06T15:48:18.250805065Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:48:18.250812117Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:48:18.250819117Z [err]      event = get_active_event()
2026-01-06T15:48:18.250825549Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:48:18.250831917Z [err]      cur.execute(
2026-01-06T15:48:18.250837852Z [err]      ~~~~~~~~~~~^
2026-01-06T15:48:18.250844502Z [err]          """
2026-01-06T15:48:18.250848440Z [err]          ^^^
2026-01-06T15:48:18.250852242Z [err]      ...<7 lines>...
2026-01-06T15:48:18.250856541Z [err]          (day_of_week, current_time),
2026-01-06T15:48:18.250861691Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:48:18.251210818Z [err]      )
2026-01-06T15:48:18.251218732Z [err]      ^
2026-01-06T15:48:18.251223905Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:48:18.251228238Z [err]      return super().execute(query, vars)
2026-01-06T15:48:18.251232767Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:48:18.251237344Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:48:18.251241326Z [err]  LINE 5:           AND active = 1
2026-01-06T15:48:18.251245402Z [err]                               ^
2026-01-06T15:48:18.251249376Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:48:18.251255491Z [err]  
2026-01-06T15:48:18.251260015Z [inf]  ðŸ“¨ 27825642545: 8 1:19:33 SBK03E
2026-01-06T15:48:18.251263763Z [inf]  INFO:     100.64.0.6:47430 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:48:18.251267777Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:48:18.251271575Z [err]  Traceback (most recent call last):
2026-01-06T15:48:18.251275387Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:48:18.251279682Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:48:18.251283716Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:48:18.251287787Z [err]          self.scope, self.receive, self.send
2026-01-06T15:48:18.251292118Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:48:18.251296405Z [err]      )
2026-01-06T15:48:18.251300608Z [err]      ^
2026-01-06T15:48:18.251304315Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:48:18.251310108Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:48:18.252349166Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:48:18.252353741Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:48:18.252355931Z [err]      await app(scope, receive, sender)
2026-01-06T15:48:18.252359384Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:48:18.252361948Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:48:18.252364290Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:48:18.252370045Z [err]      await self.app(scope, receive, send)
2026-01-06T15:48:18.252370352Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:48:18.252376026Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:48:18.252376341Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:48:18.252380732Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:48:18.252384595Z [err]      raise exc
2026-01-06T15:48:18.252388417Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:48:18.252392797Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:48:18.252397044Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:48:18.252401896Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:48:18.252405939Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:48:18.252410164Z [err]      raise exc
2026-01-06T15:48:18.253436954Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:48:18.253444556Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:48:18.253444622Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:48:18.253449249Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:48:18.253453095Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:48:18.253457334Z [err]      await self.app(scope, receive, send)
2026-01-06T15:48:18.253461630Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:48:18.253466172Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:48:18.253470147Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:48:18.253474442Z [err]      raise exc
2026-01-06T15:48:18.253478270Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:48:18.253482396Z [err]      await app(scope, receive, sender)
2026-01-06T15:48:18.253486921Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:48:18.253492818Z [err]      response = await f(request)
2026-01-06T15:48:18.253497272Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:48:18.253501167Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:48:18.253505656Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:48:18.253509486Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:48:18.253513957Z [err]      ...<3 lines>...
2026-01-06T15:48:18.253517695Z [err]      )
2026-01-06T15:48:18.253522294Z [err]      ^
2026-01-06T15:48:18.254547709Z [err]      return await dependant.call(**values)
2026-01-06T15:48:18.254554685Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:48:18.254555918Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:48:18.254559691Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:48:18.254564626Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:48:18.254564751Z [err]      event = get_active_event()
2026-01-06T15:48:18.254570227Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:48:18.254574537Z [err]  LINE 5:           AND active = 1
2026-01-06T15:48:18.254575368Z [err]      cur.execute(
2026-01-06T15:48:18.254580085Z [err]      ~~~~~~~~~~~^
2026-01-06T15:48:18.254582549Z [err]                               ^
2026-01-06T15:48:18.254585255Z [err]          """
2026-01-06T15:48:18.254589315Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:48:18.254590592Z [err]          ^^^
2026-01-06T15:48:18.254596466Z [err]      ...<7 lines>...
2026-01-06T15:48:18.254596630Z [err]  
2026-01-06T15:48:18.254601646Z [err]          (day_of_week, current_time),
2026-01-06T15:48:18.254603528Z [inf]  ðŸ“¨ 27825642545: 8 1:19:33 SBK03E
2026-01-06T15:48:18.254606437Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:48:18.254610559Z [inf]  INFO:     100.64.0.4:17392 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:48:18.254612105Z [err]      )
2026-01-06T15:48:18.254616122Z [err]      ^
2026-01-06T15:48:18.254620000Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:48:18.254623737Z [err]      return super().execute(query, vars)
2026-01-06T15:48:18.254627466Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:48:18.255846217Z [err]  Traceback (most recent call last):
2026-01-06T15:48:18.255852304Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:48:18.255854859Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:48:18.255860692Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:48:18.255862673Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:48:18.255863561Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:48:18.255867592Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:48:18.255870272Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:48:18.255870657Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:48:18.255872589Z [err]      raise exc
2026-01-06T15:48:18.255876344Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:48:18.255878499Z [err]          self.scope, self.receive, self.send
2026-01-06T15:48:18.255882128Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:48:18.255883087Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:48:18.255886592Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:48:18.255887503Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:48:18.255893380Z [err]      )
2026-01-06T15:48:18.255898659Z [err]      ^
2026-01-06T15:48:18.255904457Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:48:18.255910147Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:48:18.256574177Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:48:18.256579969Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:48:18.256583659Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:48:18.256584610Z [err]      raise exc
2026-01-06T15:48:18.256589075Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:48:18.256594255Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:48:18.256595383Z [err]      await app(scope, receive, sender)
2026-01-06T15:48:18.256600429Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:48:18.256603039Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:48:18.256605348Z [err]      await self.app(scope, receive, send)
2026-01-06T15:48:18.256610150Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:48:18.256612989Z [err]      await self.app(scope, receive, send)
2026-01-06T15:48:18.256615066Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:48:18.256620563Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:48:18.256626432Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:48:18.256630423Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:48:18.256634985Z [err]      raise exc
2026-01-06T15:48:18.256640417Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:48:18.258032446Z [err]      await app(scope, receive, sender)
2026-01-06T15:48:18.258039283Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:48:18.258044297Z [err]      response = await f(request)
2026-01-06T15:48:18.258049510Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:48:18.258050456Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:48:18.258054765Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:48:18.258057027Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:48:18.258058603Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:48:18.258065999Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:48:18.258066629Z [err]      )
2026-01-06T15:48:18.258066733Z [err]      ~~~~~~~~~~~^
2026-01-06T15:48:18.258068613Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:48:18.258073390Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:48:18.258077039Z [err]      ^
2026-01-06T15:48:18.258078536Z [err]      event = get_active_event()
2026-01-06T15:48:18.258078713Z [err]          """
2026-01-06T15:48:18.258079696Z [err]      ...<3 lines>...
2026-01-06T15:48:18.258088695Z [err]      )
2026-01-06T15:48:18.258089215Z [err]          ^^^
2026-01-06T15:48:18.258090119Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:48:18.258094224Z [err]      ^
2026-01-06T15:48:18.258099170Z [err]      ...<7 lines>...
2026-01-06T15:48:18.258100575Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:48:18.258101235Z [err]      cur.execute(
2026-01-06T15:48:18.258108053Z [err]      return await dependant.call(**values)
2026-01-06T15:48:18.258108459Z [err]          (day_of_week, current_time),
2026-01-06T15:48:18.258935260Z [err]      return super().execute(query, vars)
2026-01-06T15:48:18.258948109Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:48:18.258957175Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:48:18.258965227Z [err]  LINE 5:           AND active = 1
2026-01-06T15:48:18.258973254Z [err]                               ^
2026-01-06T15:48:18.258982135Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:48:18.258990559Z [err]  
2026-01-06T15:48:18.258999375Z [inf]  ðŸ“¨ 27825642545: 8 1:19:33 SBK03E
2026-01-06T15:48:18.259007439Z [inf]  INFO:     100.64.0.3:30090 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:48:18.259017829Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:48:18.259026655Z [err]  Traceback (most recent call last):
2026-01-06T15:48:18.259034696Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:48:18.259043053Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:48:18.259051429Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:48:18.259059969Z [err]          self.scope, self.receive, self.send
2026-01-06T15:48:18.259068713Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:48:18.259078248Z [err]      )
2026-01-06T15:48:18.259087306Z [err]      ^
2026-01-06T15:48:18.259094581Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:48:18.259103776Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:48:18.259112722Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:48:18.259122690Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:48:18.259946302Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:48:18.259948395Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:48:18.259952273Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:48:18.259955482Z [err]      await self.app(scope, receive, send)
2026-01-06T15:48:18.259957325Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:48:18.259961877Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:48:18.259962911Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:48:18.259968256Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:48:18.259968452Z [err]      raise exc
2026-01-06T15:48:18.259974640Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:48:18.259975316Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:48:18.259979764Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:48:18.259983357Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:48:18.259987016Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:48:18.259990891Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:48:18.259994731Z [err]      raise exc
2026-01-06T15:48:18.259998467Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:48:18.260002048Z [err]      await app(scope, receive, sender)
2026-01-06T15:48:18.261060121Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:48:18.261065875Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:48:18.261068809Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:48:18.261071216Z [err]      await self.app(scope, receive, send)
2026-01-06T15:48:18.261073299Z [err]      raise exc
2026-01-06T15:48:18.261076832Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:48:18.261079708Z [err]      ...<3 lines>...
2026-01-06T15:48:18.261081305Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:48:18.261082782Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:48:18.261087878Z [err]      await app(scope, receive, sender)
2026-01-06T15:48:18.261090074Z [err]      )
2026-01-06T15:48:18.261090641Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:48:18.261098987Z [err]      ^
2026-01-06T15:48:18.261099858Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:48:18.261107386Z [err]      response = await f(request)
2026-01-06T15:48:18.261107739Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:48:18.261114940Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:48:18.261117349Z [err]      return await dependant.call(**values)
2026-01-06T15:48:18.261120267Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:48:18.261126103Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:48:18.261126829Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:48:18.262325749Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:48:18.262328206Z [err]                               ^
2026-01-06T15:48:18.262335227Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:48:18.262340004Z [err]      event = get_active_event()
2026-01-06T15:48:18.262344185Z [err]  
2026-01-06T15:48:18.262344983Z [err]      )
2026-01-06T15:48:18.262350284Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:48:18.262358381Z [err]      cur.execute(
2026-01-06T15:48:18.262358403Z [err]      ^
2026-01-06T15:48:18.262365202Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:48:18.262367588Z [err]      ~~~~~~~~~~~^
2026-01-06T15:48:18.262370735Z [err]      return super().execute(query, vars)
2026-01-06T15:48:18.262376336Z [err]          """
2026-01-06T15:48:18.262376827Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:48:18.262382634Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:48:18.262386866Z [err]          ^^^
2026-01-06T15:48:18.262388357Z [err]  LINE 5:           AND active = 1
2026-01-06T15:48:18.262394841Z [err]      ...<7 lines>...
2026-01-06T15:48:18.262403069Z [err]          (day_of_week, current_time),
2026-01-06T15:48:18.262410377Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:48:21.882584589Z [inf]  ðŸ“¨ 27825642545: 8 1:19:33 SBK03E
2026-01-06T15:48:22.163818380Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:48:22.163827509Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:48:22.163833552Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:48:22.163837486Z [inf]  INFO:     100.64.0.9:27272 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:48:22.163838464Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:48:22.163843531Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:48:22.163849647Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:48:22.163850412Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:48:22.163854603Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:48:22.163859924Z [err]      raise exc
2026-01-06T15:48:22.163862538Z [err]  Traceback (most recent call last):
2026-01-06T15:48:22.163864928Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:48:22.163873632Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:48:22.163883851Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:48:22.163893834Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:48:22.163902892Z [err]          self.scope, self.receive, self.send
2026-01-06T15:48:22.163914661Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:48:22.163925602Z [err]      )
2026-01-06T15:48:22.163935801Z [err]      ^
2026-01-06T15:48:22.163947674Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:48:22.164518736Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:48:22.164524861Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:48:22.164529561Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:48:22.164533765Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:48:22.164537676Z [err]      raise exc
2026-01-06T15:48:22.164541462Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:48:22.164545295Z [err]      await app(scope, receive, sender)
2026-01-06T15:48:22.164549063Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:48:22.164553485Z [err]      await self.app(scope, receive, send)
2026-01-06T15:48:22.164557455Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:48:22.164561203Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:48:22.164564951Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:48:22.164568595Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:48:22.164572644Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:48:22.164577008Z [err]      await self.app(scope, receive, send)
2026-01-06T15:48:22.164582070Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:48:22.164586393Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:48:22.164590655Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:48:22.165398071Z [err]      raise exc
2026-01-06T15:48:22.165404668Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:48:22.165408670Z [err]      await app(scope, receive, sender)
2026-01-06T15:48:22.165413739Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:48:22.165419334Z [err]      response = await f(request)
2026-01-06T15:48:22.165426293Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:48:22.165426517Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:48:22.165432258Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:48:22.165438899Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:48:22.165441698Z [err]      cur.execute(
2026-01-06T15:48:22.165445849Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:48:22.165453566Z [err]      ...<3 lines>...
2026-01-06T15:48:22.165454710Z [err]      ~~~~~~~~~~~^
2026-01-06T15:48:22.165463105Z [err]      )
2026-01-06T15:48:22.165466461Z [err]          """
2026-01-06T15:48:22.165470249Z [err]      ^
2026-01-06T15:48:22.165482726Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:48:22.165482755Z [err]          ^^^
2026-01-06T15:48:22.165494063Z [err]      ...<7 lines>...
2026-01-06T15:48:22.165497634Z [err]      return await dependant.call(**values)
2026-01-06T15:48:22.165502903Z [err]          (day_of_week, current_time),
2026-01-06T15:48:22.165511537Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:48:22.165514731Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:48:22.165522602Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:48:22.165530611Z [err]      event = get_active_event()
2026-01-06T15:48:22.166429715Z [err]      )
2026-01-06T15:48:22.166439443Z [err]      ^
2026-01-06T15:48:22.166447810Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:48:22.166455908Z [err]      return super().execute(query, vars)
2026-01-06T15:48:22.166462213Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:48:22.166467578Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:48:22.166472299Z [err]  LINE 5:           AND active = 1
2026-01-06T15:48:22.166476879Z [err]                               ^
2026-01-06T15:48:22.166481544Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:48:22.166486210Z [err]  
2026-01-06T15:48:22.808645730Z [err]  2026-01-06 15:48:22.155 UTC [8514] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:48:22.808651121Z [err]  2026-01-06 15:48:22.155 UTC [8514] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:48:22.808656380Z [err]  2026-01-06 15:48:22.155 UTC [8514] STATEMENT:  
2026-01-06T15:48:22.808662133Z [err]  	        SELECT event
2026-01-06T15:48:22.808667594Z [err]  	        FROM event_config
2026-01-06T15:48:22.808675376Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:48:22.808681354Z [err]  	          AND active = 1
2026-01-06T15:48:22.808685800Z [err]  	          AND '15:48' BETWEEN open_time AND close_time
2026-01-06T15:48:22.808690258Z [err]  	        LIMIT 1;
2026-01-06T15:48:22.808694956Z [err]  	        
2026-01-06T15:49:52.116251649Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:49:52.116252610Z [inf]  ðŸ“¨ 27722135094: OPEN SUBMISSION
2026-01-06T15:49:52.116256495Z [err]          self.scope, self.receive, self.send
2026-01-06T15:49:52.116268937Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:49:52.116271344Z [inf]  INFO:     100.64.0.7:28436 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:49:52.116277799Z [err]      )
2026-01-06T15:49:52.116283026Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:49:52.116285320Z [err]      ^
2026-01-06T15:49:52.116296225Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:49:52.116297126Z [err]  Traceback (most recent call last):
2026-01-06T15:49:52.116306470Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:49:52.116307985Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:49:52.116318272Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:49:52.116321444Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:49:52.116327454Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:49:52.116332299Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:49:52.116339362Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:49:52.116345279Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:49:52.116351105Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:49:52.116356807Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:49:52.116362395Z [err]      raise exc
2026-01-06T15:49:52.116996582Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:49:52.117004729Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:49:52.117011679Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:49:52.117016206Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:49:52.117020413Z [err]      raise exc
2026-01-06T15:49:52.117024938Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:49:52.117029424Z [err]      await app(scope, receive, sender)
2026-01-06T15:49:52.117034195Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:49:52.117038554Z [err]      await self.app(scope, receive, send)
2026-01-06T15:49:52.117043496Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:49:52.117047789Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:49:52.117052249Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:49:52.117056615Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:49:52.117061052Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:49:52.117065479Z [err]      await self.app(scope, receive, send)
2026-01-06T15:49:52.117069343Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:49:52.117075077Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:49:52.117079772Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:49:52.118775409Z [err]      event = get_active_event()
2026-01-06T15:49:52.118787329Z [err]      raise exc
2026-01-06T15:49:52.118787519Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:49:52.118795798Z [err]      cur.execute(
2026-01-06T15:49:52.118799318Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:49:52.118804323Z [err]      ~~~~~~~~~~~^
2026-01-06T15:49:52.118808507Z [err]      await app(scope, receive, sender)
2026-01-06T15:49:52.118812952Z [err]          """
2026-01-06T15:49:52.118816887Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:49:52.118822131Z [err]          ^^^
2026-01-06T15:49:52.118825786Z [err]      response = await f(request)
2026-01-06T15:49:52.118831350Z [err]      ...<7 lines>...
2026-01-06T15:49:52.118834746Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:49:52.118839458Z [err]          (day_of_week, current_time),
2026-01-06T15:49:52.118844472Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:49:52.118847733Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:49:52.118853176Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:49:52.118860079Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:49:52.118870125Z [err]      ...<3 lines>...
2026-01-06T15:49:52.118877053Z [err]      )
2026-01-06T15:49:52.118884257Z [err]      ^
2026-01-06T15:49:52.118891034Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:49:52.118897814Z [err]      return await dependant.call(**values)
2026-01-06T15:49:52.118904579Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:49:52.118911187Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:49:52.119755021Z [err]      )
2026-01-06T15:49:52.119766680Z [err]      ^
2026-01-06T15:49:52.119775166Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:49:52.119781361Z [err]      return super().execute(query, vars)
2026-01-06T15:49:52.119786725Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:49:52.119794801Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:49:52.119802661Z [err]  LINE 5:           AND active = 1
2026-01-06T15:49:52.119810439Z [err]                               ^
2026-01-06T15:49:52.119818398Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:49:52.119828682Z [err]  
2026-01-06T15:49:52.119836393Z [inf]  INFO:     100.64.0.3:57932 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:49:54.934427983Z [err]  2026-01-06 15:49:44.559 UTC [8521] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:49:54.934435010Z [err]  2026-01-06 15:49:44.559 UTC [8521] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:49:54.938826069Z [err]  2026-01-06 15:49:44.559 UTC [8521] STATEMENT:  
2026-01-06T15:49:54.938897283Z [err]  	        SELECT event
2026-01-06T15:49:54.938905349Z [err]  	        FROM event_config
2026-01-06T15:49:54.938912489Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:49:54.938920015Z [err]  	          AND active = 1
2026-01-06T15:49:54.938927659Z [err]  	          AND '15:49' BETWEEN open_time AND close_time
2026-01-06T15:49:54.938933751Z [err]  	        LIMIT 1;
2026-01-06T15:49:54.938941400Z [err]  	        
2026-01-06T15:50:12.120211062Z [inf]  ðŸ“¨ 27828296669: Runner
2026-01-06T15:50:12.120222302Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T15:50:12.120230940Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T15:50:12.120238666Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T15:50:12.120245678Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T15:50:12.120252791Z [inf]  ðŸ“¤ Status: 200
2026-01-06T15:50:12.120259880Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27828296669","wa_id":"27828296669"}],"messages":[{"id":"wamid.HBgLMjc4MjgyOTY2NjkVAgARGBI3RThFOEU3RDEzREY3ODc1NDQA"}]}
2026-01-06T15:50:12.120269805Z [inf]  INFO:     100.64.0.8:14976 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:50:12.120277098Z [inf]  INFO:     100.64.0.9:13132 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:50:12.120285349Z [inf]  INFO:     100.64.0.5:59964 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:50:12.120293032Z [inf]  INFO:     100.64.0.3:25332 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T15:52:52.099723499Z [err]  2026-01-06 15:52:43.964 UTC [8533] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:52:52.099729040Z [err]  2026-01-06 15:52:43.964 UTC [8533] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:52:52.099733395Z [err]  2026-01-06 15:52:43.964 UTC [8533] STATEMENT:  
2026-01-06T15:52:52.099741460Z [err]  	        SELECT event
2026-01-06T15:52:52.099745705Z [err]  	        FROM event_config
2026-01-06T15:52:52.099753429Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:52:52.099758258Z [err]  	          AND active = 1
2026-01-06T15:52:52.099764125Z [err]  	          AND '15:52' BETWEEN open_time AND close_time
2026-01-06T15:52:52.099769689Z [err]  	        LIMIT 1;
2026-01-06T15:52:52.099774807Z [err]  	        
2026-01-06T15:52:52.099781827Z [err]  2026-01-06 15:52:46.151 UTC [76] LOG:  checkpoint starting: time
2026-01-06T15:52:52.099800996Z [err]  2026-01-06 15:52:46.306 UTC [76] LOG:  checkpoint complete: wrote 2 buffers (0.0%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.107 s, sync=0.011 s, total=0.156 s; sync files=2, longest=0.008 s, average=0.006 s; distance=6 kB, estimate=31 kB; lsn=0/1A08268, redo lsn=0/1A08210
2026-01-06T15:52:52.289680020Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:52:52.289690113Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:52:52.289697690Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:52:52.289704726Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:52:52.289712499Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:52:52.289714403Z [inf]  ðŸ“¨ 27825642545: 8 1:19:33 SBK03E
2026-01-06T15:52:52.289721556Z [inf]  INFO:     100.64.0.9:31152 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:52:52.289721966Z [err]      raise exc
2026-01-06T15:52:52.289728226Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:52:52.289730566Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:52:52.289735170Z [err]  Traceback (most recent call last):
2026-01-06T15:52:52.289741010Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:52:52.289747215Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:52:52.289753772Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:52:52.289759427Z [err]          self.scope, self.receive, self.send
2026-01-06T15:52:52.289764702Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:52:52.289771926Z [err]      )
2026-01-06T15:52:52.289783024Z [err]      ^
2026-01-06T15:52:52.289790875Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:52:52.289799659Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:52:52.289808590Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:52:52.290275309Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:52:52.290281200Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:52:52.290285810Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:52:52.290289826Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:52:52.290294901Z [err]      raise exc
2026-01-06T15:52:52.290300212Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:52:52.290304018Z [err]      await app(scope, receive, sender)
2026-01-06T15:52:52.290307657Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:52:52.290311490Z [err]      await self.app(scope, receive, send)
2026-01-06T15:52:52.290315537Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:52:52.290319316Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:52:52.290323026Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:52:52.290326539Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:52:52.290330209Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:52:52.290334290Z [err]      await self.app(scope, receive, send)
2026-01-06T15:52:52.290338151Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:52:52.290341681Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:52:52.290345330Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:52:52.290990340Z [err]      raise exc
2026-01-06T15:52:52.290994658Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:52:52.290999570Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:52:52.291006072Z [err]      await app(scope, receive, sender)
2026-01-06T15:52:52.291010659Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:52:52.291014339Z [err]      response = await f(request)
2026-01-06T15:52:52.291017905Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:52:52.291021424Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:52:52.291024749Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:52:52.291028160Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:52:52.291033108Z [err]      ...<3 lines>...
2026-01-06T15:52:52.291036621Z [err]      )
2026-01-06T15:52:52.291040076Z [err]      ^
2026-01-06T15:52:52.291043470Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:52:52.291046890Z [err]      return await dependant.call(**values)
2026-01-06T15:52:52.291050230Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:52:52.291053498Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:52:52.291056860Z [err]      event = get_active_event()
2026-01-06T15:52:52.291060504Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:52:52.291064076Z [err]      cur.execute(
2026-01-06T15:52:52.291068288Z [err]      ~~~~~~~~~~~^
2026-01-06T15:52:52.291071803Z [err]          """
2026-01-06T15:52:52.291075295Z [err]          ^^^
2026-01-06T15:52:52.291078688Z [err]      ...<7 lines>...
2026-01-06T15:52:52.291082116Z [err]          (day_of_week, current_time),
2026-01-06T15:52:52.291938888Z [err]      )
2026-01-06T15:52:52.291944044Z [err]      ^
2026-01-06T15:52:52.291948107Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:52:52.291952105Z [err]      return super().execute(query, vars)
2026-01-06T15:52:52.291955530Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:52:52.291959340Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:52:52.291962882Z [err]  LINE 5:           AND active = 1
2026-01-06T15:52:52.291967386Z [err]                               ^
2026-01-06T15:52:52.291970975Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:52:52.291974768Z [err]  
2026-01-06T15:59:49.705508896Z [err]  2026-01-06 15:59:46.763 UTC [8556] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:59:49.705517322Z [err]  2026-01-06 15:59:46.763 UTC [8556] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:59:49.705524832Z [err]  2026-01-06 15:59:46.763 UTC [8556] STATEMENT:  
2026-01-06T15:59:49.705532520Z [err]  	        SELECT event
2026-01-06T15:59:49.705588324Z [err]  	        FROM event_config
2026-01-06T15:59:49.705595209Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:59:49.705601314Z [err]  	          AND active = 1
2026-01-06T15:59:49.705608233Z [err]  	          AND '15:59' BETWEEN open_time AND close_time
2026-01-06T15:59:49.705617896Z [err]  	        LIMIT 1;
2026-01-06T15:59:49.705624319Z [err]  	        
2026-01-06T15:59:49.705629854Z [err]  2026-01-06 15:59:47.525 UTC [8558] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:59:49.705636913Z [err]  2026-01-06 15:59:47.525 UTC [8558] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:59:49.705643539Z [err]  2026-01-06 15:59:47.525 UTC [8558] STATEMENT:  
2026-01-06T15:59:49.705650157Z [err]  	        SELECT event
2026-01-06T15:59:49.705656133Z [err]  	        FROM event_config
2026-01-06T15:59:49.705661136Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:59:49.705667531Z [err]  	          AND active = 1
2026-01-06T15:59:49.705674502Z [err]  	          AND '15:59' BETWEEN open_time AND close_time
2026-01-06T15:59:49.705682052Z [err]  	        LIMIT 1;
2026-01-06T15:59:49.705690622Z [err]  	        
2026-01-06T15:59:49.705697610Z [err]  2026-01-06 15:59:49.451 UTC [8560] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:59:49.705705845Z [err]  2026-01-06 15:59:49.451 UTC [8560] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:59:49.710857725Z [err]  	          AND active = 1
2026-01-06T15:59:49.710870503Z [err]  	          AND '15:59' BETWEEN open_time AND close_time
2026-01-06T15:59:49.710876408Z [err]  2026-01-06 15:59:49.451 UTC [8560] STATEMENT:  
2026-01-06T15:59:49.710885872Z [err]  	        LIMIT 1;
2026-01-06T15:59:49.710891635Z [err]  	        SELECT event
2026-01-06T15:59:49.710898149Z [err]  	        
2026-01-06T15:59:49.710905271Z [err]  	        FROM event_config
2026-01-06T15:59:49.710914116Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:59:53.187703794Z [err]      raise exc
2026-01-06T15:59:53.187716647Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:59:53.187723699Z [inf]  ðŸ“¨ 27832637248: Hi
2026-01-06T15:59:53.187733573Z [inf]  INFO:     100.64.0.4:60238 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:59:53.187741854Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:59:53.187749267Z [err]  Traceback (most recent call last):
2026-01-06T15:59:53.187758766Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:59:53.187766958Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:59:53.187774156Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:59:53.187781258Z [err]          self.scope, self.receive, self.send
2026-01-06T15:59:53.187789313Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:59:53.187797454Z [err]      )
2026-01-06T15:59:53.187805857Z [err]      ^
2026-01-06T15:59:53.187813004Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:59:53.187820158Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:59:53.187827306Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:59:53.187835438Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:59:53.187843291Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:59:53.187850256Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:59:53.187857346Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:59:53.187864322Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:59:53.188431457Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:59:53.188436057Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:59:53.188440543Z [err]      await self.app(scope, receive, send)
2026-01-06T15:59:53.188442673Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:59:53.188448788Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:59:53.188449310Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:59:53.188454682Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:59:53.188458008Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:59:53.188460125Z [err]      raise exc
2026-01-06T15:59:53.188465448Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:59:53.188467226Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:59:53.188470193Z [err]      await app(scope, receive, sender)
2026-01-06T15:59:53.188474537Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:59:53.188478314Z [err]      await self.app(scope, receive, send)
2026-01-06T15:59:53.188482029Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:59:53.188486110Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:59:53.188489821Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:59:53.188494991Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:59:53.189782285Z [err]      raise exc
2026-01-06T15:59:53.189788697Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:59:53.189793823Z [err]      ...<7 lines>...
2026-01-06T15:59:53.189794188Z [err]      await app(scope, receive, sender)
2026-01-06T15:59:53.189800415Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:59:53.189807007Z [err]      response = await f(request)
2026-01-06T15:59:53.189807156Z [err]          (day_of_week, current_time),
2026-01-06T15:59:53.189815106Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:59:53.189815701Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:59:53.189818889Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:59:53.189823760Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:59:53.189830482Z [err]      return await dependant.call(**values)
2026-01-06T15:59:53.189842966Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:59:53.189847476Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:59:53.189851914Z [err]      ...<3 lines>...
2026-01-06T15:59:53.189856483Z [err]      )
2026-01-06T15:59:53.189862099Z [err]      ^
2026-01-06T15:59:53.189879267Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:59:53.189888993Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:59:53.189898084Z [err]      event = get_active_event()
2026-01-06T15:59:53.189909088Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:59:53.189918507Z [err]      cur.execute(
2026-01-06T15:59:53.189927220Z [err]      ~~~~~~~~~~~^
2026-01-06T15:59:53.189939897Z [err]          """
2026-01-06T15:59:53.189947893Z [err]          ^^^
2026-01-06T15:59:53.190866590Z [err]      )
2026-01-06T15:59:53.190877111Z [err]      ^
2026-01-06T15:59:53.190883666Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:59:53.190888858Z [err]      return super().execute(query, vars)
2026-01-06T15:59:53.190894072Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:59:53.190900778Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:59:53.190906753Z [err]  LINE 5:           AND active = 1
2026-01-06T15:59:53.190912856Z [err]                               ^
2026-01-06T15:59:53.190917733Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:59:53.190922754Z [err]  
2026-01-06T15:59:53.190927966Z [inf]  ðŸ“¨ 27832637248: Hi
2026-01-06T15:59:53.190932641Z [inf]  INFO:     100.64.0.2:27402 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:59:53.190938166Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:59:53.190943019Z [err]  Traceback (most recent call last):
2026-01-06T15:59:53.190947146Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:59:53.190951249Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:59:53.190955727Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:59:53.190961121Z [err]          self.scope, self.receive, self.send
2026-01-06T15:59:53.190965880Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:59:53.190971313Z [err]      )
2026-01-06T15:59:53.190976411Z [err]      ^
2026-01-06T15:59:53.190980853Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:59:53.190985941Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:59:53.191959464Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:59:53.191966073Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:59:53.191969973Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:59:53.191973802Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:59:53.191977954Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:59:53.191982328Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:59:53.191986558Z [err]      raise exc
2026-01-06T15:59:53.191990323Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:59:53.191994379Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:59:53.191997842Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:59:53.192001546Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:59:53.192005305Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:59:53.192009170Z [err]      raise exc
2026-01-06T15:59:53.192012578Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:59:53.192016110Z [err]      await app(scope, receive, sender)
2026-01-06T15:59:53.192020824Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:59:53.192024543Z [err]      await self.app(scope, receive, send)
2026-01-06T15:59:53.192029066Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:59:53.193437908Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:59:53.193448846Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:59:53.193456460Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:59:53.193464230Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:59:53.193472060Z [err]      await self.app(scope, receive, send)
2026-01-06T15:59:53.193480098Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:59:53.193491252Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:59:53.193499006Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:59:53.193506694Z [err]      raise exc
2026-01-06T15:59:53.193514395Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:59:53.193522067Z [err]      await app(scope, receive, sender)
2026-01-06T15:59:53.193529486Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:59:53.193536480Z [err]      response = await f(request)
2026-01-06T15:59:53.193544349Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:59:53.193551702Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:59:53.193559530Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:59:53.193566897Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:59:53.193575278Z [err]      ...<3 lines>...
2026-01-06T15:59:53.193582792Z [err]      )
2026-01-06T15:59:53.193590346Z [err]      ^
2026-01-06T15:59:53.193597228Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:59:53.195020475Z [inf]  INFO:     100.64.0.6:58604 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:59:53.195029753Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:59:53.195033608Z [err]      return await dependant.call(**values)
2026-01-06T15:59:53.195042866Z [err]          (day_of_week, current_time),
2026-01-06T15:59:53.195046910Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:59:53.195047713Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:59:53.195054057Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:59:53.195057732Z [err]  LINE 5:           AND active = 1
2026-01-06T15:59:53.195060899Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:59:53.195064070Z [err]      )
2026-01-06T15:59:53.195068641Z [err]                               ^
2026-01-06T15:59:53.195070776Z [err]      event = get_active_event()
2026-01-06T15:59:53.195074028Z [err]      ^
2026-01-06T15:59:53.195078533Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:59:53.195078966Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:59:53.195083714Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:59:53.195087423Z [err]  
2026-01-06T15:59:53.195087872Z [err]      cur.execute(
2026-01-06T15:59:53.195093270Z [err]      return super().execute(query, vars)
2026-01-06T15:59:53.195097606Z [inf]  ðŸ“¨ 27832637248: Hi
2026-01-06T15:59:53.195098113Z [err]      ~~~~~~~~~~~^
2026-01-06T15:59:53.195103281Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:59:53.195106428Z [err]          """
2026-01-06T15:59:53.195112725Z [err]          ^^^
2026-01-06T15:59:53.195118495Z [err]      ...<7 lines>...
2026-01-06T15:59:53.196044140Z [err]  Traceback (most recent call last):
2026-01-06T15:59:53.196049296Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:59:53.196050252Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:59:53.196055589Z [err]          self.scope, self.receive, self.send
2026-01-06T15:59:53.196057345Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:59:53.196057405Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:59:53.196059869Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:59:53.196064835Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:59:53.196065700Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:59:53.196067463Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:59:53.196071739Z [err]      raise exc
2026-01-06T15:59:53.196074623Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:59:53.196077542Z [err]      )
2026-01-06T15:59:53.196084819Z [err]      ^
2026-01-06T15:59:53.196086504Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:59:53.196090537Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:59:53.196097250Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:59:53.196097300Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:59:53.196105970Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:59:53.196113253Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:59:53.197029233Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:59:53.197030163Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:59:53.197035618Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:59:53.197039743Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:59:53.197041759Z [err]      raise exc
2026-01-06T15:59:53.197048600Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:59:53.197049132Z [err]      raise exc
2026-01-06T15:59:53.197057676Z [err]      await app(scope, receive, sender)
2026-01-06T15:59:53.197057956Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:59:53.197066863Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:59:53.197078310Z [err]      await self.app(scope, receive, send)
2026-01-06T15:59:53.197082105Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:59:53.197086736Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:59:53.197090786Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:59:53.197094676Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:59:53.197099287Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:59:53.197103599Z [err]      await self.app(scope, receive, send)
2026-01-06T15:59:53.197107293Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:59:53.198550578Z [err]      await app(scope, receive, sender)
2026-01-06T15:59:53.198559228Z [err]      ^
2026-01-06T15:59:53.198562431Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:59:53.198563408Z [err]          """
2026-01-06T15:59:53.198571468Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:59:53.198574981Z [err]          ^^^
2026-01-06T15:59:53.198575140Z [err]      response = await f(request)
2026-01-06T15:59:53.198583774Z [err]      ^
2026-01-06T15:59:53.198584273Z [err]      ...<7 lines>...
2026-01-06T15:59:53.198587905Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:59:53.198592414Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:59:53.198593261Z [err]          (day_of_week, current_time),
2026-01-06T15:59:53.198598470Z [err]      return await dependant.call(**values)
2026-01-06T15:59:53.198599950Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:59:53.198602554Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:59:53.198604267Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:59:53.198611903Z [err]      )
2026-01-06T15:59:53.198613300Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:59:53.198613410Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:59:53.198623394Z [err]      event = get_active_event()
2026-01-06T15:59:53.198625195Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:59:53.198632174Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:59:53.198636090Z [err]      ...<3 lines>...
2026-01-06T15:59:53.198639986Z [err]      cur.execute(
2026-01-06T15:59:53.198647123Z [err]      )
2026-01-06T15:59:53.198647732Z [err]      ~~~~~~~~~~~^
2026-01-06T15:59:53.199305174Z [err]      return super().execute(query, vars)
2026-01-06T15:59:53.199315238Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:59:53.199328101Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:59:53.199336880Z [err]  LINE 5:           AND active = 1
2026-01-06T15:59:53.199344483Z [err]                               ^
2026-01-06T15:59:53.199352029Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:59:53.199360031Z [err]  
2026-01-06T15:59:53.761349932Z [inf]  ðŸ“¨ 27832637248: Hi
2026-01-06T15:59:54.035529706Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T15:59:54.035537402Z [inf]  INFO:     100.64.0.6:58606 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T15:59:54.035545504Z [err]      raise exc
2026-01-06T15:59:54.035546833Z [err]  ERROR:    Exception in ASGI application
2026-01-06T15:59:54.035555045Z [err]  Traceback (most recent call last):
2026-01-06T15:59:54.035556497Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T15:59:54.035560574Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T15:59:54.035565010Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T15:59:54.035570068Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:59:54.035574788Z [err]          self.scope, self.receive, self.send
2026-01-06T15:59:54.035580230Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:59:54.035584327Z [err]      )
2026-01-06T15:59:54.035588867Z [err]      ^
2026-01-06T15:59:54.035593325Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T15:59:54.035597849Z [err]      return await self.app(scope, receive, send)
2026-01-06T15:59:54.035601652Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:59:54.035607054Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T15:59:54.035611340Z [err]      await super().__call__(scope, receive, send)
2026-01-06T15:59:54.035614873Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T15:59:54.035618927Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:59:54.036570811Z [err]      await self.app(scope, receive, _send)
2026-01-06T15:59:54.036576275Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:59:54.036581464Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T15:59:54.036585281Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T15:59:54.036593619Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T15:59:54.036595219Z [err]      await route.handle(scope, receive, send)
2026-01-06T15:59:54.036601998Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T15:59:54.036603118Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T15:59:54.036607535Z [err]      await self.app(scope, receive, send)
2026-01-06T15:59:54.036612158Z [err]      raise exc
2026-01-06T15:59:54.036613533Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T15:59:54.036619225Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T15:59:54.036621523Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:59:54.036628636Z [err]      await app(scope, receive, sender)
2026-01-06T15:59:54.036635558Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T15:59:54.036642212Z [err]      await self.app(scope, receive, send)
2026-01-06T15:59:54.036649363Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T15:59:54.036656238Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T15:59:54.037317810Z [err]      raise exc
2026-01-06T15:59:54.037327165Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:59:54.037328192Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T15:59:54.037334559Z [err]      await app(scope, receive, sender)
2026-01-06T15:59:54.037339222Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T15:59:54.037343333Z [err]      response = await f(request)
2026-01-06T15:59:54.037347786Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T15:59:54.037352132Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T15:59:54.037357873Z [err]      raw_response = await run_endpoint_function(
2026-01-06T15:59:54.037362329Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:59:54.037367003Z [err]      ...<3 lines>...
2026-01-06T15:59:54.037371233Z [err]      )
2026-01-06T15:59:54.037375216Z [err]      ^
2026-01-06T15:59:54.037379638Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T15:59:54.037384816Z [err]      return await dependant.call(**values)
2026-01-06T15:59:54.037388989Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T15:59:54.037392987Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T15:59:54.037397093Z [err]      event = get_active_event()
2026-01-06T15:59:54.037401426Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T15:59:54.037405862Z [err]      cur.execute(
2026-01-06T15:59:54.037410093Z [err]      ~~~~~~~~~~~^
2026-01-06T15:59:54.037414806Z [err]          """
2026-01-06T15:59:54.037419966Z [err]          ^^^
2026-01-06T15:59:54.037424136Z [err]      ...<7 lines>...
2026-01-06T15:59:54.037428114Z [err]          (day_of_week, current_time),
2026-01-06T15:59:54.037853265Z [err]      )
2026-01-06T15:59:54.037863606Z [err]                               ^
2026-01-06T15:59:54.037869796Z [err]      ^
2026-01-06T15:59:54.037878666Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:59:54.037884273Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T15:59:54.037890660Z [err]  
2026-01-06T15:59:54.037896483Z [err]      return super().execute(query, vars)
2026-01-06T15:59:54.037903418Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T15:59:54.037908883Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T15:59:54.037915080Z [err]  LINE 5:           AND active = 1
2026-01-06T15:59:54.758328524Z [err]  2026-01-06 15:59:54.016 UTC [8562] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T15:59:54.758338833Z [err]  2026-01-06 15:59:54.016 UTC [8562] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T15:59:54.758347679Z [err]  2026-01-06 15:59:54.016 UTC [8562] STATEMENT:  
2026-01-06T15:59:54.758357273Z [err]  	        SELECT event
2026-01-06T15:59:54.758365310Z [err]  	        FROM event_config
2026-01-06T15:59:54.758373303Z [err]  	        WHERE day_of_week = 1
2026-01-06T15:59:54.758381953Z [err]  	          AND active = 1
2026-01-06T15:59:54.758390430Z [err]  	          AND '15:59' BETWEEN open_time AND close_time
2026-01-06T15:59:54.758398921Z [err]  	        LIMIT 1;
2026-01-06T15:59:54.758413453Z [err]  	        
2026-01-06T16:02:30.432541295Z [err]  2026-01-06 16:02:24.937 UTC [8572] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:02:30.432549305Z [err]  2026-01-06 16:02:24.937 UTC [8572] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:02:30.432556080Z [err]  2026-01-06 16:02:24.937 UTC [8572] STATEMENT:  
2026-01-06T16:02:30.432562651Z [err]  	        SELECT event
2026-01-06T16:02:30.432570351Z [err]  	        FROM event_config
2026-01-06T16:02:30.432578284Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:02:30.432586425Z [err]  	          AND active = 1
2026-01-06T16:02:30.432594095Z [err]  	          AND '16:02' BETWEEN open_time AND close_time
2026-01-06T16:02:30.432601463Z [err]  	        LIMIT 1;
2026-01-06T16:02:30.432608573Z [err]  	        
2026-01-06T16:02:34.410120921Z [inf]  ðŸ“¨ 27832637248: Hi
2026-01-06T16:02:34.410129012Z [inf]  INFO:     100.64.0.4:46666 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:02:34.410136471Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:02:34.410143086Z [err]  Traceback (most recent call last):
2026-01-06T16:02:34.410148451Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:02:34.410154187Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:02:34.410158894Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:02:34.410163373Z [err]          self.scope, self.receive, self.send
2026-01-06T16:02:34.410168196Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:02:34.410172690Z [err]      )
2026-01-06T16:02:34.410177106Z [err]      ^
2026-01-06T16:02:34.410183577Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:02:34.410191089Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:02:34.410197721Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:02:34.410204289Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:02:34.410211412Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:02:34.410217953Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:02:34.410225767Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:02:34.410238592Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:02:34.410245877Z [err]      raise exc
2026-01-06T16:02:34.410252743Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:02:34.410898867Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:02:34.410904451Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:02:34.410909779Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:02:34.410914771Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:02:34.410920406Z [err]      raise exc
2026-01-06T16:02:34.410925973Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:02:34.410931933Z [err]      await app(scope, receive, sender)
2026-01-06T16:02:34.410938309Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:02:34.410944106Z [err]      await self.app(scope, receive, send)
2026-01-06T16:02:34.410949906Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:02:34.410955376Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:02:34.410960603Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:02:34.410967477Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:02:34.410972856Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:02:34.410979241Z [err]      await self.app(scope, receive, send)
2026-01-06T16:02:34.410984951Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:02:34.410990209Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:02:34.410995585Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:02:34.412020429Z [err]      ...<3 lines>...
2026-01-06T16:02:34.412031219Z [err]      )
2026-01-06T16:02:34.412039006Z [err]          """
2026-01-06T16:02:34.412040713Z [err]      ^
2026-01-06T16:02:34.412049282Z [err]          ^^^
2026-01-06T16:02:34.412052422Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:02:34.412058207Z [err]      ...<7 lines>...
2026-01-06T16:02:34.412061106Z [err]      return await dependant.call(**values)
2026-01-06T16:02:34.412068541Z [err]          (day_of_week, current_time),
2026-01-06T16:02:34.412071789Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:02:34.412077133Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:02:34.412078595Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:02:34.412080344Z [err]      raise exc
2026-01-06T16:02:34.412083769Z [err]      event = get_active_event()
2026-01-06T16:02:34.412088998Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:02:34.412089486Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:02:34.412094028Z [err]      cur.execute(
2026-01-06T16:02:34.412100022Z [err]      ~~~~~~~~~~~^
2026-01-06T16:02:34.412101524Z [err]      await app(scope, receive, sender)
2026-01-06T16:02:34.412108245Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:02:34.412115492Z [err]      response = await f(request)
2026-01-06T16:02:34.412121850Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:02:34.412126356Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:02:34.412130263Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:02:34.412134738Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:02:34.412991417Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:02:34.413002514Z [err]  LINE 5:           AND active = 1
2026-01-06T16:02:34.413006633Z [err]      )
2026-01-06T16:02:34.413012836Z [err]      ^
2026-01-06T16:02:34.413013739Z [err]                               ^
2026-01-06T16:02:34.413017673Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:02:34.413023308Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:02:34.413023406Z [err]      return super().execute(query, vars)
2026-01-06T16:02:34.413028449Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:02:34.413032690Z [err]  
2026-01-06T16:02:36.909444445Z [inf]  ðŸ“¨ 27832637248: Hi
2026-01-06T16:02:37.160438152Z [inf]  INFO:     100.64.0.9:11376 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:02:37.166673117Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:02:37.166687848Z [err]  Traceback (most recent call last):
2026-01-06T16:02:37.166700686Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:02:37.166710472Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:02:37.166719096Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:02:37.166731277Z [err]          self.scope, self.receive, self.send
2026-01-06T16:02:37.166740097Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:02:37.166749266Z [err]      )
2026-01-06T16:02:37.166758199Z [err]      ^
2026-01-06T16:02:37.166768268Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:02:37.166775520Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:02:37.166782405Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:02:37.166788946Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:02:37.166795036Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:02:37.166801422Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:02:37.166805148Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:02:37.166811730Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:02:37.166818314Z [err]      raise exc
2026-01-06T16:02:37.166824971Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:02:37.166832286Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:02:37.167583691Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:02:37.167591452Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:02:37.167597981Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:02:37.167602599Z [err]      raise exc
2026-01-06T16:02:37.167608402Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:02:37.167613876Z [err]      await app(scope, receive, sender)
2026-01-06T16:02:37.167618604Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:02:37.167623696Z [err]      await self.app(scope, receive, send)
2026-01-06T16:02:37.167628046Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:02:37.167633090Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:02:37.167637783Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:02:37.167643512Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:02:37.167648250Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:02:37.167652682Z [err]      await self.app(scope, receive, send)
2026-01-06T16:02:37.167657816Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:02:37.167662755Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:02:37.167667362Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:02:37.167671872Z [err]      raise exc
2026-01-06T16:02:37.168765912Z [err]      return await dependant.call(**values)
2026-01-06T16:02:37.168772889Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:02:37.168775671Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:02:37.168779995Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:02:37.168782342Z [err]      await app(scope, receive, sender)
2026-01-06T16:02:37.168786399Z [err]      event = get_active_event()
2026-01-06T16:02:37.168788584Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:02:37.168792942Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:02:37.168794472Z [err]      response = await f(request)
2026-01-06T16:02:37.168798586Z [err]      cur.execute(
2026-01-06T16:02:37.168800212Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:02:37.168804599Z [err]      ~~~~~~~~~~~^
2026-01-06T16:02:37.168805341Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:02:37.168810638Z [err]          """
2026-01-06T16:02:37.168811399Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:02:37.168816857Z [err]          ^^^
2026-01-06T16:02:37.168817515Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:02:37.168822818Z [err]      ...<7 lines>...
2026-01-06T16:02:37.168823498Z [err]      ...<3 lines>...
2026-01-06T16:02:37.168829655Z [err]          (day_of_week, current_time),
2026-01-06T16:02:37.168829772Z [err]      )
2026-01-06T16:02:37.168834991Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:02:37.168837171Z [err]      ^
2026-01-06T16:02:37.168840891Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:02:37.169541462Z [err]      )
2026-01-06T16:02:37.169547441Z [err]      ^
2026-01-06T16:02:37.169551276Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:02:37.169555050Z [err]      return super().execute(query, vars)
2026-01-06T16:02:37.169560372Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:02:37.169564304Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:02:37.169568985Z [err]  LINE 5:           AND active = 1
2026-01-06T16:02:37.169573425Z [err]                               ^
2026-01-06T16:02:37.169577200Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:02:37.169581316Z [err]  
2026-01-06T16:02:37.482219089Z [err]  2026-01-06 16:02:37.155 UTC [8574] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:02:37.482226491Z [err]  2026-01-06 16:02:37.155 UTC [8574] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:02:37.482234486Z [err]  2026-01-06 16:02:37.155 UTC [8574] STATEMENT:  
2026-01-06T16:02:37.482242494Z [err]  	        SELECT event
2026-01-06T16:02:37.482249509Z [err]  	        FROM event_config
2026-01-06T16:02:37.482258094Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:02:37.482265240Z [err]  	          AND active = 1
2026-01-06T16:02:37.482274130Z [err]  	          AND '16:02' BETWEEN open_time AND close_time
2026-01-06T16:02:37.482281126Z [err]  	        LIMIT 1;
2026-01-06T16:02:37.482287903Z [err]  	        
2026-01-06T16:07:08.185897260Z [err]      )
2026-01-06T16:07:08.185908668Z [err]      ^
2026-01-06T16:07:08.185915998Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:07:08.185922983Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:07:08.185930372Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:07:08.185936680Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:07:08.185940839Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:07:08.185945482Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:07:08.185951787Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:07:08.185959985Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:07:08.185967910Z [err]      raise exc
2026-01-06T16:07:08.185969799Z [inf]  ðŸ“¨ 27639259085: 4km 30:53 SBK03E
2026-01-06T16:07:08.185975416Z [inf]  INFO:     100.64.0.9:22624 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:07:08.185978891Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:07:08.185982295Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:07:08.185986807Z [err]  Traceback (most recent call last):
2026-01-06T16:07:08.185990694Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:07:08.185995908Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:07:08.185999905Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:07:08.186004326Z [err]          self.scope, self.receive, self.send
2026-01-06T16:07:08.186008725Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:07:08.187183779Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:07:08.187192315Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:07:08.187200610Z [err]      await self.app(scope, receive, send)
2026-01-06T16:07:08.187201815Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:07:08.187209204Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:07:08.187212366Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:07:08.187218453Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:07:08.187219696Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:07:08.187227389Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:07:08.187229666Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:07:08.187232832Z [err]      raise exc
2026-01-06T16:07:08.187238497Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:07:08.187242570Z [err]      await app(scope, receive, sender)
2026-01-06T16:07:08.187246839Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:07:08.187250667Z [err]      await self.app(scope, receive, send)
2026-01-06T16:07:08.187254869Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:07:08.187258859Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:07:08.187262521Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:07:08.188427388Z [err]          """
2026-01-06T16:07:08.188435449Z [err]          ^^^
2026-01-06T16:07:08.188443345Z [err]      ...<7 lines>...
2026-01-06T16:07:08.188444760Z [err]      return await dependant.call(**values)
2026-01-06T16:07:08.188450378Z [err]      raise exc
2026-01-06T16:07:08.188452048Z [err]          (day_of_week, current_time),
2026-01-06T16:07:08.188453890Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:07:08.188460635Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:07:08.188461063Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:07:08.188462550Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:07:08.188468516Z [err]      await app(scope, receive, sender)
2026-01-06T16:07:08.188472915Z [err]      event = get_active_event()
2026-01-06T16:07:08.188475331Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:07:08.188483575Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:07:08.188485413Z [err]      response = await f(request)
2026-01-06T16:07:08.188492395Z [err]      cur.execute(
2026-01-06T16:07:08.188492655Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:07:08.188498228Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:07:08.188504000Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:07:08.188510398Z [err]      ~~~~~~~~~~~^
2026-01-06T16:07:08.188510698Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:07:08.188518497Z [err]      ...<3 lines>...
2026-01-06T16:07:08.188523929Z [err]      )
2026-01-06T16:07:08.188529381Z [err]      ^
2026-01-06T16:07:08.188534740Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:07:08.190107137Z [err]          self.scope, self.receive, self.send
2026-01-06T16:07:08.190114516Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:07:08.190117065Z [err]      )
2026-01-06T16:07:08.190120390Z [err]      )
2026-01-06T16:07:08.190125531Z [err]      ^
2026-01-06T16:07:08.190125905Z [err]      ^
2026-01-06T16:07:08.190131809Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:07:08.190132595Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:07:08.190139097Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:07:08.190139208Z [err]      return super().execute(query, vars)
2026-01-06T16:07:08.190144396Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:07:08.190149969Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:07:08.190154815Z [err]  LINE 5:           AND active = 1
2026-01-06T16:07:08.190158608Z [err]                               ^
2026-01-06T16:07:08.190164695Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:07:08.190169254Z [err]  
2026-01-06T16:07:08.190174170Z [inf]  ðŸ“¨ 27639259085: 4km 30:53 SBK03E
2026-01-06T16:07:08.190178882Z [inf]  INFO:     100.64.0.3:30326 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:07:08.190183082Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:07:08.190187089Z [err]  Traceback (most recent call last):
2026-01-06T16:07:08.190191347Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:07:08.190195052Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:07:08.190200426Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:07:08.191773655Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:07:08.191784158Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:07:08.191788562Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:07:08.191789607Z [err]      await self.app(scope, receive, send)
2026-01-06T16:07:08.191794079Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:07:08.191797587Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:07:08.191799343Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:07:08.191802925Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:07:08.191807487Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:07:08.191812375Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:07:08.191814012Z [err]      raise exc
2026-01-06T16:07:08.191819760Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:07:08.191821647Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:07:08.191827799Z [err]      await app(scope, receive, sender)
2026-01-06T16:07:08.191830480Z [err]      raise exc
2026-01-06T16:07:08.191834113Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:07:08.191837333Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:07:08.191842400Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:07:08.192978515Z [err]      await self.app(scope, receive, send)
2026-01-06T16:07:08.192979677Z [err]      ^
2026-01-06T16:07:08.192981695Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:07:08.192986296Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:07:08.192986972Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:07:08.192989587Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:07:08.192993330Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:07:08.192996453Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:07:08.192999356Z [err]      raise exc
2026-01-06T16:07:08.192999410Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:07:08.193003665Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:07:08.193007915Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:07:08.193014208Z [err]      await app(scope, receive, sender)
2026-01-06T16:07:08.193020401Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:07:08.193026188Z [err]      response = await f(request)
2026-01-06T16:07:08.193032703Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:07:08.193039944Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:07:08.193046055Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:07:08.193051766Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:07:08.193057600Z [err]      ...<3 lines>...
2026-01-06T16:07:08.193063445Z [err]      )
2026-01-06T16:07:08.194488167Z [err]  
2026-01-06T16:07:08.194495326Z [err]      return await dependant.call(**values)
2026-01-06T16:07:08.194498495Z [inf]  ðŸ“¨ 27639259085: 4km 30:53 SBK03E
2026-01-06T16:07:08.194503694Z [err]          (day_of_week, current_time),
2026-01-06T16:07:08.194504040Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:07:08.194507724Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:07:08.194511708Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:07:08.194511972Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:07:08.194518380Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:07:08.194520149Z [err]      )
2026-01-06T16:07:08.194520360Z [err]      event = get_active_event()
2026-01-06T16:07:08.194527280Z [err]  LINE 5:           AND active = 1
2026-01-06T16:07:08.194528529Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:07:08.194529480Z [err]      ^
2026-01-06T16:07:08.194534050Z [inf]  INFO:     100.64.0.2:51146 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:07:08.194535828Z [err]                               ^
2026-01-06T16:07:08.194538802Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:07:08.194540608Z [err]      cur.execute(
2026-01-06T16:07:08.194541830Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:07:08.194544397Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:07:08.194546999Z [err]      return super().execute(query, vars)
2026-01-06T16:07:08.194551325Z [err]      ~~~~~~~~~~~^
2026-01-06T16:07:08.194559599Z [err]          """
2026-01-06T16:07:08.194567736Z [err]          ^^^
2026-01-06T16:07:08.194574559Z [err]      ...<7 lines>...
2026-01-06T16:07:08.196086288Z [err]  Traceback (most recent call last):
2026-01-06T16:07:08.196087035Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:07:08.196092256Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:07:08.196096258Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:07:08.196100343Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:07:08.196104682Z [err]          self.scope, self.receive, self.send
2026-01-06T16:07:08.196108550Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:07:08.196112141Z [err]      )
2026-01-06T16:07:08.196115858Z [err]      ^
2026-01-06T16:07:08.196119808Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:07:08.196123811Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:07:08.196127496Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:07:08.196131236Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:07:08.196134846Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:07:08.196138581Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:07:08.196142031Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:07:08.196145481Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:07:08.196149649Z [err]      raise exc
2026-01-06T16:07:08.196154660Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:07:08.196160514Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:07:08.197437931Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:07:08.197443969Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:07:08.197444235Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:07:08.197448683Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:07:08.197454166Z [err]      raise exc
2026-01-06T16:07:08.197456118Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:07:08.197459734Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:07:08.197465141Z [err]      raise exc
2026-01-06T16:07:08.197470990Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:07:08.197475940Z [err]      await app(scope, receive, sender)
2026-01-06T16:07:08.197480406Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:07:08.197486635Z [err]      await self.app(scope, receive, send)
2026-01-06T16:07:08.197490693Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:07:08.197494906Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:07:08.197499493Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:07:08.197503166Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:07:08.197506801Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:07:08.197510857Z [err]      await self.app(scope, receive, send)
2026-01-06T16:07:08.199196003Z [err]      await app(scope, receive, sender)
2026-01-06T16:07:08.199204719Z [err]      ...<3 lines>...
2026-01-06T16:07:08.199207820Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:07:08.199208552Z [err]      ^
2026-01-06T16:07:08.199208797Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:07:08.199214038Z [err]      )
2026-01-06T16:07:08.199217909Z [err]      event = get_active_event()
2026-01-06T16:07:08.199218216Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:07:08.199220426Z [err]      response = await f(request)
2026-01-06T16:07:08.199222932Z [err]      ^
2026-01-06T16:07:08.199228189Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:07:08.199228516Z [err]          ^^^
2026-01-06T16:07:08.199231623Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:07:08.199233696Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:07:08.199237835Z [err]      cur.execute(
2026-01-06T16:07:08.199238209Z [err]      ...<7 lines>...
2026-01-06T16:07:08.199244363Z [err]      return await dependant.call(**values)
2026-01-06T16:07:08.199247481Z [err]          (day_of_week, current_time),
2026-01-06T16:07:08.199247764Z [err]      ~~~~~~~~~~~^
2026-01-06T16:07:08.199250630Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:07:08.199256002Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:07:08.199257339Z [err]          """
2026-01-06T16:07:08.199261775Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:07:08.199262391Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:07:08.199264377Z [err]      )
2026-01-06T16:07:08.199272622Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:07:08.200341691Z [err]      return super().execute(query, vars)
2026-01-06T16:07:08.200346195Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:07:08.200350646Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:07:08.200354668Z [err]  LINE 5:           AND active = 1
2026-01-06T16:07:08.200358428Z [err]                               ^
2026-01-06T16:07:08.200363969Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:07:08.200368626Z [err]  
2026-01-06T16:07:09.180260331Z [inf]  ðŸ“¨ 27639259085: 4km 30:53 SBK03E
2026-01-06T16:07:09.466792505Z [inf]  INFO:     100.64.0.5:39530 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:07:09.466794551Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:07:09.466800004Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:07:09.466803222Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:07:09.466805836Z [err]  Traceback (most recent call last):
2026-01-06T16:07:09.466810664Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:07:09.466812275Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:07:09.466817081Z [err]      raise exc
2026-01-06T16:07:09.466818621Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:07:09.466823575Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:07:09.466824500Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:07:09.466829358Z [err]          self.scope, self.receive, self.send
2026-01-06T16:07:09.466833607Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:07:09.466837267Z [err]      )
2026-01-06T16:07:09.466841066Z [err]      ^
2026-01-06T16:07:09.466845249Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:07:09.466850693Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:07:09.466854598Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:07:09.466858055Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:07:09.466861653Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:07:09.468191392Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:07:09.468202215Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:07:09.468203065Z [err]      await self.app(scope, receive, send)
2026-01-06T16:07:09.468213180Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:07:09.468214046Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:07:09.468222135Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:07:09.468228987Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:07:09.468233313Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:07:09.468238654Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:07:09.468246963Z [err]      raise exc
2026-01-06T16:07:09.468258467Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:07:09.468266340Z [err]      await app(scope, receive, sender)
2026-01-06T16:07:09.468272172Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:07:09.468277834Z [err]      await self.app(scope, receive, send)
2026-01-06T16:07:09.468283541Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:07:09.468288507Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:07:09.468293555Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:07:09.468298784Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:07:09.469748297Z [err]      raise exc
2026-01-06T16:07:09.469758485Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:07:09.469763279Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:07:09.469766721Z [err]      ~~~~~~~~~~~^
2026-01-06T16:07:09.469773047Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:07:09.469774655Z [err]      await app(scope, receive, sender)
2026-01-06T16:07:09.469777093Z [err]          """
2026-01-06T16:07:09.469783545Z [err]      return await dependant.call(**values)
2026-01-06T16:07:09.469786745Z [err]          ^^^
2026-01-06T16:07:09.469787253Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:07:09.469793860Z [err]      ...<7 lines>...
2026-01-06T16:07:09.469796618Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:07:09.469799861Z [err]      response = await f(request)
2026-01-06T16:07:09.469801018Z [err]          (day_of_week, current_time),
2026-01-06T16:07:09.469807971Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:07:09.469808903Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:07:09.469815867Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:07:09.469818863Z [err]      event = get_active_event()
2026-01-06T16:07:09.469825653Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:07:09.469829841Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:07:09.469864417Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:07:09.469873584Z [err]      ...<3 lines>...
2026-01-06T16:07:09.469876556Z [err]      cur.execute(
2026-01-06T16:07:09.469881598Z [err]      )
2026-01-06T16:07:09.469888441Z [err]      ^
2026-01-06T16:07:09.471400148Z [err]      )
2026-01-06T16:07:09.471410930Z [err]      ^
2026-01-06T16:07:09.471418433Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:07:09.471424390Z [err]      return super().execute(query, vars)
2026-01-06T16:07:09.471430636Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:07:09.471436864Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:07:09.471443045Z [err]  LINE 5:           AND active = 1
2026-01-06T16:07:09.471449823Z [err]                               ^
2026-01-06T16:07:09.471455551Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:07:09.471475544Z [err]  
2026-01-06T16:07:11.318760971Z [err]  2026-01-06 16:07:05.250 UTC [8590] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:07:11.318775492Z [err]  2026-01-06 16:07:05.250 UTC [8590] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:07:11.318783393Z [err]  2026-01-06 16:07:05.250 UTC [8590] STATEMENT:  
2026-01-06T16:07:11.318791219Z [err]  	        SELECT event
2026-01-06T16:07:11.318798738Z [err]  	        FROM event_config
2026-01-06T16:07:11.318808597Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:07:11.318816369Z [err]  	          AND active = 1
2026-01-06T16:07:11.318822244Z [err]  	          AND '16:07' BETWEEN open_time AND close_time
2026-01-06T16:07:11.318831657Z [err]  	        LIMIT 1;
2026-01-06T16:07:11.318839904Z [err]  	        
2026-01-06T16:07:11.318846468Z [err]  2026-01-06 16:07:06.345 UTC [8592] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:07:11.318853040Z [err]  2026-01-06 16:07:06.345 UTC [8592] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:07:11.318858026Z [err]  2026-01-06 16:07:06.345 UTC [8592] STATEMENT:  
2026-01-06T16:07:11.318863749Z [err]  	        SELECT event
2026-01-06T16:07:11.318869555Z [err]  	        FROM event_config
2026-01-06T16:07:11.318875826Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:07:11.318884673Z [err]  	          AND active = 1
2026-01-06T16:07:11.318891646Z [err]  	          AND '16:07' BETWEEN open_time AND close_time
2026-01-06T16:07:11.318896483Z [err]  	        LIMIT 1;
2026-01-06T16:07:11.318902383Z [err]  	        
2026-01-06T16:07:11.318907861Z [err]  2026-01-06 16:07:07.062 UTC [8594] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:07:11.318913762Z [err]  2026-01-06 16:07:07.062 UTC [8594] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:07:11.321935633Z [err]  2026-01-06 16:07:07.062 UTC [8594] STATEMENT:  
2026-01-06T16:07:11.321946119Z [err]  	        SELECT event
2026-01-06T16:07:11.321955436Z [err]  	        FROM event_config
2026-01-06T16:07:11.321963995Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:07:11.321972642Z [err]  	          AND active = 1
2026-01-06T16:07:11.321980960Z [err]  	          AND '16:07' BETWEEN open_time AND close_time
2026-01-06T16:07:11.321989265Z [err]  	        LIMIT 1;
2026-01-06T16:07:11.321999367Z [err]  	        
2026-01-06T16:07:11.322011010Z [err]  2026-01-06 16:07:09.450 UTC [8596] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:07:11.322022004Z [err]  2026-01-06 16:07:09.450 UTC [8596] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:07:11.322030314Z [err]  2026-01-06 16:07:09.450 UTC [8596] STATEMENT:  
2026-01-06T16:07:11.322038683Z [err]  	        SELECT event
2026-01-06T16:07:11.322045792Z [err]  	        FROM event_config
2026-01-06T16:07:11.322053828Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:07:11.322063724Z [err]  	          AND active = 1
2026-01-06T16:07:11.322070766Z [err]  	          AND '16:07' BETWEEN open_time AND close_time
2026-01-06T16:07:11.322079050Z [err]  	        LIMIT 1;
2026-01-06T16:07:11.322087988Z [err]  	        
2026-01-06T16:07:16.495361095Z [inf]  ðŸ“¨ 27639259085: 4km 30:53 SBK03E
2026-01-06T16:07:16.782851104Z [inf]  INFO:     100.64.0.3:27522 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:07:16.782855908Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:07:16.782859607Z [err]  Traceback (most recent call last):
2026-01-06T16:07:16.782865251Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:07:16.782871383Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:07:16.782877655Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:07:16.782883618Z [err]          self.scope, self.receive, self.send
2026-01-06T16:07:16.782889780Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:07:16.782896840Z [err]      )
2026-01-06T16:07:16.782900620Z [err]      ^
2026-01-06T16:07:16.782904761Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:07:16.782908662Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:07:16.782912251Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:07:16.782916183Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:07:16.782920399Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:07:16.782925136Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:07:16.782929612Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:07:16.782934474Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:07:16.782938220Z [err]      raise exc
2026-01-06T16:07:16.782941598Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:07:16.783777917Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:07:16.783785546Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:07:16.783788813Z [err]      await self.app(scope, receive, send)
2026-01-06T16:07:16.783793968Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:07:16.783795038Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:07:16.783798495Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:07:16.783801641Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:07:16.783806237Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:07:16.783808590Z [err]      raise exc
2026-01-06T16:07:16.783815114Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:07:16.783815442Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:07:16.783822457Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:07:16.783822739Z [err]      await app(scope, receive, sender)
2026-01-06T16:07:16.783829552Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:07:16.783829898Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:07:16.783835887Z [err]      await self.app(scope, receive, send)
2026-01-06T16:07:16.783841920Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:07:16.783848106Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:07:16.785085560Z [err]      event = get_active_event()
2026-01-06T16:07:16.785094846Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:07:16.785106003Z [err]      cur.execute(
2026-01-06T16:07:16.785107101Z [err]      raise exc
2026-01-06T16:07:16.785119016Z [err]      ~~~~~~~~~~~^
2026-01-06T16:07:16.785121581Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:07:16.785132649Z [err]          """
2026-01-06T16:07:16.785133249Z [err]      await app(scope, receive, sender)
2026-01-06T16:07:16.785145781Z [err]          ^^^
2026-01-06T16:07:16.785152267Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:07:16.785158819Z [err]      ...<7 lines>...
2026-01-06T16:07:16.785165785Z [err]      response = await f(request)
2026-01-06T16:07:16.785173211Z [err]          (day_of_week, current_time),
2026-01-06T16:07:16.785178358Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:07:16.785186079Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:07:16.785190973Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:07:16.785196752Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:07:16.785203036Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:07:16.785209062Z [err]      ...<3 lines>...
2026-01-06T16:07:16.785215272Z [err]      )
2026-01-06T16:07:16.785224145Z [err]      ^
2026-01-06T16:07:16.785231012Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:07:16.785238866Z [err]      return await dependant.call(**values)
2026-01-06T16:07:16.785256853Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:07:16.785262959Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:07:16.786132006Z [err]      )
2026-01-06T16:07:16.786140135Z [err]      ^
2026-01-06T16:07:16.786146803Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:07:16.786151416Z [err]      return super().execute(query, vars)
2026-01-06T16:07:16.786156496Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:07:16.786164030Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:07:16.786170062Z [err]  LINE 5:           AND active = 1
2026-01-06T16:07:16.786174383Z [err]                               ^
2026-01-06T16:07:16.786178905Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:07:16.786184049Z [err]  
2026-01-06T16:07:16.960863041Z [err]  2026-01-06 16:07:16.775 UTC [8598] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:07:16.960870981Z [err]  2026-01-06 16:07:16.775 UTC [8598] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:07:16.960877500Z [err]  2026-01-06 16:07:16.775 UTC [8598] STATEMENT:  
2026-01-06T16:07:16.960884715Z [err]  	        SELECT event
2026-01-06T16:07:16.960892178Z [err]  	        FROM event_config
2026-01-06T16:07:16.960899084Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:07:16.960905277Z [err]  	          AND active = 1
2026-01-06T16:07:16.963632783Z [err]  	          AND '16:07' BETWEEN open_time AND close_time
2026-01-06T16:07:16.963652044Z [err]  	        LIMIT 1;
2026-01-06T16:07:16.963659938Z [err]  	        
2026-01-06T16:08:56.853434321Z [inf]  ðŸ“¨ 27824940077: Hi
2026-01-06T16:08:56.853443003Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T16:08:56.853449974Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T16:08:56.853455626Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T16:08:56.853460693Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T16:08:56.853466029Z [inf]  ðŸ“¤ Status: 200
2026-01-06T16:08:56.853470986Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27824940077","wa_id":"27824940077"}],"messages":[{"id":"wamid.HBgLMjc4MjQ5NDAwNzcVAgARGBIzNjNGNTc2MjE1MTRFQkI1N0IA"}]}
2026-01-06T16:08:56.853476829Z [inf]  INFO:     100.64.0.8:47150 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:08:56.853482896Z [inf]  INFO:     100.64.0.7:29790 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:08:56.853488244Z [inf]  INFO:     100.64.0.5:14966 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:09:02.225372052Z [inf]  ðŸ“¨ 27824940077: RUNNER
2026-01-06T16:09:02.500843215Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T16:09:02.500847921Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T16:09:02.500852386Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T16:09:03.023280676Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T16:09:03.023286914Z [inf]  ðŸ“¤ Status: 200
2026-01-06T16:09:03.023291535Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27824940077","wa_id":"27824940077"}],"messages":[{"id":"wamid.HBgLMjc4MjQ5NDAwNzcVAgARGBJDREE2NTdEREQxOTdGQTgyOTAA"}]}
2026-01-06T16:09:03.023296343Z [inf]  INFO:     100.64.0.7:60714 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:09:04.248596751Z [inf]  INFO:     100.64.0.7:60714 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:09:04.300973710Z [inf]  INFO:     100.64.0.4:35692 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:09:09.566067984Z [inf]  ðŸ“¨ 27832805524: 6km 34:43 SBK03E
2026-01-06T16:09:09.824364670Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:09:09.824374735Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:09:09.824380881Z [inf]  INFO:     100.64.0.2:33896 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:09:09.824382624Z [err]      raise exc
2026-01-06T16:09:09.824389037Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:09:09.824394213Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:09:09.824403189Z [err]  Traceback (most recent call last):
2026-01-06T16:09:09.824412826Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:09:09.824421491Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:09:09.824431011Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:09:09.824440280Z [err]          self.scope, self.receive, self.send
2026-01-06T16:09:09.824449890Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:09:09.824457568Z [err]      )
2026-01-06T16:09:09.824464518Z [err]      ^
2026-01-06T16:09:09.824471147Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:09:09.824479340Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:09:09.824487748Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:09:09.824494508Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:09:09.824500761Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:09:09.824507200Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:09:09.825879350Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:09:09.825880893Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:09:09.825890879Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:09:09.825893343Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:09:09.825899400Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:09:09.825899868Z [err]      await self.app(scope, receive, send)
2026-01-06T16:09:09.825906155Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:09:09.825907790Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:09:09.825912190Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:09:09.825915808Z [err]      raise exc
2026-01-06T16:09:09.825919549Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:09:09.825923786Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:09:09.825931090Z [err]      await app(scope, receive, sender)
2026-01-06T16:09:09.825937500Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:09:09.825943683Z [err]      await self.app(scope, receive, send)
2026-01-06T16:09:09.825951645Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:09:09.825958074Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:09:09.825964441Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:09:09.826897474Z [err]      raise exc
2026-01-06T16:09:09.826905454Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:09:09.826911407Z [err]      await app(scope, receive, sender)
2026-01-06T16:09:09.826917374Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:09:09.826922898Z [err]      response = await f(request)
2026-01-06T16:09:09.826928502Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:09:09.826935359Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:09:09.826942473Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:09:09.826948333Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:09:09.826953966Z [err]      ...<3 lines>...
2026-01-06T16:09:09.826959280Z [err]      )
2026-01-06T16:09:09.826965078Z [err]      ^
2026-01-06T16:09:09.826970893Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:09:09.826977740Z [err]      return await dependant.call(**values)
2026-01-06T16:09:09.826983218Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:09:09.826988558Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:09:09.826993733Z [err]      event = get_active_event()
2026-01-06T16:09:09.827000293Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:09:09.827015183Z [err]      cur.execute(
2026-01-06T16:09:09.827020996Z [err]      ~~~~~~~~~~~^
2026-01-06T16:09:09.827026467Z [err]          """
2026-01-06T16:09:09.827031971Z [err]          ^^^
2026-01-06T16:09:09.827037726Z [err]      ...<7 lines>...
2026-01-06T16:09:09.827042988Z [err]          (day_of_week, current_time),
2026-01-06T16:09:09.827048104Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:09:09.827778893Z [err]      )
2026-01-06T16:09:09.827784614Z [err]      ^
2026-01-06T16:09:09.827789794Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:09:09.827794381Z [err]      return super().execute(query, vars)
2026-01-06T16:09:09.827798258Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:09:09.827802214Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:09:09.827806437Z [err]  LINE 5:           AND active = 1
2026-01-06T16:09:09.827810547Z [err]                               ^
2026-01-06T16:09:09.827814645Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:09:09.827819446Z [err]  
2026-01-06T16:09:10.758025488Z [inf]  ðŸ“¨ 27832805524: 6km 34:43 SBK03E
2026-01-06T16:09:10.903447723Z [inf]  INFO:     100.64.0.8:24272 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:09:10.903454739Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:09:10.903455101Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:09:10.903466572Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:09:10.903466888Z [err]  Traceback (most recent call last):
2026-01-06T16:09:10.903471720Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:09:10.903476424Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:09:10.903481429Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:09:10.903483317Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:09:10.903489772Z [err]          self.scope, self.receive, self.send
2026-01-06T16:09:10.903490543Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:09:10.903495720Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:09:10.903500322Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:09:10.903501754Z [err]      )
2026-01-06T16:09:10.903507744Z [err]      ^
2026-01-06T16:09:10.903508597Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:09:10.903515287Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:09:10.903522011Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:09:10.903528195Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:09:10.903535476Z [err]      raise exc
2026-01-06T16:09:10.904590145Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:09:10.904602749Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:09:10.904614372Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:09:10.904623470Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:09:10.904631579Z [err]      raise exc
2026-01-06T16:09:10.904639724Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:09:10.904648023Z [err]      await app(scope, receive, sender)
2026-01-06T16:09:10.904655707Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:09:10.904663989Z [err]      await self.app(scope, receive, send)
2026-01-06T16:09:10.904672349Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:09:10.904680270Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:09:10.904688017Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:09:10.904695482Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:09:10.904703597Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:09:10.904711706Z [err]      await self.app(scope, receive, send)
2026-01-06T16:09:10.904719242Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:09:10.904726685Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:09:10.904735146Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:09:10.905911361Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:09:10.905932780Z [err]      raise exc
2026-01-06T16:09:10.905942145Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:09:10.905950058Z [err]      await app(scope, receive, sender)
2026-01-06T16:09:10.905956302Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:09:10.905963486Z [err]      response = await f(request)
2026-01-06T16:09:10.905969790Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:09:10.905976254Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:09:10.905982007Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:09:10.905988297Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:09:10.905993797Z [err]      ...<3 lines>...
2026-01-06T16:09:10.906000332Z [err]      )
2026-01-06T16:09:10.906007984Z [err]      ^
2026-01-06T16:09:10.906014379Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:09:10.906019821Z [err]      return await dependant.call(**values)
2026-01-06T16:09:10.906025283Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:09:10.906030540Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:09:10.906036151Z [err]      event = get_active_event()
2026-01-06T16:09:10.906041875Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:09:10.906047503Z [err]      cur.execute(
2026-01-06T16:09:10.906052769Z [err]      ~~~~~~~~~~~^
2026-01-06T16:09:10.906058435Z [err]          """
2026-01-06T16:09:10.906064410Z [err]          ^^^
2026-01-06T16:09:10.906069954Z [err]      ...<7 lines>...
2026-01-06T16:09:10.906075354Z [err]          (day_of_week, current_time),
2026-01-06T16:09:10.907089554Z [err]      )
2026-01-06T16:09:10.907095769Z [err]      ^
2026-01-06T16:09:10.907100435Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:09:10.907104637Z [err]      return super().execute(query, vars)
2026-01-06T16:09:10.907109531Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:09:10.907113156Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:09:10.907116818Z [err]  LINE 5:           AND active = 1
2026-01-06T16:09:10.907121610Z [err]                               ^
2026-01-06T16:09:10.907125503Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:09:10.907129461Z [err]  
2026-01-06T16:09:11.738620002Z [inf]  ðŸ“¨ 27832805524: 6km 34:43 SBK03E
2026-01-06T16:09:12.035777484Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:09:12.035785506Z [inf]  INFO:     100.64.0.9:16444 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:09:12.035787163Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:09:12.035793365Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:09:12.035797864Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:09:12.035799886Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:09:12.035805372Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:09:12.035807726Z [err]  Traceback (most recent call last):
2026-01-06T16:09:12.035811105Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:09:12.035816784Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:09:12.035817428Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:09:12.035823469Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:09:12.035825924Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:09:12.035829319Z [err]      raise exc
2026-01-06T16:09:12.035831897Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:09:12.035835633Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:09:12.035837815Z [err]          self.scope, self.receive, self.send
2026-01-06T16:09:12.035842682Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:09:12.035846817Z [err]      )
2026-01-06T16:09:12.035851336Z [err]      ^
2026-01-06T16:09:12.037119665Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:09:12.037129174Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:09:12.037135355Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:09:12.037139451Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:09:12.037143518Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:09:12.037148091Z [err]      raise exc
2026-01-06T16:09:12.037152167Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:09:12.037156669Z [err]      await app(scope, receive, sender)
2026-01-06T16:09:12.037160815Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:09:12.037165079Z [err]      await self.app(scope, receive, send)
2026-01-06T16:09:12.037171336Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:09:12.037175375Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:09:12.037179047Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:09:12.037183130Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:09:12.037187356Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:09:12.037191362Z [err]      await self.app(scope, receive, send)
2026-01-06T16:09:12.037195332Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:09:12.037199279Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:09:12.038504339Z [err]      raise exc
2026-01-06T16:09:12.038510585Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:09:12.038514572Z [err]      await app(scope, receive, sender)
2026-01-06T16:09:12.038518600Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:09:12.038522575Z [err]      response = await f(request)
2026-01-06T16:09:12.038526373Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:09:12.038529953Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:09:12.038533471Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:09:12.038539810Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:09:12.038543676Z [err]      ...<3 lines>...
2026-01-06T16:09:12.038548342Z [err]      )
2026-01-06T16:09:12.038551773Z [err]      ^
2026-01-06T16:09:12.038555236Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:09:12.038558821Z [err]      return await dependant.call(**values)
2026-01-06T16:09:12.038562822Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:09:12.038566683Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:09:12.038570354Z [err]      event = get_active_event()
2026-01-06T16:09:12.038573897Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:09:12.038578259Z [err]      cur.execute(
2026-01-06T16:09:12.038581991Z [err]      ~~~~~~~~~~~^
2026-01-06T16:09:12.038586225Z [err]          """
2026-01-06T16:09:12.038590014Z [err]          ^^^
2026-01-06T16:09:12.038593700Z [err]      ...<7 lines>...
2026-01-06T16:09:12.038597212Z [err]          (day_of_week, current_time),
2026-01-06T16:09:12.038600626Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:09:12.039624382Z [err]      )
2026-01-06T16:09:12.039630546Z [err]      ^
2026-01-06T16:09:12.039634749Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:09:12.039639795Z [err]      return super().execute(query, vars)
2026-01-06T16:09:12.039644323Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:09:12.039648842Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:09:12.039654801Z [err]  LINE 5:           AND active = 1
2026-01-06T16:09:12.039659011Z [err]                               ^
2026-01-06T16:09:12.039663746Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:09:12.039667756Z [err]  
2026-01-06T16:09:14.061527493Z [inf]  ðŸ“¨ 27832805524: 6km 34:43 SBK03E
2026-01-06T16:09:14.385011068Z [inf]  INFO:     100.64.0.5:14712 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:09:14.385017599Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:09:14.385023105Z [err]  Traceback (most recent call last):
2026-01-06T16:09:14.385027421Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:09:14.385031658Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:09:14.385036563Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:09:14.385041788Z [err]          self.scope, self.receive, self.send
2026-01-06T16:09:14.385046236Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:09:14.385050657Z [err]      )
2026-01-06T16:09:14.385057504Z [err]      ^
2026-01-06T16:09:14.385063690Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:09:14.385069753Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:09:14.385079204Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:09:14.385087807Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:09:14.385094467Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:09:14.385100840Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:09:14.385106600Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:09:14.385112585Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:09:14.385116567Z [err]      raise exc
2026-01-06T16:09:14.385124147Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:09:14.386614840Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:09:14.386617937Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:09:14.386625774Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:09:14.386627794Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:09:14.386631941Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:09:14.386635286Z [err]      await self.app(scope, receive, send)
2026-01-06T16:09:14.386637853Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:09:14.386642720Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:09:14.386644104Z [err]      raise exc
2026-01-06T16:09:14.386650494Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:09:14.386650892Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:09:14.386657596Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:09:14.386659573Z [err]      await app(scope, receive, sender)
2026-01-06T16:09:14.386663822Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:09:14.386667837Z [err]      await self.app(scope, receive, send)
2026-01-06T16:09:14.386673057Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:09:14.386677956Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:09:14.386682195Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:09:14.388100367Z [err]      raise exc
2026-01-06T16:09:14.388107260Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:09:14.388113465Z [err]      await app(scope, receive, sender)
2026-01-06T16:09:14.388119309Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:09:14.388125888Z [err]      response = await f(request)
2026-01-06T16:09:14.388132681Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:09:14.388138111Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:09:14.388144253Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:09:14.388149412Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:09:14.388155859Z [err]      ...<3 lines>...
2026-01-06T16:09:14.388161738Z [err]      )
2026-01-06T16:09:14.388167489Z [err]      ^
2026-01-06T16:09:14.388173252Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:09:14.388179369Z [err]      return await dependant.call(**values)
2026-01-06T16:09:14.388185330Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:09:14.388192967Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:09:14.388207602Z [err]      event = get_active_event()
2026-01-06T16:09:14.388215625Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:09:14.388224602Z [err]      cur.execute(
2026-01-06T16:09:14.388233435Z [err]      ~~~~~~~~~~~^
2026-01-06T16:09:14.388241815Z [err]          """
2026-01-06T16:09:14.388249176Z [err]          ^^^
2026-01-06T16:09:14.388254863Z [err]      ...<7 lines>...
2026-01-06T16:09:14.388262723Z [err]          (day_of_week, current_time),
2026-01-06T16:09:14.388266915Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:09:14.389276007Z [err]      )
2026-01-06T16:09:14.389283518Z [err]      ^
2026-01-06T16:09:14.389288182Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:09:14.389292162Z [err]      return super().execute(query, vars)
2026-01-06T16:09:14.389297860Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:09:14.389302609Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:09:14.389310397Z [err]  LINE 5:           AND active = 1
2026-01-06T16:09:14.389316555Z [err]                               ^
2026-01-06T16:09:14.389323046Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:09:14.389329750Z [err]  
2026-01-06T16:09:19.920165560Z [err]  2026-01-06 16:09:09.815 UTC [8608] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:09:19.920173586Z [err]  2026-01-06 16:09:09.815 UTC [8608] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:09:19.920179459Z [err]  2026-01-06 16:09:09.815 UTC [8608] STATEMENT:  
2026-01-06T16:09:19.920187871Z [err]  	        SELECT event
2026-01-06T16:09:19.920196010Z [err]  	        FROM event_config
2026-01-06T16:09:19.920203947Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:09:19.920214979Z [err]  	          AND active = 1
2026-01-06T16:09:19.920222724Z [err]  	          AND '16:09' BETWEEN open_time AND close_time
2026-01-06T16:09:19.920231063Z [err]  	        LIMIT 1;
2026-01-06T16:09:19.920240404Z [err]  	        
2026-01-06T16:09:19.920250013Z [err]  2026-01-06 16:09:10.892 UTC [8610] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:09:19.920257613Z [err]  2026-01-06 16:09:10.892 UTC [8610] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:09:19.920263589Z [err]  2026-01-06 16:09:10.892 UTC [8610] STATEMENT:  
2026-01-06T16:09:19.920269663Z [err]  	        SELECT event
2026-01-06T16:09:19.920275914Z [err]  	        FROM event_config
2026-01-06T16:09:19.920283457Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:09:19.920289055Z [err]  	          AND active = 1
2026-01-06T16:09:19.920294323Z [err]  	          AND '16:09' BETWEEN open_time AND close_time
2026-01-06T16:09:19.920300894Z [err]  	        LIMIT 1;
2026-01-06T16:09:19.920306640Z [err]  	        
2026-01-06T16:09:19.920312741Z [err]  2026-01-06 16:09:12.016 UTC [8612] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:09:19.920318127Z [err]  2026-01-06 16:09:12.016 UTC [8612] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:09:19.926544676Z [err]  	          AND '16:09' BETWEEN open_time AND close_time
2026-01-06T16:09:19.926550939Z [err]  	        LIMIT 1;
2026-01-06T16:09:19.926622405Z [err]  	        
2026-01-06T16:09:19.926630708Z [err]  2026-01-06 16:09:14.365 UTC [8614] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:09:19.926637828Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:09:19.926641957Z [err]  2026-01-06 16:09:14.365 UTC [8614] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:09:19.926645615Z [err]  	          AND active = 1
2026-01-06T16:09:19.926648377Z [err]  2026-01-06 16:09:14.365 UTC [8614] STATEMENT:  
2026-01-06T16:09:19.926653905Z [err]  	        SELECT event
2026-01-06T16:09:19.926663290Z [err]  	        LIMIT 1;
2026-01-06T16:09:19.926663465Z [err]  	        FROM event_config
2026-01-06T16:09:19.926669392Z [err]  	        
2026-01-06T16:09:19.926677907Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:09:19.926686190Z [err]  	          AND active = 1
2026-01-06T16:09:19.926692507Z [err]  2026-01-06 16:09:12.016 UTC [8612] STATEMENT:  
2026-01-06T16:09:19.926695963Z [err]  	          AND '16:09' BETWEEN open_time AND close_time
2026-01-06T16:09:19.926706923Z [err]  	        SELECT event
2026-01-06T16:09:19.926715031Z [err]  	        FROM event_config
2026-01-06T16:09:34.381000999Z [inf]  ðŸ“¨ 27832805524: 6km 34:43 SBK03E
2026-01-06T16:09:34.381008875Z [inf]  INFO:     100.64.0.4:36768 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:09:34.381014510Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:09:34.381019844Z [err]  Traceback (most recent call last):
2026-01-06T16:09:34.381026190Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:09:34.381031891Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:09:34.381038388Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:09:34.381045182Z [err]          self.scope, self.receive, self.send
2026-01-06T16:09:34.381051430Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:09:34.381057124Z [err]      )
2026-01-06T16:09:34.381062639Z [err]      ^
2026-01-06T16:09:34.381067900Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:09:34.381073098Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:09:34.381078429Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:09:34.381083897Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:09:34.381090470Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:09:34.381095967Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:09:34.381101469Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:09:34.381106722Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:09:34.381111912Z [err]      raise exc
2026-01-06T16:09:34.381118583Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:09:34.382390692Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:09:34.382401120Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:09:34.382409446Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:09:34.382412112Z [err]      await self.app(scope, receive, send)
2026-01-06T16:09:34.382415935Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:09:34.382418279Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:09:34.382421990Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:09:34.382427675Z [err]      raise exc
2026-01-06T16:09:34.382428998Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:09:34.382434979Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:09:34.382437206Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:09:34.382441994Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:09:34.382446807Z [err]      await app(scope, receive, sender)
2026-01-06T16:09:34.382448495Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:09:34.382454352Z [err]      await self.app(scope, receive, send)
2026-01-06T16:09:34.382456444Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:09:34.382481726Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:09:34.382503713Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:09:34.383773748Z [err]          ^^^
2026-01-06T16:09:34.383782093Z [err]      raise exc
2026-01-06T16:09:34.383784632Z [err]      return await dependant.call(**values)
2026-01-06T16:09:34.383784725Z [err]      ...<7 lines>...
2026-01-06T16:09:34.383794114Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:09:34.383794850Z [err]          (day_of_week, current_time),
2026-01-06T16:09:34.383795540Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:09:34.383803022Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:09:34.383804649Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:09:34.383804904Z [err]      await app(scope, receive, sender)
2026-01-06T16:09:34.383812500Z [err]      event = get_active_event()
2026-01-06T16:09:34.383816302Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:09:34.383820156Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:09:34.383824934Z [err]      response = await f(request)
2026-01-06T16:09:34.383830586Z [err]      cur.execute(
2026-01-06T16:09:34.383834226Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:09:34.383838495Z [err]      ~~~~~~~~~~~^
2026-01-06T16:09:34.383842377Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:09:34.383846462Z [err]          """
2026-01-06T16:09:34.383850710Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:09:34.383859301Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:09:34.383866925Z [err]      ...<3 lines>...
2026-01-06T16:09:34.383874029Z [err]      )
2026-01-06T16:09:34.383880739Z [err]      ^
2026-01-06T16:09:34.383887519Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:09:34.384756921Z [err]      )
2026-01-06T16:09:34.384765406Z [err]      ^
2026-01-06T16:09:34.384771849Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:09:34.384779168Z [err]      return super().execute(query, vars)
2026-01-06T16:09:34.384786794Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:09:34.384794044Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:09:34.384802615Z [err]  LINE 5:           AND active = 1
2026-01-06T16:09:34.384809367Z [err]                               ^
2026-01-06T16:09:34.384816126Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:09:34.384823507Z [err]  
2026-01-06T16:09:39.627886408Z [err]  2026-01-06 16:09:31.529 UTC [8617] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:09:39.627894469Z [err]  2026-01-06 16:09:31.529 UTC [8617] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:09:39.627913726Z [err]  2026-01-06 16:09:31.529 UTC [8617] STATEMENT:  
2026-01-06T16:09:39.627924839Z [err]  	        SELECT event
2026-01-06T16:09:39.627932592Z [err]  	        FROM event_config
2026-01-06T16:09:39.627938928Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:09:39.627945217Z [err]  	          AND active = 1
2026-01-06T16:09:39.627950969Z [err]  	          AND '16:09' BETWEEN open_time AND close_time
2026-01-06T16:09:39.627957901Z [err]  	        LIMIT 1;
2026-01-06T16:09:39.627963379Z [err]  	        
2026-01-06T16:09:43.411399007Z [inf]  ðŸ“¨ 27832637248: Walker
2026-01-06T16:09:43.687350684Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:09:43.687351312Z [inf]  INFO:     100.64.0.2:36598 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:09:43.687357206Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:09:43.687361292Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:09:43.687363922Z [err]  Traceback (most recent call last):
2026-01-06T16:09:43.687368989Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:09:43.687371195Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:09:43.687373660Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:09:43.687378132Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:09:43.687378878Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:09:43.687384358Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:09:43.687384862Z [err]          self.scope, self.receive, self.send
2026-01-06T16:09:43.687390326Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:09:43.687393534Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:09:43.687396809Z [err]      raise exc
2026-01-06T16:09:43.687402590Z [err]      )
2026-01-06T16:09:43.687402776Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:09:43.687412140Z [err]      ^
2026-01-06T16:09:43.687418802Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:09:43.687424101Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:09:43.688557176Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:09:43.688566089Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:09:43.688573004Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:09:43.688579099Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:09:43.688584999Z [err]      raise exc
2026-01-06T16:09:43.688591986Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:09:43.688597981Z [err]      await app(scope, receive, sender)
2026-01-06T16:09:43.688603925Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:09:43.688609689Z [err]      await self.app(scope, receive, send)
2026-01-06T16:09:43.688615790Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:09:43.688624349Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:09:43.688630599Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:09:43.688636527Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:09:43.688642769Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:09:43.688648306Z [err]      await self.app(scope, receive, send)
2026-01-06T16:09:43.688654127Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:09:43.688659902Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:09:43.688666355Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:09:43.689636822Z [err]      raise exc
2026-01-06T16:09:43.689642106Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:09:43.689647672Z [err]      await app(scope, receive, sender)
2026-01-06T16:09:43.689651600Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:09:43.689656127Z [err]      response = await f(request)
2026-01-06T16:09:43.689660012Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:09:43.689663611Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:09:43.689667647Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:09:43.689672107Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:09:43.689675633Z [err]      ...<3 lines>...
2026-01-06T16:09:43.689679216Z [err]      )
2026-01-06T16:09:43.689682699Z [err]      ^
2026-01-06T16:09:43.689700517Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:09:43.689706477Z [err]      return await dependant.call(**values)
2026-01-06T16:09:43.689710219Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:09:43.689713845Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:09:43.689717584Z [err]      event = get_active_event()
2026-01-06T16:09:43.689721371Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:09:43.689725385Z [err]      cur.execute(
2026-01-06T16:09:43.689728854Z [err]      ~~~~~~~~~~~^
2026-01-06T16:09:43.689732365Z [err]          """
2026-01-06T16:09:43.689736313Z [err]          ^^^
2026-01-06T16:09:43.689740850Z [err]      ...<7 lines>...
2026-01-06T16:09:43.689745198Z [err]          (day_of_week, current_time),
2026-01-06T16:09:43.689750108Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:09:43.690447699Z [err]      )
2026-01-06T16:09:43.690454726Z [err]      ^
2026-01-06T16:09:43.690459909Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:09:43.690464282Z [err]      return super().execute(query, vars)
2026-01-06T16:09:43.690468830Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:09:43.690473653Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:09:43.690478075Z [err]  LINE 5:           AND active = 1
2026-01-06T16:09:43.690482194Z [err]                               ^
2026-01-06T16:09:43.690486172Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:09:43.690490717Z [err]  
2026-01-06T16:09:44.038271918Z [err]  2026-01-06 16:09:43.678 UTC [8619] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:09:44.038280412Z [err]  2026-01-06 16:09:43.678 UTC [8619] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:09:44.038288881Z [err]  2026-01-06 16:09:43.678 UTC [8619] STATEMENT:  
2026-01-06T16:09:44.038297692Z [err]  	        SELECT event
2026-01-06T16:09:44.038307480Z [err]  	        FROM event_config
2026-01-06T16:09:44.038325634Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:09:44.038333825Z [err]  	          AND active = 1
2026-01-06T16:09:44.038340357Z [err]  	          AND '16:09' BETWEEN open_time AND close_time
2026-01-06T16:09:44.038345751Z [err]  	        LIMIT 1;
2026-01-06T16:09:44.038351025Z [err]  	        
2026-01-06T16:10:13.700705855Z [inf]  ðŸ“¨ 27824940077: 6km 35:06 SBK03E
2026-01-06T16:10:13.700716829Z [inf]  INFO:     100.64.0.7:11614 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:10:13.700724973Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:10:13.700725361Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:10:13.700732431Z [err]  Traceback (most recent call last):
2026-01-06T16:10:13.700738175Z [err]      )
2026-01-06T16:10:13.700740859Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:10:13.700748210Z [err]      ^
2026-01-06T16:10:13.700749195Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:10:13.700758122Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:10:13.700758758Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:10:13.700766369Z [err]          self.scope, self.receive, self.send
2026-01-06T16:10:13.700770082Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:10:13.700780023Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:10:13.700800934Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:10:13.700810576Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:10:13.700819350Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:10:13.700827881Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:10:13.700836146Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:10:13.700845371Z [err]      raise exc
2026-01-06T16:10:13.700852493Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:10:13.702048566Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:10:13.702057933Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:10:13.702066590Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:10:13.702068658Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:10:13.702075483Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:10:13.702077982Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:10:13.702084314Z [err]      await self.app(scope, receive, send)
2026-01-06T16:10:13.702086935Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:10:13.702092919Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:10:13.702095406Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:10:13.702101349Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:10:13.702105921Z [err]      raise exc
2026-01-06T16:10:13.702109466Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:10:13.702115161Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:10:13.702121339Z [err]      await app(scope, receive, sender)
2026-01-06T16:10:13.702127482Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:10:13.702133244Z [err]      await self.app(scope, receive, send)
2026-01-06T16:10:13.702139138Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:10:13.703627296Z [err]      event = get_active_event()
2026-01-06T16:10:13.703637386Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:10:13.703645276Z [err]      cur.execute(
2026-01-06T16:10:13.703654167Z [err]      ~~~~~~~~~~~^
2026-01-06T16:10:13.703666629Z [err]          """
2026-01-06T16:10:13.703666701Z [err]      raise exc
2026-01-06T16:10:13.703677564Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:10:13.703680716Z [err]          ^^^
2026-01-06T16:10:13.703685543Z [err]      await app(scope, receive, sender)
2026-01-06T16:10:13.703695518Z [err]      ...<7 lines>...
2026-01-06T16:10:13.703696799Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:10:13.703706625Z [err]      response = await f(request)
2026-01-06T16:10:13.703711365Z [err]          (day_of_week, current_time),
2026-01-06T16:10:13.703716336Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:10:13.703727913Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:10:13.703728171Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:10:13.703735756Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:10:13.703741014Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:10:13.703745344Z [err]      ...<3 lines>...
2026-01-06T16:10:13.703749743Z [err]      )
2026-01-06T16:10:13.703754038Z [err]      ^
2026-01-06T16:10:13.703757778Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:10:13.703761989Z [err]      return await dependant.call(**values)
2026-01-06T16:10:13.703766418Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:10:13.703770256Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:10:13.704958423Z [err]      )
2026-01-06T16:10:13.704966326Z [err]      ^
2026-01-06T16:10:13.704972724Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:10:13.704979478Z [err]      return super().execute(query, vars)
2026-01-06T16:10:13.704985637Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:10:13.704991693Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:10:13.704998201Z [err]  LINE 5:           AND active = 1
2026-01-06T16:10:13.705004536Z [err]                               ^
2026-01-06T16:10:13.705011114Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:10:13.705017553Z [err]  
2026-01-06T16:10:14.279873467Z [inf]  ðŸ“¨ 27824940077: 6km 35:06 SBK03E
2026-01-06T16:10:14.456849264Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:10:14.456860095Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:10:14.456869830Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:10:14.456871504Z [inf]  INFO:     100.64.0.9:40890 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:10:14.456878580Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:10:14.456878934Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:10:14.456884539Z [err]  Traceback (most recent call last):
2026-01-06T16:10:14.456888181Z [err]      raise exc
2026-01-06T16:10:14.456893331Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:10:14.456897057Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:10:14.456900974Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:10:14.456907099Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:10:14.456913056Z [err]          self.scope, self.receive, self.send
2026-01-06T16:10:14.456918096Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:10:14.456923420Z [err]      )
2026-01-06T16:10:14.456931192Z [err]      ^
2026-01-06T16:10:14.456937972Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:10:14.456945343Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:10:14.456953027Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:10:14.456959927Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:10:14.457791324Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:10:14.457797218Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:10:14.457801174Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:10:14.457804656Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:10:14.457808100Z [err]      raise exc
2026-01-06T16:10:14.457811840Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:10:14.457815364Z [err]      await app(scope, receive, sender)
2026-01-06T16:10:14.457819131Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:10:14.457822759Z [err]      await self.app(scope, receive, send)
2026-01-06T16:10:14.457826342Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:10:14.457829902Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:10:14.457846829Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:10:14.457850450Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:10:14.457854093Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:10:14.457858909Z [err]      await self.app(scope, receive, send)
2026-01-06T16:10:14.457862806Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:10:14.457866404Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:10:14.457870050Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:10:14.459218508Z [err]      )
2026-01-06T16:10:14.459228215Z [err]      ^
2026-01-06T16:10:14.459231429Z [err]      raise exc
2026-01-06T16:10:14.459234260Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:10:14.459240097Z [err]      return await dependant.call(**values)
2026-01-06T16:10:14.459241553Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:10:14.459245577Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:10:14.459249092Z [err]      await app(scope, receive, sender)
2026-01-06T16:10:14.459251180Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:10:14.459256152Z [err]      event = get_active_event()
2026-01-06T16:10:14.459256808Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:10:14.459261177Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:10:14.459263470Z [err]      response = await f(request)
2026-01-06T16:10:14.459266055Z [err]      cur.execute(
2026-01-06T16:10:14.459270565Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:10:14.459271294Z [err]      ~~~~~~~~~~~^
2026-01-06T16:10:14.459276350Z [err]          """
2026-01-06T16:10:14.459277472Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:10:14.459283510Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:10:14.459283861Z [err]          ^^^
2026-01-06T16:10:14.459290217Z [err]      ...<7 lines>...
2026-01-06T16:10:14.459290342Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:10:14.459297288Z [err]          (day_of_week, current_time),
2026-01-06T16:10:14.459298187Z [err]      ...<3 lines>...
2026-01-06T16:10:14.459301692Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:10:14.460259411Z [err]      )
2026-01-06T16:10:14.460265475Z [err]      ^
2026-01-06T16:10:14.460270758Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:10:14.460274747Z [err]      return super().execute(query, vars)
2026-01-06T16:10:14.460278695Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:10:14.460282597Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:10:14.460286114Z [err]  LINE 5:           AND active = 1
2026-01-06T16:10:14.460289877Z [err]                               ^
2026-01-06T16:10:14.460293667Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:10:14.460299911Z [err]  
2026-01-06T16:10:14.823491276Z [err]  	        FROM event_config
2026-01-06T16:10:14.823501569Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:10:14.823510962Z [err]  	          AND active = 1
2026-01-06T16:10:14.823518606Z [err]  	          AND '16:10' BETWEEN open_time AND close_time
2026-01-06T16:10:14.823526001Z [err]  	        LIMIT 1;
2026-01-06T16:10:14.823533184Z [err]  	        
2026-01-06T16:10:14.823739135Z [err]  2026-01-06 16:10:13.491 UTC [8623] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:10:14.823746840Z [err]  2026-01-06 16:10:13.491 UTC [8623] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:10:14.823755027Z [err]  2026-01-06 16:10:13.491 UTC [8623] STATEMENT:  
2026-01-06T16:10:14.823762500Z [err]  	        SELECT event
2026-01-06T16:10:14.823770711Z [err]  	        FROM event_config
2026-01-06T16:10:14.823779358Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:10:14.824057058Z [err]  	          AND active = 1
2026-01-06T16:10:14.824069305Z [err]  	          AND '16:10' BETWEEN open_time AND close_time
2026-01-06T16:10:14.824079841Z [err]  	        LIMIT 1;
2026-01-06T16:10:14.824088677Z [err]  	        
2026-01-06T16:10:14.824098061Z [err]  2026-01-06 16:10:14.435 UTC [8625] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:10:14.824107929Z [err]  2026-01-06 16:10:14.435 UTC [8625] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:10:14.824116252Z [err]  2026-01-06 16:10:14.435 UTC [8625] STATEMENT:  
2026-01-06T16:10:14.824124493Z [err]  	        SELECT event
2026-01-06T16:10:15.498003190Z [inf]  ðŸ“¨ 27824940077: 6km 35:06 SBK03E
2026-01-06T16:10:15.498050607Z [inf]  INFO:     100.64.0.9:40892 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:10:15.498055259Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:10:15.498061042Z [err]  Traceback (most recent call last):
2026-01-06T16:10:15.498066073Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:10:15.498070271Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:10:15.498074645Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:10:15.498079026Z [err]          self.scope, self.receive, self.send
2026-01-06T16:10:15.498083874Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:10:15.498089091Z [err]      )
2026-01-06T16:10:15.498095800Z [err]      ^
2026-01-06T16:10:15.498100246Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:10:15.498104764Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:10:15.498109224Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:10:15.498113509Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:10:15.498117497Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:10:15.498121893Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:10:15.498126639Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:10:15.498130815Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:10:15.498135484Z [err]      raise exc
2026-01-06T16:10:15.498140950Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:10:15.498145656Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:10:15.498150567Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:10:15.498154611Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:10:15.498162972Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:10:15.498167290Z [err]      raise exc
2026-01-06T16:10:15.498171654Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:10:15.498176281Z [err]      await app(scope, receive, sender)
2026-01-06T16:10:15.498180151Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:10:15.498186261Z [err]      await self.app(scope, receive, send)
2026-01-06T16:10:15.498191004Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:10:15.498194804Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:10:15.498199121Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:10:15.498203384Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:10:15.498208569Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:10:15.498212679Z [err]      await self.app(scope, receive, send)
2026-01-06T16:10:15.498216482Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:10:15.498220832Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:10:15.498225072Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:10:15.498229388Z [err]      raise exc
2026-01-06T16:10:15.498233884Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:10:15.498238041Z [err]      await app(scope, receive, sender)
2026-01-06T16:10:15.498242558Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:10:15.498246369Z [err]      response = await f(request)
2026-01-06T16:10:15.498250026Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:10:15.498254121Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:10:15.498258011Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:10:15.498261530Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:10:15.498266079Z [err]      ...<3 lines>...
2026-01-06T16:10:15.498269625Z [err]      )
2026-01-06T16:10:15.498273580Z [err]      ^
2026-01-06T16:10:15.498277505Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:10:15.498281431Z [err]      return await dependant.call(**values)
2026-01-06T16:10:15.498285496Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:10:15.498289270Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:10:15.498293080Z [err]      event = get_active_event()
2026-01-06T16:10:15.498296480Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:10:15.498300491Z [err]      cur.execute(
2026-01-06T16:10:15.498304404Z [err]      ~~~~~~~~~~~^
2026-01-06T16:10:15.498307908Z [err]          """
2026-01-06T16:10:15.498312165Z [err]          ^^^
2026-01-06T16:10:15.498315921Z [err]      ...<7 lines>...
2026-01-06T16:10:15.498320121Z [err]          (day_of_week, current_time),
2026-01-06T16:10:15.498324360Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:10:15.498328642Z [err]      )
2026-01-06T16:10:15.498332292Z [err]      ^
2026-01-06T16:10:15.498335797Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:10:15.498339571Z [err]      return super().execute(query, vars)
2026-01-06T16:10:15.498343801Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:10:15.498347691Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:10:15.498351600Z [err]  LINE 5:           AND active = 1
2026-01-06T16:10:15.498355575Z [err]                               ^
2026-01-06T16:10:15.498359391Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:10:15.498363736Z [err]  
2026-01-06T16:10:16.059201134Z [err]  2026-01-06 16:10:15.320 UTC [8627] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:10:16.059206659Z [err]  2026-01-06 16:10:15.320 UTC [8627] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:10:16.059213124Z [err]  2026-01-06 16:10:15.320 UTC [8627] STATEMENT:  
2026-01-06T16:10:16.059219645Z [err]  	        SELECT event
2026-01-06T16:10:16.059225773Z [err]  	        FROM event_config
2026-01-06T16:10:16.059232632Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:10:16.059239482Z [err]  	          AND active = 1
2026-01-06T16:10:16.059245065Z [err]  	          AND '16:10' BETWEEN open_time AND close_time
2026-01-06T16:10:16.074657995Z [err]  	        LIMIT 1;
2026-01-06T16:10:16.074671651Z [err]  	        
2026-01-06T16:10:17.246847421Z [inf]  ðŸ“¨ 27824940077: 6km 35:06 SBK03E
2026-01-06T16:10:17.521998070Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:10:17.522011196Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:10:17.522018779Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:10:17.522028536Z [err]      raise exc
2026-01-06T16:10:17.522035482Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:10:17.522052342Z [inf]  INFO:     100.64.0.4:19682 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:10:17.522060128Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:10:17.522066128Z [err]  Traceback (most recent call last):
2026-01-06T16:10:17.522074114Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:10:17.522080955Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:10:17.522087101Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:10:17.522092809Z [err]          self.scope, self.receive, self.send
2026-01-06T16:10:17.522098563Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:10:17.522103709Z [err]      )
2026-01-06T16:10:17.522107934Z [err]      ^
2026-01-06T16:10:17.522112460Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:10:17.522116531Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:10:17.522121211Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:10:17.522125952Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:10:17.522130040Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:10:17.523028449Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:10:17.523034071Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:10:17.523035339Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:10:17.523039992Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:10:17.523045279Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:10:17.523045738Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:10:17.523052614Z [err]      raise exc
2026-01-06T16:10:17.523059079Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:10:17.523065211Z [err]      await app(scope, receive, sender)
2026-01-06T16:10:17.523071853Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:10:17.523078596Z [err]      await self.app(scope, receive, send)
2026-01-06T16:10:17.523085568Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:10:17.523092259Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:10:17.523098736Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:10:17.523105148Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:10:17.523111651Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:10:17.523118637Z [err]      await self.app(scope, receive, send)
2026-01-06T16:10:17.523123914Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:10:17.524496210Z [err]      raise exc
2026-01-06T16:10:17.524506533Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:10:17.524509660Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:10:17.524510112Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:10:17.524517226Z [err]      cur.execute(
2026-01-06T16:10:17.524520534Z [err]      await app(scope, receive, sender)
2026-01-06T16:10:17.524522180Z [err]      return await dependant.call(**values)
2026-01-06T16:10:17.524522593Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:10:17.524529567Z [err]      ~~~~~~~~~~~^
2026-01-06T16:10:17.524530818Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:10:17.524533582Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:10:17.524533874Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:10:17.524539715Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:10:17.524540318Z [err]          """
2026-01-06T16:10:17.524546928Z [err]      ...<3 lines>...
2026-01-06T16:10:17.524547619Z [err]      event = get_active_event()
2026-01-06T16:10:17.524549544Z [err]      response = await f(request)
2026-01-06T16:10:17.524550835Z [err]          ^^^
2026-01-06T16:10:17.524555037Z [err]      )
2026-01-06T16:10:17.524555580Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:10:17.524561243Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:10:17.524561971Z [err]      ...<7 lines>...
2026-01-06T16:10:17.524564307Z [err]      ^
2026-01-06T16:10:17.524571129Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:10:17.524571624Z [err]          (day_of_week, current_time),
2026-01-06T16:10:17.525224458Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:10:17.525231115Z [err]  
2026-01-06T16:10:17.525244650Z [err]      )
2026-01-06T16:10:17.525253618Z [err]      ^
2026-01-06T16:10:17.525263480Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:10:17.525270807Z [err]      return super().execute(query, vars)
2026-01-06T16:10:17.525280751Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:10:17.525290236Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:10:17.525298419Z [err]  LINE 5:           AND active = 1
2026-01-06T16:10:17.525306646Z [err]                               ^
2026-01-06T16:10:17.990791759Z [err]  2026-01-06 16:10:17.508 UTC [8629] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:10:17.990797773Z [err]  2026-01-06 16:10:17.508 UTC [8629] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:10:17.990804415Z [err]  2026-01-06 16:10:17.508 UTC [8629] STATEMENT:  
2026-01-06T16:10:17.990821234Z [err]  	        SELECT event
2026-01-06T16:10:17.990826694Z [err]  	        FROM event_config
2026-01-06T16:10:17.990832895Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:10:17.990839810Z [err]  	          AND active = 1
2026-01-06T16:10:17.990844563Z [err]  	          AND '16:10' BETWEEN open_time AND close_time
2026-01-06T16:10:17.990851374Z [err]  	        LIMIT 1;
2026-01-06T16:10:17.990856612Z [err]  	        
2026-01-06T16:10:24.160958865Z [inf]  ðŸ“¨ 27824940077: 6km 35:06 SBK03E
2026-01-06T16:10:24.326661059Z [inf]  INFO:     100.64.0.8:27488 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:10:24.333232362Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:10:24.333240362Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:10:24.333245918Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:10:24.333250944Z [err]      raise exc
2026-01-06T16:10:24.333257486Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:10:24.333263453Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:10:24.333264791Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:10:24.333276335Z [err]  Traceback (most recent call last):
2026-01-06T16:10:24.333283822Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:10:24.333290356Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:10:24.333298975Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:10:24.333306153Z [err]          self.scope, self.receive, self.send
2026-01-06T16:10:24.333312607Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:10:24.333318211Z [err]      )
2026-01-06T16:10:24.333324813Z [err]      ^
2026-01-06T16:10:24.333332012Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:10:24.333339175Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:10:24.333345552Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:10:24.333352211Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:10:24.333358873Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:10:24.334386549Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:10:24.334391332Z [err]      raise exc
2026-01-06T16:10:24.334393901Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:10:24.334398536Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:10:24.334404329Z [err]      raise exc
2026-01-06T16:10:24.334407816Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:10:24.334412343Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:10:24.334414534Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:10:24.334417714Z [err]      await app(scope, receive, sender)
2026-01-06T16:10:24.334423234Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:10:24.334424037Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:10:24.334429922Z [err]      await self.app(scope, receive, send)
2026-01-06T16:10:24.334433221Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:10:24.334440941Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:10:24.334447722Z [err]      await self.app(scope, receive, send)
2026-01-06T16:10:24.334453566Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:10:24.334458363Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:10:24.334463262Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:10:24.335395749Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:10:24.335397174Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:10:24.335405100Z [err]      await app(scope, receive, sender)
2026-01-06T16:10:24.335406135Z [err]      event = get_active_event()
2026-01-06T16:10:24.335412831Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:10:24.335414220Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:10:24.335418084Z [err]      response = await f(request)
2026-01-06T16:10:24.335420993Z [err]      cur.execute(
2026-01-06T16:10:24.335424856Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:10:24.335429638Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:10:24.335431272Z [err]      ~~~~~~~~~~~^
2026-01-06T16:10:24.335434579Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:10:24.335438204Z [err]          """
2026-01-06T16:10:24.335444434Z [err]          ^^^
2026-01-06T16:10:24.335450516Z [err]      ...<7 lines>...
2026-01-06T16:10:24.335456139Z [err]          (day_of_week, current_time),
2026-01-06T16:10:24.335462351Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:10:24.335465227Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:10:24.335468928Z [err]      ...<3 lines>...
2026-01-06T16:10:24.335472584Z [err]      )
2026-01-06T16:10:24.335476289Z [err]      ^
2026-01-06T16:10:24.335480348Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:10:24.335484168Z [err]      return await dependant.call(**values)
2026-01-06T16:10:24.335488839Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:10:24.336229590Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:10:24.336230281Z [err]      )
2026-01-06T16:10:24.336239004Z [err]      ^
2026-01-06T16:10:24.336243552Z [err]  
2026-01-06T16:10:24.336246163Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:10:24.336253058Z [err]      return super().execute(query, vars)
2026-01-06T16:10:24.336260120Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:10:24.336265966Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:10:24.336275034Z [err]  LINE 5:           AND active = 1
2026-01-06T16:10:24.336282906Z [err]                               ^
2026-01-06T16:10:24.822871451Z [err]  	        FROM event_config
2026-01-06T16:10:24.822887007Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:10:24.822896311Z [err]  	          AND active = 1
2026-01-06T16:10:24.822903944Z [err]  	          AND '16:10' BETWEEN open_time AND close_time
2026-01-06T16:10:24.822913789Z [err]  	        LIMIT 1;
2026-01-06T16:10:24.822922069Z [err]  	        
2026-01-06T16:10:24.823010153Z [err]  2026-01-06 16:10:24.322 UTC [8632] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:10:24.823017039Z [err]  2026-01-06 16:10:24.322 UTC [8632] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:10:24.823022592Z [err]  2026-01-06 16:10:24.322 UTC [8632] STATEMENT:  
2026-01-06T16:10:24.823031757Z [err]  	        SELECT event
2026-01-06T16:11:14.572935330Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:11:14.572948225Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:11:14.572957500Z [err]          self.scope, self.receive, self.send
2026-01-06T16:11:14.572965524Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:11:14.572972455Z [err]      )
2026-01-06T16:11:14.572979571Z [err]      ^
2026-01-06T16:11:14.572986156Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:11:14.572992509Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:11:14.572999575Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:11:14.573002515Z [inf]  ðŸ“¨ 27639259085: 4km 30:53 SBK03E
2026-01-06T16:11:14.573008852Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:11:14.573010246Z [inf]  INFO:     100.64.0.8:30776 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:11:14.573017435Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:11:14.573017565Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:11:14.573024998Z [err]  Traceback (most recent call last):
2026-01-06T16:11:14.573026741Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:11:14.573032524Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:11:14.573035060Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:11:14.573041646Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:11:14.573048339Z [err]      raise exc
2026-01-06T16:11:14.573055867Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:11:14.573503134Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:11:14.573513768Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:11:14.573519715Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:11:14.573524568Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:11:14.573530099Z [err]      raise exc
2026-01-06T16:11:14.573535053Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:11:14.573539671Z [err]      await app(scope, receive, sender)
2026-01-06T16:11:14.573544217Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:11:14.573548466Z [err]      await self.app(scope, receive, send)
2026-01-06T16:11:14.573552886Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:11:14.573557263Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:11:14.573562235Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:11:14.573567594Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:11:14.573571910Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:11:14.573576587Z [err]      await self.app(scope, receive, send)
2026-01-06T16:11:14.573580968Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:11:14.573585101Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:11:14.573588940Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:11:14.574782379Z [err]          """
2026-01-06T16:11:14.574790528Z [err]      raise exc
2026-01-06T16:11:14.574795250Z [err]          ^^^
2026-01-06T16:11:14.574798147Z [err]      return await dependant.call(**values)
2026-01-06T16:11:14.574807232Z [err]      ...<7 lines>...
2026-01-06T16:11:14.574811467Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:11:14.574812958Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:11:14.574817763Z [err]          (day_of_week, current_time),
2026-01-06T16:11:14.574828011Z [err]      await app(scope, receive, sender)
2026-01-06T16:11:14.574829743Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:11:14.574829760Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:11:14.574844073Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:11:14.574845967Z [err]      event = get_active_event()
2026-01-06T16:11:14.574859354Z [err]      response = await f(request)
2026-01-06T16:11:14.574863520Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:11:14.574871866Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:11:14.574878958Z [err]      cur.execute(
2026-01-06T16:11:14.574885783Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:11:14.574894930Z [err]      ~~~~~~~~~~~^
2026-01-06T16:11:14.574899363Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:11:14.574907929Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:11:14.574917054Z [err]      ...<3 lines>...
2026-01-06T16:11:14.574924662Z [err]      )
2026-01-06T16:11:14.574933080Z [err]      ^
2026-01-06T16:11:14.574940522Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:11:14.575326396Z [err]  
2026-01-06T16:11:14.575328201Z [err]      )
2026-01-06T16:11:14.575342514Z [err]      return super().execute(query, vars)
2026-01-06T16:11:14.575345580Z [err]      ^
2026-01-06T16:11:14.575354291Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:11:14.575356308Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:11:14.575363397Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:11:14.575370564Z [err]  LINE 5:           AND active = 1
2026-01-06T16:11:14.575378701Z [err]                               ^
2026-01-06T16:11:14.575387348Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:11:15.599642046Z [err]  2026-01-06 16:11:08.219 UTC [8636] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:11:15.599649617Z [err]  2026-01-06 16:11:08.219 UTC [8636] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:11:15.599655143Z [err]  2026-01-06 16:11:08.219 UTC [8636] STATEMENT:  
2026-01-06T16:11:15.599663118Z [err]  	        SELECT event
2026-01-06T16:11:15.599669643Z [err]  	        FROM event_config
2026-01-06T16:11:15.599676606Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:11:15.599683279Z [err]  	          AND active = 1
2026-01-06T16:11:15.599689697Z [err]  	          AND '16:11' BETWEEN open_time AND close_time
2026-01-06T16:11:15.599697209Z [err]  	        LIMIT 1;
2026-01-06T16:11:15.599703686Z [err]  	        
2026-01-06T16:11:44.493592498Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:11:44.493602643Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:11:44.493603052Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:11:44.493611244Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:11:44.493612059Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:11:44.493617966Z [err]          self.scope, self.receive, self.send
2026-01-06T16:11:44.493618934Z [err]      raise exc
2026-01-06T16:11:44.493625451Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:11:44.493625685Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:11:44.493632453Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:11:44.493634426Z [err]      )
2026-01-06T16:11:44.493638454Z [inf]  ðŸ“¨ 27763128753: 8km 35:31 SBK03E
2026-01-06T16:11:44.493641055Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:11:44.493641081Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:11:44.493641313Z [err]      ^
2026-01-06T16:11:44.493647264Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:11:44.493649097Z [inf]  INFO:     100.64.0.3:57054 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:11:44.493652383Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:11:44.493659351Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:11:44.493660873Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:11:44.493665068Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:11:44.493672204Z [err]  Traceback (most recent call last):
2026-01-06T16:11:44.493674940Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:11:44.498872710Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:11:44.498877132Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:11:44.498879163Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:11:44.498887694Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:11:44.498892963Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:11:44.498900357Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:11:44.498903536Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:11:44.498904893Z [err]      await app(scope, receive, sender)
2026-01-06T16:11:44.498913555Z [err]      ...<3 lines>...
2026-01-06T16:11:44.498914619Z [err]      raise exc
2026-01-06T16:11:44.498921557Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:11:44.498924609Z [err]      )
2026-01-06T16:11:44.498927111Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:11:44.498934851Z [err]      ^
2026-01-06T16:11:44.498936406Z [err]      await app(scope, receive, sender)
2026-01-06T16:11:44.498937792Z [err]      await self.app(scope, receive, send)
2026-01-06T16:11:44.498951380Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:11:44.498954115Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:11:44.498964573Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:11:44.498975477Z [err]      await self.app(scope, receive, send)
2026-01-06T16:11:44.498979187Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:11:44.498989900Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:11:44.498992939Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:11:44.499003197Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:11:44.499004682Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:11:44.499016006Z [err]      await self.app(scope, receive, send)
2026-01-06T16:11:44.499017800Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:11:44.499026619Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:11:44.499034197Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:11:44.499045669Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:11:44.499047403Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:11:44.499059510Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:11:44.499060299Z [err]      raise exc
2026-01-06T16:11:44.499072583Z [err]      await self.app(scope, receive, send)
2026-01-06T16:11:44.499073246Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:11:44.499086924Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:11:44.499087490Z [err]      await app(scope, receive, sender)
2026-01-06T16:11:44.499095640Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:11:44.499104861Z [err]      response = await f(request)
2026-01-06T16:11:44.499111155Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:11:44.499115531Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:11:44.499125708Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:11:44.499282985Z [err]      raise exc
2026-01-06T16:11:44.499290133Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:11:44.499302130Z [err]      await app(scope, receive, sender)
2026-01-06T16:11:44.499309454Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:11:44.499322561Z [err]      response = await f(request)
2026-01-06T16:11:44.499330218Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:11:44.499337481Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:11:44.499346246Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:11:44.499356941Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:11:44.499365277Z [err]      ...<3 lines>...
2026-01-06T16:11:44.499372158Z [err]      )
2026-01-06T16:11:44.499385046Z [err]      ^
2026-01-06T16:11:44.499392520Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:11:44.499399706Z [err]      return await dependant.call(**values)
2026-01-06T16:11:44.499406186Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:11:44.499414470Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:11:44.499422931Z [err]      event = get_active_event()
2026-01-06T16:11:44.499435134Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:11:44.499441770Z [err]      cur.execute(
2026-01-06T16:11:44.499448861Z [err]      ~~~~~~~~~~~^
2026-01-06T16:11:44.499460687Z [err]          """
2026-01-06T16:11:44.499467617Z [err]          ^^^
2026-01-06T16:11:44.499479778Z [err]      ...<7 lines>...
2026-01-06T16:11:44.499486792Z [err]          (day_of_week, current_time),
2026-01-06T16:11:44.499494766Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:11:44.499527700Z [err]      )
2026-01-06T16:11:44.499532827Z [err]      ^
2026-01-06T16:11:44.499537429Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:11:44.499541939Z [err]      return super().execute(query, vars)
2026-01-06T16:11:44.499551938Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:11:44.499557204Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:11:44.499561874Z [err]  LINE 5:           AND active = 1
2026-01-06T16:11:44.499565926Z [err]                               ^
2026-01-06T16:11:44.499571575Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:11:44.499580573Z [err]  
2026-01-06T16:11:44.499584626Z [inf]  ðŸ“¨ 27763128753: 8km 35:31 SBK03E
2026-01-06T16:11:44.499589380Z [inf]  INFO:     100.64.0.7:47560 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:11:44.499593614Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:11:44.499598831Z [err]  Traceback (most recent call last):
2026-01-06T16:11:44.499607441Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:11:44.499612066Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:11:44.499617249Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:11:44.499621305Z [err]          self.scope, self.receive, self.send
2026-01-06T16:11:44.499625717Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:11:44.499629320Z [err]      )
2026-01-06T16:11:44.499637238Z [err]      ^
2026-01-06T16:11:44.499644750Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:11:44.499648714Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:11:44.499658166Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:11:44.499664617Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:11:44.499668997Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:11:44.499673347Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:11:44.499677147Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:11:44.499683877Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:11:44.499692281Z [err]      raise exc
2026-01-06T16:11:44.499696126Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:11:44.499700054Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:11:44.499703760Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:11:44.499708940Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:11:44.499712548Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:11:44.499719205Z [err]      raise exc
2026-01-06T16:11:44.500573720Z [err]      return await dependant.call(**values)
2026-01-06T16:11:44.500583026Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:11:44.500590086Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:11:44.500594441Z [err]      event = get_active_event()
2026-01-06T16:11:44.500599352Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:11:44.500606943Z [err]      cur.execute(
2026-01-06T16:11:44.500617686Z [err]      ~~~~~~~~~~~^
2026-01-06T16:11:44.500624601Z [err]          """
2026-01-06T16:11:44.500632357Z [err]          ^^^
2026-01-06T16:11:44.500640848Z [err]      ...<7 lines>...
2026-01-06T16:11:44.500648800Z [err]          (day_of_week, current_time),
2026-01-06T16:11:44.500655544Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:11:44.500661533Z [err]      )
2026-01-06T16:11:44.500668443Z [err]      ^
2026-01-06T16:11:44.500676324Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:11:44.500682769Z [err]      return super().execute(query, vars)
2026-01-06T16:11:44.500688771Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:11:44.500695935Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:11:44.500703239Z [err]  LINE 5:           AND active = 1
2026-01-06T16:11:44.500709532Z [err]                               ^
2026-01-06T16:11:44.500716414Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:11:44.500722790Z [err]  
2026-01-06T16:11:44.500728980Z [inf]  ðŸ“¨ 27763128753: 8km 35:31 SBK03E
2026-01-06T16:11:44.500735938Z [inf]  INFO:     100.64.0.9:61846 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:11:44.500743627Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:11:44.501129443Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:11:44.501139017Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:11:44.501149187Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:11:44.501154054Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:11:44.501166718Z [err]  Traceback (most recent call last):
2026-01-06T16:11:44.501166936Z [err]      )
2026-01-06T16:11:44.501176272Z [err]      ^
2026-01-06T16:11:44.501179711Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:11:44.501187354Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:11:44.501190528Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:11:44.501196544Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:11:44.501200200Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:11:44.501209507Z [err]          self.scope, self.receive, self.send
2026-01-06T16:11:44.501218764Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:11:44.501230732Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:11:44.501243977Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:11:44.501257218Z [err]      raise exc
2026-01-06T16:11:44.501266207Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:11:44.501274677Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:11:44.501283338Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:11:44.502472247Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:11:44.502482354Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:11:44.502485277Z [err]      await self.app(scope, receive, send)
2026-01-06T16:11:44.502488795Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:11:44.502491629Z [err]      raise exc
2026-01-06T16:11:44.502500868Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:11:44.502501896Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:11:44.502504274Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:11:44.502511265Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:11:44.502512326Z [err]      await app(scope, receive, sender)
2026-01-06T16:11:44.502516976Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:11:44.502522724Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:11:44.502526391Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:11:44.502530275Z [err]      raise exc
2026-01-06T16:11:44.502531616Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:11:44.502538662Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:11:44.502542071Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:11:44.502545166Z [err]      await self.app(scope, receive, send)
2026-01-06T16:11:44.503307421Z [err]      await app(scope, receive, sender)
2026-01-06T16:11:44.503316102Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:11:44.503316877Z [err]      ...<7 lines>...
2026-01-06T16:11:44.503325845Z [err]      response = await f(request)
2026-01-06T16:11:44.503328836Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:11:44.503331696Z [err]          (day_of_week, current_time),
2026-01-06T16:11:44.503336711Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:11:44.503340031Z [err]      cur.execute(
2026-01-06T16:11:44.503347339Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:11:44.503348489Z [err]      ~~~~~~~~~~~^
2026-01-06T16:11:44.503358408Z [err]          """
2026-01-06T16:11:44.503359838Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:11:44.503360727Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:11:44.503370413Z [err]          ^^^
2026-01-06T16:11:44.503370626Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:11:44.503370966Z [err]      )
2026-01-06T16:11:44.503379169Z [err]      ...<3 lines>...
2026-01-06T16:11:44.503379666Z [err]      ^
2026-01-06T16:11:44.503386397Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:11:44.503386462Z [err]      )
2026-01-06T16:11:44.503392504Z [err]      ^
2026-01-06T16:11:44.503397187Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:11:44.503402286Z [err]      return await dependant.call(**values)
2026-01-06T16:11:44.503407597Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:11:44.503412271Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:11:44.503416854Z [err]      event = get_active_event()
2026-01-06T16:11:44.504188321Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:11:44.504193249Z [err]      return super().execute(query, vars)
2026-01-06T16:11:44.504198556Z [inf]  INFO:     100.64.0.5:15998 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:11:44.504198780Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:11:44.504200057Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:11:44.504207059Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:11:44.504213517Z [err]      )
2026-01-06T16:11:44.504213761Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:11:44.504218647Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:11:44.504227246Z [err]  Traceback (most recent call last):
2026-01-06T16:11:44.504231684Z [err]  LINE 5:           AND active = 1
2026-01-06T16:11:44.504232679Z [err]      ^
2026-01-06T16:11:44.504240142Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:11:44.504244983Z [err]                               ^
2026-01-06T16:11:44.504245416Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:11:44.504253089Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:11:44.504254738Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:11:44.504258494Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:11:44.504268972Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:11:44.504270269Z [err]  
2026-01-06T16:11:44.504280264Z [err]          self.scope, self.receive, self.send
2026-01-06T16:11:44.504285714Z [inf]  ðŸ“¨ 27763128753: 8km 35:31 SBK03E
2026-01-06T16:11:44.505001329Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:11:44.505005029Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:11:44.505011126Z [err]      await self.app(scope, receive, send)
2026-01-06T16:11:44.505019694Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:11:44.505020548Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:11:44.505030571Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:11:44.505031817Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:11:44.505041179Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:11:44.505042237Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:11:44.505050279Z [err]      raise exc
2026-01-06T16:11:44.505057431Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:11:44.505064493Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:11:44.505071926Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:11:44.505078269Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:11:44.505084519Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:11:44.505173241Z [err]      raise exc
2026-01-06T16:11:44.505181649Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:11:44.505187720Z [err]      await app(scope, receive, sender)
2026-01-06T16:11:44.505912180Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:11:44.505919057Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:11:44.505924530Z [err]      await self.app(scope, receive, send)
2026-01-06T16:11:44.505929820Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:11:44.505934796Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:11:44.505939730Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:11:44.505944326Z [err]      raise exc
2026-01-06T16:11:44.505948577Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:11:44.505954960Z [err]      await app(scope, receive, sender)
2026-01-06T16:11:44.505960054Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:11:44.505964634Z [err]      response = await f(request)
2026-01-06T16:11:44.505969002Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:11:44.505973125Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:11:44.505978019Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:11:44.505982140Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:11:44.505988170Z [err]      ...<3 lines>...
2026-01-06T16:11:44.505992012Z [err]      )
2026-01-06T16:11:44.505996274Z [err]      ^
2026-01-06T16:11:44.506000150Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:11:44.506005205Z [err]      return await dependant.call(**values)
2026-01-06T16:11:44.506009857Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:11:44.506817966Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:11:44.506821867Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:11:44.506827786Z [err]      event = get_active_event()
2026-01-06T16:11:44.506829716Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:11:44.506835541Z [err]  LINE 5:           AND active = 1
2026-01-06T16:11:44.506840010Z [err]                               ^
2026-01-06T16:11:44.506842551Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:11:44.506847119Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:11:44.506848881Z [err]      cur.execute(
2026-01-06T16:11:44.506854648Z [err]      ~~~~~~~~~~~^
2026-01-06T16:11:44.506856219Z [err]  
2026-01-06T16:11:44.506859174Z [err]          """
2026-01-06T16:11:44.506863284Z [err]          ^^^
2026-01-06T16:11:44.506867295Z [err]      ...<7 lines>...
2026-01-06T16:11:44.506871510Z [err]          (day_of_week, current_time),
2026-01-06T16:11:44.506875477Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:11:44.506879343Z [err]      )
2026-01-06T16:11:44.506885368Z [err]      ^
2026-01-06T16:11:44.506889371Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:11:44.506893311Z [err]      return super().execute(query, vars)
2026-01-06T16:11:44.982699619Z [err]  2026-01-06 16:11:36.584 UTC [8639] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:11:44.982705994Z [err]  2026-01-06 16:11:36.584 UTC [8639] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:11:44.982712344Z [err]  2026-01-06 16:11:36.584 UTC [8639] STATEMENT:  
2026-01-06T16:11:44.982717775Z [err]  	        SELECT event
2026-01-06T16:11:44.982723457Z [err]  	        FROM event_config
2026-01-06T16:11:44.982730867Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:11:44.982736945Z [err]  	          AND active = 1
2026-01-06T16:11:44.982742763Z [err]  	          AND '16:11' BETWEEN open_time AND close_time
2026-01-06T16:11:44.982749569Z [err]  	        LIMIT 1;
2026-01-06T16:11:44.982756514Z [err]  	        
2026-01-06T16:11:45.116841483Z [err]  2026-01-06 16:11:37.651 UTC [8641] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:11:45.116866316Z [err]  2026-01-06 16:11:37.651 UTC [8641] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:11:45.116877116Z [err]  2026-01-06 16:11:37.651 UTC [8641] STATEMENT:  
2026-01-06T16:11:45.116884170Z [err]  	        SELECT event
2026-01-06T16:11:45.116891200Z [err]  	        FROM event_config
2026-01-06T16:11:45.116902309Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:11:45.116910093Z [err]  	          AND active = 1
2026-01-06T16:11:45.116917647Z [err]  	          AND '16:11' BETWEEN open_time AND close_time
2026-01-06T16:11:45.116924028Z [err]  	        LIMIT 1;
2026-01-06T16:11:45.116934456Z [err]  	        
2026-01-06T16:11:45.116941467Z [err]  2026-01-06 16:11:38.494 UTC [8643] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:11:45.116948697Z [err]  2026-01-06 16:11:38.494 UTC [8643] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:11:45.122769352Z [err]  2026-01-06 16:11:38.494 UTC [8643] STATEMENT:  
2026-01-06T16:11:45.122776982Z [err]  	        SELECT event
2026-01-06T16:11:45.122784537Z [err]  	        FROM event_config
2026-01-06T16:11:45.122791242Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:11:45.122799519Z [err]  	          AND active = 1
2026-01-06T16:11:45.122807210Z [err]  	          AND '16:11' BETWEEN open_time AND close_time
2026-01-06T16:11:45.122814506Z [err]  	        LIMIT 1;
2026-01-06T16:11:45.122824428Z [err]  	        
2026-01-06T16:11:45.122832352Z [err]  2026-01-06 16:11:39.496 UTC [8645] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:11:45.122839244Z [err]  2026-01-06 16:11:39.496 UTC [8645] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:11:45.122845900Z [err]  2026-01-06 16:11:39.496 UTC [8645] STATEMENT:  
2026-01-06T16:11:45.122857738Z [err]  	        SELECT event
2026-01-06T16:11:45.122865578Z [err]  	        FROM event_config
2026-01-06T16:11:45.122876027Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:11:45.122882663Z [err]  	          AND active = 1
2026-01-06T16:11:45.122889628Z [err]  	          AND '16:11' BETWEEN open_time AND close_time
2026-01-06T16:11:45.122896771Z [err]  	        LIMIT 1;
2026-01-06T16:11:45.122904360Z [err]  	        
2026-01-06T16:11:47.901753124Z [inf]  ðŸ“¨ 27763128753: 8km 35:31 SBK03E
2026-01-06T16:11:48.192779940Z [inf]  INFO:     100.64.0.4:20396 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:11:48.192786544Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:11:48.192788456Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:11:48.192792657Z [err]  Traceback (most recent call last):
2026-01-06T16:11:48.192798653Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:11:48.192804751Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:11:48.192811143Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:11:48.192818070Z [err]          self.scope, self.receive, self.send
2026-01-06T16:11:48.192823683Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:11:48.192829898Z [err]      )
2026-01-06T16:11:48.192835922Z [err]      ^
2026-01-06T16:11:48.192841566Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:11:48.192847042Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:11:48.192853673Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:11:48.192859537Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:11:48.192865007Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:11:48.192871221Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:11:48.192876882Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:11:48.192882300Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:11:48.192887828Z [err]      raise exc
2026-01-06T16:11:48.193856243Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:11:48.193862169Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:11:48.193865524Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:11:48.193867547Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:11:48.193874403Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:11:48.193877351Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:11:48.193882346Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:11:48.193886094Z [err]      await self.app(scope, receive, send)
2026-01-06T16:11:48.193892758Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:11:48.193900966Z [err]      raise exc
2026-01-06T16:11:48.193901508Z [err]      await self.app(scope, receive, send)
2026-01-06T16:11:48.193912411Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:11:48.193916424Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:11:48.193921174Z [err]      await app(scope, receive, sender)
2026-01-06T16:11:48.193928247Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:11:48.193932507Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:11:48.193939140Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:11:48.194015080Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:11:48.194973031Z [err]      ...<7 lines>...
2026-01-06T16:11:48.194973116Z [err]      raise exc
2026-01-06T16:11:48.194980644Z [err]          (day_of_week, current_time),
2026-01-06T16:11:48.194985158Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:11:48.194986468Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:11:48.194986615Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:11:48.194994188Z [err]      await app(scope, receive, sender)
2026-01-06T16:11:48.194996742Z [err]      cur.execute(
2026-01-06T16:11:48.194999642Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:11:48.195003206Z [err]      )
2026-01-06T16:11:48.195007090Z [err]      ~~~~~~~~~~~^
2026-01-06T16:11:48.195008139Z [err]      response = await f(request)
2026-01-06T16:11:48.195013852Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:11:48.195016469Z [err]          """
2026-01-06T16:11:48.195018281Z [err]      ^
2026-01-06T16:11:48.195019946Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:11:48.195025713Z [err]          ^^^
2026-01-06T16:11:48.195025833Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:11:48.195028854Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:11:48.195031444Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:11:48.195036995Z [err]      return await dependant.call(**values)
2026-01-06T16:11:48.195041152Z [err]      ...<3 lines>...
2026-01-06T16:11:48.195046893Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:11:48.195053351Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:11:48.195059311Z [err]      event = get_active_event()
2026-01-06T16:11:48.195803566Z [err]  
2026-01-06T16:11:48.195806834Z [err]      )
2026-01-06T16:11:48.195814738Z [err]      ^
2026-01-06T16:11:48.195821323Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:11:48.195827391Z [err]      return super().execute(query, vars)
2026-01-06T16:11:48.195833147Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:11:48.195838907Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:11:48.195845204Z [err]  LINE 5:           AND active = 1
2026-01-06T16:11:48.195851127Z [err]                               ^
2026-01-06T16:11:48.195857596Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:11:48.658860279Z [err]  2026-01-06 16:11:48.172 UTC [8648] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:11:48.658867361Z [err]  2026-01-06 16:11:48.172 UTC [8648] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:11:48.658874510Z [err]  2026-01-06 16:11:48.172 UTC [8648] STATEMENT:  
2026-01-06T16:11:48.658881054Z [err]  	        SELECT event
2026-01-06T16:11:48.658887582Z [err]  	        FROM event_config
2026-01-06T16:11:48.658893625Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:11:48.658899968Z [err]  	          AND active = 1
2026-01-06T16:11:48.658906700Z [err]  	          AND '16:11' BETWEEN open_time AND close_time
2026-01-06T16:11:48.658914723Z [err]  	        LIMIT 1;
2026-01-06T16:11:48.658920805Z [err]  	        
2026-01-06T16:12:49.389340464Z [err]  2026-01-06 16:12:46.703 UTC [76] LOG:  checkpoint starting: time
2026-01-06T16:12:49.389348210Z [err]  2026-01-06 16:12:47.169 UTC [76] LOG:  checkpoint complete: wrote 5 buffers (0.0%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.409 s, sync=0.012 s, total=0.467 s; sync files=5, longest=0.007 s, average=0.003 s; distance=8 kB, estimate=28 kB; lsn=0/1A0A630, redo lsn=0/1A0A5D8
2026-01-06T16:13:48.669038099Z [inf]  ðŸ“¨ 27722487698: Hi
2026-01-06T16:13:48.669045679Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T16:13:48.669051101Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T16:13:48.669056824Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T16:13:48.669063200Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T16:13:48.669069518Z [inf]  ðŸ“¤ Status: 200
2026-01-06T16:13:48.669075624Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27722487698","wa_id":"27722487698"}],"messages":[{"id":"wamid.HBgLMjc3MjI0ODc2OTgVAgARGBJCRkI5RDg4QkQ1MTk5Rjg3Q0IA"}]}
2026-01-06T16:13:48.669080989Z [inf]  INFO:     100.64.0.9:10848 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:13:48.669086521Z [inf]  INFO:     100.64.0.4:62770 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:13:48.669092029Z [inf]  INFO:     100.64.0.8:53576 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:13:54.921200604Z [inf]  ðŸ“¨ 27832805524: 6km 34:43 SBK03E
2026-01-06T16:13:55.192829664Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:13:55.192842075Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:13:55.192842998Z [inf]  INFO:     100.64.0.9:38324 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:13:55.192851739Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:13:55.192852407Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:13:55.192859184Z [err]  Traceback (most recent call last):
2026-01-06T16:13:55.192862004Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:13:55.192866067Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:13:55.192873196Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:13:55.192880151Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:13:55.192881318Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:13:55.192887672Z [err]          self.scope, self.receive, self.send
2026-01-06T16:13:55.192889284Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:13:55.192894789Z [err]      raise exc
2026-01-06T16:13:55.192896668Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:13:55.192899938Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:13:55.192904191Z [err]      )
2026-01-06T16:13:55.192909655Z [err]      ^
2026-01-06T16:13:55.192915645Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:13:55.192921201Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:13:55.193601501Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:13:55.193605147Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:13:55.193609094Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:13:55.193613522Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:13:55.193618101Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:13:55.193621864Z [err]      raise exc
2026-01-06T16:13:55.193626433Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:13:55.193630322Z [err]      await app(scope, receive, sender)
2026-01-06T16:13:55.193633794Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:13:55.193637810Z [err]      await self.app(scope, receive, send)
2026-01-06T16:13:55.193642186Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:13:55.193646097Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:13:55.193649784Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:13:55.193653814Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:13:55.193657673Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:13:55.193661747Z [err]      await self.app(scope, receive, send)
2026-01-06T16:13:55.193665710Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:13:55.193669484Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:13:55.196001607Z [err]      raise exc
2026-01-06T16:13:55.196013996Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:13:55.196019375Z [err]      await app(scope, receive, sender)
2026-01-06T16:13:55.196023759Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:13:55.196028215Z [err]      response = await f(request)
2026-01-06T16:13:55.196035657Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:13:55.196039998Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:13:55.196044618Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:13:55.196048779Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:13:55.196052888Z [err]      ...<3 lines>...
2026-01-06T16:13:55.196056889Z [err]      )
2026-01-06T16:13:55.196061253Z [err]      ^
2026-01-06T16:13:55.196066496Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:13:55.196071393Z [err]      return await dependant.call(**values)
2026-01-06T16:13:55.196076069Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:13:55.196080406Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:13:55.196084523Z [err]      event = get_active_event()
2026-01-06T16:13:55.196088971Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:13:55.196094415Z [err]      cur.execute(
2026-01-06T16:13:55.196098634Z [err]      ~~~~~~~~~~~^
2026-01-06T16:13:55.196102452Z [err]          """
2026-01-06T16:13:55.196106622Z [err]          ^^^
2026-01-06T16:13:55.196110569Z [err]      ...<7 lines>...
2026-01-06T16:13:55.196114508Z [err]          (day_of_week, current_time),
2026-01-06T16:13:55.196118765Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:13:55.196122879Z [err]      )
2026-01-06T16:13:55.196126986Z [err]      ^
2026-01-06T16:13:55.196131237Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:13:55.196135222Z [err]      return super().execute(query, vars)
2026-01-06T16:13:55.196140019Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:13:55.196144319Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:13:55.196148650Z [err]  LINE 5:           AND active = 1
2026-01-06T16:13:55.196156012Z [err]                               ^
2026-01-06T16:13:55.196162674Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:13:55.196169644Z [err]  
2026-01-06T16:14:00.882499089Z [err]  2026-01-06 16:13:55.178 UTC [8657] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:14:00.882510475Z [err]  2026-01-06 16:13:55.178 UTC [8657] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:14:00.882517623Z [err]  2026-01-06 16:13:55.178 UTC [8657] STATEMENT:  
2026-01-06T16:14:00.882524009Z [err]  	        SELECT event
2026-01-06T16:14:00.882530453Z [err]  	        FROM event_config
2026-01-06T16:14:00.882537336Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:14:00.882549672Z [err]  	          AND active = 1
2026-01-06T16:14:00.882559287Z [err]  	          AND '16:13' BETWEEN open_time AND close_time
2026-01-06T16:14:00.882565388Z [err]  	        LIMIT 1;
2026-01-06T16:14:00.882570979Z [err]  	        
2026-01-06T16:14:02.762341491Z [inf]  ðŸ“¨ 27722487698: RUNNER
2026-01-06T16:14:02.974604232Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T16:14:02.974610570Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T16:14:02.974614543Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T16:14:03.621382428Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T16:14:03.621391927Z [inf]  ðŸ“¤ Status: 200
2026-01-06T16:14:03.621398123Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27722487698","wa_id":"27722487698"}],"messages":[{"id":"wamid.HBgLMjc3MjI0ODc2OTgVAgARGBJDNzQyM0NBNjkwNTQxRkQ2QjUA"}]}
2026-01-06T16:14:03.621403967Z [inf]  INFO:     100.64.0.5:26488 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:14:04.398044988Z [inf]  INFO:     100.64.0.5:26488 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:14:04.922755533Z [inf]  INFO:     100.64.0.8:61128 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:15:22.305904782Z [err]  	        SELECT event
2026-01-06T16:15:22.305920319Z [err]  	        FROM event_config
2026-01-06T16:15:22.305929728Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:15:22.305938646Z [err]  	          AND active = 1
2026-01-06T16:15:22.305946179Z [err]  	          AND '16:15' BETWEEN open_time AND close_time
2026-01-06T16:15:22.305954657Z [err]  	        LIMIT 1;
2026-01-06T16:15:22.305964118Z [err]  	        
2026-01-06T16:15:22.306031798Z [err]  2026-01-06 16:15:19.870 UTC [8664] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:15:22.306037754Z [err]  2026-01-06 16:15:19.870 UTC [8664] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:15:22.306044398Z [err]  2026-01-06 16:15:19.870 UTC [8664] STATEMENT:  
2026-01-06T16:15:25.203206950Z [err]      ^
2026-01-06T16:15:25.203216920Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:15:25.203223338Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:15:25.203228467Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:15:25.203234378Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:15:25.203240145Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:15:25.203243569Z [inf]  ðŸ“¨ 27824940077: 6km 35:06 SBK03E
2026-01-06T16:15:25.203249234Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:15:25.203256914Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:15:25.203258168Z [inf]  INFO:     100.64.0.7:58678 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:15:25.203266257Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:15:25.203268318Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:15:25.203276000Z [err]      raise exc
2026-01-06T16:15:25.203277927Z [err]  Traceback (most recent call last):
2026-01-06T16:15:25.203285023Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:15:25.203298460Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:15:25.203308945Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:15:25.203316915Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:15:25.203325203Z [err]          self.scope, self.receive, self.send
2026-01-06T16:15:25.203346588Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:15:25.203355044Z [err]      )
2026-01-06T16:15:25.203773868Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:15:25.203782597Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:15:25.203789668Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:15:25.203796329Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:15:25.203802723Z [err]      raise exc
2026-01-06T16:15:25.203809357Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:15:25.203816015Z [err]      await app(scope, receive, sender)
2026-01-06T16:15:25.203822785Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:15:25.203829341Z [err]      await self.app(scope, receive, send)
2026-01-06T16:15:25.203835488Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:15:25.203841948Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:15:25.203848042Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:15:25.203861039Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:15:25.203867246Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:15:25.203872871Z [err]      await self.app(scope, receive, send)
2026-01-06T16:15:25.203879322Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:15:25.203885715Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:15:25.203893268Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:15:25.204873635Z [err]      ~~~~~~~~~~~^
2026-01-06T16:15:25.204873845Z [err]      raise exc
2026-01-06T16:15:25.204882161Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:15:25.204883127Z [err]          """
2026-01-06T16:15:25.204890008Z [err]          ^^^
2026-01-06T16:15:25.204891188Z [err]      await app(scope, receive, sender)
2026-01-06T16:15:25.204897108Z [err]      ...<7 lines>...
2026-01-06T16:15:25.204898107Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:15:25.204904684Z [err]      response = await f(request)
2026-01-06T16:15:25.204913126Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:15:25.204919800Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:15:25.204924609Z [err]          (day_of_week, current_time),
2026-01-06T16:15:25.204927638Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:15:25.204931793Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:15:25.204934326Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:15:25.204941476Z [err]      ...<3 lines>...
2026-01-06T16:15:25.204948216Z [err]      )
2026-01-06T16:15:25.204956096Z [err]      ^
2026-01-06T16:15:25.204963488Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:15:25.204970754Z [err]      return await dependant.call(**values)
2026-01-06T16:15:25.204977465Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:15:25.204984037Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:15:25.204990875Z [err]      event = get_active_event()
2026-01-06T16:15:25.204998565Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:15:25.205005492Z [err]      cur.execute(
2026-01-06T16:15:25.205262826Z [err]      )
2026-01-06T16:15:25.205265826Z [err]      return super().execute(query, vars)
2026-01-06T16:15:25.205267990Z [err]                               ^
2026-01-06T16:15:25.205273743Z [err]      ^
2026-01-06T16:15:25.205275879Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:15:25.205277476Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:15:25.205284630Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:15:25.205285199Z [err]  
2026-01-06T16:15:25.205288232Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:15:25.205296683Z [err]  LINE 5:           AND active = 1
2026-01-06T16:16:12.375791360Z [err]  2026-01-06 16:16:08.726 UTC [8669] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:16:12.375801609Z [err]  2026-01-06 16:16:09.946 UTC [8673] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:16:12.375803653Z [err]  2026-01-06 16:16:08.726 UTC [8669] STATEMENT:  
2026-01-06T16:16:12.375810340Z [err]  	          AND active = 1
2026-01-06T16:16:12.375812502Z [err]  2026-01-06 16:16:09.946 UTC [8673] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:16:12.375813573Z [err]  	          AND active = 1
2026-01-06T16:16:12.375816931Z [err]  	        SELECT event
2026-01-06T16:16:12.375817897Z [err]  2026-01-06 16:16:08.726 UTC [8669] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:16:12.375823287Z [err]  	          AND '16:16' BETWEEN open_time AND close_time
2026-01-06T16:16:12.375823447Z [err]  	          AND '16:16' BETWEEN open_time AND close_time
2026-01-06T16:16:12.375831879Z [err]  	        LIMIT 1;
2026-01-06T16:16:12.375832461Z [err]  	        FROM event_config
2026-01-06T16:16:12.375833200Z [err]  	        LIMIT 1;
2026-01-06T16:16:12.375839865Z [err]  	        
2026-01-06T16:16:12.375842427Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:16:12.375843989Z [err]  	        
2026-01-06T16:16:12.375856401Z [err]  2026-01-06 16:16:09.299 UTC [8671] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:16:12.375872785Z [err]  2026-01-06 16:16:09.299 UTC [8671] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:16:12.375886085Z [err]  2026-01-06 16:16:09.299 UTC [8671] STATEMENT:  
2026-01-06T16:16:12.375896064Z [err]  	        SELECT event
2026-01-06T16:16:12.375904822Z [err]  	        FROM event_config
2026-01-06T16:16:12.375911919Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:16:13.652334562Z [err]  2026-01-06 16:16:09.946 UTC [8673] STATEMENT:  
2026-01-06T16:16:13.652340758Z [err]  	        SELECT event
2026-01-06T16:16:13.652347045Z [err]  	        FROM event_config
2026-01-06T16:16:13.652354424Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:16:13.652366769Z [err]  	          AND active = 1
2026-01-06T16:16:13.652374523Z [err]  	          AND '16:16' BETWEEN open_time AND close_time
2026-01-06T16:16:13.652381827Z [err]  	        LIMIT 1;
2026-01-06T16:16:13.652389677Z [err]  	        
2026-01-06T16:16:13.652397820Z [err]  2026-01-06 16:16:11.894 UTC [8675] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:16:13.686575239Z [err]  2026-01-06 16:16:11.894 UTC [8675] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:16:13.686595810Z [err]  2026-01-06 16:16:11.894 UTC [8675] STATEMENT:  
2026-01-06T16:16:13.686604699Z [err]  	        SELECT event
2026-01-06T16:16:13.686611571Z [err]  	        FROM event_config
2026-01-06T16:16:13.686618413Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:16:13.686625426Z [err]  	          AND active = 1
2026-01-06T16:16:13.686630391Z [err]  	          AND '16:16' BETWEEN open_time AND close_time
2026-01-06T16:16:13.686635396Z [err]  	        LIMIT 1;
2026-01-06T16:16:13.686640307Z [err]  	        
2026-01-06T16:16:15.238663100Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:16:15.238663103Z [inf]  ðŸ“¨ 27722487698: 8km 35:29 SBK03E
2026-01-06T16:16:15.238672381Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:16:15.238672563Z [inf]  INFO:     100.64.0.6:22784 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:16:15.238680197Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:16:15.238680395Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:16:15.238687399Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:16:15.238688900Z [err]  Traceback (most recent call last):
2026-01-06T16:16:15.238694185Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:16:15.238696072Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:16:15.238701236Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:16:15.238703788Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:16:15.238707810Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:16:15.238710652Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:16:15.238714722Z [err]      raise exc
2026-01-06T16:16:15.238717979Z [err]          self.scope, self.receive, self.send
2026-01-06T16:16:15.238721782Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:16:15.238725458Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:16:15.238732104Z [err]      )
2026-01-06T16:16:15.238738838Z [err]      ^
2026-01-06T16:16:15.238745075Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:16:15.239860303Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:16:15.239873798Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:16:15.239883152Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:16:15.239897730Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:16:15.239908262Z [err]      raise exc
2026-01-06T16:16:15.239917394Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:16:15.239926966Z [err]      await app(scope, receive, sender)
2026-01-06T16:16:15.239934812Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:16:15.239942474Z [err]      await self.app(scope, receive, send)
2026-01-06T16:16:15.239950670Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:16:15.239958360Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:16:15.239966160Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:16:15.239973564Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:16:15.239980699Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:16:15.239987784Z [err]      await self.app(scope, receive, send)
2026-01-06T16:16:15.239994593Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:16:15.240002083Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:16:15.240009393Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:16:15.241485077Z [err]      raise exc
2026-01-06T16:16:15.241496108Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:16:15.241504334Z [err]      await app(scope, receive, sender)
2026-01-06T16:16:15.241513083Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:16:15.241520269Z [err]      response = await f(request)
2026-01-06T16:16:15.241533740Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:16:15.241541883Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:16:15.241548823Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:16:15.241556420Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:16:15.241564134Z [err]      ...<3 lines>...
2026-01-06T16:16:15.241572085Z [err]      )
2026-01-06T16:16:15.241579620Z [err]      ^
2026-01-06T16:16:15.241587477Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:16:15.241595136Z [err]      return await dependant.call(**values)
2026-01-06T16:16:15.241608521Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:16:15.241616944Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:16:15.241624968Z [err]      event = get_active_event()
2026-01-06T16:16:15.241752305Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:16:15.241760793Z [err]      cur.execute(
2026-01-06T16:16:15.241768648Z [err]      ~~~~~~~~~~~^
2026-01-06T16:16:15.241776185Z [err]          """
2026-01-06T16:16:15.241783768Z [err]          ^^^
2026-01-06T16:16:15.241791721Z [err]      ...<7 lines>...
2026-01-06T16:16:15.241799506Z [err]          (day_of_week, current_time),
2026-01-06T16:16:15.241808579Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:16:15.242790686Z [err]      )
2026-01-06T16:16:15.242802803Z [err]      ^
2026-01-06T16:16:15.242825997Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:16:15.242834349Z [err]      return super().execute(query, vars)
2026-01-06T16:16:15.242842888Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:16:15.242850416Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:16:15.242858571Z [err]  LINE 5:           AND active = 1
2026-01-06T16:16:15.242868032Z [err]                               ^
2026-01-06T16:16:15.242875898Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:16:15.242885309Z [err]  
2026-01-06T16:16:15.242895067Z [inf]  ðŸ“¨ 27722487698: 8km 35:29 SBK03E
2026-01-06T16:16:15.242902622Z [inf]  INFO:     100.64.0.8:25258 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:16:15.242909916Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:16:15.242917396Z [err]  Traceback (most recent call last):
2026-01-06T16:16:15.242926569Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:16:15.242935191Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:16:15.242941688Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:16:15.242948391Z [err]          self.scope, self.receive, self.send
2026-01-06T16:16:15.242957479Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:16:15.242964505Z [err]      )
2026-01-06T16:16:15.242971702Z [err]      ^
2026-01-06T16:16:15.242978737Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:16:15.242984321Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:16:15.243975149Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:16:15.243985498Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:16:15.243993693Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:16:15.244002159Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:16:15.244009249Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:16:15.244016323Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:16:15.244022955Z [err]      raise exc
2026-01-06T16:16:15.244032235Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:16:15.244039995Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:16:15.244048159Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:16:15.244054443Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:16:15.244061685Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:16:15.244068617Z [err]      raise exc
2026-01-06T16:16:15.244076797Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:16:15.244085754Z [err]      await app(scope, receive, sender)
2026-01-06T16:16:15.244095751Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:16:15.244102952Z [err]      await self.app(scope, receive, send)
2026-01-06T16:16:15.244110284Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:16:15.245471226Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:16:15.245480464Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:16:15.245498685Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:16:15.245504431Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:16:15.245512093Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:16:15.245525246Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:16:15.245529957Z [err]      await app(scope, receive, sender)
2026-01-06T16:16:15.245538897Z [err]      await self.app(scope, receive, send)
2026-01-06T16:16:15.245543700Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:16:15.245553350Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:16:15.245557233Z [err]      response = await f(request)
2026-01-06T16:16:15.245567569Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:16:15.245570717Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:16:15.245581820Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:16:15.245586244Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:16:15.245593211Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:16:15.245600909Z [err]      raise exc
2026-01-06T16:16:15.245603470Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:16:15.245609976Z [err]      ...<3 lines>...
2026-01-06T16:16:15.245616551Z [err]      )
2026-01-06T16:16:15.245624010Z [err]      ^
2026-01-06T16:16:15.246897623Z [err]      return await dependant.call(**values)
2026-01-06T16:16:15.246904925Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:16:15.246913601Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:16:15.246915268Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:16:15.246927709Z [err]  
2026-01-06T16:16:15.246929294Z [err]      event = get_active_event()
2026-01-06T16:16:15.246940554Z [inf]  ðŸ“¨ 27722487698: 8km 35:29 SBK03E
2026-01-06T16:16:15.246942813Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:16:15.246953011Z [inf]  INFO:     100.64.0.7:60654 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:16:15.246955669Z [err]      cur.execute(
2026-01-06T16:16:15.246967326Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:16:15.246968009Z [err]      ~~~~~~~~~~~^
2026-01-06T16:16:15.246976245Z [err]          """
2026-01-06T16:16:15.246983520Z [err]          ^^^
2026-01-06T16:16:15.246988941Z [err]      ...<7 lines>...
2026-01-06T16:16:15.246992823Z [err]          (day_of_week, current_time),
2026-01-06T16:16:15.246997766Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:16:15.247005100Z [err]      )
2026-01-06T16:16:15.247022421Z [err]      ^
2026-01-06T16:16:15.247029546Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:16:15.247036253Z [err]      return super().execute(query, vars)
2026-01-06T16:16:15.247042669Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:16:15.247049313Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:16:15.247055936Z [err]  LINE 5:           AND active = 1
2026-01-06T16:16:15.247063290Z [err]                               ^
2026-01-06T16:16:15.248072899Z [err]      )
2026-01-06T16:16:15.248074737Z [err]      raise exc
2026-01-06T16:16:15.248080523Z [err]      ^
2026-01-06T16:16:15.248085547Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:16:15.248086315Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:16:15.248086342Z [err]  Traceback (most recent call last):
2026-01-06T16:16:15.248092457Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:16:15.248093149Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:16:15.248099823Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:16:15.248100459Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:16:15.248100967Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:16:15.248110967Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:16:15.248113370Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:16:15.248118866Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:16:15.248125849Z [err]          self.scope, self.receive, self.send
2026-01-06T16:16:15.248131237Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:16:15.248159064Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:16:15.248167122Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:16:15.248174712Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:16:15.248181149Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:16:15.249124359Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:16:15.249130047Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:16:15.249135734Z [err]      raise exc
2026-01-06T16:16:15.249145426Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:16:15.249148194Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:16:15.249156621Z [err]      raise exc
2026-01-06T16:16:15.249163727Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:16:15.249168696Z [err]      await app(scope, receive, sender)
2026-01-06T16:16:15.249173361Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:16:15.249178274Z [err]      await self.app(scope, receive, send)
2026-01-06T16:16:15.249183097Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:16:15.249187818Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:16:15.249192736Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:16:15.249198404Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:16:15.249202549Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:16:15.249207794Z [err]      await self.app(scope, receive, send)
2026-01-06T16:16:15.249212056Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:16:15.249216563Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:16:15.250992916Z [err]      await app(scope, receive, sender)
2026-01-06T16:16:15.251001534Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:16:15.251008344Z [err]      response = await f(request)
2026-01-06T16:16:15.251014957Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:16:15.251020038Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:16:15.251024998Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:16:15.251030907Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:16:15.251037487Z [err]      ...<3 lines>...
2026-01-06T16:16:15.251043934Z [err]      )
2026-01-06T16:16:15.251052850Z [err]      ^
2026-01-06T16:16:15.251058958Z [err]      ^
2026-01-06T16:16:15.251061844Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:16:15.251070047Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:16:15.251070727Z [err]      return await dependant.call(**values)
2026-01-06T16:16:15.251077748Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:16:15.251084524Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:16:15.251090862Z [err]      event = get_active_event()
2026-01-06T16:16:15.251097545Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:16:15.251103289Z [err]      cur.execute(
2026-01-06T16:16:15.251107339Z [err]      ~~~~~~~~~~~^
2026-01-06T16:16:15.251110959Z [err]          """
2026-01-06T16:16:15.251115935Z [err]          ^^^
2026-01-06T16:16:15.251122167Z [err]      ...<7 lines>...
2026-01-06T16:16:15.251128789Z [err]          (day_of_week, current_time),
2026-01-06T16:16:15.251135064Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:16:15.251141804Z [err]      )
2026-01-06T16:16:15.252045484Z [err]  Traceback (most recent call last):
2026-01-06T16:16:15.252045728Z [err]      return super().execute(query, vars)
2026-01-06T16:16:15.252047657Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:16:15.252055026Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:16:15.252055435Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:16:15.252058968Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:16:15.252062224Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:16:15.252065642Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:16:15.252068585Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:16:15.252070912Z [err]  LINE 5:           AND active = 1
2026-01-06T16:16:15.252075324Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:16:15.252075991Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:16:15.252077879Z [err]                               ^
2026-01-06T16:16:15.252084207Z [err]          self.scope, self.receive, self.send
2026-01-06T16:16:15.252084732Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:16:15.252090837Z [err]  
2026-01-06T16:16:15.252093080Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:16:15.252096064Z [inf]  ðŸ“¨ 27722487698: 8km 35:29 SBK03E
2026-01-06T16:16:15.252101884Z [inf]  INFO:     100.64.0.4:32106 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:16:15.252102942Z [err]      )
2026-01-06T16:16:15.252107297Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:16:15.252110955Z [err]      ^
2026-01-06T16:16:15.253264829Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:16:15.253269710Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:16:15.253274139Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:16:15.253278486Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:16:15.253283192Z [err]      raise exc
2026-01-06T16:16:15.253287410Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:16:15.253291688Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:16:15.253295432Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:16:15.253299185Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:16:15.253303325Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:16:15.253308092Z [err]      raise exc
2026-01-06T16:16:15.253312139Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:16:15.253316441Z [err]      await app(scope, receive, sender)
2026-01-06T16:16:15.253320612Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:16:15.253325452Z [err]      await self.app(scope, receive, send)
2026-01-06T16:16:15.253329610Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:16:15.253333257Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:16:15.253336890Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:16:15.254566400Z [err]      ^
2026-01-06T16:16:15.254567104Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:16:15.254573199Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:16:15.254574778Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:16:15.254579405Z [err]      return await dependant.call(**values)
2026-01-06T16:16:15.254581118Z [err]      await self.app(scope, receive, send)
2026-01-06T16:16:15.254585195Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:16:15.254587047Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:16:15.254592290Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:16:15.254596520Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:16:15.254606060Z [err]      raise exc
2026-01-06T16:16:15.254609830Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:16:15.254614043Z [err]      await app(scope, receive, sender)
2026-01-06T16:16:15.254618284Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:16:15.254622152Z [err]      response = await f(request)
2026-01-06T16:16:15.254625894Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:16:15.254630604Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:16:15.254634471Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:16:15.254639059Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:16:15.254642703Z [err]      ...<3 lines>...
2026-01-06T16:16:15.254646347Z [err]      )
2026-01-06T16:16:15.256265420Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:16:15.256277292Z [err]      )
2026-01-06T16:16:15.256280946Z [err]      event = get_active_event()
2026-01-06T16:16:15.256286399Z [err]  
2026-01-06T16:16:15.256287310Z [err]          """
2026-01-06T16:16:15.256290166Z [err]      ^
2026-01-06T16:16:15.256293063Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:16:15.256301338Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:16:15.256301448Z [err]          ^^^
2026-01-06T16:16:15.256303992Z [err]      cur.execute(
2026-01-06T16:16:15.256305282Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:16:15.256312200Z [err]      return super().execute(query, vars)
2026-01-06T16:16:15.256313547Z [err]      ~~~~~~~~~~~^
2026-01-06T16:16:15.256314696Z [err]      ...<7 lines>...
2026-01-06T16:16:15.256318084Z [err]  LINE 5:           AND active = 1
2026-01-06T16:16:15.256323232Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:16:15.256327107Z [err]          (day_of_week, current_time),
2026-01-06T16:16:15.256332019Z [err]                               ^
2026-01-06T16:16:15.256338279Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:16:15.256342368Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:16:21.790714693Z [inf]  ðŸ“¨ 27718738879: Hi
2026-01-06T16:16:22.011384670Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T16:16:22.011391850Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T16:16:22.011396572Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T16:16:23.039360765Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T16:16:23.039370485Z [inf]  ðŸ“¤ Status: 200
2026-01-06T16:16:23.039378306Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27718738879","wa_id":"27718738879"}],"messages":[{"id":"wamid.HBgLMjc3MTg3Mzg4NzkVAgARGBIwNzZFODQ4MjZEMjQ5MTI2RUMA"}]}
2026-01-06T16:16:23.039385138Z [inf]  INFO:     100.64.0.5:62336 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:16:23.793303630Z [inf]  ðŸ“¨ 27605473353: Thank you
2026-01-06T16:16:23.878796722Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:16:23.878805332Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:16:23.878806766Z [inf]  INFO:     100.64.0.6:49406 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:16:23.878813082Z [err]      raise exc
2026-01-06T16:16:23.878814554Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:16:23.878819633Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:16:23.878822429Z [err]  Traceback (most recent call last):
2026-01-06T16:16:23.878828667Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:16:23.878835518Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:16:23.878842344Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:16:23.878848777Z [err]          self.scope, self.receive, self.send
2026-01-06T16:16:23.878856309Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:16:23.878863426Z [err]      )
2026-01-06T16:16:23.878873349Z [err]      ^
2026-01-06T16:16:23.878879544Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:16:23.878885835Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:16:23.878892166Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:16:23.878898368Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:16:23.878904559Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:16:23.878910319Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:16:23.880090942Z [err]      await self.app(scope, receive, send)
2026-01-06T16:16:23.880099412Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:16:23.880105260Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:16:23.880109538Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:16:23.880111712Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:16:23.880119182Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:16:23.880124539Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:16:23.880128747Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:16:23.880132830Z [err]      raise exc
2026-01-06T16:16:23.880137250Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:16:23.880142826Z [err]      await app(scope, receive, sender)
2026-01-06T16:16:23.880146725Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:16:23.880150790Z [err]      await self.app(scope, receive, send)
2026-01-06T16:16:23.880155006Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:16:23.880158916Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:16:23.880163184Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:16:23.880167054Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:16:23.880171276Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:16:23.881587946Z [err]          ^^^
2026-01-06T16:16:23.881589736Z [err]      raise exc
2026-01-06T16:16:23.881595436Z [err]      ...<7 lines>...
2026-01-06T16:16:23.881596912Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:16:23.881601472Z [err]          (day_of_week, current_time),
2026-01-06T16:16:23.881602552Z [err]      await app(scope, receive, sender)
2026-01-06T16:16:23.881607099Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:16:23.881608614Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:16:23.881612406Z [err]      response = await f(request)
2026-01-06T16:16:23.881617220Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:16:23.881621212Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:16:23.881625554Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:16:23.881629713Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:16:23.881633699Z [err]      ...<3 lines>...
2026-01-06T16:16:23.881637516Z [err]      )
2026-01-06T16:16:23.881641501Z [err]      ^
2026-01-06T16:16:23.881645211Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:16:23.881648758Z [err]      return await dependant.call(**values)
2026-01-06T16:16:23.881652792Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:16:23.881656656Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:16:23.881661742Z [err]      event = get_active_event()
2026-01-06T16:16:23.881665542Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:16:23.881669103Z [err]      cur.execute(
2026-01-06T16:16:23.881672844Z [err]      ~~~~~~~~~~~^
2026-01-06T16:16:23.881676459Z [err]          """
2026-01-06T16:16:23.882828905Z [err]      )
2026-01-06T16:16:23.882835669Z [err]      ^
2026-01-06T16:16:23.882841644Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:16:23.882847867Z [err]      return super().execute(query, vars)
2026-01-06T16:16:23.882854094Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:16:23.882859890Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:16:23.882865395Z [err]  LINE 5:           AND active = 1
2026-01-06T16:16:23.882872489Z [err]                               ^
2026-01-06T16:16:23.882880374Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:16:23.882886713Z [err]  
2026-01-06T16:16:26.786606486Z [inf]  INFO:     100.64.0.5:62336 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:16:27.808953997Z [inf]  INFO:     100.64.0.7:11364 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:16:31.834508396Z [inf]  ðŸ“¨ 27722487698: 8km 35:29 SBK03E
2026-01-06T16:16:31.990621214Z [inf]  INFO:     100.64.0.9:39598 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:16:31.997189004Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:16:31.997191027Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:16:31.997199063Z [err]  Traceback (most recent call last):
2026-01-06T16:16:31.997203261Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:16:31.997207534Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:16:31.997213748Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:16:31.997219319Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:16:31.997234714Z [err]          self.scope, self.receive, self.send
2026-01-06T16:16:31.997241449Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:16:31.997249819Z [err]      )
2026-01-06T16:16:31.997257249Z [err]      ^
2026-01-06T16:16:31.997264217Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:16:31.997271437Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:16:31.997280454Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:16:31.997287709Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:16:31.997293996Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:16:31.997300567Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:16:31.997307134Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:16:31.997312405Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:16:31.997316503Z [err]      raise exc
2026-01-06T16:16:31.999551579Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:16:31.999558760Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:16:31.999565849Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:16:31.999573004Z [err]      raise exc
2026-01-06T16:16:31.999580334Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:16:31.999587168Z [err]      await app(scope, receive, sender)
2026-01-06T16:16:31.999593645Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:16:31.999600337Z [err]      await self.app(scope, receive, send)
2026-01-06T16:16:31.999607827Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:16:31.999617809Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:16:31.999624194Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:16:31.999631958Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:16:31.999640647Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:16:31.999649681Z [err]      await self.app(scope, receive, send)
2026-01-06T16:16:31.999657954Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:16:31.999665251Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:16:31.999672201Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:16:31.999678451Z [err]      raise exc
2026-01-06T16:16:31.999685626Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:16:31.999693159Z [err]      await app(scope, receive, sender)
2026-01-06T16:16:31.999700958Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:16:31.999709592Z [err]      response = await f(request)
2026-01-06T16:16:31.999717479Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:16:31.999725609Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:16:31.999733312Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:16:31.999741802Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:16:31.999749373Z [err]      ...<3 lines>...
2026-01-06T16:16:31.999755893Z [err]      )
2026-01-06T16:16:31.999763219Z [err]      ^
2026-01-06T16:16:31.999771166Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:16:31.999779043Z [err]      return await dependant.call(**values)
2026-01-06T16:16:31.999786803Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:16:31.999793319Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:16:31.999799936Z [err]      event = get_active_event()
2026-01-06T16:16:31.999807180Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:16:31.999813939Z [err]      )
2026-01-06T16:16:31.999815377Z [err]      cur.execute(
2026-01-06T16:16:31.999822982Z [err]      ^
2026-01-06T16:16:31.999824457Z [err]      ~~~~~~~~~~~^
2026-01-06T16:16:31.999831455Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:16:31.999832784Z [err]          """
2026-01-06T16:16:31.999838296Z [err]      return super().execute(query, vars)
2026-01-06T16:16:31.999841344Z [err]          ^^^
2026-01-06T16:16:31.999844895Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:16:31.999849231Z [err]      ...<7 lines>...
2026-01-06T16:16:31.999852739Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:16:31.999858334Z [err]          (day_of_week, current_time),
2026-01-06T16:16:31.999860266Z [err]  LINE 5:           AND active = 1
2026-01-06T16:16:31.999866788Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:16:31.999868575Z [err]                               ^
2026-01-06T16:16:31.999875028Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:16:31.999881311Z [err]  
2026-01-06T16:16:33.916875294Z [err]  2026-01-06 16:16:23.867 UTC [8679] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:16:33.916887795Z [err]  2026-01-06 16:16:23.867 UTC [8679] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:16:33.916895215Z [err]  2026-01-06 16:16:23.867 UTC [8679] STATEMENT:  
2026-01-06T16:16:33.916903495Z [err]  	        SELECT event
2026-01-06T16:16:33.916911568Z [err]  	        FROM event_config
2026-01-06T16:16:33.916925142Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:16:33.916932311Z [err]  	          AND active = 1
2026-01-06T16:16:33.916938849Z [err]  	          AND '16:16' BETWEEN open_time AND close_time
2026-01-06T16:16:33.916945567Z [err]  	        LIMIT 1;
2026-01-06T16:16:33.916952898Z [err]  	        
2026-01-06T16:16:33.916964354Z [err]  2026-01-06 16:16:31.986 UTC [8681] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:16:33.920455302Z [err]  2026-01-06 16:16:31.986 UTC [8681] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:16:33.920469181Z [err]  2026-01-06 16:16:31.986 UTC [8681] STATEMENT:  
2026-01-06T16:16:33.920476137Z [err]  	        SELECT event
2026-01-06T16:16:33.920485562Z [err]  	        FROM event_config
2026-01-06T16:16:33.920492654Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:16:33.920500556Z [err]  	          AND active = 1
2026-01-06T16:16:33.920509425Z [err]  	          AND '16:16' BETWEEN open_time AND close_time
2026-01-06T16:16:33.920515979Z [err]  	        LIMIT 1;
2026-01-06T16:16:33.920522005Z [err]  	        
2026-01-06T16:16:37.559586347Z [inf]  ðŸ“¨ 27718738879: RUNNER
2026-01-06T16:16:37.748186395Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T16:16:37.748192959Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T16:16:37.748199664Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T16:16:38.439571585Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T16:16:38.439578349Z [inf]  ðŸ“¤ Status: 200
2026-01-06T16:16:38.439583846Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27718738879","wa_id":"27718738879"}],"messages":[{"id":"wamid.HBgLMjc3MTg3Mzg4NzkVAgARGBIzRUZGOUZDRTM0NEJCNDIyM0IA"}]}
2026-01-06T16:16:38.439588203Z [inf]  INFO:     100.64.0.3:41090 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:16:39.630942264Z [inf]  INFO:     100.64.0.6:24138 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:16:40.023785429Z [inf]  INFO:     100.64.0.3:41090 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:16:44.105515259Z [inf]  ðŸ“¨ 27763128753: 8km 35:31 SBK03E
2026-01-06T16:16:44.391524546Z [inf]  INFO:     100.64.0.7:60522 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:16:44.391536674Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:16:44.391544880Z [err]  Traceback (most recent call last):
2026-01-06T16:16:44.391552325Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:16:44.391558682Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:16:44.391563361Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:16:44.391567885Z [err]          self.scope, self.receive, self.send
2026-01-06T16:16:44.391571886Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:16:44.391578263Z [err]      )
2026-01-06T16:16:44.391583161Z [err]      ^
2026-01-06T16:16:44.391587489Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:16:44.391591645Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:16:44.391595453Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:16:44.391599656Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:16:44.391604736Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:16:44.391608833Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:16:44.391612689Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:16:44.391618108Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:16:44.391622335Z [err]      raise exc
2026-01-06T16:16:44.391626849Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:16:44.392640952Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:16:44.392645130Z [err]      await self.app(scope, receive, send)
2026-01-06T16:16:44.392651928Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:16:44.392654688Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:16:44.392660983Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:16:44.392662549Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:16:44.392670663Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:16:44.392670670Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:16:44.392677496Z [err]      raise exc
2026-01-06T16:16:44.392681921Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:16:44.392687704Z [err]      await app(scope, receive, sender)
2026-01-06T16:16:44.392692061Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:16:44.392696068Z [err]      await self.app(scope, receive, send)
2026-01-06T16:16:44.392700021Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:16:44.392703750Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:16:44.392707961Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:16:44.392714070Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:16:44.392717923Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:16:44.393756144Z [err]          """
2026-01-06T16:16:44.393756154Z [err]      raise exc
2026-01-06T16:16:44.393756530Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:16:44.393764697Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:16:44.393764944Z [err]          ^^^
2026-01-06T16:16:44.393765795Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:16:44.393772541Z [err]      event = get_active_event()
2026-01-06T16:16:44.393772707Z [err]      ...<7 lines>...
2026-01-06T16:16:44.393773457Z [err]      await app(scope, receive, sender)
2026-01-06T16:16:44.393779600Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:16:44.393780338Z [err]          (day_of_week, current_time),
2026-01-06T16:16:44.393781344Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:16:44.393787020Z [err]      cur.execute(
2026-01-06T16:16:44.393787119Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:16:44.393788633Z [err]      response = await f(request)
2026-01-06T16:16:44.393793562Z [err]      ~~~~~~~~~~~^
2026-01-06T16:16:44.393794889Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:16:44.393798229Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:16:44.393804978Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:16:44.393809851Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:16:44.393814315Z [err]      ...<3 lines>...
2026-01-06T16:16:44.393819322Z [err]      )
2026-01-06T16:16:44.393826152Z [err]      ^
2026-01-06T16:16:44.393868791Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:16:44.393876248Z [err]      return await dependant.call(**values)
2026-01-06T16:16:44.395083046Z [err]      )
2026-01-06T16:16:44.395086996Z [err]      ^
2026-01-06T16:16:44.395091250Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:16:44.395095382Z [err]      return super().execute(query, vars)
2026-01-06T16:16:44.395099726Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:16:44.395103702Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:16:44.395110092Z [err]  LINE 5:           AND active = 1
2026-01-06T16:16:44.395115532Z [err]                               ^
2026-01-06T16:16:44.395119635Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:16:44.395124655Z [err]  
2026-01-06T16:16:53.183892899Z [err]  2026-01-06 16:16:44.376 UTC [8685] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:16:53.183898701Z [err]  2026-01-06 16:16:44.376 UTC [8685] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:16:53.183904965Z [err]  2026-01-06 16:16:44.376 UTC [8685] STATEMENT:  
2026-01-06T16:16:53.183911063Z [err]  	        SELECT event
2026-01-06T16:16:53.183916914Z [err]  	        FROM event_config
2026-01-06T16:16:53.183923223Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:16:53.183931336Z [err]  	          AND active = 1
2026-01-06T16:16:53.183937376Z [err]  	          AND '16:16' BETWEEN open_time AND close_time
2026-01-06T16:16:53.192355752Z [err]  	        LIMIT 1;
2026-01-06T16:16:53.192370933Z [err]  	        
2026-01-06T16:17:12.479635265Z [err]  2026-01-06 16:17:09.982 UTC [8688] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:17:12.479644918Z [err]  2026-01-06 16:17:09.982 UTC [8688] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:17:12.479652510Z [err]  2026-01-06 16:17:09.982 UTC [8688] STATEMENT:  
2026-01-06T16:17:12.479663030Z [err]  	        SELECT event
2026-01-06T16:17:12.479670488Z [err]  	        FROM event_config
2026-01-06T16:17:12.479689506Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:17:12.479698537Z [err]  	          AND active = 1
2026-01-06T16:17:12.479708314Z [err]  	          AND '16:17' BETWEEN open_time AND close_time
2026-01-06T16:17:12.479721248Z [err]  	        LIMIT 1;
2026-01-06T16:17:12.479774094Z [err]  	        
2026-01-06T16:17:12.479786308Z [err]  2026-01-06 16:17:10.606 UTC [8690] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:17:12.479794472Z [err]  2026-01-06 16:17:10.606 UTC [8690] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:17:12.479801766Z [err]  2026-01-06 16:17:10.606 UTC [8690] STATEMENT:  
2026-01-06T16:17:12.479809518Z [err]  	        SELECT event
2026-01-06T16:17:12.479815810Z [err]  	        FROM event_config
2026-01-06T16:17:12.479823670Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:17:12.479831111Z [err]  	          AND active = 1
2026-01-06T16:17:12.479838618Z [err]  	          AND '16:17' BETWEEN open_time AND close_time
2026-01-06T16:17:12.479843567Z [err]  	        LIMIT 1;
2026-01-06T16:17:12.479850914Z [err]  	        
2026-01-06T16:17:12.479860225Z [err]  2026-01-06 16:17:11.221 UTC [8692] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:17:12.479868627Z [err]  2026-01-06 16:17:11.221 UTC [8692] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:17:12.487545720Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:17:12.487564859Z [err]  	          AND active = 1
2026-01-06T16:17:12.487673566Z [err]  2026-01-06 16:17:11.221 UTC [8692] STATEMENT:  
2026-01-06T16:17:12.487679188Z [err]  	        SELECT event
2026-01-06T16:17:12.487687656Z [err]  	        FROM event_config
2026-01-06T16:17:12.487891373Z [err]  	          AND '16:17' BETWEEN open_time AND close_time
2026-01-06T16:17:12.487899505Z [err]  	        LIMIT 1;
2026-01-06T16:17:12.487940982Z [err]  	        
2026-01-06T16:17:12.591700176Z [err]  2026-01-06 16:17:12.577 UTC [8694] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:17:12.591711865Z [err]  2026-01-06 16:17:12.577 UTC [8694] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:17:12.591719315Z [err]  2026-01-06 16:17:12.577 UTC [8694] STATEMENT:  
2026-01-06T16:17:12.591735195Z [err]  	        SELECT event
2026-01-06T16:17:12.591741664Z [err]  	        FROM event_config
2026-01-06T16:17:12.591752183Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:17:12.591757942Z [err]  	          AND active = 1
2026-01-06T16:17:12.591763443Z [err]  	          AND '16:17' BETWEEN open_time AND close_time
2026-01-06T16:17:12.591770888Z [err]  	        LIMIT 1;
2026-01-06T16:17:12.591777757Z [err]  	        
2026-01-06T16:17:13.837899238Z [err]  	        LIMIT 1;
2026-01-06T16:17:13.837933089Z [err]  	        
2026-01-06T16:17:13.838080601Z [err]  2026-01-06 16:17:13.141 UTC [8696] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:17:13.838087400Z [err]  2026-01-06 16:17:13.141 UTC [8696] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:17:13.838092106Z [err]  2026-01-06 16:17:13.141 UTC [8696] STATEMENT:  
2026-01-06T16:17:13.838097688Z [err]  	        SELECT event
2026-01-06T16:17:13.838102627Z [err]  	        FROM event_config
2026-01-06T16:17:13.838107654Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:17:13.838112643Z [err]  	          AND active = 1
2026-01-06T16:17:13.838117743Z [err]  	          AND '16:17' BETWEEN open_time AND close_time
2026-01-06T16:17:13.838123343Z [err]  	        LIMIT 1;
2026-01-06T16:17:13.838130000Z [err]  	        
2026-01-06T16:17:13.838137603Z [err]  2026-01-06 16:17:13.317 UTC [8698] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:17:13.838144252Z [err]  2026-01-06 16:17:13.317 UTC [8698] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:17:13.838151166Z [err]  2026-01-06 16:17:13.317 UTC [8698] STATEMENT:  
2026-01-06T16:17:13.838157135Z [err]  	        SELECT event
2026-01-06T16:17:13.838163538Z [err]  	        FROM event_config
2026-01-06T16:17:13.838172465Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:17:13.838182141Z [err]  	          AND active = 1
2026-01-06T16:17:13.838188064Z [err]  	          AND '16:17' BETWEEN open_time AND close_time
2026-01-06T16:17:14.415367147Z [inf]  ðŸ“¨ 27718738879: 4km 27:35 sbk03e
2026-01-06T16:17:14.415375039Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:17:14.415377305Z [inf]  INFO:     100.64.0.6:27688 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:17:14.415386983Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:17:14.415393131Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.415396908Z [err]  Traceback (most recent call last):
2026-01-06T16:17:14.415405797Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:17:14.415406173Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:17:14.415416494Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:17:14.415421679Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:17:14.415426863Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:17:14.415438282Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.415438315Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:17:14.415450701Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:17:14.415451692Z [err]          self.scope, self.receive, self.send
2026-01-06T16:17:14.415463591Z [err]      raise exc
2026-01-06T16:17:14.415465342Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.415478875Z [err]      )
2026-01-06T16:17:14.415484854Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:17:14.415487338Z [err]      ^
2026-01-06T16:17:14.415496113Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:17:14.416687895Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:17:14.416692596Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:17:14.416695873Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:17:14.416703472Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:17:14.416704297Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:17:14.416711026Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:17:14.416714467Z [err]      await self.app(scope, receive, send)
2026-01-06T16:17:14.416718004Z [err]      raise exc
2026-01-06T16:17:14.416724606Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:17:14.416724636Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:17:14.416731500Z [err]      await app(scope, receive, sender)
2026-01-06T16:17:14.416733166Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:17:14.416737739Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:17:14.416742829Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:17:14.416744383Z [err]      await self.app(scope, receive, send)
2026-01-06T16:17:14.416750422Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:17:14.416757350Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:17:14.416762237Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:17:14.421211143Z [err]      raise exc
2026-01-06T16:17:14.421218473Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:17:14.421223544Z [err]      await app(scope, receive, sender)
2026-01-06T16:17:14.421227241Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:17:14.421231113Z [err]      response = await f(request)
2026-01-06T16:17:14.421234841Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.421239116Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:17:14.421242825Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:17:14.421246547Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.421250631Z [err]      ...<3 lines>...
2026-01-06T16:17:14.421262398Z [err]      )
2026-01-06T16:17:14.421266364Z [err]      ^
2026-01-06T16:17:14.421271079Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:17:14.421275491Z [err]      return await dependant.call(**values)
2026-01-06T16:17:14.421279647Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.421284818Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:17:14.421290659Z [err]      event = get_active_event()
2026-01-06T16:17:14.421295379Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:17:14.421300532Z [err]      cur.execute(
2026-01-06T16:17:14.421304452Z [err]      ~~~~~~~~~~~^
2026-01-06T16:17:14.421308291Z [err]          """
2026-01-06T16:17:14.421312247Z [err]          ^^^
2026-01-06T16:17:14.421316074Z [err]      ...<7 lines>...
2026-01-06T16:17:14.421320403Z [err]          (day_of_week, current_time),
2026-01-06T16:17:14.421324824Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.421329817Z [err]      )
2026-01-06T16:17:14.421333687Z [err]      ^
2026-01-06T16:17:14.421337447Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:17:14.421341154Z [err]      return super().execute(query, vars)
2026-01-06T16:17:14.421344831Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:17:14.421348815Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:17:14.421352705Z [err]  LINE 5:           AND active = 1
2026-01-06T16:17:14.421356616Z [err]                               ^
2026-01-06T16:17:14.421360453Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:17:14.421364661Z [err]  
2026-01-06T16:17:14.421368651Z [inf]  ðŸ“¨ 27718738879: 4km 27:35 sbk03e
2026-01-06T16:17:14.421372257Z [inf]  INFO:     100.64.0.8:10954 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:17:14.421376564Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:17:14.421381180Z [err]  Traceback (most recent call last):
2026-01-06T16:17:14.421385219Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:17:14.421389116Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:17:14.421392957Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.421397226Z [err]          self.scope, self.receive, self.send
2026-01-06T16:17:14.421401219Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.421405396Z [err]      )
2026-01-06T16:17:14.421409437Z [err]      ^
2026-01-06T16:17:14.421413160Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:17:14.421417376Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:17:14.421421573Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.421425855Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:17:14.421429763Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:17:14.421433858Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:17:14.421437568Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:17:14.421441131Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:17:14.421444984Z [err]      raise exc
2026-01-06T16:17:14.421448944Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:17:14.421452447Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:17:14.421456692Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:17:14.421461453Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:17:14.421465221Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:17:14.421468807Z [err]      raise exc
2026-01-06T16:17:14.421472617Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:17:14.421476341Z [err]      await app(scope, receive, sender)
2026-01-06T16:17:14.421480184Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:17:14.421484218Z [err]      await self.app(scope, receive, send)
2026-01-06T16:17:14.421489786Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:17:14.421862949Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:17:14.421869875Z [err]      ...<3 lines>...
2026-01-06T16:17:14.421870693Z [err]      await app(scope, receive, sender)
2026-01-06T16:17:14.421870887Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:17:14.421876557Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:17:14.421882003Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:17:14.421883783Z [err]      )
2026-01-06T16:17:14.421884411Z [err]      response = await f(request)
2026-01-06T16:17:14.421890579Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.421892882Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:17:14.421894457Z [err]      ^
2026-01-06T16:17:14.421897477Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:17:14.421899596Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:17:14.421903321Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:17:14.421904989Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:17:14.421906655Z [err]      await self.app(scope, receive, send)
2026-01-06T16:17:14.421909743Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.421912984Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:17:14.421917221Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:17:14.421920837Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:17:14.421924778Z [err]      raise exc
2026-01-06T16:17:14.423123539Z [err]      return await dependant.call(**values)
2026-01-06T16:17:14.423129031Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.423133468Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:17:14.423135577Z [inf]  INFO:     100.64.0.2:21136 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:17:14.423138292Z [err]      event = get_active_event()
2026-01-06T16:17:14.423142926Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:17:14.423147894Z [err]      cur.execute(
2026-01-06T16:17:14.423148654Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:17:14.423152154Z [err]      ~~~~~~~~~~~^
2026-01-06T16:17:14.423156009Z [err]          """
2026-01-06T16:17:14.423159643Z [err]          ^^^
2026-01-06T16:17:14.423164233Z [err]      ...<7 lines>...
2026-01-06T16:17:14.423167828Z [err]          (day_of_week, current_time),
2026-01-06T16:17:14.423171552Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.423175194Z [err]      )
2026-01-06T16:17:14.423179150Z [err]      ^
2026-01-06T16:17:14.423182844Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:17:14.423186624Z [err]      return super().execute(query, vars)
2026-01-06T16:17:14.423190503Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:17:14.423194843Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:17:14.423198806Z [err]  LINE 5:           AND active = 1
2026-01-06T16:17:14.423202698Z [err]                               ^
2026-01-06T16:17:14.423206925Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:17:14.423211991Z [err]  
2026-01-06T16:17:14.423215774Z [inf]  ðŸ“¨ 27718738879: 4km 27:35 sbk03e
2026-01-06T16:17:14.424291532Z [err]  Traceback (most recent call last):
2026-01-06T16:17:14.424297186Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:17:14.424301780Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:17:14.424303432Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:17:14.424307334Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.424309850Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:17:14.424311622Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.424313315Z [err]          self.scope, self.receive, self.send
2026-01-06T16:17:14.424318096Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:17:14.424319462Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.424322413Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:17:14.424324445Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:17:14.424325126Z [err]      )
2026-01-06T16:17:14.424331121Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:17:14.424331200Z [err]      ^
2026-01-06T16:17:14.424336643Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:17:14.424338849Z [err]      raise exc
2026-01-06T16:17:14.424344924Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:17:14.424351229Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:17:14.424358647Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:17:14.425686672Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:17:14.425695552Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:17:14.425703354Z [err]      raise exc
2026-01-06T16:17:14.425711034Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:17:14.425719344Z [err]      await app(scope, receive, sender)
2026-01-06T16:17:14.425727843Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:17:14.425736235Z [err]      await self.app(scope, receive, send)
2026-01-06T16:17:14.425745938Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:17:14.425754282Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:17:14.425761590Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:17:14.425767287Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:17:14.425774894Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:17:14.425783380Z [err]      await self.app(scope, receive, send)
2026-01-06T16:17:14.425791120Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:17:14.425800302Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:17:14.425809048Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:17:14.425817393Z [err]      raise exc
2026-01-06T16:17:14.425826304Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:17:14.427078418Z [err]      await app(scope, receive, sender)
2026-01-06T16:17:14.427078678Z [err]      ...<7 lines>...
2026-01-06T16:17:14.427086467Z [err]          (day_of_week, current_time),
2026-01-06T16:17:14.427089912Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:17:14.427092760Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.427097874Z [err]      )
2026-01-06T16:17:14.427099132Z [err]      response = await f(request)
2026-01-06T16:17:14.427105077Z [err]      ^
2026-01-06T16:17:14.427107426Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.427110270Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:17:14.427115228Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:17:14.427121465Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:17:14.427128021Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.427134055Z [err]      ...<3 lines>...
2026-01-06T16:17:14.427140369Z [err]      )
2026-01-06T16:17:14.427147074Z [err]      ^
2026-01-06T16:17:14.427153913Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:17:14.427160806Z [err]      return await dependant.call(**values)
2026-01-06T16:17:14.427167349Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.427173674Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:17:14.427179869Z [err]      event = get_active_event()
2026-01-06T16:17:14.427184743Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:17:14.427190711Z [err]      cur.execute(
2026-01-06T16:17:14.427194576Z [err]      ~~~~~~~~~~~^
2026-01-06T16:17:14.427197976Z [err]          """
2026-01-06T16:17:14.427201409Z [err]          ^^^
2026-01-06T16:17:14.428186787Z [err]      return super().execute(query, vars)
2026-01-06T16:17:14.428187388Z [err]      )
2026-01-06T16:17:14.428195355Z [err]      ^
2026-01-06T16:17:14.428196307Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:17:14.428202394Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:17:14.428202520Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:17:14.428208297Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:17:14.428212256Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.428215584Z [err]  LINE 5:           AND active = 1
2026-01-06T16:17:14.428218622Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:17:14.428221310Z [err]                               ^
2026-01-06T16:17:14.428225126Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:17:14.428228836Z [err]  
2026-01-06T16:17:14.428233071Z [inf]  ðŸ“¨ 27829791864: 6km 28:35 Eben van Wyk SBK03E
2026-01-06T16:17:14.428236724Z [inf]  INFO:     100.64.0.6:27690 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:17:14.428240305Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:17:14.428243993Z [err]  Traceback (most recent call last):
2026-01-06T16:17:14.428247313Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:17:14.428250717Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:17:14.428253981Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.428257546Z [err]          self.scope, self.receive, self.send
2026-01-06T16:17:14.428261398Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.429621327Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:17:14.429631190Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:17:14.429638983Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:17:14.429648016Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:17:14.429654770Z [err]      raise exc
2026-01-06T16:17:14.429661974Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:17:14.429668717Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:17:14.429675879Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:17:14.429681744Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:17:14.429689607Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:17:14.429695691Z [err]      raise exc
2026-01-06T16:17:14.429702140Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:17:14.429708205Z [err]      await app(scope, receive, sender)
2026-01-06T16:17:14.429714427Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:17:14.429720723Z [err]      await self.app(scope, receive, send)
2026-01-06T16:17:14.429727296Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:17:14.429733494Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:17:14.429741802Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:17:14.431098328Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:17:14.431107826Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:17:14.431115126Z [err]      await self.app(scope, receive, send)
2026-01-06T16:17:14.431122464Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:17:14.431130042Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:17:14.431137522Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:17:14.431144209Z [err]      raise exc
2026-01-06T16:17:14.431148961Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:17:14.431154683Z [err]      await app(scope, receive, sender)
2026-01-06T16:17:14.431160074Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:17:14.431165042Z [err]      response = await f(request)
2026-01-06T16:17:14.431169710Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.431174067Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:17:14.431178188Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:17:14.431182362Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.431186927Z [err]      ...<3 lines>...
2026-01-06T16:17:14.431191644Z [err]      )
2026-01-06T16:17:14.431195987Z [err]      ^
2026-01-06T16:17:14.431200358Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:17:14.431204843Z [err]      return await dependant.call(**values)
2026-01-06T16:17:14.431209843Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.432462612Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:17:14.432470880Z [err]      event = get_active_event()
2026-01-06T16:17:14.432476599Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:17:14.432481622Z [err]      cur.execute(
2026-01-06T16:17:14.432486094Z [err]      ~~~~~~~~~~~^
2026-01-06T16:17:14.432490721Z [err]          """
2026-01-06T16:17:14.432495288Z [err]          ^^^
2026-01-06T16:17:14.432500636Z [err]      ...<7 lines>...
2026-01-06T16:17:14.432505667Z [err]          (day_of_week, current_time),
2026-01-06T16:17:14.432510337Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.432515998Z [err]      )
2026-01-06T16:17:14.432520223Z [err]      ^
2026-01-06T16:17:14.432524368Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:17:14.432529612Z [err]      return super().execute(query, vars)
2026-01-06T16:17:14.432534176Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:17:14.432539130Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:17:14.432543159Z [err]  LINE 5:           AND active = 1
2026-01-06T16:17:14.432547801Z [err]                               ^
2026-01-06T16:17:14.432551321Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:17:14.432555574Z [err]  
2026-01-06T16:17:14.432559937Z [inf]  ðŸ“¨ 27718738879: 4km 27:35 sbk03e
2026-01-06T16:17:14.432564142Z [inf]  INFO:     100.64.0.6:27698 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:17:14.432568105Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:17:14.432571628Z [err]  Traceback (most recent call last):
2026-01-06T16:17:14.432576097Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:17:14.433525694Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:17:14.433539133Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.433547262Z [err]          self.scope, self.receive, self.send
2026-01-06T16:17:14.433554904Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.433562164Z [err]      )
2026-01-06T16:17:14.433570526Z [err]      ^
2026-01-06T16:17:14.433579730Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:17:14.433586665Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:17:14.433593249Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.433600916Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:17:14.433607972Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:17:14.433614462Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:17:14.433621055Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:17:14.433627816Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:17:14.433634550Z [err]      raise exc
2026-01-06T16:17:14.433641272Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:17:14.433647873Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:17:14.433655673Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:17:14.433661816Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:17:14.433667615Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:17:14.434995516Z [err]      raise exc
2026-01-06T16:17:14.435006067Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:17:14.435010327Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:17:14.435020876Z [err]      await app(scope, receive, sender)
2026-01-06T16:17:14.435022997Z [err]      raise exc
2026-01-06T16:17:14.435033732Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:17:14.435035692Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:17:14.435046456Z [err]      await app(scope, receive, sender)
2026-01-06T16:17:14.435047578Z [err]      await self.app(scope, receive, send)
2026-01-06T16:17:14.435054409Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:17:14.435061059Z [err]      response = await f(request)
2026-01-06T16:17:14.435066486Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:17:14.435074112Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:17:14.435081353Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:17:14.435088229Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:17:14.435095193Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:17:14.435102631Z [err]      await self.app(scope, receive, send)
2026-01-06T16:17:14.435109309Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:17:14.435116115Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:17:14.436501157Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.436507255Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:17:14.436512014Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:17:14.436517275Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.436518538Z [err]          ^^^
2026-01-06T16:17:14.436522401Z [err]      ...<3 lines>...
2026-01-06T16:17:14.436529196Z [err]      )
2026-01-06T16:17:14.436530013Z [err]      ...<7 lines>...
2026-01-06T16:17:14.436533613Z [err]      ^
2026-01-06T16:17:14.436539220Z [err]          (day_of_week, current_time),
2026-01-06T16:17:14.436539591Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:17:14.436546110Z [err]      return await dependant.call(**values)
2026-01-06T16:17:14.436548673Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.436552607Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.436557731Z [err]      )
2026-01-06T16:17:14.436559660Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:17:14.436564395Z [err]      event = get_active_event()
2026-01-06T16:17:14.436566882Z [err]      ^
2026-01-06T16:17:14.436570370Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:17:14.436576404Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:17:14.436576481Z [err]      cur.execute(
2026-01-06T16:17:14.436583085Z [err]      ~~~~~~~~~~~^
2026-01-06T16:17:14.436585744Z [err]      return super().execute(query, vars)
2026-01-06T16:17:14.436589166Z [err]          """
2026-01-06T16:17:14.436593762Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:17:14.436600485Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:17:14.437879023Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:17:14.437889153Z [err]  LINE 5:           AND active = 1
2026-01-06T16:17:14.437891098Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:17:14.437901376Z [err]                               ^
2026-01-06T16:17:14.437908354Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:17:14.437914691Z [err]  
2026-01-06T16:17:14.437923346Z [inf]  ðŸ“¨ 27829791864: 6km 28:35 Eben van Wyk SBK03E
2026-01-06T16:17:14.437928625Z [inf]  INFO:     100.64.0.7:19616 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:17:14.437933877Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:17:14.437938272Z [err]  Traceback (most recent call last):
2026-01-06T16:17:14.437944400Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:17:14.437948574Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:17:14.437952851Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.437957460Z [err]          self.scope, self.receive, self.send
2026-01-06T16:17:14.437961981Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.437966515Z [err]      )
2026-01-06T16:17:14.437970880Z [err]      ^
2026-01-06T16:17:14.437975421Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:17:14.437979456Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:17:14.437984094Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.437988350Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:17:14.439119913Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:17:14.439128261Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:17:14.439135168Z [err]      raise exc
2026-01-06T16:17:14.439141469Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:17:14.439147372Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:17:14.439156068Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:17:14.439162403Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:17:14.439167993Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:17:14.439173355Z [err]      raise exc
2026-01-06T16:17:14.439179454Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:17:14.439185080Z [err]      await app(scope, receive, sender)
2026-01-06T16:17:14.439191289Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:17:14.439197442Z [err]      await self.app(scope, receive, send)
2026-01-06T16:17:14.439203999Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:17:14.439210016Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:17:14.439215756Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:17:14.439220999Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:17:14.439226283Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:17:14.440484398Z [err]      return await dependant.call(**values)
2026-01-06T16:17:14.440488483Z [err]      await self.app(scope, receive, send)
2026-01-06T16:17:14.440497484Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:17:14.440504185Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.440504289Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:17:14.440512552Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:17:14.440514131Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:17:14.440520151Z [err]      raise exc
2026-01-06T16:17:14.440523476Z [err]      event = get_active_event()
2026-01-06T16:17:14.440529033Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:17:14.440532355Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:17:14.440536876Z [err]      await app(scope, receive, sender)
2026-01-06T16:17:14.440542556Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:17:14.440548378Z [err]      response = await f(request)
2026-01-06T16:17:14.440554416Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.440561404Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:17:14.440567869Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:17:14.440574947Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.440580803Z [err]      ...<3 lines>...
2026-01-06T16:17:14.440587881Z [err]      )
2026-01-06T16:17:14.440594292Z [err]      ^
2026-01-06T16:17:14.440600506Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:17:14.441664409Z [err]                               ^
2026-01-06T16:17:14.441669483Z [err]      cur.execute(
2026-01-06T16:17:14.441674903Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:17:14.441680166Z [err]      ~~~~~~~~~~~^
2026-01-06T16:17:14.441687672Z [err]          """
2026-01-06T16:17:14.441690253Z [err]  
2026-01-06T16:17:14.441694846Z [err]          ^^^
2026-01-06T16:17:14.441698646Z [inf]  ðŸ“¨ 27829791864: 6km 28:35 Eben van Wyk SBK03E
2026-01-06T16:17:14.441703589Z [err]      ...<7 lines>...
2026-01-06T16:17:14.441710293Z [err]          (day_of_week, current_time),
2026-01-06T16:17:14.441716782Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.441723217Z [err]      )
2026-01-06T16:17:14.441730116Z [err]      ^
2026-01-06T16:17:14.441737511Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:17:14.441743814Z [err]      return super().execute(query, vars)
2026-01-06T16:17:14.441751678Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:17:14.441758260Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:17:14.441766693Z [err]  LINE 5:           AND active = 1
2026-01-06T16:17:14.664500581Z [inf]  INFO:     100.64.0.6:27702 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:17:14.664504937Z [err]      raise exc
2026-01-06T16:17:14.664511924Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:17:14.664518221Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:17:14.664521668Z [err]  Traceback (most recent call last):
2026-01-06T16:17:14.664530774Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:17:14.664531999Z [err]          self.scope, self.receive, self.send
2026-01-06T16:17:14.664538989Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:17:14.664545372Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.664548164Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.664556599Z [err]      )
2026-01-06T16:17:14.664565198Z [err]      ^
2026-01-06T16:17:14.664573978Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:17:14.664584072Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:17:14.664594060Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.664601760Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:17:14.664610537Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:17:14.664618421Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:17:14.664628056Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:17:14.664636233Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:17:14.665376239Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:17:14.665385163Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:17:14.665391423Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:17:14.665399307Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:17:14.665409729Z [err]      raise exc
2026-01-06T16:17:14.665417825Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:17:14.665425644Z [err]      await app(scope, receive, sender)
2026-01-06T16:17:14.665432048Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:17:14.665441018Z [err]      await self.app(scope, receive, send)
2026-01-06T16:17:14.665446470Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:17:14.665451240Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:17:14.665456056Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:17:14.665460555Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:17:14.665465541Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:17:14.665470093Z [err]      await self.app(scope, receive, send)
2026-01-06T16:17:14.665475508Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:17:14.665480293Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:17:14.665484778Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:17:14.666600182Z [err]      cur.execute(
2026-01-06T16:17:14.666611245Z [err]      ~~~~~~~~~~~^
2026-01-06T16:17:14.666611506Z [err]      raise exc
2026-01-06T16:17:14.666621214Z [err]          """
2026-01-06T16:17:14.666624596Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:17:14.666631764Z [err]          ^^^
2026-01-06T16:17:14.666635551Z [err]      await app(scope, receive, sender)
2026-01-06T16:17:14.666643574Z [err]      ...<7 lines>...
2026-01-06T16:17:14.666646910Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:17:14.666653672Z [err]          (day_of_week, current_time),
2026-01-06T16:17:14.666658227Z [err]      response = await f(request)
2026-01-06T16:17:14.666665710Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.666670073Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.666675817Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:17:14.666680077Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:17:14.666684414Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.666688476Z [err]      ...<3 lines>...
2026-01-06T16:17:14.666692850Z [err]      )
2026-01-06T16:17:14.666696284Z [err]      ^
2026-01-06T16:17:14.666700718Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:17:14.666706092Z [err]      return await dependant.call(**values)
2026-01-06T16:17:14.666710553Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:14.666714234Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:17:14.666719480Z [err]      event = get_active_event()
2026-01-06T16:17:14.666724177Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:17:14.667726006Z [err]  
2026-01-06T16:17:14.667726189Z [err]      )
2026-01-06T16:17:14.667735615Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:17:14.667736393Z [err]      ^
2026-01-06T16:17:14.667745577Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:17:14.667746738Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:17:14.667755705Z [err]  LINE 5:           AND active = 1
2026-01-06T16:17:14.667759921Z [err]      return super().execute(query, vars)
2026-01-06T16:17:14.667764132Z [err]                               ^
2026-01-06T16:17:14.667772097Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:17:14.917533014Z [err]  	          AND '16:17' BETWEEN open_time AND close_time
2026-01-06T16:17:14.917548449Z [err]  	        LIMIT 1;
2026-01-06T16:17:14.917556713Z [err]  	        
2026-01-06T16:17:14.917759567Z [err]  2026-01-06 16:17:14.656 UTC [8700] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:17:14.917766320Z [err]  2026-01-06 16:17:14.656 UTC [8700] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:17:14.917775457Z [err]  2026-01-06 16:17:14.656 UTC [8700] STATEMENT:  
2026-01-06T16:17:14.917781767Z [err]  	        SELECT event
2026-01-06T16:17:14.917787802Z [err]  	        FROM event_config
2026-01-06T16:17:14.917794834Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:17:14.917801750Z [err]  	          AND active = 1
2026-01-06T16:17:16.744532071Z [inf]  ðŸ“¨ 27829791864: 6km 28:35 Eben van Wyk SBK03E
2026-01-06T16:17:17.017637180Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:17:17.017645119Z [err]      raise exc
2026-01-06T16:17:17.017650466Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:17:17.017655398Z [inf]  INFO:     100.64.0.9:27814 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:17:17.017664892Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:17:17.017671479Z [err]  Traceback (most recent call last):
2026-01-06T16:17:17.017676729Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:17:17.017682975Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:17:17.017690002Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:17.017697309Z [err]          self.scope, self.receive, self.send
2026-01-06T16:17:17.017703389Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:17.017710776Z [err]      )
2026-01-06T16:17:17.017717629Z [err]      ^
2026-01-06T16:17:17.017724381Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:17:17.017731124Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:17:17.017735795Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:17.017739803Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:17:17.017743413Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:17:17.017748417Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:17:17.017753662Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:17:17.018619923Z [err]      await self.app(scope, receive, send)
2026-01-06T16:17:17.018626660Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:17:17.018629076Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:17:17.018633958Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:17:17.018636875Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:17:17.018640058Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:17:17.018643198Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:17:17.018648268Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:17:17.018652130Z [err]      raise exc
2026-01-06T16:17:17.018655970Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:17:17.018659565Z [err]      await app(scope, receive, sender)
2026-01-06T16:17:17.018664544Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:17:17.018668204Z [err]      await self.app(scope, receive, send)
2026-01-06T16:17:17.018671799Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:17:17.018677045Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:17:17.018680878Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:17:17.018685149Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:17:17.018688845Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:17:17.020024112Z [err]      raise exc
2026-01-06T16:17:17.020031970Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:17:17.020040662Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:17.020041003Z [err]      await app(scope, receive, sender)
2026-01-06T16:17:17.020041938Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:17.020046804Z [err]      return await dependant.call(**values)
2026-01-06T16:17:17.020049200Z [err]      ...<3 lines>...
2026-01-06T16:17:17.020050613Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:17:17.020056466Z [err]      cur.execute(
2026-01-06T16:17:17.020056806Z [err]      )
2026-01-06T16:17:17.020060036Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:17.020061893Z [err]      response = await f(request)
2026-01-06T16:17:17.020063075Z [err]      ~~~~~~~~~~~^
2026-01-06T16:17:17.020064409Z [err]      ^
2026-01-06T16:17:17.020066465Z [err]          ^^^
2026-01-06T16:17:17.020071230Z [err]          """
2026-01-06T16:17:17.020072242Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:17:17.020072244Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:17:17.020073200Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:17:17.020077153Z [err]      ...<7 lines>...
2026-01-06T16:17:17.020081488Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:17:17.020081842Z [err]      event = get_active_event()
2026-01-06T16:17:17.020085448Z [err]          (day_of_week, current_time),
2026-01-06T16:17:17.020089331Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:17:17.020089928Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:17:17.020947066Z [err]      )
2026-01-06T16:17:17.020955650Z [err]      ^
2026-01-06T16:17:17.020964111Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:17:17.020970037Z [err]      return super().execute(query, vars)
2026-01-06T16:17:17.020976801Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:17:17.020983278Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:17:17.020989786Z [err]  LINE 5:           AND active = 1
2026-01-06T16:17:17.020995702Z [err]                               ^
2026-01-06T16:17:17.021001750Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:17:17.021007806Z [err]  
2026-01-06T16:17:17.038408168Z [err]  2026-01-06 16:17:17.009 UTC [8702] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:17:17.038420989Z [err]  2026-01-06 16:17:17.009 UTC [8702] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:17:17.038431192Z [err]  2026-01-06 16:17:17.009 UTC [8702] STATEMENT:  
2026-01-06T16:17:17.038439230Z [err]  	        SELECT event
2026-01-06T16:17:17.038447639Z [err]  	        FROM event_config
2026-01-06T16:17:17.038456808Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:17:17.038466007Z [err]  	          AND active = 1
2026-01-06T16:17:17.038475322Z [err]  	          AND '16:17' BETWEEN open_time AND close_time
2026-01-06T16:17:17.038481918Z [err]  	        LIMIT 1;
2026-01-06T16:17:17.038489088Z [err]  	        
2026-01-06T16:17:20.937063248Z [inf]  ðŸ“¨ 27718738879: 4km 27:35 sbk03e
2026-01-06T16:17:21.231941163Z [err]          """
2026-01-06T16:17:21.231952524Z [err]          ^^^
2026-01-06T16:17:21.231957103Z [err]      return super().execute(query, vars)
2026-01-06T16:17:21.231965353Z [err]      ...<7 lines>...
2026-01-06T16:17:21.231966858Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:17:21.231967223Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:21.231977087Z [err]          (day_of_week, current_time),
2026-01-06T16:17:21.231978071Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:17:21.231980846Z [err]      )
2026-01-06T16:17:21.231985684Z [err]  LINE 5:           AND active = 1
2026-01-06T16:17:21.231994088Z [err]      ^
2026-01-06T16:17:21.231994380Z [err]                               ^
2026-01-06T16:17:21.232004625Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:17:21.232016563Z [err]      ~~~~~~~~~~~^
2026-01-06T16:17:21.232038749Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:17:21.232047889Z [err]  
2026-01-06T16:17:21.232152557Z [inf]  INFO:     100.64.0.5:52636 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:17:21.232156216Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:17:21.232160680Z [err]  Traceback (most recent call last):
2026-01-06T16:17:21.232165336Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:17:21.232169113Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:17:21.232173678Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:21.232177612Z [err]          self.scope, self.receive, self.send
2026-01-06T16:17:21.232185713Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:21.232189730Z [err]      )
2026-01-06T16:17:21.232193318Z [err]      ^
2026-01-06T16:17:21.232196845Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:17:21.232200556Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:17:21.232204335Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:21.232208745Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:17:21.232225926Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:17:21.232230401Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:17:21.232235413Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:17:21.232239605Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:17:21.232243854Z [err]      raise exc
2026-01-06T16:17:21.232249367Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:17:21.232289448Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:17:21.232295709Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:17:21.232299821Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:17:21.232303303Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:17:21.232307157Z [err]      raise exc
2026-01-06T16:17:21.232311114Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:17:21.232314643Z [err]      await app(scope, receive, sender)
2026-01-06T16:17:21.232318028Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:17:21.232321300Z [err]      await self.app(scope, receive, send)
2026-01-06T16:17:21.232324777Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:17:21.232328745Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:17:21.232332560Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:17:21.232336256Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:17:21.232339710Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:17:21.232343475Z [err]      await self.app(scope, receive, send)
2026-01-06T16:17:21.232347140Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:17:21.232351236Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:17:21.232354797Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:17:21.232359492Z [err]      raise exc
2026-01-06T16:17:21.232363250Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:17:21.232367386Z [err]      await app(scope, receive, sender)
2026-01-06T16:17:21.232371674Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:17:21.232375259Z [err]      response = await f(request)
2026-01-06T16:17:21.232379367Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:17:21.232382833Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:17:21.232386223Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:17:21.232389934Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:21.232393435Z [err]      ...<3 lines>...
2026-01-06T16:17:21.232396920Z [err]      )
2026-01-06T16:17:21.232400548Z [err]      ^
2026-01-06T16:17:21.232404165Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:17:21.232407830Z [err]      return await dependant.call(**values)
2026-01-06T16:17:21.232411530Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:21.232415006Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:17:21.232418530Z [err]      event = get_active_event()
2026-01-06T16:17:21.232421765Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:17:21.232425079Z [err]      cur.execute(
2026-01-06T16:17:21.904943081Z [err]  2026-01-06 16:17:21.198 UTC [8704] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:17:21.904948124Z [err]  2026-01-06 16:17:21.198 UTC [8704] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:17:21.904952370Z [err]  2026-01-06 16:17:21.198 UTC [8704] STATEMENT:  
2026-01-06T16:17:21.904956772Z [err]  	        SELECT event
2026-01-06T16:17:21.904962149Z [err]  	        FROM event_config
2026-01-06T16:17:21.904966509Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:17:21.904971667Z [err]  	          AND active = 1
2026-01-06T16:17:21.904976694Z [err]  	          AND '16:17' BETWEEN open_time AND close_time
2026-01-06T16:17:21.904981352Z [err]  	        LIMIT 1;
2026-01-06T16:17:21.904987773Z [err]  	        
2026-01-06T16:17:22.939041653Z [inf]  ðŸ“¨ 27718738879: 4km 27:35 sbk03e
2026-01-06T16:17:23.070522954Z [inf]  INFO:     100.64.0.9:21534 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:17:23.070534351Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:17:23.070542117Z [err]  Traceback (most recent call last):
2026-01-06T16:17:23.070549232Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:17:23.070556243Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:17:23.070563271Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:23.070570288Z [err]          self.scope, self.receive, self.send
2026-01-06T16:17:23.070576693Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:23.070583206Z [err]      )
2026-01-06T16:17:23.070590790Z [err]      ^
2026-01-06T16:17:23.070597182Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:17:23.070604149Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:17:23.070611156Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:23.070617806Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:17:23.070624371Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:17:23.070630387Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:17:23.070636587Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:17:23.070644418Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:17:23.070651135Z [err]      raise exc
2026-01-06T16:17:23.070660658Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:17:23.072881880Z [err]  2026-01-06 16:17:23.062 UTC [8707] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:17:23.072895267Z [err]  2026-01-06 16:17:23.062 UTC [8707] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:17:23.072904842Z [err]  2026-01-06 16:17:23.062 UTC [8707] STATEMENT:  
2026-01-06T16:17:23.072912657Z [err]  	        SELECT event
2026-01-06T16:17:23.072920480Z [err]  	        FROM event_config
2026-01-06T16:17:23.072943942Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:17:23.072952547Z [err]  	          AND active = 1
2026-01-06T16:17:23.072961091Z [err]  	          AND '16:17' BETWEEN open_time AND close_time
2026-01-06T16:17:23.072968394Z [err]  	        LIMIT 1;
2026-01-06T16:17:23.072977193Z [err]  	        
2026-01-06T16:17:23.190730986Z [err]      await self.app(scope, receive, send)
2026-01-06T16:17:23.190744537Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:17:23.190753955Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:17:23.190754783Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:17:23.190763388Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:17:23.190764860Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:17:23.190774117Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:17:23.190781836Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:17:23.190787932Z [err]      raise exc
2026-01-06T16:17:23.190793283Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:17:23.190798712Z [err]      await app(scope, receive, sender)
2026-01-06T16:17:23.190805363Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:17:23.190811248Z [err]      await self.app(scope, receive, send)
2026-01-06T16:17:23.190818205Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:17:23.190823893Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:17:23.190829430Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:17:23.190835270Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:17:23.190840614Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:17:23.191887555Z [err]      raise exc
2026-01-06T16:17:23.191893895Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:17:23.191898483Z [err]      await app(scope, receive, sender)
2026-01-06T16:17:23.191901887Z [err]          (day_of_week, current_time),
2026-01-06T16:17:23.191903115Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:17:23.191907888Z [err]      response = await f(request)
2026-01-06T16:17:23.191912830Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:17:23.191914500Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:23.191918583Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:17:23.191924307Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:17:23.191926287Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:23.191939813Z [err]      ...<3 lines>...
2026-01-06T16:17:23.191951932Z [err]      )
2026-01-06T16:17:23.191965667Z [err]      ^
2026-01-06T16:17:23.191975415Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:17:23.191985221Z [err]      return await dependant.call(**values)
2026-01-06T16:17:23.191995164Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:23.192006375Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:17:23.192016233Z [err]      event = get_active_event()
2026-01-06T16:17:23.192025061Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:17:23.192035050Z [err]      cur.execute(
2026-01-06T16:17:23.192044867Z [err]      ~~~~~~~~~~~^
2026-01-06T16:17:23.192054444Z [err]          """
2026-01-06T16:17:23.192064615Z [err]          ^^^
2026-01-06T16:17:23.192073420Z [err]      ...<7 lines>...
2026-01-06T16:17:23.192835653Z [err]      )
2026-01-06T16:17:23.192847503Z [err]      ^
2026-01-06T16:17:23.192856887Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:17:23.192866334Z [err]      return super().execute(query, vars)
2026-01-06T16:17:23.192875538Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:17:23.192885677Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:17:23.192895864Z [err]  LINE 5:           AND active = 1
2026-01-06T16:17:23.192905228Z [err]                               ^
2026-01-06T16:17:23.192914337Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:17:23.192923625Z [err]  
2026-01-06T16:17:26.643907726Z [inf]  ðŸ“¨ 27829791864: 6km 28:35 Eben van Wyk SBK03E
2026-01-06T16:17:26.907829286Z [inf]  INFO:     100.64.0.8:57624 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:17:26.907829930Z [err]      ^
2026-01-06T16:17:26.907837850Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:17:26.907839213Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:17:26.907844885Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:17:26.907846017Z [err]  Traceback (most recent call last):
2026-01-06T16:17:26.907847243Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:17:26.907850915Z [err]      raise exc
2026-01-06T16:17:26.907854786Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:17:26.907856126Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:17:26.907857124Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:17:26.907863353Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:17:26.907864201Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:26.907869928Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:26.907871127Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:17:26.907875091Z [err]          self.scope, self.receive, self.send
2026-01-06T16:17:26.907878923Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:17:26.907881042Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:26.907886199Z [err]      )
2026-01-06T16:17:26.907888144Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:17:26.908580582Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:17:26.908584821Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:17:26.908587655Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:17:26.908593655Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:17:26.908596170Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:17:26.908601415Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:17:26.908604271Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:17:26.908609055Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:17:26.908614275Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:17:26.908616771Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:17:26.908618886Z [err]      await self.app(scope, receive, send)
2026-01-06T16:17:26.908625265Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:17:26.908631921Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:17:26.908638722Z [err]      raise exc
2026-01-06T16:17:26.908647626Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:17:26.908651380Z [err]      await app(scope, receive, sender)
2026-01-06T16:17:26.908655001Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:17:26.908658349Z [err]      await self.app(scope, receive, send)
2026-01-06T16:17:26.909609388Z [err]      raise exc
2026-01-06T16:17:26.909610130Z [err]      ...<7 lines>...
2026-01-06T16:17:26.909617028Z [err]          (day_of_week, current_time),
2026-01-06T16:17:26.909619812Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:17:26.909621853Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:17:26.909623887Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:26.909629612Z [err]      await app(scope, receive, sender)
2026-01-06T16:17:26.909630027Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:17:26.909632985Z [err]      cur.execute(
2026-01-06T16:17:26.909639081Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:17:26.909641640Z [err]      ~~~~~~~~~~~^
2026-01-06T16:17:26.909641812Z [err]      return await dependant.call(**values)
2026-01-06T16:17:26.909649451Z [err]          """
2026-01-06T16:17:26.909651708Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:26.909652329Z [err]      response = await f(request)
2026-01-06T16:17:26.909658350Z [err]          ^^^
2026-01-06T16:17:26.909660795Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:17:26.909660798Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:17:26.909667923Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:17:26.909668216Z [err]      event = get_active_event()
2026-01-06T16:17:26.909674683Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:17:26.909682535Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:17:26.909688912Z [err]      ...<3 lines>...
2026-01-06T16:17:26.909693204Z [err]      )
2026-01-06T16:17:26.909696625Z [err]      ^
2026-01-06T16:17:26.910483803Z [err]      )
2026-01-06T16:17:26.910489873Z [err]      ^
2026-01-06T16:17:26.910493911Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:17:26.910498060Z [err]      return super().execute(query, vars)
2026-01-06T16:17:26.910504398Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:17:26.910511417Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:17:26.910517931Z [err]  LINE 5:           AND active = 1
2026-01-06T16:17:26.910524284Z [err]                               ^
2026-01-06T16:17:26.910529732Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:17:26.910534491Z [err]  
2026-01-06T16:17:26.917962378Z [err]  2026-01-06 16:17:26.896 UTC [8709] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:17:26.917969703Z [err]  2026-01-06 16:17:26.896 UTC [8709] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:17:26.917975970Z [err]  2026-01-06 16:17:26.896 UTC [8709] STATEMENT:  
2026-01-06T16:17:26.917984135Z [err]  	        SELECT event
2026-01-06T16:17:26.917989886Z [err]  	        FROM event_config
2026-01-06T16:17:26.917996448Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:17:26.918002190Z [err]  	          AND active = 1
2026-01-06T16:17:26.918008322Z [err]  	          AND '16:17' BETWEEN open_time AND close_time
2026-01-06T16:17:26.918015381Z [err]  	        LIMIT 1;
2026-01-06T16:17:26.918022023Z [err]  	        
2026-01-06T16:17:57.653323002Z [err]  2026-01-06 16:17:46.268 UTC [76] LOG:  checkpoint starting: time
2026-01-06T16:17:57.653330145Z [err]  2026-01-06 16:17:46.747 UTC [76] LOG:  checkpoint complete: wrote 5 buffers (0.0%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.417 s, sync=0.017 s, total=0.479 s; sync files=5, longest=0.012 s, average=0.004 s; distance=9 kB, estimate=27 kB; lsn=0/1A0CCB8, redo lsn=0/1A0CC60
2026-01-06T16:18:36.959301441Z [inf]  ðŸ“¨ 27824481323: Hi
2026-01-06T16:18:36.959311173Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T16:18:36.959318769Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T16:18:36.959326011Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T16:18:36.959333005Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T16:18:36.959341144Z [inf]  ðŸ“¤ Status: 200
2026-01-06T16:18:36.959346669Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27824481323","wa_id":"27824481323"}],"messages":[{"id":"wamid.HBgLMjc4MjQ0ODEzMjMVAgARGBI5MDM1NTMxNzI4QjMxMUE0MDkA"}]}
2026-01-06T16:18:36.959350574Z [inf]  INFO:     100.64.0.9:20128 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:18:36.959354499Z [inf]  INFO:     100.64.0.4:62910 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:18:36.959359087Z [inf]  INFO:     100.64.0.3:45608 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:18:36.959363340Z [inf]  INFO:     100.64.0.9:20128 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:18:45.192807559Z [inf]  ðŸ“¨ 27824481323: Runner
2026-01-06T16:18:45.446055798Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T16:18:45.446068906Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T16:18:45.446075875Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T16:18:45.995734621Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T16:18:45.995747433Z [inf]  ðŸ“¤ Status: 200
2026-01-06T16:18:45.995754248Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27824481323","wa_id":"27824481323"}],"messages":[{"id":"wamid.HBgLMjc4MjQ0ODEzMjMVAgARGBI4N0UzNjg2RTY3MUVBMUQ0OEIA"}]}
2026-01-06T16:18:45.995759381Z [inf]  INFO:     100.64.0.5:56810 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:18:47.000228798Z [inf]  INFO:     100.64.0.6:21014 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:18:47.706412590Z [inf]  INFO:     100.64.0.3:20206 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:18:47.783300584Z [inf]  INFO:     100.64.0.2:34836 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:18:52.043567424Z [inf]  ðŸ“¨ 27738870757: 4km 25:30 SBK03E
2026-01-06T16:18:52.339342961Z [err]      ^
2026-01-06T16:18:52.339353047Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:18:52.339360398Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:18:52.339363701Z [inf]  INFO:     100.64.0.9:17508 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:18:52.339366764Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:18:52.339370672Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:18:52.339373806Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:18:52.339376397Z [err]  Traceback (most recent call last):
2026-01-06T16:18:52.339380556Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:18:52.339382994Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:18:52.339387298Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:18:52.339389425Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:18:52.339393848Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:18:52.339395201Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:18:52.339400771Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:18:52.339401222Z [err]          self.scope, self.receive, self.send
2026-01-06T16:18:52.339407178Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:18:52.339409762Z [err]      raise exc
2026-01-06T16:18:52.339413158Z [err]      )
2026-01-06T16:18:52.339417568Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:18:52.340281136Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:18:52.340282486Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:18:52.340290057Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:18:52.340296567Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:18:52.340296959Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:18:52.340302759Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:18:52.340305058Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:18:52.340309523Z [err]      raise exc
2026-01-06T16:18:52.340311842Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:18:52.340315787Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:18:52.340321065Z [err]      await self.app(scope, receive, send)
2026-01-06T16:18:52.340323340Z [err]      await app(scope, receive, sender)
2026-01-06T16:18:52.340328640Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:18:52.340329872Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:18:52.340335638Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:18:52.340337100Z [err]      await self.app(scope, receive, send)
2026-01-06T16:18:52.340343015Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:18:52.340343441Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:18:52.341533405Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:18:52.341536289Z [err]      raise exc
2026-01-06T16:18:52.341543496Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:18:52.341544068Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:18:52.341549838Z [err]      await app(scope, receive, sender)
2026-01-06T16:18:52.341553113Z [err]      event = get_active_event()
2026-01-06T16:18:52.341555835Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:18:52.341561203Z [err]      response = await f(request)
2026-01-06T16:18:52.341562613Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:18:52.341566333Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:18:52.341570963Z [err]      cur.execute(
2026-01-06T16:18:52.341572123Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:18:52.341578799Z [err]      ~~~~~~~~~~~^
2026-01-06T16:18:52.341578918Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:18:52.341584702Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:18:52.341586893Z [err]          """
2026-01-06T16:18:52.341591065Z [err]      ...<3 lines>...
2026-01-06T16:18:52.341595073Z [err]          ^^^
2026-01-06T16:18:52.341597013Z [err]      )
2026-01-06T16:18:52.341601751Z [err]      ^
2026-01-06T16:18:52.341604632Z [err]      ...<7 lines>...
2026-01-06T16:18:52.341607449Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:18:52.341611948Z [err]      return await dependant.call(**values)
2026-01-06T16:18:52.341613718Z [err]          (day_of_week, current_time),
2026-01-06T16:18:52.341619745Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:18:52.342870700Z [err]      )
2026-01-06T16:18:52.342880013Z [err]      ^
2026-01-06T16:18:52.342887199Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:18:52.342894741Z [err]      return super().execute(query, vars)
2026-01-06T16:18:52.342901626Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:18:52.342907655Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:18:52.342914009Z [err]  LINE 5:           AND active = 1
2026-01-06T16:18:52.342919843Z [err]                               ^
2026-01-06T16:18:52.342925833Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:18:52.342932406Z [err]  
2026-01-06T16:18:53.123445021Z [inf]  ðŸ“¨ 27738870757: 4km 25:30 SBK03E
2026-01-06T16:18:53.248386100Z [inf]  INFO:     100.64.0.9:17520 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:18:53.248395317Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:18:53.248401210Z [err]  Traceback (most recent call last):
2026-01-06T16:18:53.248406276Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:18:53.248412900Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:18:53.248418038Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:18:53.248422252Z [err]          self.scope, self.receive, self.send
2026-01-06T16:18:53.248426756Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:18:53.248452357Z [err]      )
2026-01-06T16:18:53.248460392Z [err]      ^
2026-01-06T16:18:53.248467460Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:18:53.248474700Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:18:53.248483338Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:18:53.248490995Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:18:53.248500234Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:18:53.248508908Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:18:53.248516342Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:18:53.248522505Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:18:53.248526892Z [err]      raise exc
2026-01-06T16:18:53.248531524Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:18:53.249415617Z [err]      await self.app(scope, receive, send)
2026-01-06T16:18:53.249422981Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:18:53.249427117Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:18:53.249432056Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:18:53.249437424Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:18:53.249437530Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:18:53.249452402Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:18:53.249456717Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:18:53.249460682Z [err]      raise exc
2026-01-06T16:18:53.249464945Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:18:53.249470194Z [err]      await app(scope, receive, sender)
2026-01-06T16:18:53.249474092Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:18:53.249477852Z [err]      await self.app(scope, receive, send)
2026-01-06T16:18:53.249483067Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:18:53.249487108Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:18:53.249490874Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:18:53.249494686Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:18:53.249498680Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:18:53.250928278Z [err]      raise exc
2026-01-06T16:18:53.250931597Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:18:53.250935419Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:18:53.250938195Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:18:53.250940372Z [err]      return await dependant.call(**values)
2026-01-06T16:18:53.250945924Z [err]      await app(scope, receive, sender)
2026-01-06T16:18:53.250948384Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:18:53.250956120Z [err]      cur.execute(
2026-01-06T16:18:53.250959347Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:18:53.250960110Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:18:53.250967507Z [err]      event = get_active_event()
2026-01-06T16:18:53.250969454Z [err]      response = await f(request)
2026-01-06T16:18:53.250971073Z [err]      ~~~~~~~~~~~^
2026-01-06T16:18:53.250975602Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:18:53.250977721Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:18:53.250982300Z [err]          """
2026-01-06T16:18:53.250986215Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:18:53.250991832Z [err]          ^^^
2026-01-06T16:18:53.250995465Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:18:53.251000898Z [err]      ...<7 lines>...
2026-01-06T16:18:53.251004635Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:18:53.251012738Z [err]          (day_of_week, current_time),
2026-01-06T16:18:53.251012883Z [err]      ...<3 lines>...
2026-01-06T16:18:53.251021586Z [err]      )
2026-01-06T16:18:53.251027623Z [err]      ^
2026-01-06T16:18:53.252026209Z [err]      )
2026-01-06T16:18:53.252034250Z [err]      ^
2026-01-06T16:18:53.252041224Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:18:53.252047727Z [err]      return super().execute(query, vars)
2026-01-06T16:18:53.252052536Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:18:53.252057568Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:18:53.252062425Z [err]  LINE 5:           AND active = 1
2026-01-06T16:18:53.252066503Z [err]                               ^
2026-01-06T16:18:53.252070487Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:18:53.252074888Z [err]  
2026-01-06T16:18:54.241610107Z [inf]  ðŸ“¨ 27738870757: 4km 25:30 SBK03E
2026-01-06T16:18:54.498615292Z [inf]  INFO:     100.64.0.7:39954 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:18:54.504787319Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:18:54.504798263Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:18:54.504806052Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:18:54.504807343Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:18:54.504815094Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:18:54.504820096Z [err]  Traceback (most recent call last):
2026-01-06T16:18:54.504824113Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:18:54.504828906Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:18:54.504833117Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:18:54.504838172Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:18:54.504841654Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:18:54.504847896Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:18:54.504850230Z [err]      raise exc
2026-01-06T16:18:54.504854272Z [err]          self.scope, self.receive, self.send
2026-01-06T16:18:54.504859531Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:18:54.504860349Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:18:54.504865806Z [err]      )
2026-01-06T16:18:54.504866420Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:18:54.504870718Z [err]      ^
2026-01-06T16:18:54.504874967Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:18:54.505942738Z [err]      await self.app(scope, receive, send)
2026-01-06T16:18:54.505944078Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:18:54.505952464Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:18:54.505953157Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:18:54.505957997Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:18:54.505963027Z [err]      raise exc
2026-01-06T16:18:54.505964318Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:18:54.505968780Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:18:54.505972466Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:18:54.505974589Z [err]      await app(scope, receive, sender)
2026-01-06T16:18:54.505979548Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:18:54.505981043Z [err]      raise exc
2026-01-06T16:18:54.505984981Z [err]      await self.app(scope, receive, send)
2026-01-06T16:18:54.505989073Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:18:54.505993545Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:18:54.506005267Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:18:54.506009605Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:18:54.506013414Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:18:54.507233195Z [err]          """
2026-01-06T16:18:54.507239035Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:18:54.507241784Z [err]          ^^^
2026-01-06T16:18:54.507247640Z [err]      await app(scope, receive, sender)
2026-01-06T16:18:54.507247828Z [err]      ...<7 lines>...
2026-01-06T16:18:54.507253492Z [err]          (day_of_week, current_time),
2026-01-06T16:18:54.507257574Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:18:54.507260140Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:18:54.507263578Z [err]      response = await f(request)
2026-01-06T16:18:54.507268511Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:18:54.507273731Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:18:54.507277615Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:18:54.507281538Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:18:54.507286242Z [err]      ...<3 lines>...
2026-01-06T16:18:54.507290378Z [err]      )
2026-01-06T16:18:54.507294665Z [err]      ^
2026-01-06T16:18:54.507309927Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:18:54.507314209Z [err]      return await dependant.call(**values)
2026-01-06T16:18:54.507318218Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:18:54.507323132Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:18:54.507327952Z [err]      event = get_active_event()
2026-01-06T16:18:54.507332078Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:18:54.507336164Z [err]      cur.execute(
2026-01-06T16:18:54.507342265Z [err]      ~~~~~~~~~~~^
2026-01-06T16:18:54.508452237Z [err]                               ^
2026-01-06T16:18:54.508452728Z [err]      )
2026-01-06T16:18:54.508462011Z [err]      ^
2026-01-06T16:18:54.508468119Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:18:54.508473086Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:18:54.508476682Z [err]      return super().execute(query, vars)
2026-01-06T16:18:54.508484375Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:18:54.508488982Z [err]  
2026-01-06T16:18:54.508493318Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:18:54.508498161Z [err]  LINE 5:           AND active = 1
2026-01-06T16:18:55.727575465Z [inf]  ðŸ“¨ 27738870757: 4km 25:30 SBK03E
2026-01-06T16:18:55.821881741Z [inf]  INFO:     100.64.0.5:52974 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:18:55.827238022Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:18:55.827243957Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:18:55.827246899Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:18:55.827253827Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:18:55.827255223Z [err]  Traceback (most recent call last):
2026-01-06T16:18:55.827260046Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:18:55.827265274Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:18:55.827265735Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:18:55.827271865Z [err]      raise exc
2026-01-06T16:18:55.827274888Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:18:55.827277129Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:18:55.827282391Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:18:55.827285116Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:18:55.827291913Z [err]          self.scope, self.receive, self.send
2026-01-06T16:18:55.827298446Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:18:55.827304814Z [err]      )
2026-01-06T16:18:55.827310073Z [err]      ^
2026-01-06T16:18:55.827314290Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:18:55.827317926Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:18:55.827321907Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:18:55.828133312Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:18:55.828141704Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:18:55.828148607Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:18:55.828157504Z [err]      raise exc
2026-01-06T16:18:55.828164390Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:18:55.828172062Z [err]      await app(scope, receive, sender)
2026-01-06T16:18:55.828178673Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:18:55.828185453Z [err]      await self.app(scope, receive, send)
2026-01-06T16:18:55.828193226Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:18:55.828199906Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:18:55.828204082Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:18:55.828207948Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:18:55.828211565Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:18:55.828215622Z [err]      await self.app(scope, receive, send)
2026-01-06T16:18:55.828219399Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:18:55.828223508Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:18:55.828226859Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:18:55.828231176Z [err]      raise exc
2026-01-06T16:18:55.829158147Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:18:55.829164675Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:18:55.829166157Z [err]      return await dependant.call(**values)
2026-01-06T16:18:55.829173056Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:18:55.829173432Z [err]      await app(scope, receive, sender)
2026-01-06T16:18:55.829179682Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:18:55.829180459Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:18:55.829181773Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:18:55.829188372Z [err]      event = get_active_event()
2026-01-06T16:18:55.829189462Z [err]      response = await f(request)
2026-01-06T16:18:55.829191387Z [err]      ~~~~~~~~~~~^
2026-01-06T16:18:55.829196273Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:18:55.829198108Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:18:55.829199160Z [err]          """
2026-01-06T16:18:55.829205039Z [err]      cur.execute(
2026-01-06T16:18:55.829206102Z [err]          ^^^
2026-01-06T16:18:55.829207359Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:18:55.829212322Z [err]      ...<7 lines>...
2026-01-06T16:18:55.829215530Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:18:55.829218001Z [err]          (day_of_week, current_time),
2026-01-06T16:18:55.829223266Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:18:55.829229738Z [err]      ...<3 lines>...
2026-01-06T16:18:55.829236521Z [err]      )
2026-01-06T16:18:55.829242920Z [err]      ^
2026-01-06T16:18:55.830162493Z [err]      )
2026-01-06T16:18:55.830162536Z [err]  
2026-01-06T16:18:55.830171144Z [err]      ^
2026-01-06T16:18:55.830187754Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:18:55.830266145Z [err]      return super().execute(query, vars)
2026-01-06T16:18:55.830273695Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:18:55.830280459Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:18:55.830285847Z [err]  LINE 5:           AND active = 1
2026-01-06T16:18:55.830291437Z [err]                               ^
2026-01-06T16:18:55.830297043Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:18:56.838745510Z [err]  2026-01-06 16:18:52.301 UTC [8717] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:18:56.838755949Z [err]  2026-01-06 16:18:52.301 UTC [8717] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:18:56.838763311Z [err]  2026-01-06 16:18:52.301 UTC [8717] STATEMENT:  
2026-01-06T16:18:56.838770812Z [err]  	        SELECT event
2026-01-06T16:18:56.838777951Z [err]  	        FROM event_config
2026-01-06T16:18:56.838784698Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:18:56.838790963Z [err]  	          AND active = 1
2026-01-06T16:18:56.838797908Z [err]  	          AND '16:18' BETWEEN open_time AND close_time
2026-01-06T16:18:56.838804432Z [err]  	        LIMIT 1;
2026-01-06T16:18:56.838810548Z [err]  	        
2026-01-06T16:18:56.838817333Z [err]  2026-01-06 16:18:53.240 UTC [8719] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:18:56.838823599Z [err]  2026-01-06 16:18:53.240 UTC [8719] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:18:56.838830080Z [err]  2026-01-06 16:18:53.240 UTC [8719] STATEMENT:  
2026-01-06T16:18:56.838837004Z [err]  	        SELECT event
2026-01-06T16:18:56.838843251Z [err]  	        FROM event_config
2026-01-06T16:18:56.838850206Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:18:56.838857262Z [err]  	          AND active = 1
2026-01-06T16:18:56.838864495Z [err]  	          AND '16:18' BETWEEN open_time AND close_time
2026-01-06T16:18:56.838870248Z [err]  	        LIMIT 1;
2026-01-06T16:18:56.838876396Z [err]  	        
2026-01-06T16:18:56.838882407Z [err]  2026-01-06 16:18:54.494 UTC [8721] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:18:56.838889254Z [err]  2026-01-06 16:18:54.494 UTC [8721] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:18:56.894250802Z [err]  2026-01-06 16:18:54.494 UTC [8721] STATEMENT:  
2026-01-06T16:18:56.894258962Z [err]  	        SELECT event
2026-01-06T16:18:56.894263034Z [err]  	        FROM event_config
2026-01-06T16:18:56.894267888Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:18:56.898847939Z [err]  	          AND active = 1
2026-01-06T16:18:56.898859226Z [err]  	          AND '16:18' BETWEEN open_time AND close_time
2026-01-06T16:18:56.898866562Z [err]  	        LIMIT 1;
2026-01-06T16:18:56.898873231Z [err]  	        
2026-01-06T16:18:56.898879305Z [err]  2026-01-06 16:18:55.817 UTC [8723] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:18:56.898885818Z [err]  2026-01-06 16:18:55.817 UTC [8723] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:18:56.898891210Z [err]  2026-01-06 16:18:55.817 UTC [8723] STATEMENT:  
2026-01-06T16:18:56.898897421Z [err]  	        SELECT event
2026-01-06T16:18:56.898904150Z [err]  	        FROM event_config
2026-01-06T16:18:56.898911602Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:18:56.898917549Z [err]  	          AND active = 1
2026-01-06T16:18:56.898924126Z [err]  	          AND '16:18' BETWEEN open_time AND close_time
2026-01-06T16:18:56.898931840Z [err]  	        LIMIT 1;
2026-01-06T16:18:56.898938575Z [err]  	        
2026-01-06T16:18:56.937592938Z [inf]  ðŸ“¨ 27822228365: 8km 01:14:54 SBK03E
2026-01-06T16:18:57.218783551Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:18:57.218792183Z [inf]  INFO:     100.64.0.6:42916 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:18:57.218797402Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:18:57.218798806Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:18:57.218805701Z [err]  Traceback (most recent call last):
2026-01-06T16:18:57.218810881Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:18:57.218811981Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:18:57.218819294Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:18:57.218822441Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:18:57.218825861Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:18:57.218834354Z [err]          self.scope, self.receive, self.send
2026-01-06T16:18:57.218834394Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:18:57.218842913Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:18:57.218843324Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:18:57.218850267Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:18:57.218852934Z [err]      )
2026-01-06T16:18:57.218861291Z [err]      ^
2026-01-06T16:18:57.218869807Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:18:57.218870657Z [err]      raise exc
2026-01-06T16:18:57.218878473Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:18:57.219756505Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:18:57.219768285Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:18:57.219776562Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:18:57.219783683Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:18:57.219790286Z [err]      raise exc
2026-01-06T16:18:57.219797396Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:18:57.219803227Z [err]      await app(scope, receive, sender)
2026-01-06T16:18:57.219813012Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:18:57.219819521Z [err]      await self.app(scope, receive, send)
2026-01-06T16:18:57.219826401Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:18:57.219832905Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:18:57.219840972Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:18:57.219846529Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:18:57.219852639Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:18:57.219859351Z [err]      await self.app(scope, receive, send)
2026-01-06T16:18:57.219865604Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:18:57.219870548Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:18:57.219875955Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:18:57.221061502Z [err]          (day_of_week, current_time),
2026-01-06T16:18:57.221062805Z [err]      return await dependant.call(**values)
2026-01-06T16:18:57.221066005Z [err]      raise exc
2026-01-06T16:18:57.221074337Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:18:57.221078234Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:18:57.221082995Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:18:57.221083508Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:18:57.221092500Z [err]      await app(scope, receive, sender)
2026-01-06T16:18:57.221093694Z [err]      event = get_active_event()
2026-01-06T16:18:57.221104038Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:18:57.221104547Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:18:57.221114152Z [err]      cur.execute(
2026-01-06T16:18:57.221118942Z [err]      response = await f(request)
2026-01-06T16:18:57.221124134Z [err]      ~~~~~~~~~~~^
2026-01-06T16:18:57.221133346Z [err]          """
2026-01-06T16:18:57.221135686Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:18:57.221141412Z [err]          ^^^
2026-01-06T16:18:57.221147549Z [err]      ...<7 lines>...
2026-01-06T16:18:57.221152474Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:18:57.221160757Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:18:57.221167373Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:18:57.221172059Z [err]      ...<3 lines>...
2026-01-06T16:18:57.221176136Z [err]      )
2026-01-06T16:18:57.221181494Z [err]      ^
2026-01-06T16:18:57.221186860Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:18:57.222202742Z [err]      )
2026-01-06T16:18:57.222208217Z [err]      ^
2026-01-06T16:18:57.222214799Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:18:57.222219845Z [err]      return super().execute(query, vars)
2026-01-06T16:18:57.222223972Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:18:57.222227691Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:18:57.222232517Z [err]  LINE 5:           AND active = 1
2026-01-06T16:18:57.222236586Z [err]                               ^
2026-01-06T16:18:57.222240545Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:18:57.222244495Z [err]  
2026-01-06T16:18:57.887806883Z [err]  	        LIMIT 1;
2026-01-06T16:18:57.887821659Z [err]  	        
2026-01-06T16:18:57.887953845Z [err]  2026-01-06 16:18:57.198 UTC [8725] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:18:57.887962737Z [err]  2026-01-06 16:18:57.198 UTC [8725] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:18:57.887970339Z [err]  2026-01-06 16:18:57.198 UTC [8725] STATEMENT:  
2026-01-06T16:18:57.887978572Z [err]  	        SELECT event
2026-01-06T16:18:57.887989114Z [err]  	        FROM event_config
2026-01-06T16:18:57.887997214Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:18:57.888005734Z [err]  	          AND active = 1
2026-01-06T16:18:57.888014501Z [err]  	          AND '16:18' BETWEEN open_time AND close_time
2026-01-06T16:18:57.947901049Z [inf]  ðŸ“¨ 27822228365: 8km 01:14:54 SBK03E
2026-01-06T16:18:58.097078630Z [inf]  INFO:     100.64.0.3:12898 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:18:58.098765097Z [err]      )
2026-01-06T16:18:58.098766211Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:18:58.098772975Z [err]      ^
2026-01-06T16:18:58.098779639Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:18:58.098782351Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:18:58.098787345Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:18:58.098793083Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:18:58.098795182Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:18:58.098795998Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:18:58.098802118Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:18:58.098803088Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:18:58.098807154Z [err]  Traceback (most recent call last):
2026-01-06T16:18:58.098813667Z [err]      raise exc
2026-01-06T16:18:58.098815501Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:18:58.098822821Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:18:58.098825380Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:18:58.098830758Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:18:58.098836443Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:18:58.098839091Z [err]          self.scope, self.receive, self.send
2026-01-06T16:18:58.098847019Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:18:58.099886826Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:18:58.099888424Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:18:58.099893045Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:18:58.099897999Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:18:58.099898524Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:18:58.099903168Z [err]      raise exc
2026-01-06T16:18:58.099905981Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:18:58.099908055Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:18:58.099913439Z [err]      raise exc
2026-01-06T16:18:58.099913505Z [err]      await app(scope, receive, sender)
2026-01-06T16:18:58.099917901Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:18:58.099922999Z [err]      await self.app(scope, receive, send)
2026-01-06T16:18:58.099927185Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:18:58.099931199Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:18:58.099934965Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:18:58.099938742Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:18:58.099942513Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:18:58.099946311Z [err]      await self.app(scope, receive, send)
2026-01-06T16:18:58.101252041Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:18:58.101259344Z [err]      await app(scope, receive, sender)
2026-01-06T16:18:58.101265913Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:18:58.101273258Z [err]      response = await f(request)
2026-01-06T16:18:58.101278954Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:18:58.101284508Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:18:58.101291782Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:18:58.101297561Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:18:58.101303061Z [err]      ...<3 lines>...
2026-01-06T16:18:58.101308921Z [err]      )
2026-01-06T16:18:58.101314619Z [err]      ^
2026-01-06T16:18:58.101320784Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:18:58.101326376Z [err]      return await dependant.call(**values)
2026-01-06T16:18:58.101331763Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:18:58.101337550Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:18:58.101344346Z [err]      event = get_active_event()
2026-01-06T16:18:58.101349961Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:18:58.101356329Z [err]      cur.execute(
2026-01-06T16:18:58.101361452Z [err]      ~~~~~~~~~~~^
2026-01-06T16:18:58.101369351Z [err]          """
2026-01-06T16:18:58.101374677Z [err]          ^^^
2026-01-06T16:18:58.101380332Z [err]      ...<7 lines>...
2026-01-06T16:18:58.101385640Z [err]          (day_of_week, current_time),
2026-01-06T16:18:58.101392403Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:18:58.102281387Z [err]      )
2026-01-06T16:18:58.102289176Z [err]      ^
2026-01-06T16:18:58.102296463Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:18:58.102302954Z [err]      return super().execute(query, vars)
2026-01-06T16:18:58.102307500Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:18:58.102311811Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:18:58.102315907Z [err]  LINE 5:           AND active = 1
2026-01-06T16:18:58.102320030Z [err]                               ^
2026-01-06T16:18:58.102323852Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:18:58.102328267Z [err]  
2026-01-06T16:18:58.863547139Z [inf]  ðŸ“¨ 27822228365: 8km 01:14:54 SBK03E
2026-01-06T16:18:58.928465174Z [err]  2026-01-06 16:18:58.090 UTC [8727] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:18:58.928472743Z [err]  2026-01-06 16:18:58.090 UTC [8727] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:18:58.928481598Z [err]  2026-01-06 16:18:58.090 UTC [8727] STATEMENT:  
2026-01-06T16:18:58.928489301Z [err]  	        SELECT event
2026-01-06T16:18:58.928498396Z [err]  	        FROM event_config
2026-01-06T16:18:58.928508801Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:18:58.928517975Z [err]  	          AND active = 1
2026-01-06T16:18:58.928525677Z [err]  	          AND '16:18' BETWEEN open_time AND close_time
2026-01-06T16:18:58.928532588Z [err]  	        LIMIT 1;
2026-01-06T16:18:58.928540808Z [err]  	        
2026-01-06T16:18:58.948190079Z [inf]  INFO:     100.64.0.8:13838 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:18:58.948201299Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:18:58.948208486Z [err]  Traceback (most recent call last):
2026-01-06T16:18:58.948215887Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:18:58.948223264Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:18:58.948230447Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:18:58.948237257Z [err]          self.scope, self.receive, self.send
2026-01-06T16:18:58.948244253Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:18:58.948251468Z [err]      )
2026-01-06T16:18:58.948258416Z [err]      ^
2026-01-06T16:18:58.948264772Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:18:58.948271032Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:18:58.948277287Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:18:58.948284284Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:18:58.948291503Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:18:58.948298379Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:18:58.948304914Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:18:58.948313555Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:18:58.948320333Z [err]      raise exc
2026-01-06T16:18:58.948327129Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:18:58.950163582Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:18:58.950178413Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:18:58.950186902Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:18:58.950192912Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:18:58.950199350Z [err]      raise exc
2026-01-06T16:18:58.950205328Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:18:58.950210463Z [err]      await app(scope, receive, sender)
2026-01-06T16:18:58.950215744Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:18:58.950221376Z [err]      await self.app(scope, receive, send)
2026-01-06T16:18:58.950234152Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:18:58.950240350Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:18:58.950244860Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:18:58.950249764Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:18:58.950255767Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:18:58.950263211Z [err]      await self.app(scope, receive, send)
2026-01-06T16:18:58.950269755Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:18:58.950277257Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:18:58.950284566Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:18:58.951144251Z [err]      raise exc
2026-01-06T16:18:58.951152639Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:18:58.951159444Z [err]      await app(scope, receive, sender)
2026-01-06T16:18:58.951166155Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:18:58.951171922Z [err]      response = await f(request)
2026-01-06T16:18:58.951180547Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:18:58.951187382Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:18:58.951194959Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:18:58.951201281Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:18:58.951207549Z [err]      ...<3 lines>...
2026-01-06T16:18:58.951213954Z [err]      )
2026-01-06T16:18:58.951220257Z [err]      ^
2026-01-06T16:18:58.951227006Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:18:58.951234987Z [err]      return await dependant.call(**values)
2026-01-06T16:18:58.951244583Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:18:58.951251014Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:18:58.951258817Z [err]      event = get_active_event()
2026-01-06T16:18:58.951265813Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:18:58.951272650Z [err]      cur.execute(
2026-01-06T16:18:58.951278570Z [err]      ~~~~~~~~~~~^
2026-01-06T16:18:58.951285793Z [err]          """
2026-01-06T16:18:58.951292747Z [err]          ^^^
2026-01-06T16:18:58.951298978Z [err]      ...<7 lines>...
2026-01-06T16:18:58.951305980Z [err]          (day_of_week, current_time),
2026-01-06T16:18:58.951312770Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:18:58.952042788Z [err]      )
2026-01-06T16:18:58.952042803Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:18:58.952052136Z [err]      ^
2026-01-06T16:18:58.952052298Z [err]  
2026-01-06T16:18:58.952059557Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:18:58.952067058Z [err]      return super().execute(query, vars)
2026-01-06T16:18:58.952074093Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:18:58.952080847Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:18:58.952087828Z [err]  LINE 5:           AND active = 1
2026-01-06T16:18:58.952095237Z [err]                               ^
2026-01-06T16:18:58.970077138Z [err]  2026-01-06 16:18:58.938 UTC [8729] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:18:58.970089046Z [err]  	          AND active = 1
2026-01-06T16:18:58.970096609Z [err]  2026-01-06 16:18:58.938 UTC [8729] STATEMENT:  
2026-01-06T16:18:58.970098143Z [err]  	          AND '16:18' BETWEEN open_time AND close_time
2026-01-06T16:18:58.970106219Z [err]  	        LIMIT 1;
2026-01-06T16:18:58.970109803Z [err]  	        SELECT event
2026-01-06T16:18:58.970116343Z [err]  	        
2026-01-06T16:18:58.970119764Z [err]  	        FROM event_config
2026-01-06T16:18:58.970129091Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:18:58.970157221Z [err]  2026-01-06 16:18:58.938 UTC [8729] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:19:00.538041989Z [inf]  ðŸ“¨ 27822228365: 8km 01:14:54 SBK03E
2026-01-06T16:19:00.897714516Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:00.897726222Z [err]          self.scope, self.receive, self.send
2026-01-06T16:19:00.897734322Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:00.897742093Z [err]      )
2026-01-06T16:19:00.897751101Z [err]      ^
2026-01-06T16:19:00.897758933Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:19:00.897765925Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:19:00.897773854Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:00.897781417Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:19:00.897789307Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:19:00.897796443Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:19:00.897803442Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:19:00.897810603Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:19:00.897817793Z [err]      raise exc
2026-01-06T16:19:00.897825737Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:19:00.897965442Z [inf]  INFO:     100.64.0.3:12900 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:19:00.897973904Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:19:00.897980719Z [err]  Traceback (most recent call last):
2026-01-06T16:19:00.897987800Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:19:00.897995982Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:19:00.898466700Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:19:00.898478610Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:19:00.898486425Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:19:00.898492087Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:19:00.898503901Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:19:00.898504514Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:19:00.898516342Z [err]      await self.app(scope, receive, send)
2026-01-06T16:19:00.898526967Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:19:00.898527087Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:19:00.898543731Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:19:00.898543842Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:19:00.898559930Z [err]      raise exc
2026-01-06T16:19:00.898560254Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:19:00.898571466Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:19:00.898578854Z [err]      await app(scope, receive, sender)
2026-01-06T16:19:00.898586496Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:19:00.898595539Z [err]      await self.app(scope, receive, send)
2026-01-06T16:19:00.898603637Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:19:00.899455645Z [err]      raise exc
2026-01-06T16:19:00.899464582Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:19:00.899475225Z [err]      return await dependant.call(**values)
2026-01-06T16:19:00.899476381Z [err]      await app(scope, receive, sender)
2026-01-06T16:19:00.899487382Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:19:00.899498768Z [err]      response = await f(request)
2026-01-06T16:19:00.899500911Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:00.899513735Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:19:00.899516761Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:19:00.899526898Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:19:00.899533410Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:19:00.899539690Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:00.899548911Z [err]      ...<3 lines>...
2026-01-06T16:19:00.899558894Z [err]      )
2026-01-06T16:19:00.899562578Z [err]      event = get_active_event()
2026-01-06T16:19:00.899570622Z [err]      ^
2026-01-06T16:19:00.899578872Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:19:00.899591240Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:19:00.899603088Z [err]      cur.execute(
2026-01-06T16:19:00.899625161Z [err]      ~~~~~~~~~~~^
2026-01-06T16:19:00.899642411Z [err]          """
2026-01-06T16:19:00.899658334Z [err]          ^^^
2026-01-06T16:19:00.899674913Z [err]      ...<7 lines>...
2026-01-06T16:19:00.899684447Z [err]          (day_of_week, current_time),
2026-01-06T16:19:00.899692281Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:00.900333732Z [err]      )
2026-01-06T16:19:00.900340216Z [err]      ^
2026-01-06T16:19:00.900344692Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:19:00.900348608Z [err]      return super().execute(query, vars)
2026-01-06T16:19:00.900352742Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:19:00.900358275Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:19:00.900363585Z [err]  LINE 5:           AND active = 1
2026-01-06T16:19:00.900367239Z [err]                               ^
2026-01-06T16:19:00.900372778Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:19:00.900376970Z [err]  
2026-01-06T16:19:01.057804776Z [err]  2026-01-06 16:19:00.793 UTC [8731] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:19:01.057815557Z [err]  2026-01-06 16:19:00.793 UTC [8731] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:19:01.057828470Z [err]  2026-01-06 16:19:00.793 UTC [8731] STATEMENT:  
2026-01-06T16:19:01.057839384Z [err]  	        SELECT event
2026-01-06T16:19:01.057852463Z [err]  	        FROM event_config
2026-01-06T16:19:01.057864857Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:19:01.057876477Z [err]  	          AND active = 1
2026-01-06T16:19:01.057888466Z [err]  	          AND '16:19' BETWEEN open_time AND close_time
2026-01-06T16:19:01.057901379Z [err]  	        LIMIT 1;
2026-01-06T16:19:01.058004189Z [err]  	        
2026-01-06T16:19:06.437746034Z [inf]  ðŸ“¨ 27738870757: 4km 25:30 SBK03E
2026-01-06T16:19:06.734845001Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:19:06.734857333Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:19:06.734865930Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:19:06.734872121Z [inf]  INFO:     100.64.0.9:43778 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:19:06.734874960Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:19:06.734883024Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:19:06.734883765Z [err]      raise exc
2026-01-06T16:19:06.734893366Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:19:06.734895276Z [err]  Traceback (most recent call last):
2026-01-06T16:19:06.734903574Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:19:06.734912294Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:19:06.734923339Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:06.734932633Z [err]          self.scope, self.receive, self.send
2026-01-06T16:19:06.734941537Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:06.734947521Z [err]      )
2026-01-06T16:19:06.734954005Z [err]      ^
2026-01-06T16:19:06.734959703Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:19:06.734964896Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:19:06.734970801Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:06.734977974Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:19:06.739150817Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:19:06.739158806Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:19:06.739167619Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:19:06.739174756Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:19:06.739182226Z [err]      raise exc
2026-01-06T16:19:06.739188724Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:19:06.739194846Z [err]      await app(scope, receive, sender)
2026-01-06T16:19:06.739202700Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:19:06.739211344Z [err]      await self.app(scope, receive, send)
2026-01-06T16:19:06.739218403Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:19:06.739226159Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:19:06.739233239Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:19:06.739239151Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:19:06.739247577Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:19:06.739254068Z [err]      await self.app(scope, receive, send)
2026-01-06T16:19:06.739260982Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:19:06.739267259Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:19:06.739274374Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:19:06.739282887Z [err]      raise exc
2026-01-06T16:19:06.739289327Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:19:06.739295688Z [err]      await app(scope, receive, sender)
2026-01-06T16:19:06.739301475Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:19:06.739306841Z [err]      response = await f(request)
2026-01-06T16:19:06.739314247Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:19:06.739320168Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:19:06.739325869Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:19:06.739331488Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:06.739339587Z [err]      ...<3 lines>...
2026-01-06T16:19:06.739344901Z [err]      )
2026-01-06T16:19:06.739350602Z [err]      ^
2026-01-06T16:19:06.739357394Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:19:06.739363004Z [err]      return await dependant.call(**values)
2026-01-06T16:19:06.739368734Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:06.739374719Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:19:06.739380322Z [err]      event = get_active_event()
2026-01-06T16:19:06.739386828Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:19:06.739392237Z [err]      cur.execute(
2026-01-06T16:19:06.739398519Z [err]      ~~~~~~~~~~~^
2026-01-06T16:19:06.739403695Z [err]          """
2026-01-06T16:19:06.739409294Z [err]          ^^^
2026-01-06T16:19:06.739415154Z [err]      ...<7 lines>...
2026-01-06T16:19:06.739421019Z [err]          (day_of_week, current_time),
2026-01-06T16:19:06.739426811Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:06.739432755Z [err]      )
2026-01-06T16:19:06.739439645Z [err]      ^
2026-01-06T16:19:06.739445600Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:19:06.739450842Z [err]      return super().execute(query, vars)
2026-01-06T16:19:06.739515241Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:19:06.739519371Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:19:06.739523433Z [err]  LINE 5:           AND active = 1
2026-01-06T16:19:06.739527572Z [err]                               ^
2026-01-06T16:19:06.739531812Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:19:06.739537362Z [err]  
2026-01-06T16:19:06.946169487Z [err]  2026-01-06 16:19:06.693 UTC [8734] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:19:06.946178171Z [err]  2026-01-06 16:19:06.693 UTC [8734] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:19:06.946186344Z [err]  2026-01-06 16:19:06.693 UTC [8734] STATEMENT:  
2026-01-06T16:19:06.946193943Z [err]  	        SELECT event
2026-01-06T16:19:06.946200879Z [err]  	        FROM event_config
2026-01-06T16:19:06.946208978Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:19:06.946216758Z [err]  	          AND active = 1
2026-01-06T16:19:06.946224499Z [err]  	          AND '16:19' BETWEEN open_time AND close_time
2026-01-06T16:19:06.946231491Z [err]  	        LIMIT 1;
2026-01-06T16:19:06.946238719Z [err]  	        
2026-01-06T16:19:26.713099603Z [err]          self.scope, self.receive, self.send
2026-01-06T16:19:26.713101187Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:19:26.713109525Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:26.713114343Z [inf]  ðŸ“¨ 27822228365: 8km 01:14:54 SBK03E
2026-01-06T16:19:26.713116143Z [err]      )
2026-01-06T16:19:26.713122588Z [err]      ^
2026-01-06T16:19:26.713125932Z [inf]  INFO:     100.64.0.6:59806 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:19:26.713128873Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:19:26.713135641Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:19:26.713137585Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:19:26.713145017Z [err]  Traceback (most recent call last):
2026-01-06T16:19:26.713146294Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:26.713153847Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:19:26.713156081Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:19:26.713163476Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:19:26.713163833Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:19:26.713171865Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:19:26.713175090Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:26.713178981Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:19:26.713185885Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:19:26.713194111Z [err]      raise exc
2026-01-06T16:19:26.713933089Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:19:26.713942955Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:19:26.713954572Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:19:26.713963043Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:19:26.713971493Z [err]      raise exc
2026-01-06T16:19:26.713980163Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:19:26.713987583Z [err]      await app(scope, receive, sender)
2026-01-06T16:19:26.713996487Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:19:26.714005363Z [err]      await self.app(scope, receive, send)
2026-01-06T16:19:26.714013851Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:19:26.714020813Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:19:26.714028629Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:19:26.714036645Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:19:26.714044737Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:19:26.714052303Z [err]      await self.app(scope, receive, send)
2026-01-06T16:19:26.714059809Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:19:26.714067728Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:19:26.714078342Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:19:26.714780348Z [err]      ...<7 lines>...
2026-01-06T16:19:26.714784221Z [err]      raise exc
2026-01-06T16:19:26.714790703Z [err]          (day_of_week, current_time),
2026-01-06T16:19:26.714792245Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:19:26.714798196Z [err]      await app(scope, receive, sender)
2026-01-06T16:19:26.714802045Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:26.714804566Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:19:26.714809842Z [err]      response = await f(request)
2026-01-06T16:19:26.714814592Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:19:26.714819460Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:19:26.714823763Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:19:26.714827923Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:26.714832002Z [err]      ...<3 lines>...
2026-01-06T16:19:26.714836706Z [err]      )
2026-01-06T16:19:26.714840749Z [err]      ^
2026-01-06T16:19:26.714844701Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:19:26.714849476Z [err]      return await dependant.call(**values)
2026-01-06T16:19:26.714855025Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:26.714859687Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:19:26.714864255Z [err]      event = get_active_event()
2026-01-06T16:19:26.714869374Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:19:26.714875790Z [err]      cur.execute(
2026-01-06T16:19:26.714880110Z [err]      ~~~~~~~~~~~^
2026-01-06T16:19:26.714884315Z [err]          """
2026-01-06T16:19:26.714888073Z [err]          ^^^
2026-01-06T16:19:26.715471599Z [err]      )
2026-01-06T16:19:26.715476163Z [err]      ^
2026-01-06T16:19:26.715480221Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:19:26.715483908Z [err]      return super().execute(query, vars)
2026-01-06T16:19:26.715487335Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:19:26.715492163Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:19:26.715500160Z [err]  LINE 5:           AND active = 1
2026-01-06T16:19:26.715503945Z [err]                               ^
2026-01-06T16:19:26.715507823Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:19:26.715511949Z [err]  
2026-01-06T16:19:28.340322726Z [err]  2026-01-06 16:19:24.683 UTC [8737] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:19:28.340328346Z [err]  2026-01-06 16:19:24.683 UTC [8737] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:19:28.340334105Z [err]  2026-01-06 16:19:24.683 UTC [8737] STATEMENT:  
2026-01-06T16:19:28.340339919Z [err]  	        SELECT event
2026-01-06T16:19:28.340345664Z [err]  	        FROM event_config
2026-01-06T16:19:28.340352743Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:19:28.340359916Z [err]  	          AND active = 1
2026-01-06T16:19:28.340367681Z [err]  	          AND '16:19' BETWEEN open_time AND close_time
2026-01-06T16:19:28.340373527Z [err]  	        LIMIT 1;
2026-01-06T16:19:28.340380789Z [err]  	        
2026-01-06T16:19:56.714354586Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:19:56.714361566Z [inf]  ðŸ“¨ 27824481323: 8km 39:03 SBK03E
2026-01-06T16:19:56.714362362Z [err]      raise exc
2026-01-06T16:19:56.714364177Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:19:56.714368896Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:19:56.714371994Z [inf]  INFO:     100.64.0.8:34570 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:19:56.714377141Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:19:56.714378923Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:19:56.714385909Z [err]  Traceback (most recent call last):
2026-01-06T16:19:56.714387596Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:19:56.714388173Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.714392082Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:19:56.714396651Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:19:56.714398865Z [err]      )
2026-01-06T16:19:56.714398942Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:19:56.714404515Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.714406629Z [err]      ^
2026-01-06T16:19:56.714410291Z [err]          self.scope, self.receive, self.send
2026-01-06T16:19:56.714412319Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:19:56.714416989Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:19:56.714422274Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.715126095Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:19:56.715138017Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:19:56.715147572Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:19:56.715155821Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:19:56.715163259Z [err]      raise exc
2026-01-06T16:19:56.715171200Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:19:56.715179142Z [err]      await app(scope, receive, sender)
2026-01-06T16:19:56.715187601Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:19:56.715194749Z [err]      await self.app(scope, receive, send)
2026-01-06T16:19:56.715223536Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:19:56.715232586Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:19:56.715239952Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:19:56.715247317Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:19:56.715255328Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:19:56.715268947Z [err]      await self.app(scope, receive, send)
2026-01-06T16:19:56.715276431Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:19:56.715283650Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:19:56.715291566Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:19:56.716415880Z [err]          ^^^
2026-01-06T16:19:56.716426477Z [err]      ...<7 lines>...
2026-01-06T16:19:56.716431224Z [err]      raise exc
2026-01-06T16:19:56.716437379Z [err]          (day_of_week, current_time),
2026-01-06T16:19:56.716438411Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:19:56.716443991Z [err]      await app(scope, receive, sender)
2026-01-06T16:19:56.716447721Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.716449353Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:19:56.716453707Z [err]      response = await f(request)
2026-01-06T16:19:56.716458350Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.716462236Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:19:56.716467011Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:19:56.716470667Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.716476343Z [err]      ...<3 lines>...
2026-01-06T16:19:56.716479947Z [err]      )
2026-01-06T16:19:56.716483830Z [err]      ^
2026-01-06T16:19:56.716487644Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:19:56.716491451Z [err]      return await dependant.call(**values)
2026-01-06T16:19:56.716494848Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.716498869Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:19:56.716503339Z [err]      event = get_active_event()
2026-01-06T16:19:56.716507429Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:19:56.716511612Z [err]      cur.execute(
2026-01-06T16:19:56.716516160Z [err]      ~~~~~~~~~~~^
2026-01-06T16:19:56.716521324Z [err]          """
2026-01-06T16:19:56.717602924Z [err]      )
2026-01-06T16:19:56.717604262Z [err]      )
2026-01-06T16:19:56.717605456Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:19:56.717612033Z [err]      ^
2026-01-06T16:19:56.717613842Z [err]      ^
2026-01-06T16:19:56.717613947Z [err]  Traceback (most recent call last):
2026-01-06T16:19:56.717618822Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:19:56.717621079Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:19:56.717622380Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:19:56.717625909Z [err]      return super().execute(query, vars)
2026-01-06T16:19:56.717627988Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:19:56.717631704Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:19:56.717632624Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:19:56.717638920Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:19:56.717640988Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.717644271Z [err]  LINE 5:           AND active = 1
2026-01-06T16:19:56.717649423Z [err]          self.scope, self.receive, self.send
2026-01-06T16:19:56.717652104Z [err]                               ^
2026-01-06T16:19:56.717657752Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.717658639Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:19:56.717664187Z [err]  
2026-01-06T16:19:56.717669079Z [inf]  ðŸ“¨ 27824481323: 8km 39:03 SBK03E
2026-01-06T16:19:56.717673242Z [inf]  INFO:     100.64.0.3:17642 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:19:56.718643194Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.718653949Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:19:56.718661644Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:19:56.718668515Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:19:56.718676038Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:19:56.718681902Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:19:56.718686588Z [err]      raise exc
2026-01-06T16:19:56.718691342Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:19:56.718696027Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:19:56.718700397Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:19:56.718704769Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:19:56.718709528Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:19:56.718713867Z [err]      raise exc
2026-01-06T16:19:56.718718980Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:19:56.718722986Z [err]      await app(scope, receive, sender)
2026-01-06T16:19:56.718727507Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:19:56.718731491Z [err]      await self.app(scope, receive, send)
2026-01-06T16:19:56.718735794Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:19:56.719986709Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:19:56.719996600Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:19:56.720003455Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:19:56.720009410Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:19:56.720015984Z [err]      await self.app(scope, receive, send)
2026-01-06T16:19:56.720022649Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:19:56.720028679Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:19:56.720034742Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:19:56.720040905Z [err]      raise exc
2026-01-06T16:19:56.720048694Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:19:56.720053819Z [err]      await app(scope, receive, sender)
2026-01-06T16:19:56.720058268Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:19:56.720062069Z [err]      response = await f(request)
2026-01-06T16:19:56.720066170Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.720069730Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:19:56.720073705Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:19:56.720077308Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.720081463Z [err]      ...<3 lines>...
2026-01-06T16:19:56.720085112Z [err]      )
2026-01-06T16:19:56.720089390Z [err]      ^
2026-01-06T16:19:56.720093447Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:19:56.720924656Z [err]      return await dependant.call(**values)
2026-01-06T16:19:56.720931993Z [err]      return super().execute(query, vars)
2026-01-06T16:19:56.720932718Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.720934859Z [err]  
2026-01-06T16:19:56.720940043Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:19:56.720942590Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:19:56.720943377Z [inf]  ðŸ“¨ 27824481323: 8km 39:03 SBK03E
2026-01-06T16:19:56.720947623Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:19:56.720947956Z [err]          ^^^
2026-01-06T16:19:56.720949805Z [err]      event = get_active_event()
2026-01-06T16:19:56.720950140Z [inf]  INFO:     100.64.0.2:11580 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:19:56.720954549Z [err]  LINE 5:           AND active = 1
2026-01-06T16:19:56.720957215Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:19:56.720957645Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:19:56.720960128Z [err]      ...<7 lines>...
2026-01-06T16:19:56.720962605Z [err]                               ^
2026-01-06T16:19:56.720964815Z [err]      cur.execute(
2026-01-06T16:19:56.720967983Z [err]          (day_of_week, current_time),
2026-01-06T16:19:56.720970845Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:19:56.720971023Z [err]      ~~~~~~~~~~~^
2026-01-06T16:19:56.720977570Z [err]          """
2026-01-06T16:19:56.720979217Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.720986269Z [err]      )
2026-01-06T16:19:56.720993835Z [err]      ^
2026-01-06T16:19:56.721003697Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:19:56.721966264Z [err]  Traceback (most recent call last):
2026-01-06T16:19:56.721974864Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:19:56.721976572Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:19:56.721981370Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:19:56.721983410Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:19:56.721985712Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:19:56.721988187Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:19:56.721992557Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:19:56.721994880Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.721998534Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:19:56.722004653Z [err]          self.scope, self.receive, self.send
2026-01-06T16:19:56.722005649Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:19:56.722011603Z [err]      raise exc
2026-01-06T16:19:56.722013764Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.722020544Z [err]      )
2026-01-06T16:19:56.722026830Z [err]      ^
2026-01-06T16:19:56.722033070Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:19:56.722040288Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:19:56.722046637Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.722053151Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:19:56.723044527Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:19:56.723050340Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:19:56.723052540Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:19:56.723057164Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:19:56.723059526Z [err]      raise exc
2026-01-06T16:19:56.723062847Z [err]      raise exc
2026-01-06T16:19:56.723065229Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:19:56.723068427Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:19:56.723073265Z [err]      await app(scope, receive, sender)
2026-01-06T16:19:56.723077766Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:19:56.723081825Z [err]      await self.app(scope, receive, send)
2026-01-06T16:19:56.723086156Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:19:56.723090533Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:19:56.723094690Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:19:56.723100213Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:19:56.723104112Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:19:56.723108669Z [err]      await self.app(scope, receive, send)
2026-01-06T16:19:56.723112400Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:19:56.724104331Z [err]      await app(scope, receive, sender)
2026-01-06T16:19:56.724108402Z [err]      ^
2026-01-06T16:19:56.724112664Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:19:56.724119393Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:19:56.724121226Z [err]      response = await f(request)
2026-01-06T16:19:56.724127826Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.724133913Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:19:56.724141372Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:19:56.724147895Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.724154588Z [err]      ...<3 lines>...
2026-01-06T16:19:56.724161670Z [err]      )
2026-01-06T16:19:56.724168361Z [err]      ^
2026-01-06T16:19:56.724174822Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:19:56.724179801Z [err]      return await dependant.call(**values)
2026-01-06T16:19:56.724183854Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.724187428Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:19:56.724191145Z [err]      event = get_active_event()
2026-01-06T16:19:56.724196534Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:19:56.724200832Z [err]      cur.execute(
2026-01-06T16:19:56.724204529Z [err]      ~~~~~~~~~~~^
2026-01-06T16:19:56.724208320Z [err]          """
2026-01-06T16:19:56.724212203Z [err]          ^^^
2026-01-06T16:19:56.724216107Z [err]      ...<7 lines>...
2026-01-06T16:19:56.724220074Z [err]          (day_of_week, current_time),
2026-01-06T16:19:56.724226156Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.724231930Z [err]      )
2026-01-06T16:19:56.725016431Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.725024897Z [err]      )
2026-01-06T16:19:56.725026063Z [err]      return super().execute(query, vars)
2026-01-06T16:19:56.725031553Z [err]      ^
2026-01-06T16:19:56.725036960Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:19:56.725038584Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:19:56.725045453Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:19:56.725046865Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:19:56.725052998Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.725053103Z [err]  LINE 5:           AND active = 1
2026-01-06T16:19:56.725058795Z [err]                               ^
2026-01-06T16:19:56.725060228Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:19:56.725063611Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:19:56.725067582Z [err]  
2026-01-06T16:19:56.725072370Z [inf]  ðŸ“¨ 27848022991: 6km 47:21 SBK03E
2026-01-06T16:19:56.725076506Z [inf]  INFO:     100.64.0.4:11252 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:19:56.725080449Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:19:56.725084240Z [err]  Traceback (most recent call last):
2026-01-06T16:19:56.725088420Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:19:56.725092424Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:19:56.725096282Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.725100524Z [err]          self.scope, self.receive, self.send
2026-01-06T16:19:56.726140905Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:19:56.726147737Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:19:56.726148683Z [err]      await self.app(scope, receive, send)
2026-01-06T16:19:56.726152634Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:19:56.726157579Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:19:56.726161987Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:19:56.726162463Z [err]      raise exc
2026-01-06T16:19:56.726168940Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:19:56.726172097Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:19:56.726174925Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:19:56.726179794Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:19:56.726182750Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:19:56.726185132Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:19:56.726189361Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:19:56.726193605Z [err]      raise exc
2026-01-06T16:19:56.726197145Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:19:56.726200634Z [err]      await app(scope, receive, sender)
2026-01-06T16:19:56.726205241Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:19:56.727274423Z [err]      )
2026-01-06T16:19:56.727276933Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:19:56.727284014Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:19:56.727284396Z [err]      ^
2026-01-06T16:19:56.727290131Z [err]      await self.app(scope, receive, send)
2026-01-06T16:19:56.727291241Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:19:56.727296123Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:19:56.727298045Z [err]      return await dependant.call(**values)
2026-01-06T16:19:56.727300982Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:19:56.727305200Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.727306563Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:19:56.727310664Z [err]      raise exc
2026-01-06T16:19:56.727314198Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:19:56.727318282Z [err]      await app(scope, receive, sender)
2026-01-06T16:19:56.727322045Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:19:56.727325527Z [err]      response = await f(request)
2026-01-06T16:19:56.727328893Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.727332452Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:19:56.727335915Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:19:56.727339392Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.727343322Z [err]      ...<3 lines>...
2026-01-06T16:19:56.728399238Z [inf]  ðŸ“¨ 27848022991: 6km 47:21 SBK03E
2026-01-06T16:19:56.728402950Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:19:56.728408379Z [inf]  INFO:     100.64.0.5:52878 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:19:56.728413950Z [err]      event = get_active_event()
2026-01-06T16:19:56.728414767Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:19:56.728420914Z [err]  Traceback (most recent call last):
2026-01-06T16:19:56.728422626Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:19:56.728426395Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:19:56.728428991Z [err]      cur.execute(
2026-01-06T16:19:56.728433578Z [err]      ~~~~~~~~~~~^
2026-01-06T16:19:56.728437444Z [err]          """
2026-01-06T16:19:56.728441732Z [err]          ^^^
2026-01-06T16:19:56.728446425Z [err]      ...<7 lines>...
2026-01-06T16:19:56.728451268Z [err]          (day_of_week, current_time),
2026-01-06T16:19:56.728454972Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.728458650Z [err]      )
2026-01-06T16:19:56.728462335Z [err]      ^
2026-01-06T16:19:56.728466929Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:19:56.728471100Z [err]      return super().execute(query, vars)
2026-01-06T16:19:56.728474644Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:19:56.728478426Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:19:56.728481966Z [err]  LINE 5:           AND active = 1
2026-01-06T16:19:56.728499221Z [err]                               ^
2026-01-06T16:19:56.728503881Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:19:56.728507948Z [err]  
2026-01-06T16:19:56.729253959Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:19:56.729260531Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.729261203Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:19:56.729263292Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:19:56.729266496Z [err]          self.scope, self.receive, self.send
2026-01-06T16:19:56.729271683Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.729274160Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:19:56.729274753Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.729278933Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:19:56.729284240Z [err]      )
2026-01-06T16:19:56.729284311Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:19:56.729287120Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:19:56.729293254Z [err]      ^
2026-01-06T16:19:56.729295598Z [err]      raise exc
2026-01-06T16:19:56.729300460Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:19:56.729303962Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:19:56.729306946Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:19:56.729310488Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:19:56.729316630Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:19:56.729320382Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:19:56.730344417Z [err]      raise exc
2026-01-06T16:19:56.730351942Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:19:56.730358819Z [err]      await app(scope, receive, sender)
2026-01-06T16:19:56.730366196Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:19:56.730371852Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:19:56.730372189Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:19:56.730373072Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:19:56.730376128Z [err]      await self.app(scope, receive, send)
2026-01-06T16:19:56.730383039Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:19:56.730384830Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:19:56.730385186Z [err]      response = await f(request)
2026-01-06T16:19:56.730391396Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:19:56.730394433Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:19:56.730397117Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:19:56.730402513Z [err]      raise exc
2026-01-06T16:19:56.730404623Z [err]      await self.app(scope, receive, send)
2026-01-06T16:19:56.730407913Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:19:56.730413553Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:19:56.730421928Z [err]      await app(scope, receive, sender)
2026-01-06T16:19:56.731481232Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.731481769Z [err]      ^
2026-01-06T16:19:56.731488458Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:19:56.731489973Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:19:56.731493576Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:19:56.731496323Z [err]      return super().execute(query, vars)
2026-01-06T16:19:56.731498660Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.731502266Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:19:56.731503811Z [err]      ...<3 lines>...
2026-01-06T16:19:56.731509142Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:19:56.731511726Z [err]      )
2026-01-06T16:19:56.731516177Z [err]      ^
2026-01-06T16:19:56.731520215Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:19:56.731524466Z [err]      return await dependant.call(**values)
2026-01-06T16:19:56.731528348Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.731532308Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:19:56.731535810Z [err]      event = get_active_event()
2026-01-06T16:19:56.731539331Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:19:56.731543508Z [err]      cur.execute(
2026-01-06T16:19:56.731547700Z [err]      ~~~~~~~~~~~^
2026-01-06T16:19:56.731551858Z [err]          """
2026-01-06T16:19:56.731555406Z [err]          ^^^
2026-01-06T16:19:56.731560128Z [err]      ...<7 lines>...
2026-01-06T16:19:56.731564315Z [err]          (day_of_week, current_time),
2026-01-06T16:19:56.731568199Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.731574543Z [err]      )
2026-01-06T16:19:56.732303528Z [err]      )
2026-01-06T16:19:56.732308120Z [err]  LINE 5:           AND active = 1
2026-01-06T16:19:56.732311039Z [err]      ^
2026-01-06T16:19:56.732317739Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:19:56.732318936Z [err]                               ^
2026-01-06T16:19:56.732323037Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:19:56.732327691Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:19:56.732329251Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.732335303Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:19:56.732337080Z [err]  
2026-01-06T16:19:56.732342482Z [inf]  ðŸ“¨ 27824481323: 8km 39:03 SBK03E
2026-01-06T16:19:56.732342866Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:19:56.732347579Z [inf]  INFO:     100.64.0.5:52884 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:19:56.732348446Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:19:56.732352039Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:19:56.732355904Z [err]  Traceback (most recent call last):
2026-01-06T16:19:56.732359758Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:19:56.732363705Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:19:56.732367618Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.732371324Z [err]          self.scope, self.receive, self.send
2026-01-06T16:19:56.732375094Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.733515123Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:19:56.733524888Z [err]      await self.app(scope, receive, send)
2026-01-06T16:19:56.733531775Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:19:56.733534740Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:19:56.733539566Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:19:56.733544631Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:19:56.733546177Z [err]      raise exc
2026-01-06T16:19:56.733552176Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:19:56.733554531Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:19:56.733557778Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:19:56.733563427Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:19:56.733563951Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:19:56.733570039Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:19:56.733572297Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:19:56.733575426Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:19:56.733579476Z [err]      raise exc
2026-01-06T16:19:56.733584043Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:19:56.733588009Z [err]      await app(scope, receive, sender)
2026-01-06T16:19:56.734930775Z [err]      await self.app(scope, receive, send)
2026-01-06T16:19:56.734937084Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:19:56.734940200Z [err]      ^
2026-01-06T16:19:56.734942296Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:19:56.734947259Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:19:56.734951671Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:19:56.734952088Z [err]      raise exc
2026-01-06T16:19:56.734956776Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:19:56.734961126Z [err]      return await dependant.call(**values)
2026-01-06T16:19:56.734961584Z [err]      await app(scope, receive, sender)
2026-01-06T16:19:56.734966603Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:19:56.734969150Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.734973075Z [err]      response = await f(request)
2026-01-06T16:19:56.734976439Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:19:56.734978638Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.734984378Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:19:56.734986040Z [err]      event = get_active_event()
2026-01-06T16:19:56.734989380Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:19:56.734995479Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:19:56.734995864Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.735001024Z [err]      ...<3 lines>...
2026-01-06T16:19:56.735005011Z [err]      )
2026-01-06T16:19:56.735885394Z [err]      cur.execute(
2026-01-06T16:19:56.735894378Z [err]      ~~~~~~~~~~~^
2026-01-06T16:19:56.735902896Z [err]          """
2026-01-06T16:19:56.735909697Z [err]          ^^^
2026-01-06T16:19:56.735917270Z [err]      ...<7 lines>...
2026-01-06T16:19:56.735924366Z [err]          (day_of_week, current_time),
2026-01-06T16:19:56.735930260Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.735936682Z [err]      )
2026-01-06T16:19:56.735943096Z [err]      ^
2026-01-06T16:19:56.735951302Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:19:56.735957909Z [err]      return super().execute(query, vars)
2026-01-06T16:19:56.735964399Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:19:56.735971828Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:19:56.735978407Z [err]  LINE 5:           AND active = 1
2026-01-06T16:19:56.735984558Z [err]                               ^
2026-01-06T16:19:56.735990131Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:19:56.735996503Z [err]  
2026-01-06T16:19:56.736003370Z [inf]  ðŸ“¨ 27848022991: 6km 47:21 SBK03E
2026-01-06T16:19:56.799347986Z [inf]  INFO:     100.64.0.5:52896 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:19:56.801317192Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:19:56.801323131Z [err]  Traceback (most recent call last):
2026-01-06T16:19:56.801328346Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:19:56.801334332Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:19:56.801334381Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:19:56.801339104Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.801344534Z [err]          self.scope, self.receive, self.send
2026-01-06T16:19:56.801344689Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:19:56.801349292Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.801354486Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:19:56.801356059Z [err]      )
2026-01-06T16:19:56.801361876Z [err]      ^
2026-01-06T16:19:56.801362216Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:19:56.801367913Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:19:56.801369449Z [err]      raise exc
2026-01-06T16:19:56.801374464Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:19:56.801376714Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:19:56.801379835Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.801383636Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:19:56.801385236Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:19:56.802559016Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:19:56.802564728Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:19:56.802570956Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:19:56.802573025Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:19:56.802574957Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:19:56.802580537Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:19:56.802585010Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:19:56.802586320Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:19:56.802589096Z [err]      raise exc
2026-01-06T16:19:56.802596060Z [err]      raise exc
2026-01-06T16:19:56.802596422Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:19:56.802597991Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:19:56.802603699Z [err]      await self.app(scope, receive, send)
2026-01-06T16:19:56.802606567Z [err]      await app(scope, receive, sender)
2026-01-06T16:19:56.802612950Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:19:56.802618992Z [err]      await self.app(scope, receive, send)
2026-01-06T16:19:56.802625304Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:19:56.802631623Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:19:56.803660968Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:19:56.803663205Z [err]      event = get_active_event()
2026-01-06T16:19:56.803668250Z [err]      await app(scope, receive, sender)
2026-01-06T16:19:56.803673773Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:19:56.803674994Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:19:56.803681229Z [err]      response = await f(request)
2026-01-06T16:19:56.803682182Z [err]      cur.execute(
2026-01-06T16:19:56.803687657Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.803688768Z [err]      ~~~~~~~~~~~^
2026-01-06T16:19:56.803694220Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:19:56.803696430Z [err]          """
2026-01-06T16:19:56.803701134Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:19:56.803703737Z [err]          ^^^
2026-01-06T16:19:56.803707574Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.803710783Z [err]      ...<7 lines>...
2026-01-06T16:19:56.803713893Z [err]      ...<3 lines>...
2026-01-06T16:19:56.803718683Z [err]          (day_of_week, current_time),
2026-01-06T16:19:56.803720400Z [err]      )
2026-01-06T16:19:56.803726630Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.803729031Z [err]      ^
2026-01-06T16:19:56.803735517Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:19:56.803741632Z [err]      return await dependant.call(**values)
2026-01-06T16:19:56.803747964Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:56.803754002Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:19:56.804557575Z [err]      )
2026-01-06T16:19:56.804565614Z [err]      ^
2026-01-06T16:19:56.804572727Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:19:56.804580681Z [err]      return super().execute(query, vars)
2026-01-06T16:19:56.804589012Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:19:56.804596023Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:19:56.804602817Z [err]  LINE 5:           AND active = 1
2026-01-06T16:19:56.804610584Z [err]                               ^
2026-01-06T16:19:56.804617974Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:19:56.804623404Z [err]  
2026-01-06T16:19:56.819846148Z [err]  2026-01-06 16:19:53.018 UTC [8742] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:19:56.819855923Z [err]  2026-01-06 16:19:53.018 UTC [8742] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:19:56.819859667Z [err]  2026-01-06 16:19:52.427 UTC [8740] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:19:56.819863579Z [err]  2026-01-06 16:19:53.018 UTC [8742] STATEMENT:  
2026-01-06T16:19:56.819869872Z [err]  2026-01-06 16:19:52.427 UTC [8740] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:19:56.819870687Z [err]  	        SELECT event
2026-01-06T16:19:56.819877705Z [err]  	        FROM event_config
2026-01-06T16:19:56.819880141Z [err]  2026-01-06 16:19:52.427 UTC [8740] STATEMENT:  
2026-01-06T16:19:56.819886402Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:19:56.819889904Z [err]  	        SELECT event
2026-01-06T16:19:56.819892915Z [err]  	          AND active = 1
2026-01-06T16:19:56.819898371Z [err]  	        FROM event_config
2026-01-06T16:19:56.819900444Z [err]  	          AND '16:19' BETWEEN open_time AND close_time
2026-01-06T16:19:56.819907910Z [err]  	        LIMIT 1;
2026-01-06T16:19:56.819909481Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:19:56.819915891Z [err]  	        
2026-01-06T16:19:56.819918028Z [err]  	          AND active = 1
2026-01-06T16:19:56.819921917Z [err]  2026-01-06 16:19:54.136 UTC [8744] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:19:56.819926666Z [err]  	          AND '16:19' BETWEEN open_time AND close_time
2026-01-06T16:19:56.819927452Z [err]  2026-01-06 16:19:54.136 UTC [8744] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:19:56.819935419Z [err]  	        LIMIT 1;
2026-01-06T16:19:56.819943213Z [err]  	        
2026-01-06T16:19:56.930555841Z [err]  2026-01-06 16:19:54.136 UTC [8744] STATEMENT:  
2026-01-06T16:19:56.930564857Z [err]  	        SELECT event
2026-01-06T16:19:56.930574131Z [err]  	        FROM event_config
2026-01-06T16:19:56.930583378Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:19:56.930590622Z [err]  	          AND active = 1
2026-01-06T16:19:56.930596414Z [err]  	          AND '16:19' BETWEEN open_time AND close_time
2026-01-06T16:19:56.930603584Z [err]  	        LIMIT 1;
2026-01-06T16:19:56.930611033Z [err]  	        
2026-01-06T16:19:56.930618460Z [err]  2026-01-06 16:19:55.371 UTC [8746] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:19:56.930624375Z [err]  2026-01-06 16:19:55.371 UTC [8746] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:19:56.930629834Z [err]  2026-01-06 16:19:55.371 UTC [8746] STATEMENT:  
2026-01-06T16:19:56.930636006Z [err]  	        SELECT event
2026-01-06T16:19:56.930642183Z [err]  	        FROM event_config
2026-01-06T16:19:56.930648363Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:19:56.930655289Z [err]  	          AND active = 1
2026-01-06T16:19:56.930668246Z [err]  	          AND '16:19' BETWEEN open_time AND close_time
2026-01-06T16:19:56.930674914Z [err]  	        LIMIT 1;
2026-01-06T16:19:56.930682385Z [err]  	        
2026-01-06T16:19:56.930688906Z [err]  2026-01-06 16:19:55.949 UTC [8748] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:19:56.930697674Z [err]  2026-01-06 16:19:55.949 UTC [8748] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:19:56.930705376Z [err]  2026-01-06 16:19:55.949 UTC [8748] STATEMENT:  
2026-01-06T16:19:56.930712462Z [err]  	        SELECT event
2026-01-06T16:19:56.930719218Z [err]  	        FROM event_config
2026-01-06T16:19:56.934089690Z [err]  	        LIMIT 1;
2026-01-06T16:19:56.934096993Z [err]  	        
2026-01-06T16:19:56.934099024Z [err]  	        
2026-01-06T16:19:56.934101086Z [err]  2026-01-06 16:19:56.794 UTC [8752] STATEMENT:  
2026-01-06T16:19:56.934107496Z [err]  2026-01-06 16:19:56.794 UTC [8752] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:19:56.934108006Z [err]  2026-01-06 16:19:56.396 UTC [8750] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:19:56.934114486Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:19:56.934114832Z [err]  	        SELECT event
2026-01-06T16:19:56.934117245Z [err]  2026-01-06 16:19:56.396 UTC [8750] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:19:56.934118063Z [err]  2026-01-06 16:19:56.794 UTC [8752] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:19:56.934120613Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:19:56.934125093Z [err]  	        FROM event_config
2026-01-06T16:19:56.934127346Z [err]  2026-01-06 16:19:56.396 UTC [8750] STATEMENT:  
2026-01-06T16:19:56.934132213Z [err]  	          AND active = 1
2026-01-06T16:19:56.934139350Z [err]  	        SELECT event
2026-01-06T16:19:56.934141182Z [err]  	          AND '16:19' BETWEEN open_time AND close_time
2026-01-06T16:19:56.934149501Z [err]  	        FROM event_config
2026-01-06T16:19:56.934155570Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:19:56.934162378Z [err]  	          AND active = 1
2026-01-06T16:19:56.934170282Z [err]  	          AND '16:19' BETWEEN open_time AND close_time
2026-01-06T16:19:56.934177923Z [err]  	        LIMIT 1;
2026-01-06T16:19:56.934518434Z [err]  	          AND active = 1
2026-01-06T16:19:56.934529631Z [err]  	          AND '16:19' BETWEEN open_time AND close_time
2026-01-06T16:19:56.942929415Z [err]  	        LIMIT 1;
2026-01-06T16:19:56.942938978Z [err]  	        
2026-01-06T16:19:57.737633140Z [inf]  ðŸ“¨ 27848022991: 6km 47:21 SBK03E
2026-01-06T16:19:58.002608885Z [inf]  INFO:     100.64.0.4:11268 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:19:58.002621805Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:19:58.002629842Z [err]  Traceback (most recent call last):
2026-01-06T16:19:58.002637389Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:19:58.002646638Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:19:58.002654480Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:58.002660234Z [err]          self.scope, self.receive, self.send
2026-01-06T16:19:58.002665462Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:58.002670714Z [err]      )
2026-01-06T16:19:58.002676457Z [err]      ^
2026-01-06T16:19:58.002681396Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:19:58.002686495Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:19:58.002692553Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:58.002697774Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:19:58.002702857Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:19:58.002708309Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:19:58.002713467Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:19:58.002719331Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:19:58.002725103Z [err]      raise exc
2026-01-06T16:19:58.002730126Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:19:58.003583127Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:19:58.003594434Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:19:58.003602227Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:19:58.003606882Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:19:58.003610840Z [err]      raise exc
2026-01-06T16:19:58.003615205Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:19:58.003619119Z [err]      await app(scope, receive, sender)
2026-01-06T16:19:58.003623210Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:19:58.003627080Z [err]      await self.app(scope, receive, send)
2026-01-06T16:19:58.003631494Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:19:58.003635595Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:19:58.003639391Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:19:58.003644258Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:19:58.003648077Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:19:58.003652112Z [err]      await self.app(scope, receive, send)
2026-01-06T16:19:58.003655830Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:19:58.003660230Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:19:58.003664860Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:19:58.004886092Z [err]      raise exc
2026-01-06T16:19:58.004894514Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:19:58.004904580Z [err]      await app(scope, receive, sender)
2026-01-06T16:19:58.004911317Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:19:58.004917321Z [err]      response = await f(request)
2026-01-06T16:19:58.004923543Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:19:58.004929640Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:19:58.004936296Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:19:58.004942857Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:58.004950107Z [err]      ...<3 lines>...
2026-01-06T16:19:58.004955698Z [err]      )
2026-01-06T16:19:58.004961920Z [err]      ^
2026-01-06T16:19:58.004967551Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:19:58.004973412Z [err]      return await dependant.call(**values)
2026-01-06T16:19:58.004979492Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:58.004985965Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:19:58.004994379Z [err]      event = get_active_event()
2026-01-06T16:19:58.005000728Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:19:58.005006868Z [err]      cur.execute(
2026-01-06T16:19:58.005013914Z [err]      ~~~~~~~~~~~^
2026-01-06T16:19:58.005020342Z [err]          """
2026-01-06T16:19:58.005026702Z [err]          ^^^
2026-01-06T16:19:58.005034753Z [err]      ...<7 lines>...
2026-01-06T16:19:58.005041553Z [err]          (day_of_week, current_time),
2026-01-06T16:19:58.005047242Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:58.005607934Z [err]      )
2026-01-06T16:19:58.005614404Z [err]      ^
2026-01-06T16:19:58.005619062Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:19:58.005623790Z [err]      return super().execute(query, vars)
2026-01-06T16:19:58.005628103Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:19:58.005632920Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:19:58.005636695Z [err]  LINE 5:           AND active = 1
2026-01-06T16:19:58.005642333Z [err]                               ^
2026-01-06T16:19:58.005646341Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:19:58.005650192Z [err]  
2026-01-06T16:19:58.997949606Z [err]  2026-01-06 16:19:57.992 UTC [8754] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:19:58.997955835Z [err]  2026-01-06 16:19:57.992 UTC [8754] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:19:58.997964203Z [err]  2026-01-06 16:19:57.992 UTC [8754] STATEMENT:  
2026-01-06T16:19:58.997970358Z [err]  	        SELECT event
2026-01-06T16:19:58.997977043Z [err]  	        FROM event_config
2026-01-06T16:19:58.997982983Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:19:58.997988799Z [err]  	          AND active = 1
2026-01-06T16:19:58.997995622Z [err]  	          AND '16:19' BETWEEN open_time AND close_time
2026-01-06T16:19:58.998007631Z [err]  	        LIMIT 1;
2026-01-06T16:19:58.998014640Z [err]  	        
2026-01-06T16:19:59.558116504Z [inf]  ðŸ“¨ 27848022991: 6km 47:21 SBK03E
2026-01-06T16:19:59.700118632Z [inf]  INFO:     100.64.0.5:56682 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:19:59.706002724Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:19:59.706009095Z [err]  Traceback (most recent call last):
2026-01-06T16:19:59.706010699Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:19:59.706013581Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:19:59.706017311Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:19:59.706025960Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:19:59.706054733Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:59.706061089Z [err]          self.scope, self.receive, self.send
2026-01-06T16:19:59.706065475Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:59.706069242Z [err]      )
2026-01-06T16:19:59.706072575Z [err]      ^
2026-01-06T16:19:59.706076053Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:19:59.706081506Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:19:59.706085217Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:59.706088892Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:19:59.706093450Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:19:59.706097455Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:19:59.706103539Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:19:59.706107976Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:19:59.706111985Z [err]      raise exc
2026-01-06T16:19:59.707692203Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:19:59.707701779Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:19:59.707709034Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:19:59.707715764Z [err]      raise exc
2026-01-06T16:19:59.707722527Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:19:59.707729381Z [err]      await app(scope, receive, sender)
2026-01-06T16:19:59.707735992Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:19:59.707742762Z [err]      await self.app(scope, receive, send)
2026-01-06T16:19:59.707748971Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:19:59.707754919Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:19:59.707760503Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:19:59.707766147Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:19:59.707772571Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:19:59.707778947Z [err]      await self.app(scope, receive, send)
2026-01-06T16:19:59.707787340Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:19:59.707795060Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:19:59.707802913Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:19:59.707809375Z [err]      raise exc
2026-01-06T16:19:59.707974343Z [err]          """
2026-01-06T16:19:59.707984506Z [err]      event = get_active_event()
2026-01-06T16:19:59.707987422Z [err]          ^^^
2026-01-06T16:19:59.707987918Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:19:59.708000437Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:19:59.708001659Z [err]      ...<7 lines>...
2026-01-06T16:19:59.708010541Z [err]      return await dependant.call(**values)
2026-01-06T16:19:59.708012697Z [err]      await app(scope, receive, sender)
2026-01-06T16:19:59.708014047Z [err]      cur.execute(
2026-01-06T16:19:59.708015797Z [err]          (day_of_week, current_time),
2026-01-06T16:19:59.708024552Z [err]      ...<3 lines>...
2026-01-06T16:19:59.708026423Z [err]      ~~~~~~~~~~~^
2026-01-06T16:19:59.708029395Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:59.708032466Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:19:59.708032490Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:59.708041657Z [err]      )
2026-01-06T16:19:59.708046604Z [err]      response = await f(request)
2026-01-06T16:19:59.708046754Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:19:59.708054145Z [err]      ^
2026-01-06T16:19:59.708059532Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:19:59.708065177Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:19:59.708073929Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:19:59.708083693Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:19:59.708090915Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:19:59.708542346Z [err]      )
2026-01-06T16:19:59.708550650Z [err]      ^
2026-01-06T16:19:59.708557626Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:19:59.708564985Z [err]      return super().execute(query, vars)
2026-01-06T16:19:59.708571718Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:19:59.708578502Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:19:59.708584637Z [err]  LINE 5:           AND active = 1
2026-01-06T16:19:59.708591621Z [err]                               ^
2026-01-06T16:19:59.708597924Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:19:59.708605805Z [err]  
2026-01-06T16:19:59.708613165Z [inf]  ðŸ“¨ 27735540803: Hi
2026-01-06T16:19:59.851564769Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T16:19:59.851571361Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T16:19:59.851581770Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T16:19:59.895151312Z [err]  2026-01-06 16:19:59.694 UTC [8756] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:19:59.895161081Z [err]  2026-01-06 16:19:59.694 UTC [8756] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:19:59.895173649Z [err]  2026-01-06 16:19:59.694 UTC [8756] STATEMENT:  
2026-01-06T16:19:59.895184875Z [err]  	        SELECT event
2026-01-06T16:19:59.895194611Z [err]  	        FROM event_config
2026-01-06T16:19:59.895203507Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:19:59.895212206Z [err]  	          AND active = 1
2026-01-06T16:19:59.895222805Z [err]  	          AND '16:19' BETWEEN open_time AND close_time
2026-01-06T16:19:59.895232988Z [err]  	        LIMIT 1;
2026-01-06T16:19:59.895242133Z [err]  	        
2026-01-06T16:20:00.517211365Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T16:20:00.517223753Z [inf]  ðŸ“¤ Status: 200
2026-01-06T16:20:00.517231554Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27735540803","wa_id":"27735540803"}],"messages":[{"id":"wamid.HBgLMjc3MzU1NDA4MDMVAgARGBI5MzM0OTdBREE1OUZDQTBCRjcA"}]}
2026-01-06T16:20:00.517238293Z [inf]  INFO:     100.64.0.6:22176 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:20:02.002551697Z [inf]  INFO:     100.64.0.6:22176 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:20:02.350991477Z [inf]  INFO:     100.64.0.5:56694 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:20:02.863873403Z [inf]  ðŸ“¨ 27738870757: 4km 25:30 SBK03E
2026-01-06T16:20:03.144232861Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:20:03.144236182Z [inf]  INFO:     100.64.0.2:11594 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:20:03.144242852Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:20:03.144246410Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:20:03.144249659Z [err]  Traceback (most recent call last):
2026-01-06T16:20:03.144255005Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:20:03.144255965Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:20:03.144261965Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:20:03.144268181Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:20:03.144270677Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:20:03.144272972Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:20:03.144278034Z [err]          self.scope, self.receive, self.send
2026-01-06T16:20:03.144280312Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:20:03.144284233Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:20:03.144288019Z [err]      raise exc
2026-01-06T16:20:03.144289767Z [err]      )
2026-01-06T16:20:03.144294801Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:20:03.144296163Z [err]      ^
2026-01-06T16:20:03.144301442Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:20:03.144305262Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:20:03.145410770Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:20:03.145417082Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:20:03.145422180Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:20:03.145422303Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:20:03.145426159Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:20:03.145431013Z [err]      raise exc
2026-01-06T16:20:03.145433500Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:20:03.145436514Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:20:03.145441931Z [err]      await app(scope, receive, sender)
2026-01-06T16:20:03.145443803Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:20:03.145447330Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:20:03.145451172Z [err]      await self.app(scope, receive, send)
2026-01-06T16:20:03.145455840Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:20:03.145459912Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:20:03.145463763Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:20:03.145467979Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:20:03.145472041Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:20:03.145475938Z [err]      await self.app(scope, receive, send)
2026-01-06T16:20:03.147190455Z [err]      raise exc
2026-01-06T16:20:03.147197560Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:20:03.147203667Z [err]      await app(scope, receive, sender)
2026-01-06T16:20:03.147215372Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:20:03.147222571Z [err]      response = await f(request)
2026-01-06T16:20:03.147229215Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:20:03.147236171Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:20:03.147242180Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:20:03.147250175Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:20:03.147256168Z [err]      ...<3 lines>...
2026-01-06T16:20:03.147262060Z [err]      )
2026-01-06T16:20:03.147268198Z [err]      ^
2026-01-06T16:20:03.147273689Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:20:03.147281481Z [err]      return await dependant.call(**values)
2026-01-06T16:20:03.147288769Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:20:03.147295288Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:20:03.147301493Z [err]      event = get_active_event()
2026-01-06T16:20:03.147307813Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:20:03.147314188Z [err]      cur.execute(
2026-01-06T16:20:03.147319416Z [err]      ~~~~~~~~~~~^
2026-01-06T16:20:03.147325853Z [err]          """
2026-01-06T16:20:03.147331330Z [err]          ^^^
2026-01-06T16:20:03.147338197Z [err]      ...<7 lines>...
2026-01-06T16:20:03.147344318Z [err]          (day_of_week, current_time),
2026-01-06T16:20:03.147350668Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:20:03.148359746Z [err]      )
2026-01-06T16:20:03.148367700Z [err]      ^
2026-01-06T16:20:03.148375068Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:20:03.148375553Z [err]  LINE 5:           AND active = 1
2026-01-06T16:20:03.148381946Z [err]      return super().execute(query, vars)
2026-01-06T16:20:03.148384958Z [err]                               ^
2026-01-06T16:20:03.148389590Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:20:03.148391817Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:20:03.148397408Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:20:03.148398208Z [err]  
2026-01-06T16:20:03.607699187Z [err]  2026-01-06 16:20:03.135 UTC [8760] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:20:03.607717557Z [err]  2026-01-06 16:20:03.135 UTC [8760] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:20:03.607730285Z [err]  2026-01-06 16:20:03.135 UTC [8760] STATEMENT:  
2026-01-06T16:20:03.607739044Z [err]  	        SELECT event
2026-01-06T16:20:03.607748221Z [err]  	        FROM event_config
2026-01-06T16:20:03.607757988Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:20:03.607765289Z [err]  	          AND active = 1
2026-01-06T16:20:03.607773038Z [err]  	          AND '16:20' BETWEEN open_time AND close_time
2026-01-06T16:20:03.607779578Z [err]  	        LIMIT 1;
2026-01-06T16:20:03.607796238Z [err]  	        
2026-01-06T16:20:11.197787361Z [inf]  ðŸ“¨ 27735540803: Runner
2026-01-06T16:20:11.419024621Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T16:20:11.419033845Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T16:20:11.419109204Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T16:20:12.027146322Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T16:20:12.027151887Z [inf]  ðŸ“¤ Status: 200
2026-01-06T16:20:12.027156880Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27735540803","wa_id":"27735540803"}],"messages":[{"id":"wamid.HBgLMjc3MzU1NDA4MDMVAgARGBJEOEREREFDNkEzRTQ2MEJGOTEA"}]}
2026-01-06T16:20:12.029295590Z [inf]  INFO:     100.64.0.2:21180 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:20:12.758357240Z [inf]  INFO:     100.64.0.5:52322 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:20:13.205108378Z [inf]  INFO:     100.64.0.7:49048 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:20:16.278351809Z [inf]  ðŸ“¨ 27824481323: 8km 39:03 SBK03E
2026-01-06T16:20:16.536515229Z [inf]  INFO:     100.64.0.2:21180 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:20:16.543088695Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:20:16.543090056Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:20:16.543095220Z [err]  Traceback (most recent call last):
2026-01-06T16:20:16.543099671Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:20:16.543101176Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:20:16.543106188Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:20:16.543107951Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:20:16.543114260Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:20:16.543114479Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:20:16.543119676Z [err]          self.scope, self.receive, self.send
2026-01-06T16:20:16.543121661Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:20:16.543124688Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:20:16.543129266Z [err]      raise exc
2026-01-06T16:20:16.543130126Z [err]      )
2026-01-06T16:20:16.543135899Z [err]      ^
2026-01-06T16:20:16.543137066Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:20:16.543141304Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:20:16.543145813Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:20:16.543146245Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:20:16.543150428Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:20:16.544407488Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:20:16.544411074Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:20:16.544415670Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:20:16.544419920Z [err]      raise exc
2026-01-06T16:20:16.544423932Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:20:16.544446937Z [err]      await app(scope, receive, sender)
2026-01-06T16:20:16.544451596Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:20:16.544455314Z [err]      await self.app(scope, receive, send)
2026-01-06T16:20:16.544459689Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:20:16.544464987Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:20:16.544468567Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:20:16.544472106Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:20:16.544476359Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:20:16.544480139Z [err]      await self.app(scope, receive, send)
2026-01-06T16:20:16.544483804Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:20:16.544487527Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:20:16.544491336Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:20:16.544496227Z [err]      raise exc
2026-01-06T16:20:16.545803612Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:20:16.545809431Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:20:16.545812271Z [err]      event = get_active_event()
2026-01-06T16:20:16.545816103Z [err]      await app(scope, receive, sender)
2026-01-06T16:20:16.545820970Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:20:16.545823308Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:20:16.545826162Z [err]      response = await f(request)
2026-01-06T16:20:16.545830942Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:20:16.545847217Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:20:16.545853158Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:20:16.545855987Z [err]      cur.execute(
2026-01-06T16:20:16.545860197Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:20:16.545865998Z [err]      ...<3 lines>...
2026-01-06T16:20:16.545866838Z [err]      ~~~~~~~~~~~^
2026-01-06T16:20:16.545870629Z [err]      )
2026-01-06T16:20:16.545875249Z [err]      ^
2026-01-06T16:20:16.545877900Z [err]          """
2026-01-06T16:20:16.545880914Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:20:16.545885387Z [err]      return await dependant.call(**values)
2026-01-06T16:20:16.545889128Z [err]          ^^^
2026-01-06T16:20:16.545891495Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:20:16.545901389Z [err]      ...<7 lines>...
2026-01-06T16:20:16.545911776Z [err]          (day_of_week, current_time),
2026-01-06T16:20:16.545923520Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:20:16.547217505Z [err]      )
2026-01-06T16:20:16.547226442Z [err]      ^
2026-01-06T16:20:16.547231291Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:20:16.547241992Z [err]      return super().execute(query, vars)
2026-01-06T16:20:16.547246427Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:20:16.547250579Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:20:16.547254394Z [err]  LINE 5:           AND active = 1
2026-01-06T16:20:16.547258250Z [err]                               ^
2026-01-06T16:20:16.547262316Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:20:16.547266815Z [err]  
2026-01-06T16:20:22.916646144Z [err]  	          AND '16:20' BETWEEN open_time AND close_time
2026-01-06T16:20:22.916654237Z [err]  	        FROM event_config
2026-01-06T16:20:22.916656150Z [err]  2026-01-06 16:20:16.531 UTC [8763] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:20:22.916656258Z [err]  	        LIMIT 1;
2026-01-06T16:20:22.916662635Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:20:22.916666193Z [err]  2026-01-06 16:20:16.531 UTC [8763] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:20:22.916666926Z [err]  	        
2026-01-06T16:20:22.916670580Z [err]  	          AND active = 1
2026-01-06T16:20:22.916674290Z [err]  2026-01-06 16:20:16.531 UTC [8763] STATEMENT:  
2026-01-06T16:20:22.916681612Z [err]  	        SELECT event
2026-01-06T16:20:42.454609084Z [err]  2026-01-06 16:20:42.193 UTC [8766] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:20:42.454615833Z [err]  2026-01-06 16:20:42.193 UTC [8766] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:20:42.454629185Z [err]  2026-01-06 16:20:42.193 UTC [8766] STATEMENT:  
2026-01-06T16:20:42.454636086Z [err]  	        SELECT event
2026-01-06T16:20:42.454645955Z [err]  	        FROM event_config
2026-01-06T16:20:42.454652821Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:20:42.454659266Z [err]  	          AND active = 1
2026-01-06T16:20:42.454665361Z [err]  	          AND '16:20' BETWEEN open_time AND close_time
2026-01-06T16:20:42.454674048Z [err]  	        LIMIT 1;
2026-01-06T16:20:42.454679680Z [err]  	        
2026-01-06T16:20:43.654897091Z [err]  2026-01-06 16:20:43.115 UTC [8768] STATEMENT:  
2026-01-06T16:20:43.654904758Z [err]  	        SELECT event
2026-01-06T16:20:43.654912356Z [err]  	        FROM event_config
2026-01-06T16:20:43.654915652Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:20:43.654922549Z [err]  	          AND active = 1
2026-01-06T16:20:43.654929655Z [err]  	          AND '16:20' BETWEEN open_time AND close_time
2026-01-06T16:20:43.654937866Z [err]  	        LIMIT 1;
2026-01-06T16:20:43.654944537Z [err]  	        
2026-01-06T16:20:43.654953596Z [err]  2026-01-06 16:20:43.115 UTC [8768] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:20:43.654960476Z [err]  2026-01-06 16:20:43.115 UTC [8768] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:20:44.715784982Z [err]  	          AND '16:20' BETWEEN open_time AND close_time
2026-01-06T16:20:44.715798501Z [err]  	        LIMIT 1;
2026-01-06T16:20:44.715801602Z [err]  2026-01-06 16:20:43.863 UTC [8770] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:20:44.715809227Z [err]  2026-01-06 16:20:43.863 UTC [8770] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:20:44.715809791Z [err]  	        
2026-01-06T16:20:44.715815541Z [err]  2026-01-06 16:20:43.863 UTC [8770] STATEMENT:  
2026-01-06T16:20:44.715820673Z [err]  	        SELECT event
2026-01-06T16:20:44.715825898Z [err]  	        FROM event_config
2026-01-06T16:20:44.715832248Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:20:44.715837289Z [err]  	          AND active = 1
2026-01-06T16:20:46.496275415Z [inf]  ðŸ“¨ 27735540803: 8km 39:18 SBK03E
2026-01-06T16:20:46.496284366Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:20:46.496286932Z [inf]  INFO:     100.64.0.4:11070 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:20:46.496295134Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:20:46.496296394Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:20:46.496303475Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:20:46.496305575Z [err]  Traceback (most recent call last):
2026-01-06T16:20:46.496310649Z [err]      raise exc
2026-01-06T16:20:46.496317538Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:20:46.496317832Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:20:46.496327018Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:20:46.496335236Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:20:46.496342119Z [err]          self.scope, self.receive, self.send
2026-01-06T16:20:46.496349224Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:20:46.496356095Z [err]      )
2026-01-06T16:20:46.496362931Z [err]      ^
2026-01-06T16:20:46.496369766Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:20:46.496376702Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:20:46.496385222Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:20:46.496392164Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:20:46.496398948Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:20:46.496727729Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:20:46.496734955Z [err]      await self.app(scope, receive, send)
2026-01-06T16:20:46.496735144Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:20:46.496740497Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:20:46.496745049Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:20:46.496745926Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:20:46.496752268Z [err]      raise exc
2026-01-06T16:20:46.496755156Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:20:46.496757254Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:20:46.496762048Z [err]      await app(scope, receive, sender)
2026-01-06T16:20:46.496763454Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:20:46.496767779Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:20:46.496771634Z [err]      await self.app(scope, receive, send)
2026-01-06T16:20:46.496775427Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:20:46.496779086Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:20:46.496782828Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:20:46.496786590Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:20:46.496790425Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:20:46.498298562Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:20:46.498302996Z [err]      raise exc
2026-01-06T16:20:46.498308949Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:20:46.498314519Z [err]      ~~~~~~~~~~~^
2026-01-06T16:20:46.498314661Z [err]      return await dependant.call(**values)
2026-01-06T16:20:46.498315619Z [err]      await app(scope, receive, sender)
2026-01-06T16:20:46.498321636Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:20:46.498322947Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:20:46.498326602Z [err]          """
2026-01-06T16:20:46.498329636Z [err]      response = await f(request)
2026-01-06T16:20:46.498331052Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:20:46.498336716Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:20:46.498337192Z [err]          ^^^
2026-01-06T16:20:46.498339408Z [err]      event = get_active_event()
2026-01-06T16:20:46.498342654Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:20:46.498346990Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:20:46.498347314Z [err]      ...<7 lines>...
2026-01-06T16:20:46.498348904Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:20:46.498355542Z [err]      cur.execute(
2026-01-06T16:20:46.498357324Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:20:46.498362849Z [err]      ...<3 lines>...
2026-01-06T16:20:46.498365376Z [err]          (day_of_week, current_time),
2026-01-06T16:20:46.498369166Z [err]      )
2026-01-06T16:20:46.498373286Z [err]      ^
2026-01-06T16:20:46.498377115Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:20:46.499140901Z [err]      )
2026-01-06T16:20:46.499144119Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:20:46.499150431Z [err]      ^
2026-01-06T16:20:46.499153972Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:20:46.499158450Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:20:46.499164053Z [err]      return super().execute(query, vars)
2026-01-06T16:20:46.499167796Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:20:46.499171637Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:20:46.499175191Z [err]  LINE 5:           AND active = 1
2026-01-06T16:20:46.499179046Z [err]                               ^
2026-01-06T16:20:46.499182651Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:20:46.499186392Z [err]  
2026-01-06T16:20:46.499190046Z [inf]  ðŸ“¨ 27735540803: 8km 39:18 SBK03E
2026-01-06T16:20:46.499193763Z [inf]  INFO:     100.64.0.9:27802 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:20:46.499197314Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:20:46.499201061Z [err]  Traceback (most recent call last):
2026-01-06T16:20:46.499205441Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:20:46.499209215Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:20:46.499212585Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:20:46.499216261Z [err]          self.scope, self.receive, self.send
2026-01-06T16:20:46.499220669Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:20:46.499224128Z [err]      )
2026-01-06T16:20:46.499227379Z [err]      ^
2026-01-06T16:20:46.500283250Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:20:46.500291192Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:20:46.500296943Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:20:46.500303352Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:20:46.500309232Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:20:46.500315359Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:20:46.500321282Z [err]      raise exc
2026-01-06T16:20:46.500328791Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:20:46.500334072Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:20:46.500340720Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:20:46.500346720Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:20:46.500352063Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:20:46.500357433Z [err]      raise exc
2026-01-06T16:20:46.500362623Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:20:46.500367774Z [err]      await app(scope, receive, sender)
2026-01-06T16:20:46.500374059Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:20:46.500381261Z [err]      await self.app(scope, receive, send)
2026-01-06T16:20:46.500386793Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:20:46.501276119Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:20:46.501277317Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:20:46.501282848Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:20:46.501284100Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:20:46.501289186Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:20:46.501289832Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:20:46.501294120Z [err]      ...<3 lines>...
2026-01-06T16:20:46.501295212Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:20:46.501299302Z [err]      )
2026-01-06T16:20:46.501301243Z [err]      await self.app(scope, receive, send)
2026-01-06T16:20:46.501305179Z [err]      ^
2026-01-06T16:20:46.501307212Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:20:46.501310613Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:20:46.501312854Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:20:46.501316623Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:20:46.501320946Z [err]      raise exc
2026-01-06T16:20:46.501324867Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:20:46.501328624Z [err]      await app(scope, receive, sender)
2026-01-06T16:20:46.501332229Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:20:46.501335892Z [err]      response = await f(request)
2026-01-06T16:20:46.501339619Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:20:46.502554484Z [err]      return await dependant.call(**values)
2026-01-06T16:20:46.502559070Z [err]                               ^
2026-01-06T16:20:46.502566276Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:20:46.502570672Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:20:46.502581083Z [err]  
2026-01-06T16:20:46.502588034Z [inf]  ðŸ“¨ 27735540803: 8km 39:18 SBK03E
2026-01-06T16:20:46.502594756Z [inf]  INFO:     100.64.0.5:56600 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:20:46.502602136Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:20:46.502618854Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:20:46.502624833Z [err]      event = get_active_event()
2026-01-06T16:20:46.502629314Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:20:46.502633178Z [err]      cur.execute(
2026-01-06T16:20:46.502636775Z [err]      ~~~~~~~~~~~^
2026-01-06T16:20:46.502640807Z [err]          """
2026-01-06T16:20:46.502646245Z [err]          ^^^
2026-01-06T16:20:46.502650296Z [err]      ...<7 lines>...
2026-01-06T16:20:46.502654587Z [err]          (day_of_week, current_time),
2026-01-06T16:20:46.502658243Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:20:46.502662512Z [err]      )
2026-01-06T16:20:46.502666802Z [err]      ^
2026-01-06T16:20:46.502670861Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:20:46.502674748Z [err]      return super().execute(query, vars)
2026-01-06T16:20:46.502678406Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:20:46.502682485Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:20:46.502686159Z [err]  LINE 5:           AND active = 1
2026-01-06T16:20:46.503604511Z [err]  Traceback (most recent call last):
2026-01-06T16:20:46.503612698Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:20:46.503620363Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:20:46.503628003Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:20:46.503634714Z [err]          self.scope, self.receive, self.send
2026-01-06T16:20:46.503641717Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:20:46.503646786Z [err]      )
2026-01-06T16:20:46.503653301Z [err]      ^
2026-01-06T16:20:46.503658270Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:20:46.503662700Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:20:46.503666435Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:20:46.503670014Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:20:46.503674800Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:20:46.503678403Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:20:46.503682717Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:20:46.503687408Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:20:46.503693354Z [err]      raise exc
2026-01-06T16:20:46.503699163Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:20:46.503705124Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:20:46.503711991Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:20:46.504434739Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:20:46.504435662Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:20:46.504442907Z [err]      raise exc
2026-01-06T16:20:46.504444875Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:20:46.504445351Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:20:46.504449511Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:20:46.504454802Z [err]      raise exc
2026-01-06T16:20:46.504456157Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:20:46.504463008Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:20:46.504465347Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:20:46.504468687Z [err]      await app(scope, receive, sender)
2026-01-06T16:20:46.504473537Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:20:46.504476867Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:20:46.504478395Z [err]      await self.app(scope, receive, send)
2026-01-06T16:20:46.504484961Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:20:46.504485365Z [err]      await self.app(scope, receive, send)
2026-01-06T16:20:46.504490098Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:20:46.504499545Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:20:46.505555631Z [err]      await app(scope, receive, sender)
2026-01-06T16:20:46.505561785Z [err]          ^^^
2026-01-06T16:20:46.505562686Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:20:46.505564912Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:20:46.505570724Z [err]      ...<7 lines>...
2026-01-06T16:20:46.505572846Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:20:46.505573092Z [err]      response = await f(request)
2026-01-06T16:20:46.505579252Z [err]          (day_of_week, current_time),
2026-01-06T16:20:46.505581825Z [err]      event = get_active_event()
2026-01-06T16:20:46.505581919Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:20:46.505585785Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:20:46.505591398Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:20:46.505591404Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:20:46.505593086Z [err]      )
2026-01-06T16:20:46.505600113Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:20:46.505600787Z [err]      cur.execute(
2026-01-06T16:20:46.505601748Z [err]      ^
2026-01-06T16:20:46.505608075Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:20:46.505609024Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:20:46.505609535Z [err]      ~~~~~~~~~~~^
2026-01-06T16:20:46.505615522Z [err]      ...<3 lines>...
2026-01-06T16:20:46.505617635Z [err]          """
2026-01-06T16:20:46.505621785Z [err]      )
2026-01-06T16:20:46.505627752Z [err]      ^
2026-01-06T16:20:46.505633971Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:20:46.505640675Z [err]      return await dependant.call(**values)
2026-01-06T16:20:46.506414432Z [err]      return super().execute(query, vars)
2026-01-06T16:20:46.506415576Z [err]      )
2026-01-06T16:20:46.506417269Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:20:46.506423349Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:20:46.506425079Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:20:46.506425095Z [err]      ^
2026-01-06T16:20:46.506427624Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:20:46.506432037Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:20:46.506434708Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:20:46.506435092Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:20:46.506441673Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:20:46.506443599Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:20:46.506443607Z [err]  LINE 5:           AND active = 1
2026-01-06T16:20:46.506449295Z [err]          self.scope, self.receive, self.send
2026-01-06T16:20:46.506451864Z [err]                               ^
2026-01-06T16:20:46.506458949Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:20:46.506459975Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:20:46.506466729Z [err]  
2026-01-06T16:20:46.506472946Z [inf]  ðŸ“¨ 27735540803: 8km 39:18 SBK03E
2026-01-06T16:20:46.506479313Z [inf]  INFO:     100.64.0.2:11510 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:20:46.506490912Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:20:46.506498244Z [err]  Traceback (most recent call last):
2026-01-06T16:20:46.507391899Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:20:46.507399765Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:20:46.507400725Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:20:46.507405987Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:20:46.507406187Z [err]      await app(scope, receive, sender)
2026-01-06T16:20:46.507412377Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:20:46.507413005Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:20:46.507416557Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:20:46.507419835Z [err]      await self.app(scope, receive, send)
2026-01-06T16:20:46.507421886Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:20:46.507424509Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:20:46.507430740Z [err]      raise exc
2026-01-06T16:20:46.507431073Z [err]      raise exc
2026-01-06T16:20:46.507435769Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:20:46.507438009Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:20:46.507440179Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:20:46.507444247Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:20:46.507446094Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:20:46.508165973Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:20:46.508174645Z [err]      )
2026-01-06T16:20:46.508176009Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:20:46.508184799Z [err]      await self.app(scope, receive, send)
2026-01-06T16:20:46.508186048Z [err]      ^
2026-01-06T16:20:46.508195189Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:20:46.508195553Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:20:46.508204871Z [err]      return await dependant.call(**values)
2026-01-06T16:20:46.508205378Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:20:46.508213869Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:20:46.508220641Z [err]      raise exc
2026-01-06T16:20:46.508221591Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:20:46.508228104Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:20:46.508233042Z [err]      await app(scope, receive, sender)
2026-01-06T16:20:46.508236803Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:20:46.508242060Z [err]      response = await f(request)
2026-01-06T16:20:46.508245693Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:20:46.508250007Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:20:46.508253285Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:20:46.508256637Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:20:46.508266100Z [err]      ...<3 lines>...
2026-01-06T16:20:46.508970822Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:20:46.508977285Z [err]  LINE 5:           AND active = 1
2026-01-06T16:20:46.508978412Z [err]      event = get_active_event()
2026-01-06T16:20:46.508984791Z [err]                               ^
2026-01-06T16:20:46.508985542Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:20:46.508990215Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:20:46.508992223Z [err]      cur.execute(
2026-01-06T16:20:46.508995296Z [err]  
2026-01-06T16:20:46.508999687Z [err]      ~~~~~~~~~~~^
2026-01-06T16:20:46.509005038Z [err]          """
2026-01-06T16:20:46.509012756Z [err]          ^^^
2026-01-06T16:20:46.509018398Z [err]      ...<7 lines>...
2026-01-06T16:20:46.509023629Z [err]          (day_of_week, current_time),
2026-01-06T16:20:46.509029722Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:20:46.509034706Z [err]      )
2026-01-06T16:20:46.509058229Z [err]      ^
2026-01-06T16:20:46.509065106Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:20:46.509071089Z [err]      return super().execute(query, vars)
2026-01-06T16:20:46.509077242Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:20:46.509082359Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:20:46.820830205Z [err]  2026-01-06 16:20:45.942 UTC [8773] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:20:46.820837599Z [err]  2026-01-06 16:20:45.942 UTC [8773] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:20:46.820845633Z [err]  2026-01-06 16:20:45.942 UTC [8773] STATEMENT:  
2026-01-06T16:20:46.820853237Z [err]  	        SELECT event
2026-01-06T16:20:46.820860530Z [err]  	        FROM event_config
2026-01-06T16:20:46.820868430Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:20:46.820876228Z [err]  	          AND active = 1
2026-01-06T16:20:46.820884063Z [err]  	          AND '16:20' BETWEEN open_time AND close_time
2026-01-06T16:20:46.820891532Z [err]  	        LIMIT 1;
2026-01-06T16:20:46.820898527Z [err]  	        
2026-01-06T16:21:16.564971359Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:21:16.564983457Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:21:16.564995366Z [inf]  ðŸ“¨ 27735540803: 8km 39:18 SBK03E
2026-01-06T16:21:16.565002849Z [inf]  INFO:     100.64.0.7:41018 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:21:16.565010205Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:21:16.565015516Z [err]  Traceback (most recent call last):
2026-01-06T16:21:16.565019329Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:21:16.565023790Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:21:16.565028587Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:21:16.565041819Z [err]          self.scope, self.receive, self.send
2026-01-06T16:21:16.565046969Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:21:16.565051016Z [err]      )
2026-01-06T16:21:16.565054811Z [err]      ^
2026-01-06T16:21:16.565058375Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:21:16.565061305Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:21:16.565069351Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:21:16.565072915Z [err]      raise exc
2026-01-06T16:21:16.565074512Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:21:16.565078915Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:21:16.565084519Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:21:16.565087259Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:21:16.565800389Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:21:16.565805369Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:21:16.565810639Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:21:16.565814985Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:21:16.565819170Z [err]      raise exc
2026-01-06T16:21:16.565823488Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:21:16.565827965Z [err]      await app(scope, receive, sender)
2026-01-06T16:21:16.565852956Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:21:16.565858899Z [err]      await self.app(scope, receive, send)
2026-01-06T16:21:16.565863319Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:21:16.565868110Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:21:16.565872652Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:21:16.565877028Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:21:16.565880798Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:21:16.565884808Z [err]      await self.app(scope, receive, send)
2026-01-06T16:21:16.565888664Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:21:16.565893356Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:21:16.565897329Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:21:16.567230798Z [err]      raise exc
2026-01-06T16:21:16.567236135Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:21:16.567244206Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:21:16.567248577Z [err]      return await dependant.call(**values)
2026-01-06T16:21:16.567248805Z [err]      ...<3 lines>...
2026-01-06T16:21:16.567254203Z [err]      await app(scope, receive, sender)
2026-01-06T16:21:16.567257557Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:21:16.567259257Z [err]      )
2026-01-06T16:21:16.567264219Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:21:16.567266197Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:21:16.567271172Z [err]      ^
2026-01-06T16:21:16.567274385Z [err]      response = await f(request)
2026-01-06T16:21:16.567274888Z [err]      event = get_active_event()
2026-01-06T16:21:16.567275112Z [err]      ~~~~~~~~~~~^
2026-01-06T16:21:16.567282467Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:21:16.567282925Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:21:16.567284513Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:21:16.567289439Z [err]          """
2026-01-06T16:21:16.567291589Z [err]      cur.execute(
2026-01-06T16:21:16.567293772Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:21:16.567300257Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:21:16.567301177Z [err]          ^^^
2026-01-06T16:21:16.567304479Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:21:16.567312435Z [err]      ...<7 lines>...
2026-01-06T16:21:16.567321445Z [err]          (day_of_week, current_time),
2026-01-06T16:21:16.567990777Z [err]      )
2026-01-06T16:21:16.567996826Z [err]      ^
2026-01-06T16:21:16.568001630Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:21:16.568006282Z [err]      return super().execute(query, vars)
2026-01-06T16:21:16.568010820Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:21:16.568015415Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:21:16.568020625Z [err]  LINE 5:           AND active = 1
2026-01-06T16:21:16.568024977Z [err]                               ^
2026-01-06T16:21:16.568028970Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:21:16.568033607Z [err]  
2026-01-06T16:21:17.416780626Z [err]  	        
2026-01-06T16:21:17.416903066Z [err]  2026-01-06 16:21:08.572 UTC [8776] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:21:17.416911441Z [err]  2026-01-06 16:21:08.572 UTC [8776] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:21:17.416921767Z [err]  2026-01-06 16:21:08.572 UTC [8776] STATEMENT:  
2026-01-06T16:21:17.416927665Z [err]  	        SELECT event
2026-01-06T16:21:17.416934597Z [err]  	        FROM event_config
2026-01-06T16:21:17.416942277Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:21:17.416949377Z [err]  	          AND active = 1
2026-01-06T16:21:17.416956540Z [err]  	          AND '16:21' BETWEEN open_time AND close_time
2026-01-06T16:21:17.416963630Z [err]  	        LIMIT 1;
2026-01-06T16:21:20.942130082Z [inf]  INFO:     100.64.0.4:60708 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:21:37.810281894Z [err]  2026-01-06 16:21:36.776 UTC [8779] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:21:37.810289906Z [err]  2026-01-06 16:21:36.776 UTC [8779] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:21:37.810297267Z [err]  2026-01-06 16:21:36.776 UTC [8779] STATEMENT:  
2026-01-06T16:21:37.810316298Z [err]  	        SELECT event
2026-01-06T16:21:37.810325234Z [err]  	        FROM event_config
2026-01-06T16:21:37.810332034Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:21:37.810338720Z [err]  	          AND active = 1
2026-01-06T16:21:37.810345278Z [err]  	          AND '16:21' BETWEEN open_time AND close_time
2026-01-06T16:21:37.810353403Z [err]  	        LIMIT 1;
2026-01-06T16:21:37.810360711Z [err]  	        
2026-01-06T16:21:40.942357154Z [inf]  ðŸ“¨ 27829791864: 6km 28:35 Eben van Wyk SBK03E
2026-01-06T16:21:40.942366579Z [inf]  INFO:     100.64.0.2:54530 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:21:40.942369535Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:21:40.942376501Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:21:40.942384709Z [err]  Traceback (most recent call last):
2026-01-06T16:21:40.942388634Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:21:40.942395127Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:21:40.942405291Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:21:40.942408084Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:21:40.942420553Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:21:40.942422194Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:21:40.942437630Z [err]      raise exc
2026-01-06T16:21:40.942437962Z [err]          self.scope, self.receive, self.send
2026-01-06T16:21:40.942452400Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:21:40.942453876Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:21:40.942464851Z [err]      )
2026-01-06T16:21:40.942474277Z [err]      ^
2026-01-06T16:21:40.942481228Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:21:40.942486367Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:21:40.942490957Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:21:40.942495318Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:21:40.943632335Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:21:40.943643758Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:21:40.943648803Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:21:40.943655818Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:21:40.943662231Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:21:40.943667069Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:21:40.943675417Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:21:40.943679242Z [err]      await self.app(scope, receive, send)
2026-01-06T16:21:40.943689565Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:21:40.943690779Z [err]      raise exc
2026-01-06T16:21:40.943699935Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:21:40.943704396Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:21:40.943710771Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:21:40.943714917Z [err]      await app(scope, receive, sender)
2026-01-06T16:21:40.943722305Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:21:40.943730458Z [err]      await self.app(scope, receive, send)
2026-01-06T16:21:40.943739518Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:21:40.943747610Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:21:40.944711914Z [err]      raise exc
2026-01-06T16:21:40.944725840Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:21:40.944733933Z [err]      await app(scope, receive, sender)
2026-01-06T16:21:40.944742479Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:21:40.944749274Z [err]      response = await f(request)
2026-01-06T16:21:40.944756240Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:21:40.944761739Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:21:40.944767043Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:21:40.944772197Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:21:40.944778080Z [err]      ...<3 lines>...
2026-01-06T16:21:40.944783338Z [err]      )
2026-01-06T16:21:40.944788433Z [err]      ^
2026-01-06T16:21:40.944793909Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:21:40.944799021Z [err]      return await dependant.call(**values)
2026-01-06T16:21:40.944804099Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:21:40.944808492Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:21:40.944813362Z [err]      event = get_active_event()
2026-01-06T16:21:40.944818975Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:21:40.944824026Z [err]      cur.execute(
2026-01-06T16:21:40.944828559Z [err]      ~~~~~~~~~~~^
2026-01-06T16:21:40.944833290Z [err]          """
2026-01-06T16:21:40.944838389Z [err]          ^^^
2026-01-06T16:21:40.944842523Z [err]      ...<7 lines>...
2026-01-06T16:21:40.944848695Z [err]          (day_of_week, current_time),
2026-01-06T16:21:40.944853725Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:21:40.946140160Z [err]      )
2026-01-06T16:21:40.946147122Z [err]      ^
2026-01-06T16:21:40.946151837Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:21:40.946156693Z [err]      return super().execute(query, vars)
2026-01-06T16:21:40.946162926Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:21:40.946168142Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:21:40.946174063Z [err]  LINE 5:           AND active = 1
2026-01-06T16:21:40.946179053Z [err]                               ^
2026-01-06T16:21:40.946183685Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:21:40.946189660Z [err]  
2026-01-06T16:22:10.945687386Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:22:10.945701970Z [inf]  ðŸ“¨ 27722487698: 8km 35:29 SBK03E
2026-01-06T16:22:10.945708745Z [inf]  INFO:     100.64.0.7:29044 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:22:10.945715534Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:22:10.945722393Z [err]  Traceback (most recent call last):
2026-01-06T16:22:10.945729257Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:22:10.945736434Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:22:10.945742887Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:22:10.945747382Z [err]          self.scope, self.receive, self.send
2026-01-06T16:22:10.945751333Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:22:10.945755867Z [err]      )
2026-01-06T16:22:10.945759849Z [err]      ^
2026-01-06T16:22:10.945765251Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:22:10.945770190Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:22:10.945776073Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:22:10.945782461Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:22:10.945789829Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:22:10.945796839Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:22:10.945803134Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:22:10.945809615Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:22:10.945816699Z [err]      raise exc
2026-01-06T16:22:10.946931383Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:22:10.946941185Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:22:10.946948369Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:22:10.946950715Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:22:10.946957321Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:22:10.946959579Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:22:10.946962821Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:22:10.946968003Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:22:10.946970235Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:22:10.946977035Z [err]      raise exc
2026-01-06T16:22:10.946977377Z [err]      await self.app(scope, receive, send)
2026-01-06T16:22:10.946982967Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:22:10.946983194Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:22:10.946989402Z [err]      await app(scope, receive, sender)
2026-01-06T16:22:10.946990159Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:22:10.946995401Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:22:10.946996111Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:22:10.947000161Z [err]      await self.app(scope, receive, send)
2026-01-06T16:22:10.948176547Z [err]      raise exc
2026-01-06T16:22:10.948178537Z [err]          """
2026-01-06T16:22:10.948185211Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:22:10.948186330Z [err]          ^^^
2026-01-06T16:22:10.948192345Z [err]      await app(scope, receive, sender)
2026-01-06T16:22:10.948193606Z [err]      ...<7 lines>...
2026-01-06T16:22:10.948198840Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:22:10.948201148Z [err]      return await dependant.call(**values)
2026-01-06T16:22:10.948202760Z [err]          (day_of_week, current_time),
2026-01-06T16:22:10.948205850Z [err]      response = await f(request)
2026-01-06T16:22:10.948210003Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:22:10.948210095Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:22:10.948212628Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:22:10.948217095Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:22:10.948219813Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:22:10.948224435Z [err]      event = get_active_event()
2026-01-06T16:22:10.948227445Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:22:10.948231001Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:22:10.948236109Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:22:10.948237077Z [err]      cur.execute(
2026-01-06T16:22:10.948242935Z [err]      ...<3 lines>...
2026-01-06T16:22:10.948243117Z [err]      ~~~~~~~~~~~^
2026-01-06T16:22:10.948248535Z [err]      )
2026-01-06T16:22:10.948252382Z [err]      ^
2026-01-06T16:22:10.948256753Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:22:10.949206225Z [err]      )
2026-01-06T16:22:10.949211679Z [err]      ^
2026-01-06T16:22:10.949215816Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:22:10.949219877Z [err]      return super().execute(query, vars)
2026-01-06T16:22:10.949224124Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:22:10.949227798Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:22:10.949231653Z [err]  LINE 5:           AND active = 1
2026-01-06T16:22:10.949236404Z [err]                               ^
2026-01-06T16:22:10.949240021Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:22:10.949243771Z [err]  
2026-01-06T16:22:17.732524402Z [err]  2026-01-06 16:22:09.440 UTC [8783] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:22:17.732533187Z [err]  2026-01-06 16:22:09.440 UTC [8783] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:22:17.732541833Z [err]  2026-01-06 16:22:09.440 UTC [8783] STATEMENT:  
2026-01-06T16:22:17.732550225Z [err]  	        SELECT event
2026-01-06T16:22:17.732556779Z [err]  	        FROM event_config
2026-01-06T16:22:17.732563442Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:22:17.732569711Z [err]  	          AND active = 1
2026-01-06T16:22:17.732578133Z [err]  	          AND '16:22' BETWEEN open_time AND close_time
2026-01-06T16:22:17.732586250Z [err]  	        LIMIT 1;
2026-01-06T16:22:17.732592430Z [err]  	        
2026-01-06T16:22:48.271801768Z [err]  2026-01-06 16:22:46.847 UTC [76] LOG:  checkpoint starting: time
2026-01-06T16:22:48.271810608Z [err]  2026-01-06 16:22:47.304 UTC [76] LOG:  checkpoint complete: wrote 5 buffers (0.0%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.410 s, sync=0.019 s, total=0.457 s; sync files=5, longest=0.015 s, average=0.004 s; distance=10 kB, estimate=25 kB; lsn=0/1A0F4C0, redo lsn=0/1A0F468
2026-01-06T16:23:07.576833185Z [err]  2026-01-06 16:23:06.885 UTC [8788] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:23:07.576839464Z [err]  2026-01-06 16:23:06.885 UTC [8788] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:23:07.576844021Z [err]  2026-01-06 16:23:06.885 UTC [8788] STATEMENT:  
2026-01-06T16:23:07.576849591Z [err]  	        SELECT event
2026-01-06T16:23:07.576854062Z [err]  	        FROM event_config
2026-01-06T16:23:07.576858982Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:23:07.576864433Z [err]  	          AND active = 1
2026-01-06T16:23:07.576869186Z [err]  	          AND '16:23' BETWEEN open_time AND close_time
2026-01-06T16:23:07.576873863Z [err]  	        LIMIT 1;
2026-01-06T16:23:07.576885725Z [err]  	        
2026-01-06T16:23:10.967550662Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:23:10.967559942Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:23:10.967566874Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:23:10.967568392Z [inf]  ðŸ“¨ 27735540803: 8km 39:18 SBK03E
2026-01-06T16:23:10.967573991Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:23:10.967575150Z [inf]  INFO:     100.64.0.3:60962 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:23:10.967581534Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:23:10.967583164Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:23:10.967589217Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:23:10.967590923Z [err]  Traceback (most recent call last):
2026-01-06T16:23:10.967595876Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:23:10.967597889Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:23:10.967602363Z [err]      raise exc
2026-01-06T16:23:10.967604621Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:23:10.967608939Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:23:10.967611611Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:23:10.967618190Z [err]          self.scope, self.receive, self.send
2026-01-06T16:23:10.967623885Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:23:10.967629249Z [err]      )
2026-01-06T16:23:10.967635856Z [err]      ^
2026-01-06T16:23:10.967644095Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:23:10.971523538Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:23:10.971529154Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:23:10.971533003Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:23:10.971536999Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:23:10.971541682Z [err]      raise exc
2026-01-06T16:23:10.971545397Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:23:10.971548960Z [err]      await app(scope, receive, sender)
2026-01-06T16:23:10.971552646Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:23:10.971556236Z [err]      await self.app(scope, receive, send)
2026-01-06T16:23:10.971559926Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:23:10.971564805Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:23:10.971568899Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:23:10.971572750Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:23:10.971576476Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:23:10.971580796Z [err]      await self.app(scope, receive, send)
2026-01-06T16:23:10.971584606Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:23:10.971588855Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:23:10.971593158Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:23:10.971597297Z [err]      raise exc
2026-01-06T16:23:10.971601767Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:23:10.971606143Z [err]      await app(scope, receive, sender)
2026-01-06T16:23:10.971611170Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:23:10.971615516Z [err]      response = await f(request)
2026-01-06T16:23:10.971619883Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:23:10.971624792Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:23:10.971629506Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:23:10.971633682Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:23:10.971638507Z [err]      ...<3 lines>...
2026-01-06T16:23:10.971642930Z [err]      )
2026-01-06T16:23:10.971647335Z [err]      ^
2026-01-06T16:23:10.971651583Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:23:10.971655953Z [err]      return await dependant.call(**values)
2026-01-06T16:23:10.971659889Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:23:10.971664002Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:23:10.971668676Z [err]      event = get_active_event()
2026-01-06T16:23:10.971672961Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:23:10.971677793Z [err]      cur.execute(
2026-01-06T16:23:10.971682580Z [err]      ~~~~~~~~~~~^
2026-01-06T16:23:10.971686842Z [err]          """
2026-01-06T16:23:10.971691054Z [err]          ^^^
2026-01-06T16:23:10.971695012Z [err]      ...<7 lines>...
2026-01-06T16:23:10.971699533Z [err]          (day_of_week, current_time),
2026-01-06T16:23:10.971704103Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:23:10.971708281Z [err]      )
2026-01-06T16:23:10.971712913Z [err]      ^
2026-01-06T16:23:10.971718465Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:23:10.971722472Z [err]      return super().execute(query, vars)
2026-01-06T16:23:10.971727033Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:23:10.971730866Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:23:10.971735192Z [err]  LINE 5:           AND active = 1
2026-01-06T16:23:10.971739140Z [err]                               ^
2026-01-06T16:23:10.971742889Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:23:10.971747064Z [err]  
2026-01-06T16:24:31.329260179Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:24:31.329268282Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:24:31.329273914Z [err]          self.scope, self.receive, self.send
2026-01-06T16:24:31.329280339Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:24:31.329289629Z [inf]  ðŸ“¨ 27824481323: 8km 39:03 SBK03E
2026-01-06T16:24:31.329290940Z [err]      )
2026-01-06T16:24:31.329298618Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:24:31.329300532Z [err]      ^
2026-01-06T16:24:31.329304436Z [inf]  INFO:     100.64.0.7:25248 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:24:31.329312403Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:24:31.329315213Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:24:31.329322689Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:24:31.329326753Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:24:31.329327730Z [err]      raise exc
2026-01-06T16:24:31.329335546Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:24:31.329340201Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:24:31.329341669Z [err]  Traceback (most recent call last):
2026-01-06T16:24:31.329345459Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:24:31.329350644Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:24:31.329355011Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:24:31.329358114Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:24:31.329654497Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:24:31.329659241Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:24:31.329663975Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:24:31.329667993Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:24:31.329671863Z [err]      raise exc
2026-01-06T16:24:31.329675615Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:24:31.329679500Z [err]      await app(scope, receive, sender)
2026-01-06T16:24:31.329682988Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:24:31.329686707Z [err]      await self.app(scope, receive, send)
2026-01-06T16:24:31.329690163Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:24:31.329693639Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:24:31.329697279Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:24:31.329700710Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:24:31.329704099Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:24:31.329707570Z [err]      await self.app(scope, receive, send)
2026-01-06T16:24:31.329711466Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:24:31.329714943Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:24:31.329718717Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:24:31.330403727Z [err]      raise exc
2026-01-06T16:24:31.330415844Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:24:31.330425186Z [err]      await app(scope, receive, sender)
2026-01-06T16:24:31.330434637Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:24:31.330443067Z [err]      response = await f(request)
2026-01-06T16:24:31.330451183Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:24:31.330458853Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:24:31.330467574Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:24:31.330476128Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:24:31.330485151Z [err]      ...<3 lines>...
2026-01-06T16:24:31.330492919Z [err]      )
2026-01-06T16:24:31.330501885Z [err]      ^
2026-01-06T16:24:31.330511120Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:24:31.330519560Z [err]      return await dependant.call(**values)
2026-01-06T16:24:31.330527814Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:24:31.330536326Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:24:31.330544777Z [err]      event = get_active_event()
2026-01-06T16:24:31.330552439Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:24:31.330561385Z [err]      cur.execute(
2026-01-06T16:24:31.330570212Z [err]      ~~~~~~~~~~~^
2026-01-06T16:24:31.330579237Z [err]          """
2026-01-06T16:24:31.330587400Z [err]          ^^^
2026-01-06T16:24:31.330599399Z [err]      ...<7 lines>...
2026-01-06T16:24:31.330607387Z [err]          (day_of_week, current_time),
2026-01-06T16:24:31.330616089Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:24:31.331102490Z [err]      )
2026-01-06T16:24:31.331112253Z [err]      ^
2026-01-06T16:24:31.331120478Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:24:31.331128047Z [err]      return super().execute(query, vars)
2026-01-06T16:24:31.331137024Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:24:31.331144580Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:24:31.331151857Z [err]  LINE 5:           AND active = 1
2026-01-06T16:24:31.331160242Z [err]                               ^
2026-01-06T16:24:31.331168027Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:24:31.331175825Z [err]  
2026-01-06T16:24:38.065623981Z [err]  2026-01-06 16:24:29.783 UTC [8794] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:24:38.065630435Z [err]  2026-01-06 16:24:29.783 UTC [8794] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:24:38.065638073Z [err]  2026-01-06 16:24:29.783 UTC [8794] STATEMENT:  
2026-01-06T16:24:38.065644137Z [err]  	        SELECT event
2026-01-06T16:24:38.065651736Z [err]  	        FROM event_config
2026-01-06T16:24:38.065658446Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:24:38.065665209Z [err]  	          AND active = 1
2026-01-06T16:24:38.065671323Z [err]  	          AND '16:24' BETWEEN open_time AND close_time
2026-01-06T16:24:38.065677524Z [err]  	        LIMIT 1;
2026-01-06T16:24:38.065684451Z [err]  	        
2026-01-06T16:25:07.730568220Z [err]  2026-01-06 16:25:03.046 UTC [8798] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:25:07.730574709Z [err]  2026-01-06 16:25:03.046 UTC [8798] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:25:07.730586535Z [err]  2026-01-06 16:25:03.046 UTC [8798] STATEMENT:  
2026-01-06T16:25:07.730592431Z [err]  	        SELECT event
2026-01-06T16:25:07.730597782Z [err]  	        FROM event_config
2026-01-06T16:25:07.730603628Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:25:07.731530800Z [err]  	          AND active = 1
2026-01-06T16:25:07.731544057Z [err]  	          AND '16:25' BETWEEN open_time AND close_time
2026-01-06T16:25:07.731553006Z [err]  	        LIMIT 1;
2026-01-06T16:25:07.731562301Z [err]  	        
2026-01-06T16:25:11.303772513Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:25:11.303774508Z [inf]  ðŸ“¨ 27822228365: 8km 01:14:54 SBK03E
2026-01-06T16:25:11.303786107Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:25:11.303789845Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:25:11.303789891Z [inf]  INFO:     100.64.0.9:34422 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:25:11.303796465Z [err]      raise exc
2026-01-06T16:25:11.303803154Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:25:11.303804655Z [err]      )
2026-01-06T16:25:11.303807636Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:25:11.303815532Z [err]  Traceback (most recent call last):
2026-01-06T16:25:11.303816197Z [err]      ^
2026-01-06T16:25:11.303826885Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:25:11.303827682Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:25:11.303838746Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:25:11.303839909Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:25:11.303847140Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:25:11.303851777Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:25:11.303853894Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:25:11.303860469Z [err]          self.scope, self.receive, self.send
2026-01-06T16:25:11.303860858Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:25:11.303867009Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:25:11.305199382Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:25:11.305222130Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:25:11.305229275Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:25:11.305235062Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:25:11.305240839Z [err]      raise exc
2026-01-06T16:25:11.305246789Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:25:11.305254177Z [err]      await app(scope, receive, sender)
2026-01-06T16:25:11.305261455Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:25:11.305271165Z [err]      await self.app(scope, receive, send)
2026-01-06T16:25:11.305278361Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:25:11.305295432Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:25:11.305336770Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:25:11.305351497Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:25:11.305357564Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:25:11.305365888Z [err]      await self.app(scope, receive, send)
2026-01-06T16:25:11.305371930Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:25:11.305378299Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:25:11.305384556Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:25:11.307171877Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:25:11.307171966Z [err]      raise exc
2026-01-06T16:25:11.307172148Z [err]          (day_of_week, current_time),
2026-01-06T16:25:11.307180520Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:25:11.307184120Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:25:11.307184291Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:25:11.307193581Z [err]      event = get_active_event()
2026-01-06T16:25:11.307194367Z [err]      await app(scope, receive, sender)
2026-01-06T16:25:11.307195600Z [err]      ~~~~~~~~~~~^
2026-01-06T16:25:11.307200340Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:25:11.307203430Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:25:11.307207082Z [err]      response = await f(request)
2026-01-06T16:25:11.307207340Z [err]          """
2026-01-06T16:25:11.307213162Z [err]      cur.execute(
2026-01-06T16:25:11.307214831Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:25:11.307215485Z [err]          ^^^
2026-01-06T16:25:11.307221719Z [err]      ...<7 lines>...
2026-01-06T16:25:11.307223770Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:25:11.307230292Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:25:11.307236217Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:25:11.307243647Z [err]      ...<3 lines>...
2026-01-06T16:25:11.307251038Z [err]      )
2026-01-06T16:25:11.307257725Z [err]      ^
2026-01-06T16:25:11.307265588Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:25:11.307272157Z [err]      return await dependant.call(**values)
2026-01-06T16:25:11.308482258Z [err]      )
2026-01-06T16:25:11.308491664Z [err]      ^
2026-01-06T16:25:11.308502372Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:25:11.308509096Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:25:11.308512278Z [err]      return super().execute(query, vars)
2026-01-06T16:25:11.308518026Z [err]  
2026-01-06T16:25:11.308521290Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:25:11.308529010Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:25:11.308536038Z [err]  LINE 5:           AND active = 1
2026-01-06T16:25:11.308542814Z [err]                               ^
2026-01-06T16:25:51.366039717Z [inf]  ðŸ“¨ 27769067862: HI
2026-01-06T16:25:51.366050966Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T16:25:51.366057809Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T16:25:51.366065011Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T16:25:51.366072077Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T16:25:51.366078107Z [inf]  ðŸ“¤ Status: 200
2026-01-06T16:25:51.366084624Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27769067862","wa_id":"27769067862"}],"messages":[{"id":"wamid.HBgLMjc3NjkwNjc4NjIVAgARGBJFM0ZBMTBENTIyQzZERjc0OUYA"}]}
2026-01-06T16:25:51.366089867Z [inf]  INFO:     100.64.0.9:35958 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:25:51.366094981Z [inf]  INFO:     100.64.0.4:53172 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:25:51.366099822Z [inf]  INFO:     100.64.0.2:49056 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:25:54.640666562Z [inf]  ðŸ“¨ 27769067862: RUNNER
2026-01-06T16:25:54.856954048Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T16:25:54.856961731Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T16:25:54.856968275Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T16:25:55.349053471Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T16:25:55.349060514Z [inf]  ðŸ“¤ Status: 200
2026-01-06T16:25:55.349067195Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27769067862","wa_id":"27769067862"}],"messages":[{"id":"wamid.HBgLMjc3NjkwNjc4NjIVAgARGBJBRUVGRTUyNjk2RkQ0NkEwMDgA"}]}
2026-01-06T16:25:55.349073467Z [inf]  INFO:     100.64.0.4:13684 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:25:56.671077866Z [inf]  INFO:     100.64.0.3:11018 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:25:56.747508821Z [inf]  INFO:     100.64.0.7:12070 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:26:16.722520016Z [inf]  ðŸ“¨ 27833209119: Hi
2026-01-06T16:26:16.722529585Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T16:26:16.722537123Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T16:26:16.722544061Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T16:26:16.722550181Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T16:26:16.722557483Z [inf]  ðŸ“¤ Status: 200
2026-01-06T16:26:16.722564449Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27833209119","wa_id":"27833209119"}],"messages":[{"id":"wamid.HBgLMjc4MzMyMDkxMTkVAgARGBI1OUZEMTMzMjVDRjBDOTJBN0YA"}]}
2026-01-06T16:26:16.722571700Z [inf]  INFO:     100.64.0.4:19804 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:26:17.863103695Z [inf]  INFO:     100.64.0.2:29446 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:26:17.863110898Z [inf]  INFO:     100.64.0.2:29462 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:26:22.698982611Z [inf]  ðŸ“¨ 27833209119: 1
2026-01-06T16:26:22.897235253Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T16:26:22.897244780Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T16:26:22.897253211Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T16:26:23.346738518Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T16:26:23.346744474Z [inf]  ðŸ“¤ Status: 200
2026-01-06T16:26:23.346751282Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27833209119","wa_id":"27833209119"}],"messages":[{"id":"wamid.HBgLMjc4MzMyMDkxMTkVAgARGBI3QTA3RjhFM0I5MTBFRjkzNTUA"}]}
2026-01-06T16:26:23.346756193Z [inf]  INFO:     100.64.0.7:51924 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:26:23.824664240Z [inf]  INFO:     100.64.0.7:51924 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:26:24.747373080Z [inf]  INFO:     100.64.0.2:25282 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:26:26.308994905Z [inf]  ðŸ“¨ 27848022991: 6km 47:21 SBK03E
2026-01-06T16:26:26.585369792Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:26:26.585382900Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:26:26.585389649Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:26:26.585394076Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:26:26.585402651Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:26:26.585406412Z [inf]  INFO:     100.64.0.7:51924 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:26:26.585407228Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:26:26.585414188Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:26:26.585416498Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:26:26.585420027Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:26:26.585423635Z [err]  Traceback (most recent call last):
2026-01-06T16:26:26.585424980Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:26:26.585430679Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:26:26.585435420Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:26:26.585437994Z [err]      raise exc
2026-01-06T16:26:26.585440442Z [err]          self.scope, self.receive, self.send
2026-01-06T16:26:26.585445466Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:26:26.585449192Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:26:26.585459021Z [err]      )
2026-01-06T16:26:26.585467175Z [err]      ^
2026-01-06T16:26:26.586236952Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:26:26.586243201Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:26:26.586249757Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:26:26.586255758Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:26:26.586261452Z [err]      raise exc
2026-01-06T16:26:26.586268235Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:26:26.586275306Z [err]      await app(scope, receive, sender)
2026-01-06T16:26:26.586282052Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:26:26.586290063Z [err]      await self.app(scope, receive, send)
2026-01-06T16:26:26.586296686Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:26:26.586303286Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:26:26.586310378Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:26:26.586316381Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:26:26.586323176Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:26:26.586329859Z [err]      await self.app(scope, receive, send)
2026-01-06T16:26:26.586337607Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:26:26.586343754Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:26:26.586350340Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:26:26.586849642Z [err]      raise exc
2026-01-06T16:26:26.586859384Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:26:26.586866212Z [err]      await app(scope, receive, sender)
2026-01-06T16:26:26.586872592Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:26:26.586879832Z [err]      response = await f(request)
2026-01-06T16:26:26.586886956Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:26:26.586894178Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:26:26.586900156Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:26:26.586907184Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:26:26.586914044Z [err]      ...<3 lines>...
2026-01-06T16:26:26.586921400Z [err]      )
2026-01-06T16:26:26.586928076Z [err]      ^
2026-01-06T16:26:26.586934909Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:26:26.586941493Z [err]      return await dependant.call(**values)
2026-01-06T16:26:26.586950240Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:26:26.586957131Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:26:26.586963789Z [err]      event = get_active_event()
2026-01-06T16:26:26.586970205Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:26:26.586977455Z [err]      cur.execute(
2026-01-06T16:26:26.586985166Z [err]      ~~~~~~~~~~~^
2026-01-06T16:26:26.586991985Z [err]          """
2026-01-06T16:26:26.586998449Z [err]          ^^^
2026-01-06T16:26:26.587004427Z [err]      ...<7 lines>...
2026-01-06T16:26:26.587010186Z [err]          (day_of_week, current_time),
2026-01-06T16:26:26.587016679Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:26:26.587639046Z [err]      )
2026-01-06T16:26:26.587645854Z [err]      ^
2026-01-06T16:26:26.587652686Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:26:26.587659835Z [err]      return super().execute(query, vars)
2026-01-06T16:26:26.587666073Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:26:26.587673359Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:26:26.587679876Z [err]  LINE 5:           AND active = 1
2026-01-06T16:26:26.587687128Z [err]                               ^
2026-01-06T16:26:26.587693893Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:26:26.587700028Z [err]  
2026-01-06T16:26:28.912151079Z [err]  2026-01-06 16:26:26.561 UTC [8808] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:26:28.912157579Z [err]  2026-01-06 16:26:26.561 UTC [8808] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:26:28.912163692Z [err]  2026-01-06 16:26:26.561 UTC [8808] STATEMENT:  
2026-01-06T16:26:28.912180610Z [err]  	        SELECT event
2026-01-06T16:26:28.912186919Z [err]  	        FROM event_config
2026-01-06T16:26:28.912195091Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:26:28.912201856Z [err]  	          AND active = 1
2026-01-06T16:26:28.912207228Z [err]  	          AND '16:26' BETWEEN open_time AND close_time
2026-01-06T16:26:28.912212071Z [err]  	        LIMIT 1;
2026-01-06T16:26:28.912219454Z [err]  	        
2026-01-06T16:26:30.233542836Z [inf]  ðŸ“¨ 27833209119: Runner
2026-01-06T16:26:30.439038508Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T16:26:30.439048231Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T16:26:30.439053942Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T16:26:30.987885528Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T16:26:30.987895227Z [inf]  ðŸ“¤ Status: 200
2026-01-06T16:26:30.987902916Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27833209119","wa_id":"27833209119"}],"messages":[{"id":"wamid.HBgLMjc4MzMyMDkxMTkVAgARGBJFMzY3NzBFQjRFMjUxREE2RjMA"}]}
2026-01-06T16:26:30.988683816Z [inf]  INFO:     100.64.0.7:19580 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:26:31.611713504Z [inf]  INFO:     100.64.0.7:19580 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:26:32.348538109Z [inf]  INFO:     100.64.0.8:62784 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:26:52.299680227Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:26:52.299687988Z [inf]  ðŸ“¨ 27769067862: 8km 47:30:8
2026-01-06T16:26:52.299694199Z [inf]  INFO:     100.64.0.4:10442 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:26:52.299700324Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:26:52.299706931Z [err]  Traceback (most recent call last):
2026-01-06T16:26:52.299714215Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:26:52.299718673Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:26:52.299731449Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:26:52.299742134Z [err]          self.scope, self.receive, self.send
2026-01-06T16:26:52.299752328Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:26:52.299764106Z [err]      )
2026-01-06T16:26:52.299775300Z [err]      ^
2026-01-06T16:26:52.299784835Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:26:52.299793759Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:26:52.299801338Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:26:52.299807993Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:26:52.299813985Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:26:52.299822951Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:26:52.299830858Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:26:52.299839258Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:26:52.299847630Z [err]      raise exc
2026-01-06T16:26:52.300392274Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:26:52.300398725Z [err]      await self.app(scope, receive, send)
2026-01-06T16:26:52.300402943Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:26:52.300411472Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:26:52.300411723Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:26:52.300421074Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:26:52.300424351Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:26:52.300430683Z [err]      raise exc
2026-01-06T16:26:52.300433719Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:26:52.300439331Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:26:52.300446508Z [err]      await app(scope, receive, sender)
2026-01-06T16:26:52.300453261Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:26:52.300460003Z [err]      await self.app(scope, receive, send)
2026-01-06T16:26:52.300468205Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:26:52.300474789Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:26:52.300479631Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:26:52.300483298Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:26:52.300487898Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:26:52.301354552Z [err]      raise exc
2026-01-06T16:26:52.301360767Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:26:52.301365263Z [err]      await app(scope, receive, sender)
2026-01-06T16:26:52.301369719Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:26:52.301375007Z [err]      response = await f(request)
2026-01-06T16:26:52.301379174Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:26:52.301383874Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:26:52.301388091Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:26:52.301399614Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:26:52.301411190Z [err]      ...<3 lines>...
2026-01-06T16:26:52.301418061Z [err]      )
2026-01-06T16:26:52.301426664Z [err]      ^
2026-01-06T16:26:52.301433064Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:26:52.301437000Z [err]      return await dependant.call(**values)
2026-01-06T16:26:52.301440666Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:26:52.301444334Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:26:52.301448034Z [err]      event = get_active_event()
2026-01-06T16:26:52.301452426Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:26:52.301459090Z [err]      cur.execute(
2026-01-06T16:26:52.301465504Z [err]      ~~~~~~~~~~~^
2026-01-06T16:26:52.301471304Z [err]          """
2026-01-06T16:26:52.301478296Z [err]          ^^^
2026-01-06T16:26:52.301485311Z [err]      ...<7 lines>...
2026-01-06T16:26:52.301491741Z [err]          (day_of_week, current_time),
2026-01-06T16:26:52.301498470Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:26:52.302406621Z [err]      )
2026-01-06T16:26:52.302414218Z [err]      ^
2026-01-06T16:26:52.302419311Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:26:52.302423452Z [err]      return super().execute(query, vars)
2026-01-06T16:26:52.302427511Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:26:52.302431896Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:26:52.302436446Z [err]  LINE 5:           AND active = 1
2026-01-06T16:26:52.302447118Z [err]                               ^
2026-01-06T16:26:52.302453987Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:26:52.302461496Z [err]  
2026-01-06T16:26:52.302467973Z [inf]  ðŸ“¨ 27769067862: 8km 47:30:8
2026-01-06T16:26:52.302475959Z [inf]  INFO:     100.64.0.7:57544 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:26:52.302482644Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:26:52.302490562Z [err]  Traceback (most recent call last):
2026-01-06T16:26:52.302498595Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:26:52.302502921Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:26:52.302507626Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:26:52.302512694Z [err]          self.scope, self.receive, self.send
2026-01-06T16:26:52.302516492Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:26:52.302520689Z [err]      )
2026-01-06T16:26:52.302524970Z [err]      ^
2026-01-06T16:26:52.302529611Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:26:52.302534549Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:26:52.303093578Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:26:52.303101244Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:26:52.303107184Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:26:52.303112693Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:26:52.303118171Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:26:52.303123870Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:26:52.303129829Z [err]      raise exc
2026-01-06T16:26:52.303136752Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:26:52.303144585Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:26:52.303152259Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:26:52.303160298Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:26:52.303169966Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:26:52.303178018Z [err]      raise exc
2026-01-06T16:26:52.303186017Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:26:52.303204395Z [err]      await app(scope, receive, sender)
2026-01-06T16:26:52.303211289Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:26:52.303217287Z [err]      await self.app(scope, receive, send)
2026-01-06T16:26:52.303221728Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:26:52.304232500Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:26:52.304239226Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:26:52.304241671Z [err]      ^
2026-01-06T16:26:52.304243740Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:26:52.304248422Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:26:52.304253132Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:26:52.304258265Z [err]      await self.app(scope, receive, send)
2026-01-06T16:26:52.304262670Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:26:52.304266587Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:26:52.304270463Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:26:52.304276079Z [err]      raise exc
2026-01-06T16:26:52.304282514Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:26:52.304288556Z [err]      await app(scope, receive, sender)
2026-01-06T16:26:52.304294322Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:26:52.304300271Z [err]      response = await f(request)
2026-01-06T16:26:52.304306360Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:26:52.304312353Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:26:52.304319203Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:26:52.304323209Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:26:52.304327284Z [err]      ...<3 lines>...
2026-01-06T16:26:52.304332022Z [err]      )
2026-01-06T16:26:52.305335318Z [err]  LINE 5:           AND active = 1
2026-01-06T16:26:52.305336674Z [err]      return await dependant.call(**values)
2026-01-06T16:26:52.305342734Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:26:52.305346003Z [err]                               ^
2026-01-06T16:26:52.305348033Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:26:52.305353738Z [err]      event = get_active_event()
2026-01-06T16:26:52.305357515Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:26:52.305359507Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:26:52.305364560Z [err]      cur.execute(
2026-01-06T16:26:52.305367350Z [err]  
2026-01-06T16:26:52.305369666Z [err]      ~~~~~~~~~~~^
2026-01-06T16:26:52.305374934Z [err]          """
2026-01-06T16:26:52.305376928Z [inf]  ðŸ“¨ 27769067862: 8km 47:30:8
2026-01-06T16:26:52.305379713Z [err]          ^^^
2026-01-06T16:26:52.305384611Z [err]      ...<7 lines>...
2026-01-06T16:26:52.305386327Z [inf]  INFO:     100.64.0.3:40610 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:26:52.305390543Z [err]          (day_of_week, current_time),
2026-01-06T16:26:52.305394807Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:26:52.305398772Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:26:52.305404604Z [err]      )
2026-01-06T16:26:52.305410760Z [err]      ^
2026-01-06T16:26:52.305416634Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:26:52.305422522Z [err]      return super().execute(query, vars)
2026-01-06T16:26:52.305427268Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:26:52.305431250Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:26:52.306592502Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:26:52.306599353Z [err]  Traceback (most recent call last):
2026-01-06T16:26:52.306603777Z [err]      raise exc
2026-01-06T16:26:52.306608514Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:26:52.306614803Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:26:52.306617210Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:26:52.306622281Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:26:52.306627153Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:26:52.306629456Z [err]          self.scope, self.receive, self.send
2026-01-06T16:26:52.306636322Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:26:52.306636665Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:26:52.306643564Z [err]      )
2026-01-06T16:26:52.306648930Z [err]      ^
2026-01-06T16:26:52.306654801Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:26:52.306661402Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:26:52.306666918Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:26:52.306672051Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:26:52.306678142Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:26:52.306684163Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:26:52.306689398Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:26:52.307749004Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:26:52.307755923Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:26:52.307761624Z [err]      raise exc
2026-01-06T16:26:52.307767563Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:26:52.307777992Z [err]      await self.app(scope, receive, send)
2026-01-06T16:26:52.307784510Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:26:52.307789961Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:26:52.307790231Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:26:52.307795908Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:26:52.307801936Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:26:52.307803763Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:26:52.307809733Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:26:52.307814544Z [err]      raise exc
2026-01-06T16:26:52.307819981Z [err]      await self.app(scope, receive, send)
2026-01-06T16:26:52.307824447Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:26:52.307828287Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:26:52.307842892Z [err]      await app(scope, receive, sender)
2026-01-06T16:26:52.307852373Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:26:52.308817511Z [err]      await app(scope, receive, sender)
2026-01-06T16:26:52.308823470Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:26:52.308829040Z [err]      response = await f(request)
2026-01-06T16:26:52.308831275Z [err]      return await dependant.call(**values)
2026-01-06T16:26:52.308833990Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:26:52.308837175Z [err]      )
2026-01-06T16:26:52.308839157Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:26:52.308839224Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:26:52.308844912Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:26:52.308848422Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:26:52.308849477Z [err]      ^
2026-01-06T16:26:52.308851263Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:26:52.308857775Z [err]      ...<3 lines>...
2026-01-06T16:26:52.308858412Z [err]      event = get_active_event()
2026-01-06T16:26:52.308859324Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:26:52.308863563Z [err]      )
2026-01-06T16:26:52.308867698Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:26:52.308869009Z [err]      ^
2026-01-06T16:26:52.308874480Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:26:52.308877167Z [err]      cur.execute(
2026-01-06T16:26:52.308885513Z [err]      ~~~~~~~~~~~^
2026-01-06T16:26:52.308892280Z [err]          """
2026-01-06T16:26:52.308899233Z [err]          ^^^
2026-01-06T16:26:52.308907511Z [err]      ...<7 lines>...
2026-01-06T16:26:52.308915868Z [err]          (day_of_week, current_time),
2026-01-06T16:26:52.308921909Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:26:52.309355391Z [err]      return super().execute(query, vars)
2026-01-06T16:26:52.309361844Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:26:52.309366884Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:26:52.309373267Z [err]  LINE 5:           AND active = 1
2026-01-06T16:26:52.309380414Z [err]                               ^
2026-01-06T16:26:52.309386358Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:26:52.309393386Z [err]  
2026-01-06T16:26:53.964764085Z [inf]  ðŸ“¨ 27769067862: 8km 47:30:8
2026-01-06T16:26:54.240671617Z [inf]  INFO:     100.64.0.3:45658 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:26:54.240678735Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:26:54.240688772Z [err]  Traceback (most recent call last):
2026-01-06T16:26:54.240697779Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:26:54.240706445Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:26:54.240715248Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:26:54.240725921Z [err]          self.scope, self.receive, self.send
2026-01-06T16:26:54.240733809Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:26:54.240740820Z [err]      )
2026-01-06T16:26:54.240747672Z [err]      ^
2026-01-06T16:26:54.240753561Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:26:54.240760154Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:26:54.240765721Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:26:54.240771182Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:26:54.240776966Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:26:54.240782819Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:26:54.240789312Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:26:54.240794654Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:26:54.240800197Z [err]      raise exc
2026-01-06T16:26:54.240805865Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:26:54.240812061Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:26:54.240818771Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:26:54.240824661Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:26:54.240830877Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:26:54.240837441Z [err]      raise exc
2026-01-06T16:26:54.240843579Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:26:54.240851977Z [err]      await app(scope, receive, sender)
2026-01-06T16:26:54.240859964Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:26:54.240869127Z [err]      await self.app(scope, receive, send)
2026-01-06T16:26:54.240877634Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:26:54.240886725Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:26:54.240898684Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:26:54.240908387Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:26:54.240917453Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:26:54.240925782Z [err]      await self.app(scope, receive, send)
2026-01-06T16:26:54.240931840Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:26:54.240937401Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:26:54.240942715Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:26:54.240949186Z [err]      raise exc
2026-01-06T16:26:54.240956900Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:26:54.240963284Z [err]      await app(scope, receive, sender)
2026-01-06T16:26:54.240968678Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:26:54.240973872Z [err]      response = await f(request)
2026-01-06T16:26:54.240979255Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:26:54.240997683Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:26:54.241003539Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:26:54.241008953Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:26:54.241014353Z [err]      ...<3 lines>...
2026-01-06T16:26:54.241023262Z [err]      )
2026-01-06T16:26:54.241030529Z [err]      ^
2026-01-06T16:26:54.241036913Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:26:54.241041952Z [err]      return await dependant.call(**values)
2026-01-06T16:26:54.241048350Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:26:54.241057414Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:26:54.241062826Z [err]      event = get_active_event()
2026-01-06T16:26:54.241068267Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:26:54.241074329Z [err]      cur.execute(
2026-01-06T16:26:54.241083039Z [err]      ~~~~~~~~~~~^
2026-01-06T16:26:54.241088699Z [err]          """
2026-01-06T16:26:54.241094353Z [err]          ^^^
2026-01-06T16:26:54.241099613Z [err]      ...<7 lines>...
2026-01-06T16:26:54.241104894Z [err]          (day_of_week, current_time),
2026-01-06T16:26:54.241111930Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:26:54.241118422Z [err]      )
2026-01-06T16:26:54.241123510Z [err]      ^
2026-01-06T16:26:54.241129233Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:26:54.241134977Z [err]      return super().execute(query, vars)
2026-01-06T16:26:54.241141992Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:26:54.241147328Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:26:54.241153929Z [err]  LINE 5:           AND active = 1
2026-01-06T16:26:54.241160149Z [err]                               ^
2026-01-06T16:26:54.241165814Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:26:54.241172040Z [err]  
2026-01-06T16:26:59.405297869Z [err]  2026-01-06 16:26:50.009 UTC [8812] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:26:59.405319502Z [err]  2026-01-06 16:26:50.009 UTC [8812] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:26:59.405329639Z [err]  	        
2026-01-06T16:26:59.405334296Z [err]  2026-01-06 16:26:50.009 UTC [8812] STATEMENT:  
2026-01-06T16:26:59.405344208Z [err]  	        SELECT event
2026-01-06T16:26:59.405349342Z [err]  2026-01-06 16:26:51.862 UTC [8816] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:26:59.405356208Z [err]  	        FROM event_config
2026-01-06T16:26:59.405358719Z [err]  2026-01-06 16:26:51.862 UTC [8816] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:26:59.405364127Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:26:59.405370882Z [err]  	          AND active = 1
2026-01-06T16:26:59.405378139Z [err]  	          AND '16:26' BETWEEN open_time AND close_time
2026-01-06T16:26:59.405384634Z [err]  	        LIMIT 1;
2026-01-06T16:26:59.405395400Z [err]  	        
2026-01-06T16:26:59.405403342Z [err]  2026-01-06 16:26:50.941 UTC [8814] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:26:59.405415375Z [err]  2026-01-06 16:26:50.941 UTC [8814] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:26:59.405423085Z [err]  2026-01-06 16:26:50.941 UTC [8814] STATEMENT:  
2026-01-06T16:26:59.405429871Z [err]  	        SELECT event
2026-01-06T16:26:59.405436646Z [err]  	        FROM event_config
2026-01-06T16:26:59.405443781Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:26:59.405450633Z [err]  	          AND active = 1
2026-01-06T16:26:59.405457562Z [err]  	          AND '16:26' BETWEEN open_time AND close_time
2026-01-06T16:26:59.405466782Z [err]  	        LIMIT 1;
2026-01-06T16:27:00.479307408Z [err]  2026-01-06 16:26:51.862 UTC [8816] STATEMENT:  
2026-01-06T16:27:00.479314626Z [err]  	        SELECT event
2026-01-06T16:27:00.479328196Z [err]  	        FROM event_config
2026-01-06T16:27:00.479337661Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:27:00.479343444Z [err]  	          AND active = 1
2026-01-06T16:27:00.479361126Z [err]  	          AND '16:26' BETWEEN open_time AND close_time
2026-01-06T16:27:00.479366116Z [err]  	        LIMIT 1;
2026-01-06T16:27:00.479371837Z [err]  	        
2026-01-06T16:27:00.479376323Z [err]  2026-01-06 16:26:54.174 UTC [8818] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:27:00.479381578Z [err]  2026-01-06 16:26:54.174 UTC [8818] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:27:00.479386172Z [err]  2026-01-06 16:26:54.174 UTC [8818] STATEMENT:  
2026-01-06T16:27:00.479393168Z [err]  	        FROM event_config
2026-01-06T16:27:00.479395391Z [err]  	        SELECT event
2026-01-06T16:27:00.479402215Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:27:00.479410515Z [err]  	          AND active = 1
2026-01-06T16:27:00.479418989Z [err]  	          AND '16:26' BETWEEN open_time AND close_time
2026-01-06T16:27:00.479425968Z [err]  	        LIMIT 1;
2026-01-06T16:27:00.479434966Z [err]  	        
2026-01-06T16:27:20.195035171Z [err]  2026-01-06 16:27:17.318 UTC [8821] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:27:20.195041964Z [err]  2026-01-06 16:27:17.318 UTC [8821] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:27:20.195048144Z [err]  2026-01-06 16:27:17.318 UTC [8821] STATEMENT:  
2026-01-06T16:27:20.195055210Z [err]  	        SELECT event
2026-01-06T16:27:20.195063519Z [err]  	        FROM event_config
2026-01-06T16:27:20.195069531Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:27:20.195075931Z [err]  	          AND active = 1
2026-01-06T16:27:20.195083770Z [err]  	          AND '16:27' BETWEEN open_time AND close_time
2026-01-06T16:27:20.195092197Z [err]  	        LIMIT 1;
2026-01-06T16:27:20.195099091Z [err]  	        
2026-01-06T16:27:24.211954354Z [inf]  ðŸ“¨ 27769067862: 8km 47:30:8
2026-01-06T16:27:24.211960729Z [inf]  INFO:     100.64.0.6:51156 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:27:24.211964344Z [err]      raise exc
2026-01-06T16:27:24.211970122Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:27:24.211976795Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:27:24.211977296Z [err]  Traceback (most recent call last):
2026-01-06T16:27:24.211982599Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:27:24.211986394Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:27:24.211990824Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:24.211994546Z [err]          self.scope, self.receive, self.send
2026-01-06T16:27:24.211999376Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:24.212005462Z [err]      )
2026-01-06T16:27:24.212010709Z [err]      ^
2026-01-06T16:27:24.212015816Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:27:24.212019658Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:27:24.212023543Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:24.212027713Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:27:24.212031781Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:27:24.212035362Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:27:24.212041250Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:27:24.212048065Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:27:24.212466805Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:27:24.212495840Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:27:24.212503876Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:27:24.212511336Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:27:24.212519940Z [err]      raise exc
2026-01-06T16:27:24.212527299Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:27:24.212532044Z [err]      await app(scope, receive, sender)
2026-01-06T16:27:24.212537106Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:27:24.212543493Z [err]      await self.app(scope, receive, send)
2026-01-06T16:27:24.212549750Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:27:24.212557125Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:27:24.212563584Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:27:24.212570221Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:27:24.212577843Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:27:24.212588678Z [err]      await self.app(scope, receive, send)
2026-01-06T16:27:24.212595853Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:27:24.212602571Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:27:24.212609876Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:27:24.213268780Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:27:24.213268977Z [err]      raise exc
2026-01-06T16:27:24.213278021Z [err]      cur.execute(
2026-01-06T16:27:24.213278085Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:27:24.213284297Z [err]      await app(scope, receive, sender)
2026-01-06T16:27:24.213288173Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:27:24.213294180Z [err]      ~~~~~~~~~~~^
2026-01-06T16:27:24.213297124Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:24.213301067Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:27:24.213303027Z [err]          """
2026-01-06T16:27:24.213305611Z [err]      ...<3 lines>...
2026-01-06T16:27:24.213308595Z [err]      response = await f(request)
2026-01-06T16:27:24.213312011Z [err]          ^^^
2026-01-06T16:27:24.213315823Z [err]      )
2026-01-06T16:27:24.213315858Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:27:24.213322368Z [err]      ...<7 lines>...
2026-01-06T16:27:24.213324687Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:27:24.213325202Z [err]      ^
2026-01-06T16:27:24.213330368Z [err]          (day_of_week, current_time),
2026-01-06T16:27:24.213332588Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:27:24.213337509Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:24.213340115Z [err]      return await dependant.call(**values)
2026-01-06T16:27:24.213344309Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:24.213348719Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:27:24.213353834Z [err]      event = get_active_event()
2026-01-06T16:27:24.213871864Z [err]      )
2026-01-06T16:27:24.213879168Z [err]      ^
2026-01-06T16:27:24.213883269Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:27:24.213887522Z [err]      return super().execute(query, vars)
2026-01-06T16:27:24.213891663Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:27:24.213896876Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:27:24.213900762Z [err]  LINE 5:           AND active = 1
2026-01-06T16:27:24.213904527Z [err]                               ^
2026-01-06T16:27:24.213908702Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:27:24.213912407Z [err]  
2026-01-06T16:27:40.046229364Z [err]  2026-01-06 16:27:38.738 UTC [8824] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:27:40.046241078Z [err]  2026-01-06 16:27:38.738 UTC [8824] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:27:40.046252168Z [err]  2026-01-06 16:27:38.738 UTC [8824] STATEMENT:  
2026-01-06T16:27:40.046264265Z [err]  	        SELECT event
2026-01-06T16:27:40.046276727Z [err]  	        FROM event_config
2026-01-06T16:27:40.046286717Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:27:40.046297364Z [err]  	          AND active = 1
2026-01-06T16:27:40.046308132Z [err]  	          AND '16:27' BETWEEN open_time AND close_time
2026-01-06T16:27:40.046318838Z [err]  	        LIMIT 1;
2026-01-06T16:27:40.046330101Z [err]  	        
2026-01-06T16:27:41.702810625Z [err]  2026-01-06 16:27:41.610 UTC [8826] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:27:41.702816595Z [err]  2026-01-06 16:27:41.610 UTC [8826] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:27:41.702821836Z [err]  2026-01-06 16:27:41.610 UTC [8826] STATEMENT:  
2026-01-06T16:27:41.702827720Z [err]  	        SELECT event
2026-01-06T16:27:41.702833210Z [err]  	        FROM event_config
2026-01-06T16:27:41.702838700Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:27:41.702844636Z [err]  	          AND active = 1
2026-01-06T16:27:41.702850238Z [err]  	          AND '16:27' BETWEEN open_time AND close_time
2026-01-06T16:27:41.702855632Z [err]  	        LIMIT 1;
2026-01-06T16:27:41.702860460Z [err]  	        
2026-01-06T16:27:41.747733326Z [err]  2026-01-06 16:27:41.737 UTC [8828] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:27:41.747745970Z [err]  2026-01-06 16:27:41.737 UTC [8828] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:27:41.747754420Z [err]  2026-01-06 16:27:41.737 UTC [8828] STATEMENT:  
2026-01-06T16:27:41.747761306Z [err]  	        SELECT event
2026-01-06T16:27:41.747768579Z [err]  	        FROM event_config
2026-01-06T16:27:41.747775189Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:27:41.747788422Z [err]  	          AND active = 1
2026-01-06T16:27:41.747796829Z [err]  	          AND '16:27' BETWEEN open_time AND close_time
2026-01-06T16:27:41.747803321Z [err]  	        LIMIT 1;
2026-01-06T16:27:41.747810791Z [err]  	        
2026-01-06T16:27:42.995603115Z [err]  2026-01-06 16:27:42.279 UTC [8830] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:27:42.995617673Z [err]  2026-01-06 16:27:42.279 UTC [8830] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:27:42.995627776Z [err]  2026-01-06 16:27:42.279 UTC [8830] STATEMENT:  
2026-01-06T16:27:42.995636045Z [err]  	        SELECT event
2026-01-06T16:27:42.995643979Z [err]  	        FROM event_config
2026-01-06T16:27:42.995652898Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:27:42.995661469Z [err]  	          AND active = 1
2026-01-06T16:27:42.995676743Z [err]  	          AND '16:27' BETWEEN open_time AND close_time
2026-01-06T16:27:42.995685642Z [err]  	        LIMIT 1;
2026-01-06T16:27:42.995693660Z [err]  	        
2026-01-06T16:27:42.995700896Z [err]  2026-01-06 16:27:42.554 UTC [8832] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:27:42.995707883Z [err]  2026-01-06 16:27:42.554 UTC [8832] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:27:42.995714395Z [err]  2026-01-06 16:27:42.554 UTC [8832] STATEMENT:  
2026-01-06T16:27:42.995720472Z [err]  	        SELECT event
2026-01-06T16:27:42.995726747Z [err]  	        FROM event_config
2026-01-06T16:27:42.995732895Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:27:42.995739385Z [err]  	          AND active = 1
2026-01-06T16:27:42.995747490Z [err]  	          AND '16:27' BETWEEN open_time AND close_time
2026-01-06T16:27:42.995754061Z [err]  	        LIMIT 1;
2026-01-06T16:27:42.995764562Z [err]  	        
2026-01-06T16:27:42.995771830Z [err]  2026-01-06 16:27:42.770 UTC [8834] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:27:42.995780014Z [err]  2026-01-06 16:27:42.770 UTC [8834] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:27:43.007989912Z [err]  2026-01-06 16:27:42.770 UTC [8834] STATEMENT:  
2026-01-06T16:27:43.008000438Z [err]  	        SELECT event
2026-01-06T16:27:43.008008344Z [err]  	        FROM event_config
2026-01-06T16:27:43.008016199Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:27:43.008024325Z [err]  	          AND active = 1
2026-01-06T16:27:43.008032490Z [err]  	          AND '16:27' BETWEEN open_time AND close_time
2026-01-06T16:27:43.008040522Z [err]  	        LIMIT 1;
2026-01-06T16:27:43.008049400Z [err]  	        
2026-01-06T16:27:44.122187647Z [inf]  ðŸ“¨ 27769067862: 8km 47:30:8
2026-01-06T16:27:44.122210671Z [inf]  INFO:     100.64.0.3:39494 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:27:44.122219130Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:27:44.122226073Z [err]  Traceback (most recent call last):
2026-01-06T16:27:44.122232385Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:27:44.122239573Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:27:44.122245736Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.122251566Z [err]          self.scope, self.receive, self.send
2026-01-06T16:27:44.122258979Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.122266531Z [err]      )
2026-01-06T16:27:44.122275328Z [err]      ^
2026-01-06T16:27:44.122281991Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:27:44.122288627Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:27:44.122295778Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.122303413Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:27:44.122310009Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:27:44.122316008Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:27:44.122323021Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:27:44.122328973Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:27:44.122335180Z [err]      raise exc
2026-01-06T16:27:44.122342031Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:27:44.123242994Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:27:44.123243070Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:27:44.123248383Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:27:44.123251908Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:27:44.123255660Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:27:44.123256592Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:27:44.123259457Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:27:44.123260624Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:27:44.123264173Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:27:44.123271091Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:27:44.123271095Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:27:44.123278139Z [err]      raise exc
2026-01-06T16:27:44.123279213Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:27:44.123285890Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:27:44.123286373Z [err]      await self.app(scope, receive, send)
2026-01-06T16:27:44.123293224Z [err]      await app(scope, receive, sender)
2026-01-06T16:27:44.123299037Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:27:44.123305725Z [err]      await self.app(scope, receive, send)
2026-01-06T16:27:44.124342388Z [err]      raise exc
2026-01-06T16:27:44.124351666Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:27:44.124354353Z [err]      ...<7 lines>...
2026-01-06T16:27:44.124360230Z [err]      await app(scope, receive, sender)
2026-01-06T16:27:44.124363633Z [err]          (day_of_week, current_time),
2026-01-06T16:27:44.124370456Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.124371257Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:27:44.124380403Z [err]      ...<3 lines>...
2026-01-06T16:27:44.124381023Z [err]      response = await f(request)
2026-01-06T16:27:44.124389402Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.124394490Z [err]      )
2026-01-06T16:27:44.124401999Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:27:44.124405018Z [err]      ^
2026-01-06T16:27:44.124410195Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:27:44.124415985Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:27:44.124419547Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.124423752Z [err]      return await dependant.call(**values)
2026-01-06T16:27:44.124429163Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.124435139Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:27:44.124439945Z [err]      event = get_active_event()
2026-01-06T16:27:44.124446572Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:27:44.124456431Z [err]      cur.execute(
2026-01-06T16:27:44.124465005Z [err]      ~~~~~~~~~~~^
2026-01-06T16:27:44.124473765Z [err]          """
2026-01-06T16:27:44.124480906Z [err]          ^^^
2026-01-06T16:27:44.125222366Z [err]      )
2026-01-06T16:27:44.125223110Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.125234353Z [err]      ^
2026-01-06T16:27:44.125235323Z [err]          self.scope, self.receive, self.send
2026-01-06T16:27:44.125242727Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:27:44.125249561Z [err]      return super().execute(query, vars)
2026-01-06T16:27:44.125251503Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.125259873Z [err]      )
2026-01-06T16:27:44.125262649Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:27:44.125272228Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:27:44.125272552Z [err]      ^
2026-01-06T16:27:44.125280811Z [err]  LINE 5:           AND active = 1
2026-01-06T16:27:44.125284448Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:27:44.125291621Z [err]                               ^
2026-01-06T16:27:44.125297709Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:27:44.125302766Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:27:44.125310550Z [err]  
2026-01-06T16:27:44.125317807Z [inf]  ðŸ“¨ 27769067862: 8km 47:30 SBK03E
2026-01-06T16:27:44.125324453Z [inf]  INFO:     100.64.0.2:40346 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:27:44.125336106Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:27:44.125343815Z [err]  Traceback (most recent call last):
2026-01-06T16:27:44.125350400Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:27:44.125354678Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:27:44.126084650Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.126090378Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:27:44.126095407Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:27:44.126099153Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:27:44.126103440Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:27:44.126107131Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:27:44.126110622Z [err]      raise exc
2026-01-06T16:27:44.126114047Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:27:44.126118937Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:27:44.126123010Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:27:44.126127009Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:27:44.126130868Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:27:44.126134141Z [err]      raise exc
2026-01-06T16:27:44.126137368Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:27:44.126140872Z [err]      await app(scope, receive, sender)
2026-01-06T16:27:44.126144300Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:27:44.126148382Z [err]      await self.app(scope, receive, send)
2026-01-06T16:27:44.126152135Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:27:44.127122983Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:27:44.127131970Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:27:44.127139735Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:27:44.127147140Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:27:44.127154863Z [err]      await self.app(scope, receive, send)
2026-01-06T16:27:44.127162951Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:27:44.127169673Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:27:44.127176679Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:27:44.127183667Z [err]      raise exc
2026-01-06T16:27:44.127190843Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:27:44.127250872Z [err]      await app(scope, receive, sender)
2026-01-06T16:27:44.127265152Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:27:44.127278344Z [err]      response = await f(request)
2026-01-06T16:27:44.127286346Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.127295057Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:27:44.127304791Z [err]      )
2026-01-06T16:27:44.127305149Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:27:44.127315642Z [err]      ^
2026-01-06T16:27:44.127316130Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.127324279Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:27:44.127327614Z [err]      ...<3 lines>...
2026-01-06T16:27:44.128207841Z [err]      return await dependant.call(**values)
2026-01-06T16:27:44.128213169Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.128217171Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:27:44.128221527Z [err]      event = get_active_event()
2026-01-06T16:27:44.128225196Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:27:44.128230571Z [err]      cur.execute(
2026-01-06T16:27:44.128237673Z [err]      ~~~~~~~~~~~^
2026-01-06T16:27:44.128241428Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:27:44.128244793Z [err]          """
2026-01-06T16:27:44.128251510Z [err]          ^^^
2026-01-06T16:27:44.128252316Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:27:44.128259116Z [err]      ...<7 lines>...
2026-01-06T16:27:44.128259715Z [err]  LINE 5:           AND active = 1
2026-01-06T16:27:44.128266998Z [err]                               ^
2026-01-06T16:27:44.128267324Z [err]          (day_of_week, current_time),
2026-01-06T16:27:44.128273328Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:27:44.128277417Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.128279734Z [err]  
2026-01-06T16:27:44.128283842Z [err]      )
2026-01-06T16:27:44.128285554Z [inf]  ðŸ“¨ 27833209119: 6km 40:43 SBK03E
2026-01-06T16:27:44.128290543Z [inf]  INFO:     100.64.0.5:33480 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:27:44.128294267Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:27:44.128302596Z [err]      ^
2026-01-06T16:27:44.128306737Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:27:44.128310722Z [err]      return super().execute(query, vars)
2026-01-06T16:27:44.129205377Z [err]  Traceback (most recent call last):
2026-01-06T16:27:44.129211453Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:27:44.129216813Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:27:44.129222070Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.129223883Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.129227143Z [err]          self.scope, self.receive, self.send
2026-01-06T16:27:44.129233545Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.129236435Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:27:44.129239168Z [err]      )
2026-01-06T16:27:44.129245594Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:27:44.129245614Z [err]      ^
2026-01-06T16:27:44.129250620Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:27:44.129254961Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:27:44.129256629Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:27:44.129262790Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:27:44.129269228Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:27:44.129275820Z [err]      raise exc
2026-01-06T16:27:44.129282545Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:27:44.129291799Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:27:44.129300006Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:27:44.130099959Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:27:44.130106734Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:27:44.130110900Z [err]      raise exc
2026-01-06T16:27:44.130114727Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:27:44.130118483Z [err]      await app(scope, receive, sender)
2026-01-06T16:27:44.130122139Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:27:44.130126153Z [err]      await self.app(scope, receive, send)
2026-01-06T16:27:44.130130133Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:27:44.130134219Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:27:44.130138068Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:27:44.130141534Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:27:44.130145368Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:27:44.130149069Z [err]      await self.app(scope, receive, send)
2026-01-06T16:27:44.130154084Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:27:44.130157845Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:27:44.130161517Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:27:44.130164831Z [err]      raise exc
2026-01-06T16:27:44.130168742Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:27:44.131447202Z [err]      await app(scope, receive, sender)
2026-01-06T16:27:44.131457782Z [err]      ^
2026-01-06T16:27:44.131458363Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:27:44.131459528Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:27:44.131466525Z [err]      response = await f(request)
2026-01-06T16:27:44.131466799Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:27:44.131466968Z [err]          """
2026-01-06T16:27:44.131473799Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.131474748Z [err]      event = get_active_event()
2026-01-06T16:27:44.131476230Z [err]      return await dependant.call(**values)
2026-01-06T16:27:44.131479165Z [err]          ^^^
2026-01-06T16:27:44.131482459Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:27:44.131483124Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:27:44.131484278Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.131490447Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.131490915Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:27:44.131491928Z [err]      ...<7 lines>...
2026-01-06T16:27:44.131492451Z [err]      cur.execute(
2026-01-06T16:27:44.131494179Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:27:44.131500241Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.131501149Z [err]      ~~~~~~~~~~~^
2026-01-06T16:27:44.131502698Z [err]      )
2026-01-06T16:27:44.131502701Z [err]          (day_of_week, current_time),
2026-01-06T16:27:44.131507267Z [err]      ...<3 lines>...
2026-01-06T16:27:44.131513199Z [err]      )
2026-01-06T16:27:44.131514110Z [err]      ^
2026-01-06T16:27:44.132425498Z [err]      return super().execute(query, vars)
2026-01-06T16:27:44.132430433Z [err]  
2026-01-06T16:27:44.132435922Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:27:44.132436122Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.132438862Z [inf]  ðŸ“¨ 27833209119: 6km 40:43 SBK03E
2026-01-06T16:27:44.132444300Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:27:44.132445340Z [inf]  INFO:     100.64.0.5:33484 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:27:44.132447116Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:27:44.132447142Z [err]          self.scope, self.receive, self.send
2026-01-06T16:27:44.132451315Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:27:44.132456397Z [err]  LINE 5:           AND active = 1
2026-01-06T16:27:44.132457274Z [err]  Traceback (most recent call last):
2026-01-06T16:27:44.132457675Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.132462779Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:27:44.132466225Z [err]                               ^
2026-01-06T16:27:44.132467298Z [err]      )
2026-01-06T16:27:44.132469166Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:27:44.132474521Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.132476444Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:27:44.132477235Z [err]      ^
2026-01-06T16:27:44.132483850Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:27:44.132492689Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:27:44.133490597Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:27:44.133501664Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:27:44.133506923Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:27:44.133511936Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:27:44.133516812Z [err]      raise exc
2026-01-06T16:27:44.133522074Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:27:44.133526151Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:27:44.133531179Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:27:44.133537716Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:27:44.133544544Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:27:44.133548474Z [err]      raise exc
2026-01-06T16:27:44.133552839Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:27:44.133556595Z [err]      await app(scope, receive, sender)
2026-01-06T16:27:44.133560743Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:27:44.133565566Z [err]      await self.app(scope, receive, send)
2026-01-06T16:27:44.133570102Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:27:44.133574223Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:27:44.133578576Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:27:44.134426547Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:27:44.134436949Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:27:44.134444592Z [err]      await self.app(scope, receive, send)
2026-01-06T16:27:44.134451766Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:27:44.134459099Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:27:44.134466981Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:27:44.134474113Z [err]      raise exc
2026-01-06T16:27:44.134480722Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:27:44.134485289Z [err]      await app(scope, receive, sender)
2026-01-06T16:27:44.134489479Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:27:44.134495169Z [err]      response = await f(request)
2026-01-06T16:27:44.134499613Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.134503492Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:27:44.134508050Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:27:44.134512232Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.134516184Z [err]      ...<3 lines>...
2026-01-06T16:27:44.134519920Z [err]      )
2026-01-06T16:27:44.134524286Z [err]      ^
2026-01-06T16:27:44.134528374Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:27:44.134532587Z [err]      return await dependant.call(**values)
2026-01-06T16:27:44.134538362Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.135502624Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:27:44.135505555Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:27:44.135510378Z [err]      event = get_active_event()
2026-01-06T16:27:44.135514179Z [err]  
2026-01-06T16:27:44.135517295Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:27:44.135522059Z [inf]  ðŸ“¨ 27769067862: 8km 47:30 SBK03E
2026-01-06T16:27:44.135523956Z [err]      cur.execute(
2026-01-06T16:27:44.135529424Z [inf]  INFO:     100.64.0.6:32690 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:27:44.135530834Z [err]      ~~~~~~~~~~~^
2026-01-06T16:27:44.135536402Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:27:44.135537583Z [err]          """
2026-01-06T16:27:44.135543497Z [err]  Traceback (most recent call last):
2026-01-06T16:27:44.135544244Z [err]          ^^^
2026-01-06T16:27:44.135550656Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:27:44.135552156Z [err]      ...<7 lines>...
2026-01-06T16:27:44.135558522Z [err]          (day_of_week, current_time),
2026-01-06T16:27:44.135564766Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.135570939Z [err]      )
2026-01-06T16:27:44.135577444Z [err]      ^
2026-01-06T16:27:44.135583581Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:27:44.135590190Z [err]      return super().execute(query, vars)
2026-01-06T16:27:44.135596427Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:27:44.135602899Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:27:44.135609813Z [err]  LINE 5:           AND active = 1
2026-01-06T16:27:44.135616394Z [err]                               ^
2026-01-06T16:27:44.136447471Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:27:44.136453664Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.136459861Z [err]          self.scope, self.receive, self.send
2026-01-06T16:27:44.136464219Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.136468448Z [err]      )
2026-01-06T16:27:44.136473164Z [err]      ^
2026-01-06T16:27:44.136477675Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:27:44.136481723Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:27:44.136485982Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.136490475Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:27:44.136494644Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:27:44.136498599Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:27:44.136502109Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:27:44.136506123Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:27:44.136510627Z [err]      raise exc
2026-01-06T16:27:44.136515514Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:27:44.136519549Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:27:44.136523724Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:27:44.136527459Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:27:44.136532438Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:27:44.137379927Z [err]      raise exc
2026-01-06T16:27:44.137384301Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:27:44.137389886Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:27:44.137393201Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:27:44.137398394Z [err]      await app(scope, receive, sender)
2026-01-06T16:27:44.137401242Z [err]      raise exc
2026-01-06T16:27:44.137407433Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:27:44.137408986Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:27:44.137416130Z [err]      await self.app(scope, receive, send)
2026-01-06T16:27:44.137416342Z [err]      await app(scope, receive, sender)
2026-01-06T16:27:44.137423581Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:27:44.137426169Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:27:44.137431019Z [err]      response = await f(request)
2026-01-06T16:27:44.137433389Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:27:44.137437560Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:27:44.137441772Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:27:44.137445426Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:27:44.137449114Z [err]      await self.app(scope, receive, send)
2026-01-06T16:27:44.137452587Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:27:44.138570871Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.138579050Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:27:44.138584291Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:27:44.138590557Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.138595503Z [err]      ...<3 lines>...
2026-01-06T16:27:44.138600589Z [err]      )
2026-01-06T16:27:44.138604987Z [err]      ^
2026-01-06T16:27:44.138610040Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:27:44.138615053Z [err]      return await dependant.call(**values)
2026-01-06T16:27:44.138619643Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.138624886Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:27:44.138630722Z [err]      event = get_active_event()
2026-01-06T16:27:44.138635453Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:27:44.138639417Z [err]      cur.execute(
2026-01-06T16:27:44.138643022Z [err]      ~~~~~~~~~~~^
2026-01-06T16:27:44.138652745Z [err]          """
2026-01-06T16:27:44.138656594Z [err]          ^^^
2026-01-06T16:27:44.138661233Z [err]      ...<7 lines>...
2026-01-06T16:27:44.138667627Z [err]          (day_of_week, current_time),
2026-01-06T16:27:44.138675442Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.138683140Z [err]      )
2026-01-06T16:27:44.138689931Z [err]      ^
2026-01-06T16:27:44.138697000Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:27:44.138703971Z [err]      return super().execute(query, vars)
2026-01-06T16:27:44.138711194Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:27:44.138716904Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:27:44.139595594Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:27:44.139598719Z [err]  LINE 5:           AND active = 1
2026-01-06T16:27:44.139606334Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:27:44.139610562Z [err]                               ^
2026-01-06T16:27:44.139615469Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:27:44.139619454Z [err]  
2026-01-06T16:27:44.139624541Z [inf]  ðŸ“¨ 27833209119: 6km 40:43 SBK03E
2026-01-06T16:27:44.139628610Z [inf]  INFO:     100.64.0.4:33060 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:27:44.139632139Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:27:44.139636245Z [err]  Traceback (most recent call last):
2026-01-06T16:27:44.139640795Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:27:44.139645768Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:27:44.139650175Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.139656596Z [err]          self.scope, self.receive, self.send
2026-01-06T16:27:44.139662261Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.139666643Z [err]      )
2026-01-06T16:27:44.139670875Z [err]      ^
2026-01-06T16:27:44.139675926Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:27:44.139682111Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:27:44.139686552Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.139691714Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:27:44.140854789Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:27:44.140866393Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:27:44.140874114Z [err]      raise exc
2026-01-06T16:27:44.140880767Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:27:44.140886428Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:27:44.140893782Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:27:44.140901223Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:27:44.140908479Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:27:44.140916420Z [err]      raise exc
2026-01-06T16:27:44.140923573Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:27:44.140930298Z [err]      await app(scope, receive, sender)
2026-01-06T16:27:44.140938095Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:27:44.140945468Z [err]      await self.app(scope, receive, send)
2026-01-06T16:27:44.140953010Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:27:44.140958797Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:27:44.140963515Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:27:44.140967474Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:27:44.140971429Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:27:44.141740824Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:27:44.141740843Z [err]      await self.app(scope, receive, send)
2026-01-06T16:27:44.141749025Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:27:44.141755753Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:27:44.141762357Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:27:44.141769736Z [err]      raise exc
2026-01-06T16:27:44.141776873Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:27:44.141783772Z [err]      await app(scope, receive, sender)
2026-01-06T16:27:44.141788946Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:27:44.141792736Z [err]      response = await f(request)
2026-01-06T16:27:44.141796363Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.141800570Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:27:44.141805553Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:27:44.141809107Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.141812822Z [err]      ...<3 lines>...
2026-01-06T16:27:44.141816406Z [err]      )
2026-01-06T16:27:44.141820596Z [err]      ^
2026-01-06T16:27:44.141824495Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:27:44.141828195Z [err]      return await dependant.call(**values)
2026-01-06T16:27:44.141879691Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.141883535Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:27:44.141888689Z [err]      event = get_active_event()
2026-01-06T16:27:44.142700484Z [err]      cur.execute(
2026-01-06T16:27:44.142709455Z [err]      ~~~~~~~~~~~^
2026-01-06T16:27:44.142715759Z [err]          """
2026-01-06T16:27:44.142719986Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:27:44.142722409Z [err]          ^^^
2026-01-06T16:27:44.142733687Z [err]      return super().execute(query, vars)
2026-01-06T16:27:44.142733919Z [err]      ...<7 lines>...
2026-01-06T16:27:44.142741102Z [err]          (day_of_week, current_time),
2026-01-06T16:27:44.142741372Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:27:44.142747375Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.142748957Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:27:44.142754687Z [err]      )
2026-01-06T16:27:44.142755483Z [err]  LINE 5:           AND active = 1
2026-01-06T16:27:44.142762266Z [err]      ^
2026-01-06T16:27:44.142762744Z [err]                               ^
2026-01-06T16:27:44.142774416Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:27:44.142786952Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:27:44.142789956Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:27:44.142802749Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.142804355Z [err]  
2026-01-06T16:27:44.142814079Z [inf]  ðŸ“¨ 27769067862: 8km 47:30 SBK03E
2026-01-06T16:27:44.142822761Z [inf]  INFO:     100.64.0.5:33486 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:27:44.142832581Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:27:44.142840862Z [err]  Traceback (most recent call last):
2026-01-06T16:27:44.143669182Z [err]          self.scope, self.receive, self.send
2026-01-06T16:27:44.143675238Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.143679877Z [err]      )
2026-01-06T16:27:44.143684579Z [err]      ^
2026-01-06T16:27:44.143689214Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:27:44.143694238Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:27:44.143701117Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.143709752Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:27:44.143716422Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:27:44.143723814Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:27:44.143730718Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:27:44.143738572Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:27:44.143745384Z [err]      raise exc
2026-01-06T16:27:44.143752706Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:27:44.143759402Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:27:44.143767786Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:27:44.143773735Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:27:44.143778205Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:27:44.143782342Z [err]      raise exc
2026-01-06T16:27:44.143786618Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:27:44.144534482Z [err]      await app(scope, receive, sender)
2026-01-06T16:27:44.144540851Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:27:44.144545245Z [err]      await self.app(scope, receive, send)
2026-01-06T16:27:44.144549019Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:27:44.144552719Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:27:44.144557122Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:27:44.144562778Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:27:44.144566717Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:27:44.144570468Z [err]      await self.app(scope, receive, send)
2026-01-06T16:27:44.144574349Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:27:44.144577789Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:27:44.144581935Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:27:44.144585529Z [err]      raise exc
2026-01-06T16:27:44.144589899Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:27:44.144593387Z [err]      await app(scope, receive, sender)
2026-01-06T16:27:44.144596992Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:27:44.144601508Z [err]      response = await f(request)
2026-01-06T16:27:44.144605245Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.144608819Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:27:44.145756385Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.145762089Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:27:44.145765086Z [err]      )
2026-01-06T16:27:44.145770290Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.145772486Z [err]      ^
2026-01-06T16:27:44.145776185Z [err]      ...<3 lines>...
2026-01-06T16:27:44.145778887Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:27:44.145782405Z [err]      )
2026-01-06T16:27:44.145787027Z [err]      ^
2026-01-06T16:27:44.145792067Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:27:44.145796780Z [err]      return await dependant.call(**values)
2026-01-06T16:27:44.145801418Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:44.145805969Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:27:44.145810476Z [err]      event = get_active_event()
2026-01-06T16:27:44.145815939Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:27:44.145820423Z [err]      cur.execute(
2026-01-06T16:27:44.145825312Z [err]      ~~~~~~~~~~~^
2026-01-06T16:27:44.145829419Z [err]          """
2026-01-06T16:27:44.145847459Z [err]          ^^^
2026-01-06T16:27:44.145856142Z [err]      ...<7 lines>...
2026-01-06T16:27:44.145863263Z [err]          (day_of_week, current_time),
2026-01-06T16:27:44.146718415Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:27:44.149142268Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:27:44.150310995Z [err]          (day_of_week, current_time),
2026-01-06T16:27:44.230357975Z [err]  	          AND active = 1
2026-01-06T16:27:44.230370502Z [err]  	          AND '16:27' BETWEEN open_time AND close_time
2026-01-06T16:27:44.230377649Z [err]  	        LIMIT 1;
2026-01-06T16:27:44.230385996Z [err]  	        
2026-01-06T16:27:44.230399279Z [err]  2026-01-06 16:27:43.916 UTC [8838] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:27:44.230407116Z [err]  2026-01-06 16:27:43.916 UTC [8838] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:27:44.230413967Z [err]  2026-01-06 16:27:43.916 UTC [8838] STATEMENT:  
2026-01-06T16:27:44.230419779Z [err]  	        SELECT event
2026-01-06T16:27:44.230427416Z [err]  	        FROM event_config
2026-01-06T16:27:44.230434572Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:27:44.230440616Z [err]  	          AND active = 1
2026-01-06T16:27:44.230447104Z [err]  	          AND '16:27' BETWEEN open_time AND close_time
2026-01-06T16:27:44.230499427Z [err]  	        LIMIT 1;
2026-01-06T16:27:44.230506069Z [err]  	        
2026-01-06T16:27:44.230706713Z [err]  2026-01-06 16:27:43.318 UTC [8836] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:27:44.230717840Z [err]  2026-01-06 16:27:43.318 UTC [8836] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:27:44.230728584Z [err]  2026-01-06 16:27:43.318 UTC [8836] STATEMENT:  
2026-01-06T16:27:44.230740382Z [err]  	        SELECT event
2026-01-06T16:27:44.230753728Z [err]  	        FROM event_config
2026-01-06T16:27:44.230763583Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:27:45.073437118Z [inf]  ðŸ“¨ 27769067862: 8km 47:30 SBK03E
2026-01-06T16:27:45.200763924Z [inf]  INFO:     100.64.0.9:59808 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:27:45.203041027Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:27:45.203047920Z [err]  Traceback (most recent call last):
2026-01-06T16:27:45.203053558Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:27:45.203058843Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:27:45.203063254Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:45.203068021Z [err]          self.scope, self.receive, self.send
2026-01-06T16:27:45.203072168Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:45.203076454Z [err]      )
2026-01-06T16:27:45.203082024Z [err]      ^
2026-01-06T16:27:45.203088535Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:27:45.203093544Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:27:45.203098175Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:45.203103026Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:27:45.203107445Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:27:45.203111731Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:27:45.203117293Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:27:45.203122014Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:27:45.203127321Z [err]      raise exc
2026-01-06T16:27:45.203132482Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:27:45.203137886Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:27:45.204185684Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:27:45.204193844Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:27:45.204201640Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:27:45.204205837Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:27:45.204210186Z [err]      raise exc
2026-01-06T16:27:45.204217742Z [err]      await self.app(scope, receive, send)
2026-01-06T16:27:45.204219573Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:27:45.204220280Z [err]      raise exc
2026-01-06T16:27:45.204229364Z [err]      await app(scope, receive, sender)
2026-01-06T16:27:45.204238694Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:27:45.204241637Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:27:45.204251370Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:27:45.204260988Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:27:45.204269819Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:27:45.204278340Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:27:45.204288857Z [err]      await self.app(scope, receive, send)
2026-01-06T16:27:45.204301637Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:27:45.204314499Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:27:45.205545677Z [err]      return await dependant.call(**values)
2026-01-06T16:27:45.205561157Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:45.205562268Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:27:45.205572424Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:27:45.205577926Z [err]      await app(scope, receive, sender)
2026-01-06T16:27:45.205586712Z [err]      event = get_active_event()
2026-01-06T16:27:45.205591218Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:27:45.205600207Z [err]      response = await f(request)
2026-01-06T16:27:45.205600906Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:27:45.205608925Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:27:45.205615421Z [err]      cur.execute(
2026-01-06T16:27:45.205618417Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:27:45.205627241Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:27:45.205630773Z [err]      ~~~~~~~~~~~^
2026-01-06T16:27:45.205636377Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:45.205646192Z [err]          """
2026-01-06T16:27:45.205646319Z [err]      ...<3 lines>...
2026-01-06T16:27:45.205656398Z [err]      )
2026-01-06T16:27:45.205660831Z [err]          ^^^
2026-01-06T16:27:45.205665622Z [err]      ^
2026-01-06T16:27:45.205674707Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:27:45.205676407Z [err]      ...<7 lines>...
2026-01-06T16:27:45.205685181Z [err]          (day_of_week, current_time),
2026-01-06T16:27:45.205692508Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:27:45.206519180Z [err]      )
2026-01-06T16:27:45.206528916Z [err]      ^
2026-01-06T16:27:45.206537058Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:27:45.206544719Z [err]      return super().execute(query, vars)
2026-01-06T16:27:45.206552698Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:27:45.206560887Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:27:45.206568585Z [err]  LINE 5:           AND active = 1
2026-01-06T16:27:45.206576017Z [err]                               ^
2026-01-06T16:27:45.206584655Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:27:45.206597524Z [err]  
2026-01-06T16:27:45.330486084Z [err]  2026-01-06 16:27:45.195 UTC [8841] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:27:45.330491960Z [err]  2026-01-06 16:27:45.195 UTC [8841] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:27:45.330498776Z [err]  2026-01-06 16:27:45.195 UTC [8841] STATEMENT:  
2026-01-06T16:27:45.330513108Z [err]  	        SELECT event
2026-01-06T16:27:45.330526927Z [err]  	        FROM event_config
2026-01-06T16:27:45.330536185Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:27:45.330543716Z [err]  	          AND active = 1
2026-01-06T16:27:45.330552921Z [err]  	          AND '16:27' BETWEEN open_time AND close_time
2026-01-06T16:27:45.330560055Z [err]  	        LIMIT 1;
2026-01-06T16:27:45.330567249Z [err]  	        
2026-01-06T16:27:46.506007698Z [err]  2026-01-06 16:27:46.403 UTC [76] LOG:  checkpoint starting: time
2026-01-06T16:27:47.564869403Z [err]  2026-01-06 16:27:46.847 UTC [76] LOG:  checkpoint complete: wrote 5 buffers (0.0%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.408 s, sync=0.014 s, total=0.444 s; sync files=5, longest=0.012 s, average=0.003 s; distance=10 kB, estimate=23 kB; lsn=0/1A11E48, redo lsn=0/1A11DF0
2026-01-06T16:27:55.520304754Z [err]  2026-01-06 16:27:55.507 UTC [8843] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:27:55.520318901Z [err]  2026-01-06 16:27:55.507 UTC [8843] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:27:55.520328093Z [err]  2026-01-06 16:27:55.507 UTC [8843] STATEMENT:  
2026-01-06T16:27:55.520336261Z [err]  	        SELECT event
2026-01-06T16:27:55.520344381Z [err]  	        FROM event_config
2026-01-06T16:27:55.520353145Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:27:55.520361289Z [err]  	          AND active = 1
2026-01-06T16:27:55.520373672Z [err]  	          AND '16:27' BETWEEN open_time AND close_time
2026-01-06T16:27:55.520386392Z [err]  	        LIMIT 1;
2026-01-06T16:27:55.520396702Z [err]  	        
2026-01-06T16:27:56.512355502Z [err]  	        
2026-01-06T16:27:56.512611327Z [err]  2026-01-06 16:27:56.363 UTC [8845] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:27:56.512617752Z [err]  2026-01-06 16:27:56.363 UTC [8845] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:27:56.512623413Z [err]  2026-01-06 16:27:56.363 UTC [8845] STATEMENT:  
2026-01-06T16:27:56.512630405Z [err]  	        SELECT event
2026-01-06T16:27:56.512636856Z [err]  	        FROM event_config
2026-01-06T16:27:56.512643273Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:27:56.512650004Z [err]  	          AND active = 1
2026-01-06T16:27:56.512656474Z [err]  	          AND '16:27' BETWEEN open_time AND close_time
2026-01-06T16:27:56.512663456Z [err]  	        LIMIT 1;
2026-01-06T16:27:58.280402504Z [err]  Railway rate limit of 500 logs/sec reached for replica, update your application to reduce the logging rate. Messages dropped: 78
2026-01-06T16:28:05.214607582Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:28:05.214616562Z [inf]  ðŸ“¨ 27833209119: 6km 40:43 SBK03E
2026-01-06T16:28:05.214617120Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:28:05.214621951Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:28:05.214627360Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:28:05.214629807Z [inf]  INFO:     100.64.0.9:39994 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:28:05.214633570Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:28:05.214638672Z [err]      raise exc
2026-01-06T16:28:05.214639955Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:28:05.214643267Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:28:05.214648106Z [err]  Traceback (most recent call last):
2026-01-06T16:28:05.214654252Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:28:05.214660955Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:28:05.214668275Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:05.214675212Z [err]          self.scope, self.receive, self.send
2026-01-06T16:28:05.214679975Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:05.214684290Z [err]      )
2026-01-06T16:28:05.214688898Z [err]      ^
2026-01-06T16:28:05.214692553Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:28:05.214696566Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:28:05.214702086Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:05.215713844Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:28:05.215721415Z [err]      await self.app(scope, receive, send)
2026-01-06T16:28:05.215728591Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:28:05.215734190Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:28:05.215734472Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:28:05.215739715Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:28:05.215747788Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:28:05.215756390Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:28:05.215762680Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:28:05.215770077Z [err]      raise exc
2026-01-06T16:28:05.215775803Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:28:05.215782683Z [err]      await app(scope, receive, sender)
2026-01-06T16:28:05.215788359Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:28:05.215794298Z [err]      await self.app(scope, receive, send)
2026-01-06T16:28:05.215800214Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:28:05.215805895Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:28:05.215811181Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:28:05.215817797Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:28:05.217171942Z [err]          (day_of_week, current_time),
2026-01-06T16:28:05.217176728Z [err]      raise exc
2026-01-06T16:28:05.217183331Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:05.217183595Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:05.217189695Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:28:05.217191241Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:28:05.217197414Z [err]      await app(scope, receive, sender)
2026-01-06T16:28:05.217201952Z [err]      event = get_active_event()
2026-01-06T16:28:05.217202885Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:28:05.217207994Z [err]      response = await f(request)
2026-01-06T16:28:05.217211157Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:28:05.217213811Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:28:05.217221185Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:28:05.217221601Z [err]      cur.execute(
2026-01-06T16:28:05.217226310Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:28:05.217231999Z [err]      ~~~~~~~~~~~^
2026-01-06T16:28:05.217232328Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:05.217238327Z [err]      ...<3 lines>...
2026-01-06T16:28:05.217241470Z [err]          """
2026-01-06T16:28:05.217243761Z [err]      )
2026-01-06T16:28:05.217249044Z [err]      ^
2026-01-06T16:28:05.217251395Z [err]          ^^^
2026-01-06T16:28:05.217254319Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:28:05.217259745Z [err]      return await dependant.call(**values)
2026-01-06T16:28:05.217260772Z [err]      ...<7 lines>...
2026-01-06T16:28:05.218139827Z [err]      )
2026-01-06T16:28:05.218147723Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:05.218150026Z [err]      ^
2026-01-06T16:28:05.218155022Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:28:05.218160385Z [err]      return super().execute(query, vars)
2026-01-06T16:28:05.218161548Z [err]      )
2026-01-06T16:28:05.218165338Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:28:05.218171371Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:28:05.218174567Z [err]      ^
2026-01-06T16:28:05.218176782Z [err]  LINE 5:           AND active = 1
2026-01-06T16:28:05.218181183Z [err]                               ^
2026-01-06T16:28:05.218185967Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:28:05.218186552Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:28:05.218191261Z [err]  
2026-01-06T16:28:05.218195016Z [inf]  ðŸ“¨ 27769067862: 8km 47:30 SBK03E
2026-01-06T16:28:05.218198817Z [inf]  INFO:     100.64.0.3:48136 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:28:05.218203956Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:28:05.218207842Z [err]  Traceback (most recent call last):
2026-01-06T16:28:05.218211688Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:28:05.218215230Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:28:05.218219002Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:05.218223119Z [err]          self.scope, self.receive, self.send
2026-01-06T16:28:05.218259835Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:28:05.219112757Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:05.219112848Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:28:05.219122203Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:28:05.219124106Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:28:05.219125028Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:28:05.219128925Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:28:05.219135288Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:28:05.219135352Z [err]      raise exc
2026-01-06T16:28:05.219135790Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:28:05.219145002Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:28:05.219148254Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:28:05.219155609Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:28:05.219158425Z [err]      await app(scope, receive, sender)
2026-01-06T16:28:05.219160162Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:28:05.219164762Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:28:05.219172756Z [err]      await self.app(scope, receive, send)
2026-01-06T16:28:05.219173559Z [err]      raise exc
2026-01-06T16:28:05.219180549Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:28:05.220235813Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:28:05.220245114Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:28:05.220252687Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:28:05.220259240Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:28:05.220263671Z [err]      await self.app(scope, receive, send)
2026-01-06T16:28:05.220268114Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:28:05.220272942Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:28:05.220276920Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:28:05.220281223Z [err]      raise exc
2026-01-06T16:28:05.220285455Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:28:05.220290948Z [err]      await app(scope, receive, sender)
2026-01-06T16:28:05.220297058Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:28:05.220304070Z [err]      response = await f(request)
2026-01-06T16:28:05.220310936Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:28:05.220318557Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:28:05.220325493Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:28:05.220332306Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:05.220339264Z [err]      ...<3 lines>...
2026-01-06T16:28:05.220345889Z [err]      )
2026-01-06T16:28:05.220352800Z [err]      ^
2026-01-06T16:28:05.220360076Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:28:05.221154922Z [err]      return await dependant.call(**values)
2026-01-06T16:28:05.221165580Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:05.221174648Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:28:05.221183146Z [err]      event = get_active_event()
2026-01-06T16:28:05.221191011Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:28:05.221198554Z [err]      cur.execute(
2026-01-06T16:28:05.221206317Z [err]      ~~~~~~~~~~~^
2026-01-06T16:28:05.221213052Z [err]          """
2026-01-06T16:28:05.221220337Z [err]          ^^^
2026-01-06T16:28:05.221226969Z [err]      ...<7 lines>...
2026-01-06T16:28:05.221233490Z [err]          (day_of_week, current_time),
2026-01-06T16:28:05.221238559Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:05.221243588Z [err]      )
2026-01-06T16:28:05.221247959Z [err]      ^
2026-01-06T16:28:05.221252454Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:28:05.221256474Z [err]      return super().execute(query, vars)
2026-01-06T16:28:05.221260616Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:28:05.221265174Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:28:05.221269703Z [err]  LINE 5:           AND active = 1
2026-01-06T16:28:05.221274391Z [err]                               ^
2026-01-06T16:28:05.221279727Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:28:05.221284025Z [err]  
2026-01-06T16:28:25.217782520Z [inf]  ðŸ“¨ 27824958185: Hi
2026-01-06T16:28:25.217790603Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T16:28:25.217796218Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T16:28:25.217801404Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T16:28:25.217806518Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T16:28:25.217811717Z [inf]  ðŸ“¤ Status: 200
2026-01-06T16:28:25.217817114Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27824958185","wa_id":"27824958185"}],"messages":[{"id":"wamid.HBgLMjc4MjQ5NTgxODUVAgARGBJDNUFGRjJGM0M2OTEyQkJGRTcA"}]}
2026-01-06T16:28:25.217821708Z [inf]  INFO:     100.64.0.4:19826 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:28:25.217826147Z [inf]  INFO:     100.64.0.3:46370 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:28:25.217830720Z [inf]  ðŸ“¨ 27711616333: 8km 48:48 SBK03E
2026-01-06T16:28:25.217859740Z [inf]  INFO:     100.64.0.6:44274 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:28:25.217863699Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:28:25.217869857Z [err]  Traceback (most recent call last):
2026-01-06T16:28:25.217874042Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:28:25.217879522Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:28:25.217884674Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:25.217888649Z [err]          self.scope, self.receive, self.send
2026-01-06T16:28:25.217892716Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:25.217896524Z [err]      )
2026-01-06T16:28:25.217900766Z [err]      ^
2026-01-06T16:28:25.217905821Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:28:25.217909569Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:28:25.218881833Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:25.218889083Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:28:25.218894408Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:28:25.218900313Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:28:25.218900909Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:28:25.218901213Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:28:25.218909320Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:28:25.218914308Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:28:25.218915385Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:28:25.218921223Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:28:25.218923711Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:28:25.218926746Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:28:25.218933048Z [err]      raise exc
2026-01-06T16:28:25.218934506Z [err]      raise exc
2026-01-06T16:28:25.218938771Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:28:25.218942627Z [err]      await app(scope, receive, sender)
2026-01-06T16:28:25.218946420Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:28:25.218952038Z [err]      await self.app(scope, receive, send)
2026-01-06T16:28:25.220068122Z [err]      response = await f(request)
2026-01-06T16:28:25.220072982Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:28:25.220083538Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:28:25.220089117Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:28:25.220089800Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:28:25.220094921Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:25.220095057Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:28:25.220100727Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:28:25.220100890Z [err]      ...<3 lines>...
2026-01-06T16:28:25.220106769Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:28:25.220106951Z [err]      )
2026-01-06T16:28:25.220112098Z [err]      await self.app(scope, receive, send)
2026-01-06T16:28:25.220113683Z [err]      ^
2026-01-06T16:28:25.220117093Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:28:25.220121468Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:28:25.220121843Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:28:25.220126349Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:28:25.220130476Z [err]      raise exc
2026-01-06T16:28:25.220134125Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:28:25.220138809Z [err]      await app(scope, receive, sender)
2026-01-06T16:28:25.220142600Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:28:25.221133462Z [err]  
2026-01-06T16:28:25.221133814Z [err]      return await dependant.call(**values)
2026-01-06T16:28:25.221140927Z [inf]  INFO:     100.64.0.9:50906 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:28:25.221142117Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:28:25.221143809Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:25.221149301Z [inf]  ðŸ“¨ 27711616333: 8km 48:48 SBK03E
2026-01-06T16:28:25.221152895Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:28:25.221153324Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:28:25.221157585Z [inf]  INFO:     100.64.0.4:19826 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:28:25.221162398Z [err]      event = get_active_event()
2026-01-06T16:28:25.221162505Z [err]  LINE 5:           AND active = 1
2026-01-06T16:28:25.221168571Z [err]                               ^
2026-01-06T16:28:25.221171977Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:28:25.221173489Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:28:25.221180085Z [err]      cur.execute(
2026-01-06T16:28:25.221187832Z [err]      ~~~~~~~~~~~^
2026-01-06T16:28:25.221194005Z [err]          """
2026-01-06T16:28:25.221204395Z [err]          ^^^
2026-01-06T16:28:25.221208831Z [err]      ...<7 lines>...
2026-01-06T16:28:25.221212621Z [err]          (day_of_week, current_time),
2026-01-06T16:28:25.221216563Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:25.221220507Z [err]      )
2026-01-06T16:28:25.221224428Z [err]      ^
2026-01-06T16:28:25.221228174Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:28:25.221232203Z [err]      return super().execute(query, vars)
2026-01-06T16:28:25.222328364Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:28:25.222334283Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:28:25.222335868Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:28:25.222343143Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:28:25.222343855Z [err]  Traceback (most recent call last):
2026-01-06T16:28:25.222350572Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:28:25.222351027Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:28:25.222357527Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:28:25.222357787Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:28:25.222364351Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:25.222369802Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:28:25.222376235Z [err]      raise exc
2026-01-06T16:28:25.222382883Z [err]          self.scope, self.receive, self.send
2026-01-06T16:28:25.222383799Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:28:25.222389476Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:25.222395423Z [err]      )
2026-01-06T16:28:25.222401529Z [err]      ^
2026-01-06T16:28:25.222407633Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:28:25.222413971Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:28:25.222420219Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:25.223558093Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:28:25.223566397Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:28:25.223572191Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:28:25.223577805Z [err]      raise exc
2026-01-06T16:28:25.223583003Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:28:25.223589121Z [err]      await app(scope, receive, sender)
2026-01-06T16:28:25.223594531Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:28:25.223600003Z [err]      await self.app(scope, receive, send)
2026-01-06T16:28:25.223605581Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:28:25.223611211Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:28:25.223616644Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:28:25.223621999Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:28:25.223627319Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:28:25.223634805Z [err]      await self.app(scope, receive, send)
2026-01-06T16:28:25.223640298Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:28:25.223645575Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:28:25.223652628Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:28:25.223658976Z [err]      raise exc
2026-01-06T16:28:25.224759300Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:28:25.224764762Z [err]          ^^^
2026-01-06T16:28:25.224767193Z [err]      await app(scope, receive, sender)
2026-01-06T16:28:25.224773482Z [err]      ...<7 lines>...
2026-01-06T16:28:25.224775396Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:28:25.224781878Z [err]          (day_of_week, current_time),
2026-01-06T16:28:25.224784114Z [err]      response = await f(request)
2026-01-06T16:28:25.224788149Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:25.224792746Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:28:25.224798735Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:28:25.224803373Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:28:25.224807008Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:25.224810507Z [err]      ...<3 lines>...
2026-01-06T16:28:25.224814129Z [err]      )
2026-01-06T16:28:25.224817618Z [err]      ^
2026-01-06T16:28:25.224821465Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:28:25.224825379Z [err]      return await dependant.call(**values)
2026-01-06T16:28:25.224830974Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:25.224834632Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:28:25.224838638Z [err]      event = get_active_event()
2026-01-06T16:28:25.224841958Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:28:25.224845611Z [err]      cur.execute(
2026-01-06T16:28:25.224849011Z [err]      ~~~~~~~~~~~^
2026-01-06T16:28:25.224852461Z [err]          """
2026-01-06T16:28:25.225760192Z [err]  Traceback (most recent call last):
2026-01-06T16:28:25.225760787Z [err]      )
2026-01-06T16:28:25.225766883Z [err]      ^
2026-01-06T16:28:25.225769568Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:28:25.225771921Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:28:25.225777189Z [err]      return super().execute(query, vars)
2026-01-06T16:28:25.225777375Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:28:25.225781753Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:28:25.225783951Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:25.225787502Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:28:25.225791253Z [err]          self.scope, self.receive, self.send
2026-01-06T16:28:25.225793432Z [err]  LINE 5:           AND active = 1
2026-01-06T16:28:25.225797490Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:25.225798946Z [err]                               ^
2026-01-06T16:28:25.225803741Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:28:25.225804551Z [err]      )
2026-01-06T16:28:25.225808846Z [err]  
2026-01-06T16:28:25.225811175Z [err]      ^
2026-01-06T16:28:25.225814379Z [inf]  ðŸ“¨ 27711616333: 8km 48:48 SBK03E
2026-01-06T16:28:25.225818327Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:28:25.225819859Z [inf]  INFO:     100.64.0.9:50906 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:28:25.225825408Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:28:25.225826183Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:28:25.226703983Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:25.226707599Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:28:25.226709747Z [err]      await app(scope, receive, sender)
2026-01-06T16:28:25.226711696Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:28:25.226714682Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:28:25.226716853Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:28:25.226718260Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:28:25.226720801Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:28:25.226723313Z [err]      await self.app(scope, receive, send)
2026-01-06T16:28:25.226724416Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:28:25.226726486Z [err]      raise exc
2026-01-06T16:28:25.226730177Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:28:25.226730829Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:28:25.226732503Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:28:25.226735726Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:28:25.226739428Z [err]      raise exc
2026-01-06T16:28:25.226743163Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:28:25.226747057Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:28:25.227654093Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:28:25.227660061Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:28:25.227660634Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:28:25.227664133Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:28:25.227668484Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:28:25.227674681Z [err]      await self.app(scope, receive, send)
2026-01-06T16:28:25.227678513Z [err]      response = await f(request)
2026-01-06T16:28:25.227679790Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:28:25.227684573Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:28:25.227687239Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:28:25.227690095Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:28:25.227693100Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:28:25.227695406Z [err]      raise exc
2026-01-06T16:28:25.227699114Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:28:25.227701126Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:28:25.227706143Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:25.227707584Z [err]      await app(scope, receive, sender)
2026-01-06T16:28:25.227713201Z [err]      ...<3 lines>...
2026-01-06T16:28:25.227713567Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:28:25.227718105Z [err]      )
2026-01-06T16:28:25.227722450Z [err]      ^
2026-01-06T16:28:25.228931794Z [err]      return await dependant.call(**values)
2026-01-06T16:28:25.228938374Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:25.228943151Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:28:25.228948587Z [err]      event = get_active_event()
2026-01-06T16:28:25.228952381Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:28:25.228956932Z [err]      cur.execute(
2026-01-06T16:28:25.228960786Z [err]      ~~~~~~~~~~~^
2026-01-06T16:28:25.228964633Z [err]          """
2026-01-06T16:28:25.228968797Z [err]          ^^^
2026-01-06T16:28:25.228973250Z [err]      ...<7 lines>...
2026-01-06T16:28:25.228977598Z [err]          (day_of_week, current_time),
2026-01-06T16:28:25.228981551Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:25.228985545Z [err]      )
2026-01-06T16:28:25.228989232Z [err]      ^
2026-01-06T16:28:25.228993274Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:28:25.229007059Z [err]      return super().execute(query, vars)
2026-01-06T16:28:25.229014707Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:28:25.229021505Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:28:25.229027521Z [err]  LINE 5:           AND active = 1
2026-01-06T16:28:25.229039449Z [err]                               ^
2026-01-06T16:28:25.229046471Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:28:25.229054127Z [err]  
2026-01-06T16:28:25.229058641Z [inf]  ðŸ“¨ 27711616333: 8km 48:48 SBK03E
2026-01-06T16:28:25.229063176Z [inf]  INFO:     100.64.0.5:42092 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:28:25.229068293Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:28:25.229951978Z [err]  Traceback (most recent call last):
2026-01-06T16:28:25.229959249Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:28:25.229965589Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:28:25.229970939Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:25.229976708Z [err]          self.scope, self.receive, self.send
2026-01-06T16:28:25.229982201Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:25.229987553Z [err]      )
2026-01-06T16:28:25.229992747Z [err]      ^
2026-01-06T16:28:25.229997964Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:28:25.230003339Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:28:25.230008567Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:25.230013601Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:28:25.230018682Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:28:25.230024090Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:28:25.230031822Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:28:25.230036959Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:28:25.230042092Z [err]      raise exc
2026-01-06T16:28:25.230047606Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:28:25.230052893Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:28:25.230066842Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:28:25.231144481Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:28:25.231151136Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:28:25.231155494Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:28:25.231164194Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:28:25.231166405Z [err]      raise exc
2026-01-06T16:28:25.231172261Z [err]      raise exc
2026-01-06T16:28:25.231176518Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:28:25.231180942Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:28:25.231187345Z [err]      await app(scope, receive, sender)
2026-01-06T16:28:25.231193924Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:28:25.231201021Z [err]      await self.app(scope, receive, send)
2026-01-06T16:28:25.231207735Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:28:25.231215039Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:28:25.231221600Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:28:25.231228126Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:28:25.231234348Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:28:25.231238822Z [err]      await self.app(scope, receive, send)
2026-01-06T16:28:25.231242613Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:28:25.232506836Z [err]          """
2026-01-06T16:28:25.232511016Z [err]      await app(scope, receive, sender)
2026-01-06T16:28:25.232515522Z [err]          ^^^
2026-01-06T16:28:25.232521854Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:28:25.232522109Z [err]      ...<7 lines>...
2026-01-06T16:28:25.232529073Z [err]          (day_of_week, current_time),
2026-01-06T16:28:25.232531151Z [err]      response = await f(request)
2026-01-06T16:28:25.232536422Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:25.232540345Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:28:25.232543584Z [err]      )
2026-01-06T16:28:25.232549537Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:28:25.232550458Z [err]      ^
2026-01-06T16:28:25.232557224Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:28:25.232559965Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:28:25.232566348Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:25.232570705Z [err]      ...<3 lines>...
2026-01-06T16:28:25.232574624Z [err]      )
2026-01-06T16:28:25.232578679Z [err]      ^
2026-01-06T16:28:25.232582648Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:28:25.232586601Z [err]      return await dependant.call(**values)
2026-01-06T16:28:25.232590170Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:25.232593990Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:28:25.232597812Z [err]      event = get_active_event()
2026-01-06T16:28:25.232601737Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:28:25.232605955Z [err]      cur.execute(
2026-01-06T16:28:25.232609959Z [err]      ~~~~~~~~~~~^
2026-01-06T16:28:25.232969751Z [err]      return super().execute(query, vars)
2026-01-06T16:28:25.232975597Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:28:25.232979339Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:28:25.232982935Z [err]  LINE 5:           AND active = 1
2026-01-06T16:28:25.232986446Z [err]                               ^
2026-01-06T16:28:25.232989929Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:28:25.232993314Z [err]  
2026-01-06T16:28:26.932874459Z [err]  	        SELECT event
2026-01-06T16:28:26.932889249Z [err]  	        FROM event_config
2026-01-06T16:28:26.933026921Z [err]  2026-01-06 16:28:20.027 UTC [8849] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:28:26.933056030Z [err]  2026-01-06 16:28:20.027 UTC [8849] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:28:26.933072665Z [err]  2026-01-06 16:28:20.027 UTC [8849] STATEMENT:  
2026-01-06T16:28:26.933095048Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:28:26.933106657Z [err]  	          AND active = 1
2026-01-06T16:28:26.933113780Z [err]  	          AND '16:28' BETWEEN open_time AND close_time
2026-01-06T16:28:26.933143258Z [err]  	        LIMIT 1;
2026-01-06T16:28:26.933158568Z [err]  	        
2026-01-06T16:28:26.933170237Z [err]  2026-01-06 16:28:20.845 UTC [8851] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:28:26.933180649Z [err]  2026-01-06 16:28:20.845 UTC [8851] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:28:26.933198477Z [err]  2026-01-06 16:28:20.845 UTC [8851] STATEMENT:  
2026-01-06T16:28:26.933206692Z [err]  	        SELECT event
2026-01-06T16:28:26.933213688Z [err]  	        FROM event_config
2026-01-06T16:28:26.933310275Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:28:26.933317824Z [err]  	          AND active = 1
2026-01-06T16:28:26.933327879Z [err]  	          AND '16:28' BETWEEN open_time AND close_time
2026-01-06T16:28:26.933338040Z [err]  	        LIMIT 1;
2026-01-06T16:28:26.933344182Z [err]  	        
2026-01-06T16:28:26.933351295Z [err]  2026-01-06 16:28:21.716 UTC [8853] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:28:26.933357059Z [err]  2026-01-06 16:28:21.716 UTC [8853] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:28:26.939979544Z [err]  2026-01-06 16:28:21.716 UTC [8853] STATEMENT:  
2026-01-06T16:28:26.939984187Z [err]  	        SELECT event
2026-01-06T16:28:26.939988726Z [err]  	        FROM event_config
2026-01-06T16:28:26.939994926Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:28:26.940000596Z [err]  	          AND active = 1
2026-01-06T16:28:26.940004950Z [err]  	          AND '16:28' BETWEEN open_time AND close_time
2026-01-06T16:28:26.940009089Z [err]  	        LIMIT 1;
2026-01-06T16:28:26.940013301Z [err]  	        
2026-01-06T16:28:26.940017581Z [err]  2026-01-06 16:28:22.647 UTC [8855] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:28:26.940022016Z [err]  2026-01-06 16:28:22.647 UTC [8855] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:28:26.940028575Z [err]  2026-01-06 16:28:22.647 UTC [8855] STATEMENT:  
2026-01-06T16:28:26.940033083Z [err]  	        SELECT event
2026-01-06T16:28:26.940037571Z [err]  	        FROM event_config
2026-01-06T16:28:26.940041741Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:28:26.940047713Z [err]  	          AND active = 1
2026-01-06T16:28:26.940054086Z [err]  	          AND '16:28' BETWEEN open_time AND close_time
2026-01-06T16:28:26.940059640Z [err]  	        LIMIT 1;
2026-01-06T16:28:26.940065121Z [err]  	        
2026-01-06T16:28:27.680807528Z [inf]  ðŸ“¨ 27790385688: 6km 39:53 SBK03E
2026-01-06T16:28:27.941600562Z [inf]  INFO:     100.64.0.7:42084 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:28:27.943329079Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:28:27.943332242Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:28:27.943334519Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:28:27.943339668Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:27.943343528Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:28:27.943343623Z [err]  Traceback (most recent call last):
2026-01-06T16:28:27.943347233Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:28:27.943351970Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:28:27.943354744Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:28:27.943359093Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:28:27.943361927Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:28:27.943363626Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:28:27.943366838Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:27.943368964Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:28:27.943374341Z [err]          self.scope, self.receive, self.send
2026-01-06T16:28:27.943382250Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:27.943385138Z [err]      raise exc
2026-01-06T16:28:27.943389010Z [err]      )
2026-01-06T16:28:27.943395559Z [err]      ^
2026-01-06T16:28:27.943401201Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:28:27.944376957Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:28:27.944388623Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:28:27.944388706Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:28:27.944397598Z [err]      await self.app(scope, receive, send)
2026-01-06T16:28:27.944399785Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:28:27.944406671Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:28:27.944408586Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:28:27.944415947Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:28:27.944417510Z [err]      raise exc
2026-01-06T16:28:27.944425553Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:28:27.944425662Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:28:27.944433934Z [err]      await app(scope, receive, sender)
2026-01-06T16:28:27.944434723Z [err]      raise exc
2026-01-06T16:28:27.944440932Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:28:27.944446975Z [err]      await self.app(scope, receive, send)
2026-01-06T16:28:27.944452779Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:28:27.944458763Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:28:27.944465015Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:28:27.945258041Z [err]      return await dependant.call(**values)
2026-01-06T16:28:27.945261121Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:28:27.945268085Z [err]      await app(scope, receive, sender)
2026-01-06T16:28:27.945268418Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:27.945273006Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:28:27.945275765Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:28:27.945278549Z [err]      response = await f(request)
2026-01-06T16:28:27.945283555Z [err]      event = get_active_event()
2026-01-06T16:28:27.945289391Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:28:27.945293091Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:28:27.945295811Z [err]      cur.execute(
2026-01-06T16:28:27.945299399Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:28:27.945302794Z [err]      ~~~~~~~~~~~^
2026-01-06T16:28:27.945304821Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:28:27.945309399Z [err]          """
2026-01-06T16:28:27.945309742Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:27.945315848Z [err]      ...<3 lines>...
2026-01-06T16:28:27.945317076Z [err]          ^^^
2026-01-06T16:28:27.945322693Z [err]      )
2026-01-06T16:28:27.945328645Z [err]      ^
2026-01-06T16:28:27.945329866Z [err]      ...<7 lines>...
2026-01-06T16:28:27.945333843Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:28:27.945337046Z [err]          (day_of_week, current_time),
2026-01-06T16:28:27.945342347Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:27.946436331Z [err]      )
2026-01-06T16:28:27.946442195Z [err]      ^
2026-01-06T16:28:27.946446319Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:28:27.946452339Z [err]      return super().execute(query, vars)
2026-01-06T16:28:27.946458275Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:28:27.946464042Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:28:27.946469929Z [err]  LINE 5:           AND active = 1
2026-01-06T16:28:27.946475838Z [err]                               ^
2026-01-06T16:28:27.946483816Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:28:27.946489930Z [err]  
2026-01-06T16:28:27.956365380Z [err]  2026-01-06 16:28:27.936 UTC [8858] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:28:27.956389373Z [err]  2026-01-06 16:28:27.936 UTC [8858] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:28:27.956401742Z [err]  2026-01-06 16:28:27.936 UTC [8858] STATEMENT:  
2026-01-06T16:28:27.956412066Z [err]  	        SELECT event
2026-01-06T16:28:27.956421809Z [err]  	        FROM event_config
2026-01-06T16:28:27.956432199Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:28:27.956440809Z [err]  	          AND active = 1
2026-01-06T16:28:27.956449685Z [err]  	          AND '16:28' BETWEEN open_time AND close_time
2026-01-06T16:28:27.956465717Z [err]  	        LIMIT 1;
2026-01-06T16:28:27.956473872Z [err]  	        
2026-01-06T16:28:28.479562381Z [inf]  ðŸ“¨ 27790385688: 6km 39:53 SBK03E
2026-01-06T16:28:28.613140871Z [inf]  INFO:     100.64.0.4:28646 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:28:28.615639909Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:28:28.615653369Z [err]  Traceback (most recent call last):
2026-01-06T16:28:28.615654457Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:28:28.615656740Z [err]      ^
2026-01-06T16:28:28.615662368Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:28:28.615665180Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:28:28.615670145Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:28:28.615676233Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:28:28.615682107Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:28:28.615688492Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:28:28.615689192Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:28.615693324Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:28.615700268Z [err]          self.scope, self.receive, self.send
2026-01-06T16:28:28.615700628Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:28:28.615704662Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:28:28.615707906Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:28:28.615712326Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:28.615715091Z [err]      raise exc
2026-01-06T16:28:28.615715771Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:28:28.615720668Z [err]      )
2026-01-06T16:28:28.616636246Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:28:28.616646419Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:28:28.616655151Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:28:28.616660148Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:28:28.616667335Z [err]      raise exc
2026-01-06T16:28:28.616674191Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:28:28.616685624Z [err]      await app(scope, receive, sender)
2026-01-06T16:28:28.616686236Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:28:28.616698999Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:28:28.616702692Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:28:28.616711926Z [err]      await self.app(scope, receive, send)
2026-01-06T16:28:28.616717282Z [err]      raise exc
2026-01-06T16:28:28.616723722Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:28:28.616731013Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:28:28.616737331Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:28:28.616743805Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:28:28.616750644Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:28:28.616756607Z [err]      await self.app(scope, receive, send)
2026-01-06T16:28:28.618215926Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:28:28.618220751Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:28:28.618223316Z [err]          """
2026-01-06T16:28:28.618234413Z [err]      await app(scope, receive, sender)
2026-01-06T16:28:28.618237680Z [err]      return await dependant.call(**values)
2026-01-06T16:28:28.618239969Z [err]          ^^^
2026-01-06T16:28:28.618251086Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:28:28.618252846Z [err]      ...<7 lines>...
2026-01-06T16:28:28.618253209Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:28.618263297Z [err]          (day_of_week, current_time),
2026-01-06T16:28:28.618267249Z [err]      response = await f(request)
2026-01-06T16:28:28.618272129Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:28.618279649Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:28:28.618281268Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:28:28.618287163Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:28:28.618295772Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:28:28.618299353Z [err]      event = get_active_event()
2026-01-06T16:28:28.618303911Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:28.618315976Z [err]      ...<3 lines>...
2026-01-06T16:28:28.618316696Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:28:28.618323081Z [err]      )
2026-01-06T16:28:28.618331520Z [err]      ^
2026-01-06T16:28:28.618335878Z [err]      cur.execute(
2026-01-06T16:28:28.618349700Z [err]      ~~~~~~~~~~~^
2026-01-06T16:28:28.618551173Z [err]      )
2026-01-06T16:28:28.618555686Z [err]      ^
2026-01-06T16:28:28.618559829Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:28:28.618563551Z [err]      return super().execute(query, vars)
2026-01-06T16:28:28.618567402Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:28:28.618571598Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:28:28.618575557Z [err]  LINE 5:           AND active = 1
2026-01-06T16:28:28.618579617Z [err]                               ^
2026-01-06T16:28:28.618583179Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:28:28.618587238Z [err]  
2026-01-06T16:28:28.991508053Z [err]  	          AND active = 1
2026-01-06T16:28:28.991528379Z [err]  	          AND '16:28' BETWEEN open_time AND close_time
2026-01-06T16:28:28.991540494Z [err]  2026-01-06 16:28:28.607 UTC [8860] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:28:28.991551690Z [err]  2026-01-06 16:28:28.607 UTC [8860] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:28:28.991556159Z [err]  	        LIMIT 1;
2026-01-06T16:28:28.991564848Z [err]  2026-01-06 16:28:28.607 UTC [8860] STATEMENT:  
2026-01-06T16:28:28.991570778Z [err]  	        
2026-01-06T16:28:28.991578582Z [err]  	        SELECT event
2026-01-06T16:28:28.991586373Z [err]  	        FROM event_config
2026-01-06T16:28:28.991594773Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:28:29.088886601Z [inf]  ðŸ“¨ 27790385688: 6km 39:53 SBK03E
2026-01-06T16:28:29.210841080Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:28:29.210842830Z [inf]  INFO:     100.64.0.2:62522 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:28:29.210843101Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:28:29.210853812Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:28:29.210856247Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:28:29.210862053Z [err]  Traceback (most recent call last):
2026-01-06T16:28:29.210866023Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:28:29.210870658Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:28:29.210875408Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:28:29.210876730Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:29.210880099Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:28:29.210884310Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:28:29.210892557Z [err]          self.scope, self.receive, self.send
2026-01-06T16:28:29.210893042Z [err]      raise exc
2026-01-06T16:28:29.210901036Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:29.210907729Z [err]      )
2026-01-06T16:28:29.210913711Z [err]      ^
2026-01-06T16:28:29.210920341Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:28:29.210926614Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:28:29.210934634Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:29.211754031Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:28:29.211760547Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:28:29.211765128Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:28:29.211769670Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:28:29.211774027Z [err]      raise exc
2026-01-06T16:28:29.211778337Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:28:29.211782312Z [err]      await app(scope, receive, sender)
2026-01-06T16:28:29.211786856Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:28:29.211790781Z [err]      await self.app(scope, receive, send)
2026-01-06T16:28:29.211794938Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:28:29.211798858Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:28:29.211802589Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:28:29.211806625Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:28:29.211810967Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:28:29.211814582Z [err]      await self.app(scope, receive, send)
2026-01-06T16:28:29.211819328Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:28:29.211824698Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:28:29.211829274Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:28:29.212851411Z [err]      ^
2026-01-06T16:28:29.212854525Z [err]      raise exc
2026-01-06T16:28:29.212861579Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:28:29.212862456Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:29.212863748Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:28:29.212869162Z [err]      return await dependant.call(**values)
2026-01-06T16:28:29.212871536Z [err]      await app(scope, receive, sender)
2026-01-06T16:28:29.212877092Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:29.212882539Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:28:29.212884581Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:28:29.212888810Z [err]      response = await f(request)
2026-01-06T16:28:29.212888950Z [err]      cur.execute(
2026-01-06T16:28:29.212892728Z [err]      event = get_active_event()
2026-01-06T16:28:29.212896170Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:28:29.212898630Z [err]      ~~~~~~~~~~~^
2026-01-06T16:28:29.212901500Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:28:29.212901861Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:28:29.212906813Z [err]          """
2026-01-06T16:28:29.212908295Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:28:29.212913595Z [err]          ^^^
2026-01-06T16:28:29.212913648Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:29.212919691Z [err]      ...<3 lines>...
2026-01-06T16:28:29.212919924Z [err]      ...<7 lines>...
2026-01-06T16:28:29.212925740Z [err]      )
2026-01-06T16:28:29.212926389Z [err]          (day_of_week, current_time),
2026-01-06T16:28:29.213672966Z [err]  
2026-01-06T16:28:29.213677456Z [err]      )
2026-01-06T16:28:29.213682548Z [err]      ^
2026-01-06T16:28:29.213686567Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:28:29.213690213Z [err]      return super().execute(query, vars)
2026-01-06T16:28:29.213693912Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:28:29.213699551Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:28:29.213703126Z [err]  LINE 5:           AND active = 1
2026-01-06T16:28:29.213707197Z [err]                               ^
2026-01-06T16:28:29.213710672Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:28:30.184001093Z [err]  2026-01-06 16:28:29.200 UTC [8862] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:28:30.184005648Z [err]  2026-01-06 16:28:29.200 UTC [8862] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:28:30.184010240Z [err]  2026-01-06 16:28:29.200 UTC [8862] STATEMENT:  
2026-01-06T16:28:30.184015802Z [err]  	        SELECT event
2026-01-06T16:28:30.184022130Z [err]  	        FROM event_config
2026-01-06T16:28:30.184027142Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:28:30.184038753Z [err]  	          AND active = 1
2026-01-06T16:28:30.184044452Z [err]  	          AND '16:28' BETWEEN open_time AND close_time
2026-01-06T16:28:30.184051847Z [err]  	        LIMIT 1;
2026-01-06T16:28:30.184056788Z [err]  	        
2026-01-06T16:28:31.102025090Z [inf]  ðŸ“¨ 27790385688: 6km 39:53 SBK03E
2026-01-06T16:28:31.359737070Z [inf]  INFO:     100.64.0.3:50550 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:28:31.359749575Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:28:31.359759189Z [err]  Traceback (most recent call last):
2026-01-06T16:28:31.359768821Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:28:31.359775525Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:28:31.359782851Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:31.359789398Z [err]          self.scope, self.receive, self.send
2026-01-06T16:28:31.359803784Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:31.359810642Z [err]      )
2026-01-06T16:28:31.359817642Z [err]      ^
2026-01-06T16:28:31.359824138Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:28:31.359838490Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:28:31.359845511Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:31.359852472Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:28:31.359860191Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:28:31.359866419Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:28:31.359872333Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:28:31.359879632Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:28:31.359886316Z [err]      raise exc
2026-01-06T16:28:31.359893808Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:28:31.360480374Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:28:31.360488286Z [err]      await self.app(scope, receive, send)
2026-01-06T16:28:31.360496253Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:28:31.360498880Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:28:31.360505360Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:28:31.360507105Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:28:31.360513127Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:28:31.360514778Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:28:31.360518588Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:28:31.360523415Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:28:31.360524293Z [err]      raise exc
2026-01-06T16:28:31.360530638Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:28:31.360532503Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:28:31.360536604Z [err]      await app(scope, receive, sender)
2026-01-06T16:28:31.360540681Z [err]      await self.app(scope, receive, send)
2026-01-06T16:28:31.360546597Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:28:31.360553662Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:28:31.360560102Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:28:31.361918548Z [err]      ...<3 lines>...
2026-01-06T16:28:31.361918952Z [err]      raise exc
2026-01-06T16:28:31.361925044Z [err]      )
2026-01-06T16:28:31.361928791Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:28:31.361929360Z [err]          (day_of_week, current_time),
2026-01-06T16:28:31.361931022Z [err]      ^
2026-01-06T16:28:31.361935850Z [err]      await app(scope, receive, sender)
2026-01-06T16:28:31.361937865Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:28:31.361943315Z [err]      return await dependant.call(**values)
2026-01-06T16:28:31.361944100Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:31.361945460Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:28:31.361948300Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:28:31.361948551Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:31.361953385Z [err]      response = await f(request)
2026-01-06T16:28:31.361959668Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:28:31.361960113Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:28:31.361962366Z [err]      cur.execute(
2026-01-06T16:28:31.361965362Z [err]      event = get_active_event()
2026-01-06T16:28:31.361967215Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:28:31.361974025Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:28:31.361974040Z [err]      ~~~~~~~~~~~^
2026-01-06T16:28:31.361981431Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:31.361984940Z [err]          """
2026-01-06T16:28:31.361993358Z [err]          ^^^
2026-01-06T16:28:31.362000894Z [err]      ...<7 lines>...
2026-01-06T16:28:31.362829355Z [err]      )
2026-01-06T16:28:31.362835481Z [err]      ^
2026-01-06T16:28:31.362840067Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:28:31.362844158Z [err]      return super().execute(query, vars)
2026-01-06T16:28:31.362848873Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:28:31.362856860Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:28:31.362860944Z [err]  LINE 5:           AND active = 1
2026-01-06T16:28:31.362865021Z [err]                               ^
2026-01-06T16:28:31.362870200Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:28:31.362875435Z [err]  
2026-01-06T16:28:31.427240975Z [err]  2026-01-06 16:28:31.344 UTC [8864] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:28:31.427247974Z [err]  2026-01-06 16:28:31.344 UTC [8864] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:28:31.427256113Z [err]  2026-01-06 16:28:31.344 UTC [8864] STATEMENT:  
2026-01-06T16:28:31.427262436Z [err]  	        SELECT event
2026-01-06T16:28:31.427270089Z [err]  	        FROM event_config
2026-01-06T16:28:31.427277000Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:28:31.427285498Z [err]  	          AND active = 1
2026-01-06T16:28:31.427292392Z [err]  	          AND '16:28' BETWEEN open_time AND close_time
2026-01-06T16:28:31.427298289Z [err]  	        LIMIT 1;
2026-01-06T16:28:31.427305739Z [err]  	        
2026-01-06T16:28:32.651229483Z [inf]  ðŸ“¨ 27824958185: Runner
2026-01-06T16:28:32.651235795Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T16:28:32.651242446Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T16:28:32.651248562Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T16:28:33.214147613Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T16:28:33.214153870Z [inf]  ðŸ“¤ Status: 200
2026-01-06T16:28:33.214159606Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27824958185","wa_id":"27824958185"}],"messages":[{"id":"wamid.HBgLMjc4MjQ5NTgxODUVAgARGBJDMDYxNzUzODEyNTkwNjNBQjAA"}]}
2026-01-06T16:28:33.214163743Z [inf]  INFO:     100.64.0.3:50556 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:28:33.267777576Z [inf]  ðŸ“¨ 27711616333: 8km 48:48 SBK03E
2026-01-06T16:28:33.531684124Z [inf]  INFO:     100.64.0.2:10890 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:28:33.657237279Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:28:33.657245423Z [err]      raise exc
2026-01-06T16:28:33.657251926Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:28:33.657258410Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:28:33.657340218Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:28:33.657347978Z [err]  Traceback (most recent call last):
2026-01-06T16:28:33.657355664Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:28:33.657363952Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:28:33.657374382Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:33.657381119Z [err]          self.scope, self.receive, self.send
2026-01-06T16:28:33.657387445Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:33.657393553Z [err]      )
2026-01-06T16:28:33.657399552Z [err]      ^
2026-01-06T16:28:33.657406371Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:28:33.657418910Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:28:33.657426667Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:33.657433315Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:28:33.657440544Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:28:33.657446942Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:28:33.657455386Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:28:33.657698650Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:28:33.657704845Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:28:33.657711381Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:28:33.657717841Z [err]      raise exc
2026-01-06T16:28:33.657728246Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:28:33.657735497Z [err]      await app(scope, receive, sender)
2026-01-06T16:28:33.657742898Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:28:33.657749520Z [err]      await self.app(scope, receive, send)
2026-01-06T16:28:33.657756287Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:28:33.657765737Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:28:33.657772293Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:28:33.657781446Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:28:33.657787600Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:28:33.657794756Z [err]      await self.app(scope, receive, send)
2026-01-06T16:28:33.657803453Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:28:33.657811142Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:28:33.662168943Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:28:33.662176570Z [err]      raise exc
2026-01-06T16:28:33.662291543Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:28:33.662295691Z [err]      await app(scope, receive, sender)
2026-01-06T16:28:33.662299646Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:28:33.662303550Z [err]      response = await f(request)
2026-01-06T16:28:33.662307270Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:28:33.662310986Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:28:33.662315885Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:28:33.662324467Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:33.662329325Z [err]      ...<3 lines>...
2026-01-06T16:28:33.662334090Z [err]      )
2026-01-06T16:28:33.662338125Z [err]      ^
2026-01-06T16:28:33.662341830Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:28:33.662345320Z [err]      return await dependant.call(**values)
2026-01-06T16:28:33.662349861Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:33.662353807Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:28:33.662358160Z [err]      event = get_active_event()
2026-01-06T16:28:33.662362113Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:28:33.662366116Z [err]      cur.execute(
2026-01-06T16:28:33.662370806Z [err]      ~~~~~~~~~~~^
2026-01-06T16:28:33.662375171Z [err]          """
2026-01-06T16:28:33.662380158Z [err]          ^^^
2026-01-06T16:28:33.662383967Z [err]      ...<7 lines>...
2026-01-06T16:28:33.662387717Z [err]          (day_of_week, current_time),
2026-01-06T16:28:33.662392198Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:33.662456640Z [err]      )
2026-01-06T16:28:33.662461062Z [err]      ^
2026-01-06T16:28:33.662465234Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:28:33.662470921Z [err]      return super().execute(query, vars)
2026-01-06T16:28:33.662476314Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:28:33.662480111Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:28:33.662483677Z [err]  LINE 5:           AND active = 1
2026-01-06T16:28:33.662487326Z [err]                               ^
2026-01-06T16:28:33.662492900Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:28:33.662497073Z [err]  
2026-01-06T16:28:34.013450932Z [inf]  INFO:     100.64.0.6:57566 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:28:34.388948312Z [inf]  INFO:     100.64.0.2:10900 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:28:35.468063443Z [err]  	        LIMIT 1;
2026-01-06T16:28:35.468074518Z [err]  	        
2026-01-06T16:28:35.468592154Z [err]  2026-01-06 16:28:33.526 UTC [8867] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:28:35.468597899Z [err]  2026-01-06 16:28:33.526 UTC [8867] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:28:35.468606327Z [err]  2026-01-06 16:28:33.526 UTC [8867] STATEMENT:  
2026-01-06T16:28:35.468612342Z [err]  	        SELECT event
2026-01-06T16:28:35.468618057Z [err]  	        FROM event_config
2026-01-06T16:28:35.468623779Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:28:35.468630588Z [err]  	          AND active = 1
2026-01-06T16:28:35.468641635Z [err]  	          AND '16:28' BETWEEN open_time AND close_time
2026-01-06T16:28:36.886532346Z [inf]  ðŸ“¨ 27790385688: 6km 39:53 SBK03E
2026-01-06T16:28:37.148136949Z [inf]  INFO:     100.64.0.5:21290 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:28:37.154645981Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:28:37.154653912Z [err]  Traceback (most recent call last):
2026-01-06T16:28:37.154661620Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:28:37.154668740Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:28:37.154673896Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:28:37.154676986Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:37.154684763Z [err]          self.scope, self.receive, self.send
2026-01-06T16:28:37.154687126Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:28:37.154692571Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:37.154695499Z [err]      raise exc
2026-01-06T16:28:37.154701458Z [err]      )
2026-01-06T16:28:37.154702313Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:28:37.154708367Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:28:37.154710571Z [err]      ^
2026-01-06T16:28:37.154717374Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:28:37.154723694Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:28:37.154730375Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:37.154737467Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:28:37.154745182Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:28:37.154752147Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:28:37.155540640Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:28:37.155550698Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:28:37.155558881Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:28:37.155565626Z [err]      raise exc
2026-01-06T16:28:37.155572181Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:28:37.155579116Z [err]      await app(scope, receive, sender)
2026-01-06T16:28:37.155585217Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:28:37.155591593Z [err]      await self.app(scope, receive, send)
2026-01-06T16:28:37.155597860Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:28:37.155604884Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:28:37.155611465Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:28:37.155618084Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:28:37.155624617Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:28:37.155630821Z [err]      await self.app(scope, receive, send)
2026-01-06T16:28:37.155637203Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:28:37.155643806Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:28:37.155650848Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:28:37.155658616Z [err]      raise exc
2026-01-06T16:28:37.157081957Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:28:37.157085476Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:28:37.157092382Z [err]      await app(scope, receive, sender)
2026-01-06T16:28:37.157094192Z [err]      return await dependant.call(**values)
2026-01-06T16:28:37.157099817Z [err]      ~~~~~~~~~~~^
2026-01-06T16:28:37.157100676Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:28:37.157104273Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:37.157107768Z [err]          """
2026-01-06T16:28:37.157113388Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:28:37.157116931Z [err]          ^^^
2026-01-06T16:28:37.157121585Z [err]      event = get_active_event()
2026-01-06T16:28:37.157121590Z [err]      response = await f(request)
2026-01-06T16:28:37.157126009Z [err]      ...<7 lines>...
2026-01-06T16:28:37.157130817Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:28:37.157131208Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:28:37.157135922Z [err]          (day_of_week, current_time),
2026-01-06T16:28:37.157139343Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:28:37.157140504Z [err]      cur.execute(
2026-01-06T16:28:37.157145954Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:37.157147309Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:28:37.157153781Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:28:37.157160236Z [err]      ...<3 lines>...
2026-01-06T16:28:37.157166720Z [err]      )
2026-01-06T16:28:37.157172728Z [err]      ^
2026-01-06T16:28:37.157499565Z [err]      )
2026-01-06T16:28:37.157505036Z [err]      ^
2026-01-06T16:28:37.157508755Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:28:37.157512355Z [err]      return super().execute(query, vars)
2026-01-06T16:28:37.157515960Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:28:37.157520318Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:28:37.157523860Z [err]  LINE 5:           AND active = 1
2026-01-06T16:28:37.157527448Z [err]                               ^
2026-01-06T16:28:37.157532382Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:28:37.157536786Z [err]  
2026-01-06T16:28:37.593533879Z [err]  2026-01-06 16:28:37.140 UTC [8869] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:28:37.593550879Z [err]  2026-01-06 16:28:37.140 UTC [8869] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:28:37.593558851Z [err]  2026-01-06 16:28:37.140 UTC [8869] STATEMENT:  
2026-01-06T16:28:37.593568177Z [err]  	        SELECT event
2026-01-06T16:28:37.593575908Z [err]  	        FROM event_config
2026-01-06T16:28:37.593585025Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:28:37.593592777Z [err]  	          AND active = 1
2026-01-06T16:28:37.593600139Z [err]  	          AND '16:28' BETWEEN open_time AND close_time
2026-01-06T16:28:37.593606781Z [err]  	        LIMIT 1;
2026-01-06T16:28:37.593614731Z [err]  	        
2026-01-06T16:29:27.304606671Z [inf]  ðŸ“¨ 27634045059: Sbk03e.  SBK03E
2026-01-06T16:29:27.304614453Z [inf]  INFO:     100.64.0.2:55028 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:29:27.304620998Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:29:27.304626082Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:29:27.304629202Z [err]  Traceback (most recent call last):
2026-01-06T16:29:27.304635254Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:29:27.304637395Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:29:27.304643753Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:29:27.304644875Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:29:27.304651427Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:29:27.304651995Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:29:27.304658345Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:29:27.304660196Z [err]          self.scope, self.receive, self.send
2026-01-06T16:29:27.304665600Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:29:27.304667858Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:29:27.304672475Z [err]      raise exc
2026-01-06T16:29:27.304674665Z [err]      )
2026-01-06T16:29:27.304679784Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:29:27.304681723Z [err]      ^
2026-01-06T16:29:27.304689750Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:29:27.304696403Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:29:27.319052125Z [err]  2026-01-06 16:29:19.987 UTC [8873] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:29:27.319067080Z [err]  2026-01-06 16:29:19.987 UTC [8873] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:29:27.319079064Z [err]  2026-01-06 16:29:19.987 UTC [8873] STATEMENT:  
2026-01-06T16:29:27.319087601Z [err]  	        SELECT event
2026-01-06T16:29:27.319094827Z [err]  	        FROM event_config
2026-01-06T16:29:27.319104774Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:29:27.319111860Z [err]  	          AND active = 1
2026-01-06T16:29:27.319119523Z [err]  	          AND '16:29' BETWEEN open_time AND close_time
2026-01-06T16:29:27.319127257Z [err]  	        LIMIT 1;
2026-01-06T16:29:27.319135466Z [err]  	        
2026-01-06T16:29:27.551099936Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:29:27.551111423Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:29:27.551119793Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:29:27.551130711Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:29:27.551137723Z [err]      raise exc
2026-01-06T16:29:27.551145088Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:29:27.551151481Z [err]      await app(scope, receive, sender)
2026-01-06T16:29:27.551157678Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:29:27.551166343Z [err]      await self.app(scope, receive, send)
2026-01-06T16:29:27.551175222Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:29:27.551183870Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:29:27.551193089Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:29:27.551201291Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:29:27.551208512Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:29:27.551216552Z [err]      await self.app(scope, receive, send)
2026-01-06T16:29:27.551224055Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:29:27.551232683Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:29:27.551242191Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:29:27.551303570Z [err]      raise exc
2026-01-06T16:29:27.551309742Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:29:27.551316319Z [err]      await app(scope, receive, sender)
2026-01-06T16:29:27.551323485Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:29:27.551331258Z [err]      response = await f(request)
2026-01-06T16:29:27.551337525Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:29:27.551341776Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:29:27.551346212Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:29:27.551350272Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:29:27.551355061Z [err]      ...<3 lines>...
2026-01-06T16:29:27.551359229Z [err]      )
2026-01-06T16:29:27.551363235Z [err]      ^
2026-01-06T16:29:27.551367380Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:29:27.551372237Z [err]      return await dependant.call(**values)
2026-01-06T16:29:27.551376517Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:29:27.551380201Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:29:27.551384520Z [err]      event = get_active_event()
2026-01-06T16:29:27.551389454Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:29:27.551394051Z [err]      cur.execute(
2026-01-06T16:29:27.551398421Z [err]      ~~~~~~~~~~~^
2026-01-06T16:29:27.551402714Z [err]          """
2026-01-06T16:29:27.551407166Z [err]          ^^^
2026-01-06T16:29:27.551414389Z [err]      ...<7 lines>...
2026-01-06T16:29:27.551418375Z [err]          (day_of_week, current_time),
2026-01-06T16:29:27.551422281Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:29:27.551426721Z [err]      )
2026-01-06T16:29:27.551431449Z [err]      ^
2026-01-06T16:29:27.551435501Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:29:27.551440195Z [err]      return super().execute(query, vars)
2026-01-06T16:29:27.551444663Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:29:27.551449260Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:29:27.551453541Z [err]  LINE 5:           AND active = 1
2026-01-06T16:29:27.551457590Z [err]                               ^
2026-01-06T16:29:27.551461712Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:29:27.551466363Z [err]  
2026-01-06T16:29:30.479513328Z [inf]  ðŸ“¨ 27829406073: Hi
2026-01-06T16:29:30.687778346Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T16:29:30.687784288Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T16:29:30.687788262Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T16:29:31.423579248Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T16:29:31.423583062Z [inf]  ðŸ“¤ Status: 200
2026-01-06T16:29:31.423587554Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27829406073","wa_id":"27829406073"}],"messages":[{"id":"wamid.HBgLMjc4Mjk0MDYwNzMVAgARGBJCRTkyODE4MDIwODVCMUY4ODkA"}]}
2026-01-06T16:29:31.423592675Z [inf]  INFO:     100.64.0.4:56266 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:29:34.099579408Z [inf]  ðŸ“¨ 27824958185: 8km 46:10 SBK03E
2026-01-06T16:29:34.458155071Z [inf]  INFO:     100.64.0.7:26546 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:29:34.458160744Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:29:34.458166730Z [err]  Traceback (most recent call last):
2026-01-06T16:29:34.458168326Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:29:34.458179323Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:29:34.458181443Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:29:34.458186055Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:29:34.458189833Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:29:34.458193258Z [err]      raise exc
2026-01-06T16:29:34.458196418Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:29:34.458201826Z [err]          self.scope, self.receive, self.send
2026-01-06T16:29:34.458203745Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:29:34.458207890Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:29:34.458213349Z [err]      )
2026-01-06T16:29:34.458218971Z [err]      ^
2026-01-06T16:29:34.458224173Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:29:34.458229673Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:29:34.458234951Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:29:34.458241695Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:29:34.458246475Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:29:34.458978828Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:29:34.458986083Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:29:34.458990189Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:29:34.458994360Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:29:34.459000776Z [err]      raise exc
2026-01-06T16:29:34.459005110Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:29:34.459010736Z [err]      await app(scope, receive, sender)
2026-01-06T16:29:34.459015048Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:29:34.459019190Z [err]      await self.app(scope, receive, send)
2026-01-06T16:29:34.459023051Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:29:34.459026946Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:29:34.459031306Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:29:34.459035399Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:29:34.459039719Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:29:34.459044135Z [err]      await self.app(scope, receive, send)
2026-01-06T16:29:34.459047815Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:29:34.459051681Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:29:34.459056266Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:29:34.460086143Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:29:34.460094145Z [err]      cur.execute(
2026-01-06T16:29:34.460101234Z [err]      ~~~~~~~~~~~^
2026-01-06T16:29:34.460106950Z [err]      raise exc
2026-01-06T16:29:34.460109008Z [err]          """
2026-01-06T16:29:34.460120060Z [err]          ^^^
2026-01-06T16:29:34.460124035Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:29:34.460128784Z [err]      ...<7 lines>...
2026-01-06T16:29:34.460136426Z [err]          (day_of_week, current_time),
2026-01-06T16:29:34.460140230Z [err]      await app(scope, receive, sender)
2026-01-06T16:29:34.460146311Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:29:34.460152813Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:29:34.460160690Z [err]      response = await f(request)
2026-01-06T16:29:34.460167997Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:29:34.460175644Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:29:34.460200242Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:29:34.460207747Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:29:34.460224700Z [err]      ...<3 lines>...
2026-01-06T16:29:34.460231010Z [err]      )
2026-01-06T16:29:34.460235668Z [err]      ^
2026-01-06T16:29:34.460241551Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:29:34.460246020Z [err]      return await dependant.call(**values)
2026-01-06T16:29:34.460250896Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:29:34.460255654Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:29:34.460260066Z [err]      event = get_active_event()
2026-01-06T16:29:34.461006698Z [err]      )
2026-01-06T16:29:34.461015755Z [err]      ^
2026-01-06T16:29:34.461022789Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:29:34.461029987Z [err]      return super().execute(query, vars)
2026-01-06T16:29:34.461036713Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:29:34.461043489Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:29:34.461049754Z [err]  LINE 5:           AND active = 1
2026-01-06T16:29:34.461056544Z [err]                               ^
2026-01-06T16:29:34.461063427Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:29:34.461070275Z [err]  
2026-01-06T16:29:34.604258413Z [err]  	        LIMIT 1;
2026-01-06T16:29:34.604270936Z [err]  2026-01-06 16:29:34.363 UTC [8877] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:29:34.604273358Z [err]  	        
2026-01-06T16:29:34.604279857Z [err]  2026-01-06 16:29:34.363 UTC [8877] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:29:34.604286442Z [err]  2026-01-06 16:29:34.363 UTC [8877] STATEMENT:  
2026-01-06T16:29:34.604292804Z [err]  	        SELECT event
2026-01-06T16:29:34.604299206Z [err]  	        FROM event_config
2026-01-06T16:29:34.604306473Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:29:34.604313333Z [err]  	          AND active = 1
2026-01-06T16:29:34.604320549Z [err]  	          AND '16:29' BETWEEN open_time AND close_time
2026-01-06T16:29:34.687165368Z [inf]  INFO:     100.64.0.5:47096 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:29:35.069803677Z [inf]  INFO:     100.64.0.4:56266 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:29:35.151464530Z [inf]  INFO:     100.64.0.2:42278 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:29:35.163335844Z [inf]  ðŸ“¨ 27824958185: 8km 46:10 SBK03E
2026-01-06T16:29:35.303165723Z [err]      ^
2026-01-06T16:29:35.303173715Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:29:35.303181098Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:29:35.303187952Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:29:35.303194988Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:29:35.303202522Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:29:35.303209362Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:29:35.303214275Z [inf]  INFO:     100.64.0.8:12794 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:29:35.303216378Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:29:35.303223744Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:29:35.303225630Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:29:35.303231625Z [err]      raise exc
2026-01-06T16:29:35.303232493Z [err]  Traceback (most recent call last):
2026-01-06T16:29:35.303237509Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:29:35.303239248Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:29:35.303242397Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:29:35.303248359Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:29:35.303252148Z [err]          self.scope, self.receive, self.send
2026-01-06T16:29:35.303256708Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:29:35.303261466Z [err]      )
2026-01-06T16:29:35.303843262Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:29:35.303851231Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:29:35.303852532Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:29:35.303862221Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:29:35.303864622Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:29:35.303867375Z [err]      await self.app(scope, receive, send)
2026-01-06T16:29:35.303873313Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:29:35.303873319Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:29:35.303880290Z [err]      raise exc
2026-01-06T16:29:35.303888058Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:29:35.303890434Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:29:35.303896105Z [err]      await app(scope, receive, sender)
2026-01-06T16:29:35.303898340Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:29:35.303903347Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:29:35.303907219Z [err]      await self.app(scope, receive, send)
2026-01-06T16:29:35.303910995Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:29:35.303914858Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:29:35.303918444Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:29:35.304810945Z [err]      raise exc
2026-01-06T16:29:35.304823125Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:29:35.304831775Z [err]      await app(scope, receive, sender)
2026-01-06T16:29:35.304840146Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:29:35.304847339Z [err]      response = await f(request)
2026-01-06T16:29:35.304854616Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:29:35.304860885Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:29:35.304868210Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:29:35.304874841Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:29:35.304881837Z [err]      ...<3 lines>...
2026-01-06T16:29:35.304889502Z [err]      )
2026-01-06T16:29:35.304897410Z [err]      ^
2026-01-06T16:29:35.304903906Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:29:35.304910465Z [err]      return await dependant.call(**values)
2026-01-06T16:29:35.304916963Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:29:35.304923740Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:29:35.304930253Z [err]      event = get_active_event()
2026-01-06T16:29:35.304938055Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:29:35.304944984Z [err]      cur.execute(
2026-01-06T16:29:35.304952290Z [err]      ~~~~~~~~~~~^
2026-01-06T16:29:35.304959072Z [err]          """
2026-01-06T16:29:35.304966705Z [err]          ^^^
2026-01-06T16:29:35.304973452Z [err]      ...<7 lines>...
2026-01-06T16:29:35.304979735Z [err]          (day_of_week, current_time),
2026-01-06T16:29:35.304985966Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:29:35.305537215Z [err]      )
2026-01-06T16:29:35.305543022Z [err]      ^
2026-01-06T16:29:35.305547100Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:29:35.305550638Z [err]      return super().execute(query, vars)
2026-01-06T16:29:35.305554302Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:29:35.305558273Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:29:35.305561768Z [err]  LINE 5:           AND active = 1
2026-01-06T16:29:35.305565148Z [err]                               ^
2026-01-06T16:29:35.305574912Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:29:35.305578836Z [err]  
2026-01-06T16:29:35.620925817Z [err]  2026-01-06 16:29:35.283 UTC [8879] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:29:35.620938663Z [err]  2026-01-06 16:29:35.283 UTC [8879] STATEMENT:  
2026-01-06T16:29:35.620964243Z [err]  2026-01-06 16:29:35.283 UTC [8879] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:29:35.621146228Z [err]  	        SELECT event
2026-01-06T16:29:35.621169210Z [err]  	          AND active = 1
2026-01-06T16:29:35.621183732Z [err]  	          AND '16:29' BETWEEN open_time AND close_time
2026-01-06T16:29:35.621196556Z [err]  	        LIMIT 1;
2026-01-06T16:29:35.621209007Z [err]  	        
2026-01-06T16:29:35.621231893Z [err]  	        FROM event_config
2026-01-06T16:29:35.621240446Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:29:35.923503711Z [inf]  ðŸ“¨ 27824958185: 8km 46:10 SBK03E
2026-01-06T16:29:36.075388530Z [inf]  INFO:     100.64.0.7:26560 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:29:36.075406979Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:29:36.075413099Z [err]  Traceback (most recent call last):
2026-01-06T16:29:36.075418748Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:29:36.075424215Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:29:36.075428848Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:29:36.075434849Z [err]          self.scope, self.receive, self.send
2026-01-06T16:29:36.075439123Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:29:36.075443562Z [err]      )
2026-01-06T16:29:36.075452706Z [err]      ^
2026-01-06T16:29:36.075456638Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:29:36.075461210Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:29:36.075467100Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:29:36.075471771Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:29:36.075475796Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:29:36.075479776Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:29:36.075483703Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:29:36.075496127Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:29:36.075500173Z [err]      raise exc
2026-01-06T16:29:36.075507187Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:29:36.075768784Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:29:36.075773925Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:29:36.075776265Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:29:36.075778860Z [err]      await self.app(scope, receive, send)
2026-01-06T16:29:36.075782442Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:29:36.075783395Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:29:36.075784075Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:29:36.075789619Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:29:36.075792550Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:29:36.075794866Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:29:36.075798979Z [err]      raise exc
2026-01-06T16:29:36.075800493Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:29:36.075806640Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:29:36.075812994Z [err]      await app(scope, receive, sender)
2026-01-06T16:29:36.075819601Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:29:36.075826446Z [err]      await self.app(scope, receive, send)
2026-01-06T16:29:36.075833452Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:29:36.075839036Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:29:36.077208487Z [err]      raise exc
2026-01-06T16:29:36.077212877Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:29:36.077218342Z [err]      await app(scope, receive, sender)
2026-01-06T16:29:36.077222832Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:29:36.077228694Z [err]      response = await f(request)
2026-01-06T16:29:36.077232944Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:29:36.077237388Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:29:36.077242060Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:29:36.077258675Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:29:36.077264144Z [err]      ...<3 lines>...
2026-01-06T16:29:36.077268801Z [err]      )
2026-01-06T16:29:36.077273193Z [err]      ^
2026-01-06T16:29:36.077278285Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:29:36.077286007Z [err]      return await dependant.call(**values)
2026-01-06T16:29:36.077293762Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:29:36.077300077Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:29:36.077307005Z [err]      event = get_active_event()
2026-01-06T16:29:36.077313718Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:29:36.077318382Z [err]      cur.execute(
2026-01-06T16:29:36.077322516Z [err]      ~~~~~~~~~~~^
2026-01-06T16:29:36.077326652Z [err]          """
2026-01-06T16:29:36.077331356Z [err]          ^^^
2026-01-06T16:29:36.077336736Z [err]      ...<7 lines>...
2026-01-06T16:29:36.077341303Z [err]          (day_of_week, current_time),
2026-01-06T16:29:36.077346236Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:29:36.077499571Z [err]      )
2026-01-06T16:29:36.077503868Z [err]      ^
2026-01-06T16:29:36.077508045Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:29:36.077512253Z [err]      return super().execute(query, vars)
2026-01-06T16:29:36.077516361Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:29:36.077520224Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:29:36.077523652Z [err]  LINE 5:           AND active = 1
2026-01-06T16:29:36.077527208Z [err]                               ^
2026-01-06T16:29:36.077530819Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:29:36.077534708Z [err]  
2026-01-06T16:29:36.515436641Z [err]  	        SELECT event
2026-01-06T16:29:36.515450502Z [err]  	        FROM event_config
2026-01-06T16:29:36.515458646Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:29:36.515466120Z [err]  	          AND active = 1
2026-01-06T16:29:36.515481640Z [err]  	          AND '16:29' BETWEEN open_time AND close_time
2026-01-06T16:29:36.515489495Z [err]  	        LIMIT 1;
2026-01-06T16:29:36.515497098Z [err]  	        
2026-01-06T16:29:36.515787627Z [err]  2026-01-06 16:29:36.054 UTC [8881] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:29:36.515794452Z [err]  2026-01-06 16:29:36.054 UTC [8881] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:29:36.515800125Z [err]  2026-01-06 16:29:36.054 UTC [8881] STATEMENT:  
2026-01-06T16:29:37.637351168Z [inf]  ðŸ“¨ 27824958185: 8km 46:10 SBK03E
2026-01-06T16:29:37.913775178Z [inf]  INFO:     100.64.0.3:50870 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:29:37.913777252Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:29:37.913782391Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:29:37.913787475Z [err]  Traceback (most recent call last):
2026-01-06T16:29:37.913790139Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:29:37.913798274Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:29:37.913803900Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:29:37.913806869Z [err]      raise exc
2026-01-06T16:29:37.913809286Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:29:37.913814767Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:29:37.913816755Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:29:37.913821159Z [err]          self.scope, self.receive, self.send
2026-01-06T16:29:37.913825294Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:29:37.913829752Z [err]      )
2026-01-06T16:29:37.913865439Z [err]      ^
2026-01-06T16:29:37.913872449Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:29:37.913878187Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:29:37.913881985Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:29:37.913889338Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:29:37.913893558Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:29:37.915015935Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:29:37.915024245Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:29:37.915030741Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:29:37.915034890Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:29:37.915039531Z [err]      raise exc
2026-01-06T16:29:37.915044674Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:29:37.915049214Z [err]      await app(scope, receive, sender)
2026-01-06T16:29:37.915053784Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:29:37.915058085Z [err]      await self.app(scope, receive, send)
2026-01-06T16:29:37.915063947Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:29:37.915068194Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:29:37.915072179Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:29:37.915077233Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:29:37.915083411Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:29:37.915089259Z [err]      await self.app(scope, receive, send)
2026-01-06T16:29:37.915095994Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:29:37.915103179Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:29:37.915112088Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:29:37.916252673Z [err]      raise exc
2026-01-06T16:29:37.916253509Z [err]      ...<7 lines>...
2026-01-06T16:29:37.916256396Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:29:37.916264865Z [err]      event = get_active_event()
2026-01-06T16:29:37.916265769Z [err]          (day_of_week, current_time),
2026-01-06T16:29:37.916266264Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:29:37.916271779Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:29:37.916275848Z [err]      await app(scope, receive, sender)
2026-01-06T16:29:37.916276056Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:29:37.916279214Z [err]      cur.execute(
2026-01-06T16:29:37.916284094Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:29:37.916286524Z [err]      ~~~~~~~~~~~^
2026-01-06T16:29:37.916292091Z [err]      response = await f(request)
2026-01-06T16:29:37.916295594Z [err]          """
2026-01-06T16:29:37.916300940Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:29:37.916302253Z [err]          ^^^
2026-01-06T16:29:37.916309612Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:29:37.916314481Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:29:37.916319191Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:29:37.916324289Z [err]      ...<3 lines>...
2026-01-06T16:29:37.916328266Z [err]      )
2026-01-06T16:29:37.916333358Z [err]      ^
2026-01-06T16:29:37.916337402Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:29:37.916341629Z [err]      return await dependant.call(**values)
2026-01-06T16:29:37.916346691Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:29:37.917200549Z [err]      )
2026-01-06T16:29:37.917210287Z [err]      ^
2026-01-06T16:29:37.917219761Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:29:37.917227338Z [err]      return super().execute(query, vars)
2026-01-06T16:29:37.917233690Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:29:37.917240763Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:29:37.917252951Z [err]  LINE 5:           AND active = 1
2026-01-06T16:29:37.917259200Z [err]                               ^
2026-01-06T16:29:37.917263485Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:29:37.917268406Z [err]  
2026-01-06T16:29:38.700055262Z [err]  2026-01-06 16:29:37.898 UTC [8883] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:29:38.700062302Z [err]  2026-01-06 16:29:37.898 UTC [8883] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:29:38.700069047Z [err]  2026-01-06 16:29:37.898 UTC [8883] STATEMENT:  
2026-01-06T16:29:38.700076911Z [err]  	        SELECT event
2026-01-06T16:29:38.700084414Z [err]  	        FROM event_config
2026-01-06T16:29:38.700093073Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:29:38.700099796Z [err]  	          AND active = 1
2026-01-06T16:29:38.700110513Z [err]  	          AND '16:29' BETWEEN open_time AND close_time
2026-01-06T16:29:38.700118231Z [err]  	        LIMIT 1;
2026-01-06T16:29:38.700125157Z [err]  	        
2026-01-06T16:29:42.852990323Z [inf]  ðŸ“¨ 27829406073: Runner
2026-01-06T16:29:43.074855515Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T16:29:43.074865604Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T16:29:43.074874357Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T16:29:43.594449234Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T16:29:43.594456783Z [inf]  ðŸ“¤ Status: 200
2026-01-06T16:29:43.594463837Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27829406073","wa_id":"27829406073"}],"messages":[{"id":"wamid.HBgLMjc4Mjk0MDYwNzMVAgARGBIxRDY5QUVGQkFGNEVDMkI5NzQA"}]}
2026-01-06T16:29:43.594470601Z [inf]  INFO:     100.64.0.5:22310 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:29:44.591993993Z [inf]  INFO:     100.64.0.5:22310 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:29:45.319849169Z [inf]  INFO:     100.64.0.9:58228 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:29:45.649764628Z [inf]  INFO:     100.64.0.4:56848 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:30:05.703810652Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:30:05.703825069Z [err]      )
2026-01-06T16:30:05.703835065Z [err]      ^
2026-01-06T16:30:05.703844689Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:30:05.703858325Z [inf]  ðŸ“¨ 27824958185: 8km 46:10 SBK03E
2026-01-06T16:30:05.703858982Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:30:05.703871869Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:30:05.703873648Z [inf]  INFO:     100.64.0.6:44516 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:30:05.703885384Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:30:05.703887348Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:30:05.703897237Z [err]  Traceback (most recent call last):
2026-01-06T16:30:05.703901085Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:30:05.703907204Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:30:05.703915427Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:30:05.703919639Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:30:05.703927600Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:30:05.703930457Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:30:05.703936005Z [err]          self.scope, self.receive, self.send
2026-01-06T16:30:05.703941940Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:30:05.703950287Z [err]      raise exc
2026-01-06T16:30:05.703958317Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:30:05.704587853Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:30:05.704593886Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:30:05.704598897Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:30:05.704603353Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:30:05.704607773Z [err]      raise exc
2026-01-06T16:30:05.704613856Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:30:05.704618203Z [err]      await app(scope, receive, sender)
2026-01-06T16:30:05.704622823Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:30:05.704627365Z [err]      await self.app(scope, receive, send)
2026-01-06T16:30:05.704633019Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:30:05.704636915Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:30:05.704641634Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:30:05.704646040Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:30:05.704650042Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:30:05.704653742Z [err]      await self.app(scope, receive, send)
2026-01-06T16:30:05.704658005Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:30:05.704662249Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:30:05.704665987Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:30:05.705994770Z [err]      raise exc
2026-01-06T16:30:05.706000904Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:30:05.706008992Z [err]      await app(scope, receive, sender)
2026-01-06T16:30:05.706015012Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:30:05.706022587Z [err]      response = await f(request)
2026-01-06T16:30:05.706029308Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:30:05.706036506Z [err]          """
2026-01-06T16:30:05.706036691Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:30:05.706043896Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:30:05.706048189Z [err]          ^^^
2026-01-06T16:30:05.706051595Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:30:05.706056652Z [err]      ...<7 lines>...
2026-01-06T16:30:05.706060061Z [err]      ...<3 lines>...
2026-01-06T16:30:05.706065876Z [err]          (day_of_week, current_time),
2026-01-06T16:30:05.706068105Z [err]      )
2026-01-06T16:30:05.706073705Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:30:05.706076422Z [err]      ^
2026-01-06T16:30:05.706082784Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:30:05.706093967Z [err]      return await dependant.call(**values)
2026-01-06T16:30:05.706100496Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:30:05.706106388Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:30:05.706112173Z [err]      event = get_active_event()
2026-01-06T16:30:05.706118126Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:30:05.706124964Z [err]      cur.execute(
2026-01-06T16:30:05.706131797Z [err]      ~~~~~~~~~~~^
2026-01-06T16:30:05.707283825Z [err]      )
2026-01-06T16:30:05.707292430Z [err]      ^
2026-01-06T16:30:05.707299088Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:30:05.707306450Z [err]      return super().execute(query, vars)
2026-01-06T16:30:05.707314547Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:30:05.707320855Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:30:05.707333484Z [err]  LINE 5:           AND active = 1
2026-01-06T16:30:05.707339930Z [err]                               ^
2026-01-06T16:30:05.707346944Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:30:05.707353622Z [err]  
2026-01-06T16:30:09.037282900Z [err]  	        LIMIT 1;
2026-01-06T16:30:09.037293712Z [err]  	        
2026-01-06T16:30:09.037329689Z [err]  2026-01-06 16:30:00.633 UTC [8887] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:30:09.037336328Z [err]  2026-01-06 16:30:00.633 UTC [8887] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:30:09.037342752Z [err]  2026-01-06 16:30:00.633 UTC [8887] STATEMENT:  
2026-01-06T16:30:09.037349156Z [err]  	        SELECT event
2026-01-06T16:30:09.037356624Z [err]  	        FROM event_config
2026-01-06T16:30:09.037363148Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:30:09.037368707Z [err]  	          AND active = 1
2026-01-06T16:30:09.037375200Z [err]  	          AND '16:30' BETWEEN open_time AND close_time
2026-01-06T16:30:45.603245868Z [inf]  ðŸ“¨ 27829406073: 8 km 50:32 SBK03E
2026-01-06T16:30:45.603253526Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:30:45.603254040Z [inf]  INFO:     100.64.0.5:31560 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:30:45.603259186Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:30:45.603264495Z [err]  Traceback (most recent call last):
2026-01-06T16:30:45.603268025Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:30:45.603270657Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:30:45.603275896Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:30:45.603279063Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:30:45.603282707Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:30:45.603288556Z [err]      raise exc
2026-01-06T16:30:45.603288866Z [err]          self.scope, self.receive, self.send
2026-01-06T16:30:45.603295568Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:30:45.603298565Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:30:45.603300816Z [err]      )
2026-01-06T16:30:45.603305092Z [err]      ^
2026-01-06T16:30:45.603308971Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:30:45.603317073Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:30:45.603321203Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:30:45.603325323Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:30:45.603328960Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:30:45.603862822Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:30:45.603870521Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:30:45.603871981Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:30:45.603880365Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:30:45.603880741Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:30:45.603889046Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:30:45.603889413Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:30:45.603895456Z [err]      await self.app(scope, receive, send)
2026-01-06T16:30:45.603897652Z [err]      raise exc
2026-01-06T16:30:45.603901368Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:30:45.603906084Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:30:45.603908673Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:30:45.603914758Z [err]      await app(scope, receive, sender)
2026-01-06T16:30:45.603915136Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:30:45.603921046Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:30:45.603927186Z [err]      await self.app(scope, receive, send)
2026-01-06T16:30:45.603934449Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:30:45.603940676Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:30:45.605015858Z [err]      raise exc
2026-01-06T16:30:45.605019537Z [err]      ~~~~~~~~~~~^
2026-01-06T16:30:45.605025142Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:30:45.605031050Z [err]          """
2026-01-06T16:30:45.605032834Z [err]      await app(scope, receive, sender)
2026-01-06T16:30:45.605039251Z [err]          ^^^
2026-01-06T16:30:45.605040251Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:30:45.605044671Z [err]      ...<7 lines>...
2026-01-06T16:30:45.605049373Z [err]      response = await f(request)
2026-01-06T16:30:45.605051765Z [err]          (day_of_week, current_time),
2026-01-06T16:30:45.605056477Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:30:45.605068020Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:30:45.605075759Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:30:45.605081739Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:30:45.605087680Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:30:45.605092243Z [err]      ...<3 lines>...
2026-01-06T16:30:45.605096331Z [err]      )
2026-01-06T16:30:45.605101674Z [err]      ^
2026-01-06T16:30:45.605105915Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:30:45.605109819Z [err]      return await dependant.call(**values)
2026-01-06T16:30:45.605114299Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:30:45.605118914Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:30:45.605122800Z [err]      event = get_active_event()
2026-01-06T16:30:45.605127110Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:30:45.605130827Z [err]      cur.execute(
2026-01-06T16:30:45.605599353Z [err]      )
2026-01-06T16:30:45.605609824Z [err]      ^
2026-01-06T16:30:45.605618544Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:30:45.605626338Z [err]      return super().execute(query, vars)
2026-01-06T16:30:45.605632517Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:30:45.605638378Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:30:45.605644758Z [err]  LINE 5:           AND active = 1
2026-01-06T16:30:45.605652468Z [err]                               ^
2026-01-06T16:30:45.605657436Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:30:45.605664102Z [err]  
2026-01-06T16:30:45.605669366Z [inf]  ðŸ“¨ 27829406073: 8 km 50:32 SBK03E
2026-01-06T16:30:45.748272978Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:30:45.748280646Z [inf]  INFO:     100.64.0.6:50462 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:30:45.748284102Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:30:45.748290612Z [err]      raise exc
2026-01-06T16:30:45.748292045Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:30:45.748297121Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:30:45.748301174Z [err]  Traceback (most recent call last):
2026-01-06T16:30:45.748308638Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:30:45.748316153Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:30:45.748327264Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:30:45.748332042Z [err]          self.scope, self.receive, self.send
2026-01-06T16:30:45.748336394Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:30:45.748340644Z [err]      )
2026-01-06T16:30:45.748345187Z [err]      ^
2026-01-06T16:30:45.748349155Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:30:45.748472358Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:30:45.748478587Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:30:45.748482266Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:30:45.748487185Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:30:45.748490958Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:30:45.753709616Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:30:45.753719816Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:30:45.753726355Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:30:45.753732359Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:30:45.753738609Z [err]      raise exc
2026-01-06T16:30:45.753744846Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:30:45.753751401Z [err]      await app(scope, receive, sender)
2026-01-06T16:30:45.753757596Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:30:45.753765582Z [err]      await self.app(scope, receive, send)
2026-01-06T16:30:45.753773228Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:30:45.753779647Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:30:45.753785729Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:30:45.753792434Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:30:45.753798576Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:30:45.753804756Z [err]      await self.app(scope, receive, send)
2026-01-06T16:30:45.753810712Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:30:45.753816785Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:30:45.753823450Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:30:45.753829102Z [err]      raise exc
2026-01-06T16:30:45.753880087Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:30:45.753888858Z [err]      await app(scope, receive, sender)
2026-01-06T16:30:45.753895896Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:30:45.753903819Z [err]      response = await f(request)
2026-01-06T16:30:45.753912319Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:30:45.753921694Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:30:45.753929653Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:30:45.753940798Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:30:45.753948754Z [err]      ...<3 lines>...
2026-01-06T16:30:45.753954611Z [err]      )
2026-01-06T16:30:45.753963855Z [err]      ^
2026-01-06T16:30:45.753969819Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:30:45.753975463Z [err]      return await dependant.call(**values)
2026-01-06T16:30:45.753980839Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:30:45.753986230Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:30:45.753992640Z [err]      event = get_active_event()
2026-01-06T16:30:45.753998259Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:30:45.754003499Z [err]      cur.execute(
2026-01-06T16:30:45.754008770Z [err]      ~~~~~~~~~~~^
2026-01-06T16:30:45.754014147Z [err]          """
2026-01-06T16:30:45.754019140Z [err]          ^^^
2026-01-06T16:30:45.754024864Z [err]      ...<7 lines>...
2026-01-06T16:30:45.754030006Z [err]          (day_of_week, current_time),
2026-01-06T16:30:45.754035844Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:30:45.754042084Z [err]      )
2026-01-06T16:30:45.754047401Z [err]      ^
2026-01-06T16:30:45.754052902Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:30:45.754058065Z [err]      return super().execute(query, vars)
2026-01-06T16:30:45.754063389Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:30:45.754068246Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:30:45.754074144Z [err]  LINE 5:           AND active = 1
2026-01-06T16:30:45.754080172Z [err]                               ^
2026-01-06T16:30:45.754085489Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:30:45.754092484Z [err]  
2026-01-06T16:30:46.286269365Z [inf]  ðŸ“¨ 27829406073: 8 km 50:32 SBK03E
2026-01-06T16:30:46.461338279Z [err]      ...<3 lines>...
2026-01-06T16:30:46.461348690Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:30:46.461354974Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:30:46.461357710Z [err]      )
2026-01-06T16:30:46.461368163Z [err]  
2026-01-06T16:30:46.461369896Z [err]      return await dependant.call(**values)
2026-01-06T16:30:46.461370147Z [err]      ^
2026-01-06T16:30:46.461376520Z [err]      ^
2026-01-06T16:30:46.461378115Z [err]      event = get_active_event()
2026-01-06T16:30:46.461387890Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:30:46.461390957Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:30:46.461396062Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:30:46.461401045Z [err]      return super().execute(query, vars)
2026-01-06T16:30:46.461405177Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:30:46.461409658Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:30:46.461412402Z [err]      cur.execute(
2026-01-06T16:30:46.461415982Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:30:46.461421938Z [err]  LINE 5:           AND active = 1
2026-01-06T16:30:46.461424411Z [err]      ~~~~~~~~~~~^
2026-01-06T16:30:46.461429237Z [err]                               ^
2026-01-06T16:30:46.461434088Z [err]          """
2026-01-06T16:30:46.461442029Z [err]          ^^^
2026-01-06T16:30:46.461450537Z [err]      ...<7 lines>...
2026-01-06T16:30:46.461457633Z [err]          (day_of_week, current_time),
2026-01-06T16:30:46.461465933Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:30:46.461474030Z [err]      )
2026-01-06T16:30:46.461681753Z [inf]  INFO:     100.64.0.9:22928 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:30:46.461693625Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:30:46.461699981Z [err]  Traceback (most recent call last):
2026-01-06T16:30:46.461703982Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:30:46.461708074Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:30:46.461712791Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:30:46.461718227Z [err]          self.scope, self.receive, self.send
2026-01-06T16:30:46.461722591Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:30:46.461727000Z [err]      )
2026-01-06T16:30:46.461730910Z [err]      ^
2026-01-06T16:30:46.461734739Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:30:46.461740889Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:30:46.461745341Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:30:46.461749486Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:30:46.461752938Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:30:46.461757942Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:30:46.461763329Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:30:46.461767567Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:30:46.461771518Z [err]      raise exc
2026-01-06T16:30:46.461775407Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:30:46.461780542Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:30:46.461785054Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:30:46.461793500Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:30:46.461797969Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:30:46.461806580Z [err]      raise exc
2026-01-06T16:30:46.461811774Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:30:46.461815724Z [err]      await app(scope, receive, sender)
2026-01-06T16:30:46.461820374Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:30:46.461824516Z [err]      await self.app(scope, receive, send)
2026-01-06T16:30:46.461829990Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:30:46.461878310Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:30:46.461883385Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:30:46.461887995Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:30:46.461891864Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:30:46.461898354Z [err]      await self.app(scope, receive, send)
2026-01-06T16:30:46.461904892Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:30:46.461908770Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:30:46.461912510Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:30:46.461917220Z [err]      raise exc
2026-01-06T16:30:46.461921785Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:30:46.461927395Z [err]      await app(scope, receive, sender)
2026-01-06T16:30:46.461932361Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:30:46.461936121Z [err]      response = await f(request)
2026-01-06T16:30:46.461941232Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:30:46.461944887Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:30:46.461948625Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:30:46.461953437Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:30:48.284452000Z [inf]  ðŸ“¨ 27829406073: 8 km 50:32 SBK03E
2026-01-06T16:30:48.532656167Z [inf]  INFO:     100.64.0.4:28898 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:30:48.532666765Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:30:48.532673635Z [err]  Traceback (most recent call last):
2026-01-06T16:30:48.532680835Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:30:48.532687085Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:30:48.532693727Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:30:48.532702957Z [err]          self.scope, self.receive, self.send
2026-01-06T16:30:48.532709662Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:30:48.532716620Z [err]      )
2026-01-06T16:30:48.532724175Z [err]      ^
2026-01-06T16:30:48.532731077Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:30:48.532737622Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:30:48.532744757Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:30:48.532751547Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:30:48.532757652Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:30:48.532763852Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:30:48.532770647Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:30:48.532777364Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:30:48.532784154Z [err]      raise exc
2026-01-06T16:30:48.532790763Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:30:48.533111279Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:30:48.533119343Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:30:48.533126258Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:30:48.533132865Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:30:48.533146629Z [err]      raise exc
2026-01-06T16:30:48.533153538Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:30:48.533160227Z [err]      await app(scope, receive, sender)
2026-01-06T16:30:48.533170012Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:30:48.533176704Z [err]      await self.app(scope, receive, send)
2026-01-06T16:30:48.533183472Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:30:48.533189822Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:30:48.533196083Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:30:48.533202694Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:30:48.533209497Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:30:48.533216150Z [err]      await self.app(scope, receive, send)
2026-01-06T16:30:48.533222865Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:30:48.533229354Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:30:48.533235317Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:30:48.534246441Z [err]      ~~~~~~~~~~~^
2026-01-06T16:30:48.534256147Z [err]          """
2026-01-06T16:30:48.534264634Z [err]          ^^^
2026-01-06T16:30:48.534271348Z [err]      ...<7 lines>...
2026-01-06T16:30:48.534278072Z [err]          (day_of_week, current_time),
2026-01-06T16:30:48.534284983Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:30:48.534296930Z [err]      raise exc
2026-01-06T16:30:48.534304976Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:30:48.534311936Z [err]      await app(scope, receive, sender)
2026-01-06T16:30:48.534318373Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:30:48.534325191Z [err]      response = await f(request)
2026-01-06T16:30:48.534332012Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:30:48.534339213Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:30:48.534346953Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:30:48.534354109Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:30:48.534360944Z [err]      ...<3 lines>...
2026-01-06T16:30:48.534367693Z [err]      )
2026-01-06T16:30:48.534375624Z [err]      ^
2026-01-06T16:30:48.534381648Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:30:48.534387529Z [err]      return await dependant.call(**values)
2026-01-06T16:30:48.534394250Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:30:48.534401253Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:30:48.534408033Z [err]      event = get_active_event()
2026-01-06T16:30:48.534414623Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:30:48.534420905Z [err]      cur.execute(
2026-01-06T16:30:48.535037943Z [err]      )
2026-01-06T16:30:48.535043272Z [err]      ^
2026-01-06T16:30:48.535047196Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:30:48.535054044Z [err]      return super().execute(query, vars)
2026-01-06T16:30:48.535060267Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:30:48.535066628Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:30:48.535073549Z [err]  LINE 5:           AND active = 1
2026-01-06T16:30:48.535079110Z [err]                               ^
2026-01-06T16:30:48.535085037Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:30:48.535090292Z [err]  
2026-01-06T16:30:49.864734258Z [err]  2026-01-06 16:30:44.698 UTC [8892] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:30:49.864741237Z [err]  2026-01-06 16:30:44.698 UTC [8892] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:30:49.864748129Z [err]  2026-01-06 16:30:44.698 UTC [8892] STATEMENT:  
2026-01-06T16:30:49.864755854Z [err]  	        SELECT event
2026-01-06T16:30:49.864763359Z [err]  	        FROM event_config
2026-01-06T16:30:49.864771585Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:30:49.864778531Z [err]  	          AND active = 1
2026-01-06T16:30:49.864785444Z [err]  	          AND '16:30' BETWEEN open_time AND close_time
2026-01-06T16:30:49.864793697Z [err]  	        LIMIT 1;
2026-01-06T16:30:49.864800006Z [err]  	        
2026-01-06T16:30:49.864805870Z [err]  2026-01-06 16:30:45.728 UTC [8894] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:30:49.864811619Z [err]  2026-01-06 16:30:45.728 UTC [8894] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:30:49.864817259Z [err]  2026-01-06 16:30:45.728 UTC [8894] STATEMENT:  
2026-01-06T16:30:49.864822189Z [err]  	        SELECT event
2026-01-06T16:30:49.864827570Z [err]  	        FROM event_config
2026-01-06T16:30:49.864833575Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:30:49.864839738Z [err]  	          AND active = 1
2026-01-06T16:30:49.864845324Z [err]  	          AND '16:30' BETWEEN open_time AND close_time
2026-01-06T16:30:49.864849926Z [err]  	        LIMIT 1;
2026-01-06T16:30:49.864856604Z [err]  	        
2026-01-06T16:30:49.864861904Z [err]  2026-01-06 16:30:46.410 UTC [8896] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:30:49.864867211Z [err]  2026-01-06 16:30:46.410 UTC [8896] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:30:50.830527010Z [err]  2026-01-06 16:30:46.410 UTC [8896] STATEMENT:  
2026-01-06T16:30:50.830534984Z [err]  	        SELECT event
2026-01-06T16:30:50.830542123Z [err]  	        FROM event_config
2026-01-06T16:30:50.830550720Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:30:50.830556829Z [err]  	          AND active = 1
2026-01-06T16:30:50.830570052Z [err]  	          AND '16:30' BETWEEN open_time AND close_time
2026-01-06T16:30:50.830576516Z [err]  	        LIMIT 1;
2026-01-06T16:30:50.830585451Z [err]  	        
2026-01-06T16:30:50.830592778Z [err]  2026-01-06 16:30:48.524 UTC [8898] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:30:50.830600162Z [err]  2026-01-06 16:30:48.524 UTC [8898] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:30:50.830609769Z [err]  2026-01-06 16:30:48.524 UTC [8898] STATEMENT:  
2026-01-06T16:30:50.830618607Z [err]  	        SELECT event
2026-01-06T16:30:50.830626936Z [err]  	        FROM event_config
2026-01-06T16:30:50.830635287Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:30:50.830641818Z [err]  	          AND active = 1
2026-01-06T16:30:50.830649866Z [err]  	          AND '16:30' BETWEEN open_time AND close_time
2026-01-06T16:30:50.830656782Z [err]  	        LIMIT 1;
2026-01-06T16:30:50.830664082Z [err]  	        
2026-01-06T16:31:08.518924674Z [inf]  ðŸ“¨ 27829406073: 8 km 50:32 SBK03E
2026-01-06T16:31:08.518936959Z [inf]  INFO:     100.64.0.6:34002 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:31:08.518945621Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:31:08.518955318Z [err]  Traceback (most recent call last):
2026-01-06T16:31:08.518969474Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:31:08.518978445Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:31:08.518987610Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:31:08.518996277Z [err]          self.scope, self.receive, self.send
2026-01-06T16:31:08.519004918Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:31:08.519014260Z [err]      )
2026-01-06T16:31:08.519021669Z [err]      ^
2026-01-06T16:31:08.519034779Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:31:08.519043771Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:31:08.519052704Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:31:08.519061958Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:31:08.519069683Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:31:08.519077874Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:31:08.519085956Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:31:08.519095011Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:31:08.519103725Z [err]      raise exc
2026-01-06T16:31:08.519112508Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:31:08.519952051Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:31:08.519963394Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:31:08.519964823Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:31:08.519971708Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:31:08.519976427Z [err]      await self.app(scope, receive, send)
2026-01-06T16:31:08.519980223Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:31:08.519986647Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:31:08.519990288Z [err]      raise exc
2026-01-06T16:31:08.519995615Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:31:08.519999426Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:31:08.520005363Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:31:08.520008697Z [err]      await app(scope, receive, sender)
2026-01-06T16:31:08.520016527Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:31:08.520025849Z [err]      await self.app(scope, receive, send)
2026-01-06T16:31:08.520031494Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:31:08.520037024Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:31:08.520041183Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:31:08.520045279Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:31:08.521348375Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:31:08.521352306Z [err]      raise exc
2026-01-06T16:31:08.521353175Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:31:08.521361579Z [err]      event = get_active_event()
2026-01-06T16:31:08.521363147Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:31:08.521367755Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:31:08.521371137Z [err]      await app(scope, receive, sender)
2026-01-06T16:31:08.521375196Z [err]      cur.execute(
2026-01-06T16:31:08.521380692Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:31:08.521381239Z [err]      ~~~~~~~~~~~^
2026-01-06T16:31:08.521389426Z [err]      response = await f(request)
2026-01-06T16:31:08.521396477Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:31:08.521398344Z [err]          """
2026-01-06T16:31:08.521403600Z [err]          ^^^
2026-01-06T16:31:08.521405521Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:31:08.521409100Z [err]      ...<7 lines>...
2026-01-06T16:31:08.521414448Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:31:08.521414474Z [err]          (day_of_week, current_time),
2026-01-06T16:31:08.521421750Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:31:08.521429128Z [err]      ...<3 lines>...
2026-01-06T16:31:08.521436038Z [err]      )
2026-01-06T16:31:08.521441825Z [err]      ^
2026-01-06T16:31:08.521445903Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:31:08.521450151Z [err]      return await dependant.call(**values)
2026-01-06T16:31:08.521454014Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:31:08.522214154Z [err]      )
2026-01-06T16:31:08.522219700Z [err]      ^
2026-01-06T16:31:08.522224461Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:31:08.522228897Z [err]      return super().execute(query, vars)
2026-01-06T16:31:08.522234378Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:31:08.522238544Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:31:08.522242661Z [err]  LINE 5:           AND active = 1
2026-01-06T16:31:08.522247434Z [err]                               ^
2026-01-06T16:31:08.522251806Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:31:08.522256616Z [err]  
2026-01-06T16:31:10.283197585Z [err]  2026-01-06 16:31:07.530 UTC [8901] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:31:10.283213480Z [err]  2026-01-06 16:31:07.530 UTC [8901] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:31:10.283221893Z [err]  2026-01-06 16:31:07.530 UTC [8901] STATEMENT:  
2026-01-06T16:31:10.283230285Z [err]  	        SELECT event
2026-01-06T16:31:10.283238335Z [err]  	        FROM event_config
2026-01-06T16:31:10.283246404Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:31:10.283257457Z [err]  	          AND active = 1
2026-01-06T16:31:10.283264220Z [err]  	          AND '16:31' BETWEEN open_time AND close_time
2026-01-06T16:31:10.283271347Z [err]  	        LIMIT 1;
2026-01-06T16:31:10.283278869Z [err]  	        
2026-01-06T16:31:28.499990102Z [inf]  ðŸ“¨ 27824958185: 8km 46:10 SBK03E
2026-01-06T16:31:28.500003784Z [inf]  INFO:     100.64.0.9:18522 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:31:28.500013838Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:31:28.500024607Z [err]  Traceback (most recent call last):
2026-01-06T16:31:28.500033320Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:31:28.500041859Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:31:28.500049592Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:31:28.500070778Z [err]          self.scope, self.receive, self.send
2026-01-06T16:31:28.500078766Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:31:28.500085115Z [err]      )
2026-01-06T16:31:28.500092855Z [err]      ^
2026-01-06T16:31:28.500099018Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:31:28.500106739Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:31:28.500113099Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:31:28.500118563Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:31:28.500124760Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:31:28.500130455Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:31:28.500137458Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:31:28.500143481Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:31:28.500149411Z [err]      raise exc
2026-01-06T16:31:28.500155699Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:31:28.504845945Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:31:28.504855077Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:31:28.504861756Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:31:28.504867096Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:31:28.504872963Z [err]      raise exc
2026-01-06T16:31:28.504879348Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:31:28.504885873Z [err]      await app(scope, receive, sender)
2026-01-06T16:31:28.504891883Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:31:28.504898116Z [err]      await self.app(scope, receive, send)
2026-01-06T16:31:28.504903749Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:31:28.504909435Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:31:28.504913275Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:31:28.504917247Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:31:28.504921263Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:31:28.504925245Z [err]      await self.app(scope, receive, send)
2026-01-06T16:31:28.504930220Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:31:28.504934374Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:31:28.504939187Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:31:28.504943059Z [err]      raise exc
2026-01-06T16:31:28.504946746Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:31:28.504952102Z [err]      await app(scope, receive, sender)
2026-01-06T16:31:28.504956971Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:31:28.504961472Z [err]      response = await f(request)
2026-01-06T16:31:28.504965129Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:31:28.504969330Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:31:28.504973119Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:31:28.504977279Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:31:28.504981423Z [err]      ...<3 lines>...
2026-01-06T16:31:28.504985706Z [err]      )
2026-01-06T16:31:28.504992402Z [err]      ^
2026-01-06T16:31:28.504996108Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:31:28.504999835Z [err]      return await dependant.call(**values)
2026-01-06T16:31:28.505003720Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:31:28.505008120Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:31:28.505012048Z [err]      event = get_active_event()
2026-01-06T16:31:28.505016396Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:31:28.505020512Z [err]      cur.execute(
2026-01-06T16:31:28.505024526Z [err]      ~~~~~~~~~~~^
2026-01-06T16:31:28.505029295Z [err]          """
2026-01-06T16:31:28.505033078Z [err]          ^^^
2026-01-06T16:31:28.505036935Z [err]      ...<7 lines>...
2026-01-06T16:31:28.505040656Z [err]          (day_of_week, current_time),
2026-01-06T16:31:28.505044257Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:31:28.505048076Z [err]      )
2026-01-06T16:31:28.505052350Z [err]      ^
2026-01-06T16:31:28.505056083Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:31:28.505060191Z [err]      return super().execute(query, vars)
2026-01-06T16:31:28.505063933Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:31:28.505067865Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:31:28.505071467Z [err]  LINE 5:           AND active = 1
2026-01-06T16:31:28.505075253Z [err]                               ^
2026-01-06T16:31:28.505080511Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:31:28.505084881Z [err]  
2026-01-06T16:31:30.504033873Z [err]  2026-01-06 16:31:23.808 UTC [8904] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:31:30.504043278Z [err]  2026-01-06 16:31:23.808 UTC [8904] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:31:30.504052135Z [err]  2026-01-06 16:31:23.808 UTC [8904] STATEMENT:  
2026-01-06T16:31:30.504064952Z [err]  	        SELECT event
2026-01-06T16:31:30.504074364Z [err]  	        FROM event_config
2026-01-06T16:31:30.504084977Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:31:30.504095254Z [err]  	          AND active = 1
2026-01-06T16:31:30.504104317Z [err]  	          AND '16:31' BETWEEN open_time AND close_time
2026-01-06T16:31:30.504113900Z [err]  	        LIMIT 1;
2026-01-06T16:31:30.504122485Z [err]  	        
2026-01-06T16:31:48.449316960Z [inf]  ðŸ“¨ 27711616333: 8km 48:48 SBK03E
2026-01-06T16:31:48.449320219Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:31:48.449326010Z [inf]  INFO:     100.64.0.8:59140 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:31:48.449334170Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:31:48.449335228Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:31:48.449344143Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:31:48.449344742Z [err]  Traceback (most recent call last):
2026-01-06T16:31:48.449352949Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:31:48.449354762Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:31:48.449361657Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:31:48.449363775Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:31:48.449370186Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:31:48.449374118Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:31:48.449381822Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:31:48.449384457Z [err]          self.scope, self.receive, self.send
2026-01-06T16:31:48.449390953Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:31:48.449393661Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:31:48.449399969Z [err]      raise exc
2026-01-06T16:31:48.449402181Z [err]      )
2026-01-06T16:31:48.449409280Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:31:48.449410729Z [err]      ^
2026-01-06T16:31:48.460182933Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:31:48.460194632Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:31:48.460202800Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:31:48.460211693Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:31:48.460219077Z [err]      raise exc
2026-01-06T16:31:48.460226293Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:31:48.460233343Z [err]      await app(scope, receive, sender)
2026-01-06T16:31:48.460239944Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:31:48.460247737Z [err]      await self.app(scope, receive, send)
2026-01-06T16:31:48.460256018Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:31:48.460263513Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:31:48.460264794Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:31:48.460272900Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:31:48.460274170Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:31:48.460281155Z [err]      ...<3 lines>...
2026-01-06T16:31:48.460281749Z [err]  LINE 5:           AND active = 1
2026-01-06T16:31:48.460283545Z [err]      cur.execute(
2026-01-06T16:31:48.460284185Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:31:48.460290128Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:31:48.460291885Z [err]      ~~~~~~~~~~~^
2026-01-06T16:31:48.460294665Z [err]                               ^
2026-01-06T16:31:48.460294790Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:31:48.460297131Z [err]      )
2026-01-06T16:31:48.460299530Z [err]          """
2026-01-06T16:31:48.460302408Z [err]      return super().execute(query, vars)
2026-01-06T16:31:48.460305307Z [err]      await self.app(scope, receive, send)
2026-01-06T16:31:48.460307228Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:31:48.460308360Z [err]      ^
2026-01-06T16:31:48.460314665Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:31:48.460315415Z [err]          ^^^
2026-01-06T16:31:48.460316143Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:31:48.460318583Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:31:48.460320373Z [err]  
2026-01-06T16:31:48.460323238Z [err]      ...<7 lines>...
2026-01-06T16:31:48.460325544Z [err]      return await dependant.call(**values)
2026-01-06T16:31:48.460328008Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:31:48.460329190Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:31:48.460331313Z [err]          (day_of_week, current_time),
2026-01-06T16:31:48.460333463Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:31:48.460338156Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:31:48.460338573Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:31:48.460340369Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:31:48.460344652Z [err]      )
2026-01-06T16:31:48.460346775Z [err]      event = get_active_event()
2026-01-06T16:31:48.460349545Z [err]      raise exc
2026-01-06T16:31:48.460351141Z [err]      ^
2026-01-06T16:31:48.460357788Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:31:48.460369544Z [err]      await app(scope, receive, sender)
2026-01-06T16:31:48.460377171Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:31:48.460384958Z [err]      response = await f(request)
2026-01-06T16:31:48.460393299Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:31:48.460402420Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:31:48.460409018Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:31:48.460415730Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:31:48.460423295Z [err]      ...<3 lines>...
2026-01-06T16:31:48.460430753Z [err]      )
2026-01-06T16:31:48.460437741Z [err]      ^
2026-01-06T16:31:48.460444764Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:31:48.460452027Z [err]      return await dependant.call(**values)
2026-01-06T16:31:48.460459011Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:31:48.460466721Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:31:48.460473311Z [err]      event = get_active_event()
2026-01-06T16:31:48.460480095Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:31:48.460494880Z [err]      cur.execute(
2026-01-06T16:31:48.460501851Z [err]      ~~~~~~~~~~~^
2026-01-06T16:31:48.460508524Z [err]          """
2026-01-06T16:31:48.460515151Z [err]          ^^^
2026-01-06T16:31:48.460522565Z [err]      ...<7 lines>...
2026-01-06T16:31:48.460533939Z [err]          (day_of_week, current_time),
2026-01-06T16:31:48.460541335Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:31:48.460549571Z [err]      )
2026-01-06T16:31:48.460556497Z [err]      ^
2026-01-06T16:31:48.460563286Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:31:48.460571117Z [err]      return super().execute(query, vars)
2026-01-06T16:31:48.460577891Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:31:48.460584661Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:31:48.460591378Z [err]  LINE 5:           AND active = 1
2026-01-06T16:31:48.460599273Z [err]                               ^
2026-01-06T16:31:48.460606201Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:31:48.460613215Z [err]  
2026-01-06T16:31:48.460620079Z [inf]  ðŸ“¨ 27833209119: 6km 40:43 SBK03E
2026-01-06T16:31:48.460626951Z [inf]  INFO:     100.64.0.3:37872 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:31:48.460634017Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:31:48.460641120Z [err]  Traceback (most recent call last):
2026-01-06T16:31:48.460648816Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:31:48.460655443Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:31:48.460662255Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:31:48.460668968Z [err]          self.scope, self.receive, self.send
2026-01-06T16:31:48.460678843Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:31:48.460687252Z [err]      )
2026-01-06T16:31:48.460695180Z [err]      ^
2026-01-06T16:31:48.460702563Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:31:48.460710244Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:31:48.460717747Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:31:48.460726105Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:31:48.460733323Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:31:48.460740256Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:31:48.460747339Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:31:48.460754362Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:31:48.460761307Z [err]      raise exc
2026-01-06T16:31:48.460768495Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:31:48.460775661Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:31:48.460782324Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:31:48.460790053Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:31:48.460797011Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:31:48.460804048Z [err]      raise exc
2026-01-06T16:31:48.460811982Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:31:48.460818844Z [err]      await app(scope, receive, sender)
2026-01-06T16:31:48.460825686Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:31:48.460832547Z [err]      await self.app(scope, receive, send)
2026-01-06T16:31:48.460840715Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:31:48.460848142Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:31:48.460855565Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:31:48.460862611Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:31:48.460869086Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:31:48.460875723Z [err]      await self.app(scope, receive, send)
2026-01-06T16:31:48.460882882Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:31:48.460889459Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:31:48.460895989Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:31:48.460902628Z [err]      raise exc
2026-01-06T16:31:48.460910133Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:31:48.460917893Z [err]      await app(scope, receive, sender)
2026-01-06T16:31:48.460924959Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:31:48.460931655Z [err]      response = await f(request)
2026-01-06T16:31:48.460937996Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:31:48.460944712Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:31:48.460951645Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:31:50.849211288Z [err]  2026-01-06 16:31:42.311 UTC [8906] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:31:50.849220317Z [err]  2026-01-06 16:31:42.311 UTC [8906] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:31:50.849226690Z [err]  2026-01-06 16:31:42.311 UTC [8906] STATEMENT:  
2026-01-06T16:31:50.849232514Z [err]  	        SELECT event
2026-01-06T16:31:50.849238305Z [err]  	        FROM event_config
2026-01-06T16:31:50.849244401Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:31:50.849249880Z [err]  	          AND active = 1
2026-01-06T16:31:50.849257684Z [err]  	          AND '16:31' BETWEEN open_time AND close_time
2026-01-06T16:31:50.849264005Z [err]  	        LIMIT 1;
2026-01-06T16:31:50.849277251Z [err]  	        
2026-01-06T16:31:50.849283392Z [err]  2026-01-06 16:31:44.587 UTC [8909] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:31:50.849289810Z [err]  2026-01-06 16:31:44.587 UTC [8909] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:31:50.849296466Z [err]  2026-01-06 16:31:44.587 UTC [8909] STATEMENT:  
2026-01-06T16:31:50.849303048Z [err]  	        SELECT event
2026-01-06T16:31:50.849310152Z [err]  	        FROM event_config
2026-01-06T16:31:50.849316279Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:31:51.000760046Z [err]  	          AND active = 1
2026-01-06T16:31:51.000777351Z [err]  	          AND '16:31' BETWEEN open_time AND close_time
2026-01-06T16:31:51.000787035Z [err]  	        LIMIT 1;
2026-01-06T16:31:51.000795174Z [err]  	        
2026-01-06T16:32:28.485898286Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:32:28.485907190Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:32:28.485913866Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:32:28.485920151Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:32:28.485926356Z [err]      raise exc
2026-01-06T16:32:28.485933724Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:32:28.485938650Z [inf]  ðŸ“¨ 27829406073: 8 km 50:32 SBK03E
2026-01-06T16:32:28.485963943Z [inf]  INFO:     100.64.0.2:30624 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:32:28.485973310Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:32:28.485981525Z [err]  Traceback (most recent call last):
2026-01-06T16:32:28.485990768Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:32:28.485999846Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:32:28.486008302Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:32:28.486025442Z [err]          self.scope, self.receive, self.send
2026-01-06T16:32:28.486033367Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:32:28.486059262Z [err]      )
2026-01-06T16:32:28.486068766Z [err]      ^
2026-01-06T16:32:28.486079862Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:32:28.486087502Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:32:28.486104219Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:32:28.486126793Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:32:28.486714245Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:32:28.486721440Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:32:28.486729912Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:32:28.486737961Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:32:28.486745000Z [err]      raise exc
2026-01-06T16:32:28.486751644Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:32:28.486759705Z [err]      await app(scope, receive, sender)
2026-01-06T16:32:28.486766671Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:32:28.486774602Z [err]      await self.app(scope, receive, send)
2026-01-06T16:32:28.486782924Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:32:28.486789800Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:32:28.486795866Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:32:28.486803046Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:32:28.486810249Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:32:28.486817024Z [err]      await self.app(scope, receive, send)
2026-01-06T16:32:28.486823462Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:32:28.486830608Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:32:28.486837843Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:32:28.487278279Z [err]      raise exc
2026-01-06T16:32:28.487287056Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:32:28.487294095Z [err]      await app(scope, receive, sender)
2026-01-06T16:32:28.487301541Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:32:28.487310269Z [err]      response = await f(request)
2026-01-06T16:32:28.487316795Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:32:28.487323338Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:32:28.487330898Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:32:28.487337404Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:32:28.487345102Z [err]      ...<3 lines>...
2026-01-06T16:32:28.487347447Z [err]      event = get_active_event()
2026-01-06T16:32:28.487352027Z [err]      )
2026-01-06T16:32:28.487356448Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:32:28.487360080Z [err]      ^
2026-01-06T16:32:28.487364032Z [err]      cur.execute(
2026-01-06T16:32:28.487369249Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:32:28.487374260Z [err]      ~~~~~~~~~~~^
2026-01-06T16:32:28.487377749Z [err]      return await dependant.call(**values)
2026-01-06T16:32:28.487383278Z [err]          """
2026-01-06T16:32:28.487386009Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:32:28.487391762Z [err]          ^^^
2026-01-06T16:32:28.487393747Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:32:28.487399113Z [err]      ...<7 lines>...
2026-01-06T16:32:28.487406511Z [err]          (day_of_week, current_time),
2026-01-06T16:32:28.487414641Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:32:28.488309041Z [err]      )
2026-01-06T16:32:28.488317449Z [err]      ^
2026-01-06T16:32:28.488324281Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:32:28.488330343Z [err]      return super().execute(query, vars)
2026-01-06T16:32:28.488337874Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:32:28.488344959Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:32:28.488351376Z [err]  LINE 5:           AND active = 1
2026-01-06T16:32:28.488357790Z [err]                               ^
2026-01-06T16:32:28.488364674Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:32:28.488371905Z [err]  
2026-01-06T16:32:31.588500153Z [err]  2026-01-06 16:32:25.832 UTC [8913] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:32:31.588506405Z [err]  2026-01-06 16:32:25.832 UTC [8913] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:32:31.588514204Z [err]  2026-01-06 16:32:25.832 UTC [8913] STATEMENT:  
2026-01-06T16:32:31.588520926Z [err]  	        SELECT event
2026-01-06T16:32:31.588527316Z [err]  	        FROM event_config
2026-01-06T16:32:31.588534724Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:32:31.588542437Z [err]  	          AND active = 1
2026-01-06T16:32:31.588550086Z [err]  	          AND '16:32' BETWEEN open_time AND close_time
2026-01-06T16:32:31.588556752Z [err]  	        LIMIT 1;
2026-01-06T16:32:31.588563174Z [err]  	        
2026-01-06T16:32:50.836450227Z [err]  2026-01-06 16:32:46.946 UTC [76] LOG:  checkpoint starting: time
2026-01-06T16:32:50.836464156Z [err]  2026-01-06 16:32:47.399 UTC [76] LOG:  checkpoint complete: wrote 5 buffers (0.0%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.408 s, sync=0.011 s, total=0.454 s; sync files=5, longest=0.007 s, average=0.003 s; distance=10 kB, estimate=22 kB; lsn=0/1A14968, redo lsn=0/1A14910
2026-01-06T16:33:08.488903020Z [inf]  ðŸ“¨ 27790385688: 6km 39:53 SBK03E
2026-01-06T16:33:08.488911520Z [inf]  INFO:     100.64.0.2:36520 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:33:08.488931250Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:33:08.488938810Z [err]  Traceback (most recent call last):
2026-01-06T16:33:08.488946004Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:33:08.488953241Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:33:08.488961561Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:33:08.488968125Z [err]          self.scope, self.receive, self.send
2026-01-06T16:33:08.488975232Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:33:08.488982103Z [err]      )
2026-01-06T16:33:08.488989253Z [err]      ^
2026-01-06T16:33:08.488995545Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:33:08.488999797Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:33:08.489004895Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:33:08.489009373Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:33:08.489013061Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:33:08.489017327Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:33:08.489021050Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:33:08.489024978Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:33:08.489028543Z [err]      raise exc
2026-01-06T16:33:08.489036240Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:33:08.490001995Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:33:08.490006033Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:33:08.490014480Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:33:08.490021481Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:33:08.490027220Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:33:08.490033574Z [err]      raise exc
2026-01-06T16:33:08.490040348Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:33:08.490047521Z [err]      await app(scope, receive, sender)
2026-01-06T16:33:08.490053836Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:33:08.490060643Z [err]      await self.app(scope, receive, send)
2026-01-06T16:33:08.490067146Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:33:08.490073518Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:33:08.490079888Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:33:08.490086247Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:33:08.490089857Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:33:08.490094232Z [err]      await self.app(scope, receive, send)
2026-01-06T16:33:08.490097793Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:33:08.490101226Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:33:08.491123617Z [err]      ...<7 lines>...
2026-01-06T16:33:08.491131074Z [err]      raise exc
2026-01-06T16:33:08.491135382Z [err]          (day_of_week, current_time),
2026-01-06T16:33:08.491141833Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:33:08.491144239Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:33:08.491149864Z [err]      await app(scope, receive, sender)
2026-01-06T16:33:08.491156728Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:33:08.491161755Z [err]      response = await f(request)
2026-01-06T16:33:08.491165684Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:33:08.491169335Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:33:08.491173457Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:33:08.491179403Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:33:08.491184930Z [err]      ...<3 lines>...
2026-01-06T16:33:08.491194980Z [err]      )
2026-01-06T16:33:08.491200687Z [err]      ^
2026-01-06T16:33:08.491206787Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:33:08.491213707Z [err]      return await dependant.call(**values)
2026-01-06T16:33:08.491219864Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:33:08.491226220Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:33:08.491232521Z [err]      event = get_active_event()
2026-01-06T16:33:08.491239145Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:33:08.491245293Z [err]      cur.execute(
2026-01-06T16:33:08.491251843Z [err]      ~~~~~~~~~~~^
2026-01-06T16:33:08.491257858Z [err]          """
2026-01-06T16:33:08.491263537Z [err]          ^^^
2026-01-06T16:33:08.492009705Z [err]      )
2026-01-06T16:33:08.492015091Z [err]      ^
2026-01-06T16:33:08.492019330Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:33:08.492023604Z [err]      return super().execute(query, vars)
2026-01-06T16:33:08.492027280Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:33:08.492031114Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:33:08.492035302Z [err]  LINE 5:           AND active = 1
2026-01-06T16:33:08.492039016Z [err]                               ^
2026-01-06T16:33:08.492042710Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:33:08.492046844Z [err]  
2026-01-06T16:33:10.637917422Z [err]  2026-01-06 16:33:04.804 UTC [8917] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:33:10.637925594Z [err]  2026-01-06 16:33:04.804 UTC [8917] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:33:10.637933649Z [err]  2026-01-06 16:33:04.804 UTC [8917] STATEMENT:  
2026-01-06T16:33:10.637941215Z [err]  	        SELECT event
2026-01-06T16:33:10.637948766Z [err]  	        FROM event_config
2026-01-06T16:33:10.637956206Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:33:10.637963761Z [err]  	          AND active = 1
2026-01-06T16:33:10.637972349Z [err]  	          AND '16:33' BETWEEN open_time AND close_time
2026-01-06T16:33:10.637980353Z [err]  	        LIMIT 1;
2026-01-06T16:33:10.637990915Z [err]  	        
2026-01-06T16:33:28.475768867Z [inf]  ðŸ“¨ 27634045059: ðŸƒðŸ¼â€â™€ï¸â€âž¡ï¸ Runner
2026-01-06T16:33:28.475776950Z [inf]  INFO:     100.64.0.9:41194 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:33:28.475782217Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:33:28.475786788Z [err]  Traceback (most recent call last):
2026-01-06T16:33:28.475791729Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:33:28.475795957Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:33:28.475800081Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:33:28.475804912Z [err]          self.scope, self.receive, self.send
2026-01-06T16:33:28.475809417Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:33:28.475813632Z [err]      )
2026-01-06T16:33:28.475818028Z [err]      ^
2026-01-06T16:33:28.475823553Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:33:28.475827857Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:33:28.475831451Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:33:28.475835294Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:33:28.475839134Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:33:28.475843103Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:33:28.475850645Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:33:28.475858166Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:33:28.475864715Z [err]      raise exc
2026-01-06T16:33:28.475870353Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:33:28.476698113Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:33:28.476700810Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:33:28.476709750Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:33:28.476709824Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:33:28.476718027Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:33:28.476720949Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:33:28.476723903Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:33:28.476730777Z [err]      raise exc
2026-01-06T16:33:28.476730788Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:33:28.476740257Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:33:28.476740523Z [err]      await self.app(scope, receive, send)
2026-01-06T16:33:28.476748849Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:33:28.476753273Z [err]      await app(scope, receive, sender)
2026-01-06T16:33:28.476757189Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:33:28.476761837Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:33:28.476765802Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:33:28.476770803Z [err]      await self.app(scope, receive, send)
2026-01-06T16:33:28.476778524Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:33:28.477614509Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:33:28.477621971Z [err]      cur.execute(
2026-01-06T16:33:28.477629594Z [err]      ~~~~~~~~~~~^
2026-01-06T16:33:28.477636982Z [err]          """
2026-01-06T16:33:28.477644795Z [err]      raise exc
2026-01-06T16:33:28.477645510Z [err]          ^^^
2026-01-06T16:33:28.477653032Z [err]      ...<7 lines>...
2026-01-06T16:33:28.477658605Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:33:28.477660610Z [err]          (day_of_week, current_time),
2026-01-06T16:33:28.477666432Z [err]      await app(scope, receive, sender)
2026-01-06T16:33:28.477672885Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:33:28.477680205Z [err]      response = await f(request)
2026-01-06T16:33:28.477686790Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:33:28.477693765Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:33:28.477700237Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:33:28.477706669Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:33:28.477712965Z [err]      ...<3 lines>...
2026-01-06T16:33:28.477719268Z [err]      )
2026-01-06T16:33:28.477725754Z [err]      ^
2026-01-06T16:33:28.477732412Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:33:28.477738797Z [err]      return await dependant.call(**values)
2026-01-06T16:33:28.477747576Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:33:28.477754678Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:33:28.477761313Z [err]      event = get_active_event()
2026-01-06T16:33:28.477767949Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:33:28.478809110Z [err]      )
2026-01-06T16:33:28.478817486Z [err]      ^
2026-01-06T16:33:28.478825544Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:33:28.478830388Z [err]      ^
2026-01-06T16:33:28.478834139Z [err]      return super().execute(query, vars)
2026-01-06T16:33:28.478841904Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:33:28.478842195Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:33:28.478850135Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:33:28.478851179Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:33:28.478857748Z [err]  LINE 5:           AND active = 1
2026-01-06T16:33:28.478865140Z [err]                               ^
2026-01-06T16:33:28.478871183Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:33:28.478877882Z [err]  
2026-01-06T16:33:28.478883961Z [inf]  ðŸ“¨ 27634045059: ðŸƒðŸ¼â€â™€ï¸â€âž¡ï¸ Runner
2026-01-06T16:33:28.478891801Z [inf]  INFO:     100.64.0.2:15080 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:33:28.478898720Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:33:28.478905573Z [err]  Traceback (most recent call last):
2026-01-06T16:33:28.478912127Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:33:28.478918752Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:33:28.478927336Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:33:28.478934066Z [err]          self.scope, self.receive, self.send
2026-01-06T16:33:28.478940001Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:33:28.478945876Z [err]      )
2026-01-06T16:33:28.479759098Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:33:28.479765887Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:33:28.479766077Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:33:28.479773625Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:33:28.479775953Z [err]      await self.app(scope, receive, send)
2026-01-06T16:33:28.479782089Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:33:28.479784544Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:33:28.479790174Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:33:28.479793541Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:33:28.479798542Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:33:28.479804740Z [err]      raise exc
2026-01-06T16:33:28.479805606Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:33:28.479809917Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:33:28.479815120Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:33:28.479815767Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:33:28.479822558Z [err]      raise exc
2026-01-06T16:33:28.479829087Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:33:28.479835953Z [err]      await app(scope, receive, sender)
2026-01-06T16:33:28.480620085Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:33:28.480629949Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:33:28.480637979Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:33:28.480646131Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:33:28.480653904Z [err]      await self.app(scope, receive, send)
2026-01-06T16:33:28.480661831Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:33:28.480670476Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:33:28.480676933Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:33:28.480684479Z [err]      raise exc
2026-01-06T16:33:28.480691769Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:33:28.480698819Z [err]      await app(scope, receive, sender)
2026-01-06T16:33:28.480706406Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:33:28.480713389Z [err]      response = await f(request)
2026-01-06T16:33:28.480720070Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:33:28.480727526Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:33:28.480734711Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:33:28.480741289Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:33:28.480748657Z [err]      ...<3 lines>...
2026-01-06T16:33:28.480755317Z [err]      )
2026-01-06T16:33:28.480762022Z [err]      ^
2026-01-06T16:33:28.480767486Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:33:28.481758321Z [err]  LINE 5:           AND active = 1
2026-01-06T16:33:28.481759085Z [err]      return await dependant.call(**values)
2026-01-06T16:33:28.481775438Z [err]                               ^
2026-01-06T16:33:28.481783139Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:33:28.481785420Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:33:28.481795962Z [err]  
2026-01-06T16:33:28.481800368Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:33:28.481811832Z [err]      event = get_active_event()
2026-01-06T16:33:28.481813280Z [inf]  ðŸ“¨ 27634045059: ðŸƒðŸ¼â€â™€ï¸â€âž¡ï¸ Runner
2026-01-06T16:33:28.481827060Z [inf]  INFO:     100.64.0.3:42038 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:33:28.481828193Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:33:28.481851401Z [err]      cur.execute(
2026-01-06T16:33:28.481859020Z [err]      ~~~~~~~~~~~^
2026-01-06T16:33:28.481869460Z [err]          """
2026-01-06T16:33:28.481873711Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:33:28.481881457Z [err]          ^^^
2026-01-06T16:33:28.481888523Z [err]      ...<7 lines>...
2026-01-06T16:33:28.481895196Z [err]          (day_of_week, current_time),
2026-01-06T16:33:28.481901671Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:33:28.481908859Z [err]      )
2026-01-06T16:33:28.481917043Z [err]      ^
2026-01-06T16:33:28.481923073Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:33:28.481929826Z [err]      return super().execute(query, vars)
2026-01-06T16:33:28.481936092Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:33:28.481943062Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:33:28.482459929Z [err]  Traceback (most recent call last):
2026-01-06T16:33:28.482461408Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:33:28.482473906Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:33:28.482474511Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:33:28.482478279Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:33:28.482487901Z [err]      )
2026-01-06T16:33:28.482489048Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:33:28.482489628Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:33:28.482499855Z [err]      ^
2026-01-06T16:33:28.482501086Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:33:28.482510038Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:33:28.482511531Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:33:28.482515683Z [err]          self.scope, self.receive, self.send
2026-01-06T16:33:28.482521694Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:33:28.482529061Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:33:28.482535685Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:33:28.482542679Z [err]      raise exc
2026-01-06T16:33:28.482549676Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:33:28.482559331Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:33:28.482571404Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:33:28.483633362Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:33:28.483640963Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:33:28.483641156Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:33:28.483648923Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:33:28.483659139Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:33:28.483664039Z [err]      raise exc
2026-01-06T16:33:28.483670012Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:33:28.483674709Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:33:28.483677524Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:33:28.483687975Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:33:28.483689449Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:33:28.483689849Z [err]      await app(scope, receive, sender)
2026-01-06T16:33:28.483701590Z [err]      await self.app(scope, receive, send)
2026-01-06T16:33:28.483705007Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:33:28.483706916Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:33:28.483718883Z [err]      await self.app(scope, receive, send)
2026-01-06T16:33:28.483723158Z [err]      raise exc
2026-01-06T16:33:28.483729358Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:33:28.484784103Z [err]      await app(scope, receive, sender)
2026-01-06T16:33:28.484790871Z [err]      ^
2026-01-06T16:33:28.484795258Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:33:28.484803379Z [err]      response = await f(request)
2026-01-06T16:33:28.484808990Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:33:28.484813583Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:33:28.484818092Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:33:28.484822613Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:33:28.484826778Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:33:28.484830630Z [err]      ...<3 lines>...
2026-01-06T16:33:28.484834977Z [err]      )
2026-01-06T16:33:28.484838945Z [err]      ^
2026-01-06T16:33:28.484842883Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:33:28.484846946Z [err]      return await dependant.call(**values)
2026-01-06T16:33:28.484850791Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:33:28.484855370Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:33:28.484858945Z [err]      event = get_active_event()
2026-01-06T16:33:28.484866560Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:33:28.484870846Z [err]      cur.execute(
2026-01-06T16:33:28.484874931Z [err]      ~~~~~~~~~~~^
2026-01-06T16:33:28.484878943Z [err]          """
2026-01-06T16:33:28.484882701Z [err]          ^^^
2026-01-06T16:33:28.484886258Z [err]      ...<7 lines>...
2026-01-06T16:33:28.484890595Z [err]          (day_of_week, current_time),
2026-01-06T16:33:28.484894478Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:33:28.484898316Z [err]      )
2026-01-06T16:33:28.485440836Z [err]      return super().execute(query, vars)
2026-01-06T16:33:28.485450629Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:33:28.485457846Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:33:28.485467541Z [err]  LINE 5:           AND active = 1
2026-01-06T16:33:28.485474540Z [err]                               ^
2026-01-06T16:33:28.485481153Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:33:28.485489340Z [err]  
2026-01-06T16:33:30.140439974Z [err]  2026-01-06 16:33:24.567 UTC [8920] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:33:30.140448299Z [err]  2026-01-06 16:33:24.567 UTC [8920] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:33:30.140456322Z [err]  2026-01-06 16:33:24.567 UTC [8920] STATEMENT:  
2026-01-06T16:33:30.140728021Z [err]  	        SELECT event
2026-01-06T16:33:30.140748579Z [err]  	        FROM event_config
2026-01-06T16:33:30.140758808Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:33:30.140767821Z [err]  	          AND active = 1
2026-01-06T16:33:30.140778339Z [err]  	          AND '16:33' BETWEEN open_time AND close_time
2026-01-06T16:33:30.140788724Z [err]  	        LIMIT 1;
2026-01-06T16:33:30.140798239Z [err]  	        
2026-01-06T16:33:30.140812128Z [err]  2026-01-06 16:33:25.402 UTC [8922] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:33:30.140821092Z [err]  2026-01-06 16:33:25.402 UTC [8922] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:33:30.140831411Z [err]  2026-01-06 16:33:25.402 UTC [8922] STATEMENT:  
2026-01-06T16:33:30.140840320Z [err]  	        SELECT event
2026-01-06T16:33:30.140847892Z [err]  	        FROM event_config
2026-01-06T16:33:30.140855478Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:33:30.140863105Z [err]  	          AND active = 1
2026-01-06T16:33:30.140871718Z [err]  	          AND '16:33' BETWEEN open_time AND close_time
2026-01-06T16:33:30.140879637Z [err]  	        LIMIT 1;
2026-01-06T16:33:30.140886165Z [err]  	        
2026-01-06T16:33:30.140898789Z [err]  2026-01-06 16:33:27.220 UTC [8924] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:33:30.140906480Z [err]  2026-01-06 16:33:27.220 UTC [8924] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:33:31.168208457Z [err]  2026-01-06 16:33:27.220 UTC [8924] STATEMENT:  
2026-01-06T16:33:31.168217136Z [err]  	        SELECT event
2026-01-06T16:33:31.168228158Z [err]  	        FROM event_config
2026-01-06T16:33:31.168234827Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:33:31.168241277Z [err]  	          AND active = 1
2026-01-06T16:33:31.168247111Z [err]  	          AND '16:33' BETWEEN open_time AND close_time
2026-01-06T16:33:31.168254105Z [err]  	        LIMIT 1;
2026-01-06T16:33:31.168260333Z [err]  	        
2026-01-06T16:33:31.638227748Z [inf]  ðŸ“¨ 27634045059: ðŸƒðŸ¼â€â™€ï¸â€âž¡ï¸ Runner
2026-01-06T16:33:31.921774203Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:33:31.921781664Z [inf]  INFO:     100.64.0.8:32560 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:33:31.921789150Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:33:31.921791583Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:33:31.921799115Z [err]  Traceback (most recent call last):
2026-01-06T16:33:31.921799118Z [err]      raise exc
2026-01-06T16:33:31.921804403Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:33:31.921809518Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:33:31.921810957Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:33:31.921816316Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:33:31.921821444Z [err]          self.scope, self.receive, self.send
2026-01-06T16:33:31.921825951Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:33:31.921830775Z [err]      )
2026-01-06T16:33:31.921876330Z [err]      ^
2026-01-06T16:33:31.921886528Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:33:31.921891941Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:33:31.921897207Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:33:31.921903444Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:33:31.921908033Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:33:31.921913347Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:33:31.922955328Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:33:31.922964938Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:33:31.922967639Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:33:31.922974466Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:33:31.922979534Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:33:31.922987367Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:33:31.922995859Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:33:31.923003906Z [err]      raise exc
2026-01-06T16:33:31.923011447Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:33:31.923018738Z [err]      await app(scope, receive, sender)
2026-01-06T16:33:31.923026364Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:33:31.923033565Z [err]      await self.app(scope, receive, send)
2026-01-06T16:33:31.923040810Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:33:31.923050818Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:33:31.923058685Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:33:31.923065643Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:33:31.923073173Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:33:31.923080784Z [err]      await self.app(scope, receive, send)
2026-01-06T16:33:31.924277494Z [err]      raise exc
2026-01-06T16:33:31.924284561Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:33:31.924284724Z [err]      event = get_active_event()
2026-01-06T16:33:31.924289483Z [err]      await app(scope, receive, sender)
2026-01-06T16:33:31.924294357Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:33:31.924296310Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:33:31.924299774Z [err]      response = await f(request)
2026-01-06T16:33:31.924305353Z [err]      cur.execute(
2026-01-06T16:33:31.924305405Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:33:31.924310647Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:33:31.924313758Z [err]      ~~~~~~~~~~~^
2026-01-06T16:33:31.924316062Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:33:31.924321834Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:33:31.924326341Z [err]      ...<3 lines>...
2026-01-06T16:33:31.924330411Z [err]      )
2026-01-06T16:33:31.924334156Z [err]      ^
2026-01-06T16:33:31.924339349Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:33:31.924341859Z [err]          """
2026-01-06T16:33:31.924344596Z [err]      return await dependant.call(**values)
2026-01-06T16:33:31.924350099Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:33:31.924350719Z [err]          ^^^
2026-01-06T16:33:31.924355625Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:33:31.924358330Z [err]      ...<7 lines>...
2026-01-06T16:33:31.924366286Z [err]          (day_of_week, current_time),
2026-01-06T16:33:31.924372193Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:33:31.924920613Z [err]      )
2026-01-06T16:33:31.924926911Z [err]      ^
2026-01-06T16:33:31.924930730Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:33:31.924934930Z [err]      return super().execute(query, vars)
2026-01-06T16:33:31.924938610Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:33:31.924942138Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:33:31.924945596Z [err]  LINE 5:           AND active = 1
2026-01-06T16:33:31.924948985Z [err]                               ^
2026-01-06T16:33:31.924952516Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:33:31.924956064Z [err]  
2026-01-06T16:33:32.016896731Z [err]  2026-01-06 16:33:31.897 UTC [8926] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:33:32.016905058Z [err]  2026-01-06 16:33:31.897 UTC [8926] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:33:32.017181437Z [err]  2026-01-06 16:33:31.897 UTC [8926] STATEMENT:  
2026-01-06T16:33:32.017199341Z [err]  	        SELECT event
2026-01-06T16:33:32.017208346Z [err]  	        FROM event_config
2026-01-06T16:33:32.017217064Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:33:32.017232140Z [err]  	          AND active = 1
2026-01-06T16:33:32.017242502Z [err]  	          AND '16:33' BETWEEN open_time AND close_time
2026-01-06T16:33:32.017250271Z [err]  	        LIMIT 1;
2026-01-06T16:33:32.017257389Z [err]  	        
2026-01-06T16:34:21.950234314Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:34:21.950235561Z [inf]  ðŸ“¨ 27769067862: 8km 47:30 SBK03E
2026-01-06T16:34:21.950244422Z [inf]  INFO:     100.64.0.6:48578 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:34:21.950251689Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:34:21.950257419Z [err]  Traceback (most recent call last):
2026-01-06T16:34:21.950262942Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:34:21.950268391Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:34:21.950273196Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:34:21.950279117Z [err]          self.scope, self.receive, self.send
2026-01-06T16:34:21.950291373Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:34:21.950296406Z [err]      )
2026-01-06T16:34:21.950310298Z [err]      ^
2026-01-06T16:34:21.950316634Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:34:21.950321125Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:34:21.950326026Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:34:21.950330376Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:34:21.950334966Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:34:21.950340112Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:34:21.950344745Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:34:21.950349199Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:34:21.950353570Z [err]      raise exc
2026-01-06T16:34:21.951873779Z [err]      await self.app(scope, receive, send)
2026-01-06T16:34:21.951873791Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:34:21.951883144Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:34:21.951886854Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:34:21.951888829Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:34:21.951893770Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:34:21.951897100Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:34:21.951904849Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:34:21.951912815Z [err]      raise exc
2026-01-06T16:34:21.951921196Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:34:21.951930253Z [err]      await app(scope, receive, sender)
2026-01-06T16:34:21.951937876Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:34:21.951944808Z [err]      await self.app(scope, receive, send)
2026-01-06T16:34:21.951951966Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:34:21.951955997Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:34:21.951960700Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:34:21.951964462Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:34:21.951968789Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:34:21.952613525Z [err]      raise exc
2026-01-06T16:34:21.952622253Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:34:21.952629327Z [err]      await app(scope, receive, sender)
2026-01-06T16:34:21.952635985Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:34:21.952642322Z [err]      response = await f(request)
2026-01-06T16:34:21.952649891Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:34:21.952669433Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:34:21.952675386Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:34:21.952679713Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:34:21.952683642Z [err]      ...<3 lines>...
2026-01-06T16:34:21.952688043Z [err]      )
2026-01-06T16:34:21.952693324Z [err]      ^
2026-01-06T16:34:21.952699459Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:34:21.952705211Z [err]      return await dependant.call(**values)
2026-01-06T16:34:21.952711509Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:34:21.952717742Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:34:21.952724444Z [err]      event = get_active_event()
2026-01-06T16:34:21.952730917Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:34:21.952737552Z [err]      cur.execute(
2026-01-06T16:34:21.952743326Z [err]      ~~~~~~~~~~~^
2026-01-06T16:34:21.952749233Z [err]          """
2026-01-06T16:34:21.952755758Z [err]          ^^^
2026-01-06T16:34:21.952763716Z [err]      ...<7 lines>...
2026-01-06T16:34:21.952770417Z [err]          (day_of_week, current_time),
2026-01-06T16:34:21.952776825Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:34:21.953411358Z [err]      )
2026-01-06T16:34:21.953417653Z [err]      ^
2026-01-06T16:34:21.953421594Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:34:21.953425524Z [err]      return super().execute(query, vars)
2026-01-06T16:34:21.953430725Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:34:21.953434790Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:34:21.953439114Z [err]  LINE 5:           AND active = 1
2026-01-06T16:34:21.953442680Z [err]                               ^
2026-01-06T16:34:21.953447189Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:34:21.953462956Z [err]  
2026-01-06T16:34:22.672555722Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:34:22.672567667Z [err]  	          AND active = 1
2026-01-06T16:34:22.672576434Z [err]  	          AND '16:34' BETWEEN open_time AND close_time
2026-01-06T16:34:22.672582967Z [err]  	        LIMIT 1;
2026-01-06T16:34:22.672591005Z [err]  	        
2026-01-06T16:34:22.672625058Z [err]  2026-01-06 16:34:18.255 UTC [8930] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:34:22.672630026Z [err]  2026-01-06 16:34:18.255 UTC [8930] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:34:22.672634158Z [err]  2026-01-06 16:34:18.255 UTC [8930] STATEMENT:  
2026-01-06T16:34:22.672640136Z [err]  	        SELECT event
2026-01-06T16:34:22.672647911Z [err]  	        FROM event_config
2026-01-06T16:34:42.000294627Z [inf]  ðŸ“¨ 27824940077: 6km 35:06 SBK03E
2026-01-06T16:34:42.000306465Z [inf]  INFO:     100.64.0.5:59554 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:34:42.000313292Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:34:42.000320033Z [err]  Traceback (most recent call last):
2026-01-06T16:34:42.000327164Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:34:42.000334003Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:34:42.000340789Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:34:42.000347559Z [err]          self.scope, self.receive, self.send
2026-01-06T16:34:42.000353953Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:34:42.000360302Z [err]      )
2026-01-06T16:34:42.000366805Z [err]      ^
2026-01-06T16:34:42.000372799Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:34:42.000379475Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:34:42.000386161Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:34:42.000392530Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:34:42.000399085Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:34:42.000407533Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:34:42.000414384Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:34:42.000420348Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:34:42.000426433Z [err]      raise exc
2026-01-06T16:34:42.000434410Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:34:42.001323505Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:34:42.001334356Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:34:42.001344730Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:34:42.001348945Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:34:42.001355727Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:34:42.001366030Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:34:42.001366350Z [err]      raise exc
2026-01-06T16:34:42.001379937Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:34:42.001382585Z [err]      await self.app(scope, receive, send)
2026-01-06T16:34:42.001390836Z [err]      await app(scope, receive, sender)
2026-01-06T16:34:42.001395208Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:34:42.001401817Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:34:42.001410972Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:34:42.001412367Z [err]      await self.app(scope, receive, send)
2026-01-06T16:34:42.001424070Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:34:42.001427059Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:34:42.001432800Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:34:42.001440540Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:34:42.002954236Z [err]      raise exc
2026-01-06T16:34:42.002963317Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:34:42.002970648Z [err]      await app(scope, receive, sender)
2026-01-06T16:34:42.002980247Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:34:42.002988478Z [err]      response = await f(request)
2026-01-06T16:34:42.002995368Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:34:42.003004295Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:34:42.003008880Z [err]      ...<7 lines>...
2026-01-06T16:34:42.003011170Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:34:42.003019493Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:34:42.003027668Z [err]          (day_of_week, current_time),
2026-01-06T16:34:42.003030185Z [err]      ...<3 lines>...
2026-01-06T16:34:42.003040843Z [err]      )
2026-01-06T16:34:42.003042275Z [err]      return await dependant.call(**values)
2026-01-06T16:34:42.003045290Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:34:42.003050473Z [err]      ^
2026-01-06T16:34:42.003057347Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:34:42.003057495Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:34:42.003067979Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:34:42.003075630Z [err]      event = get_active_event()
2026-01-06T16:34:42.003083562Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:34:42.003091870Z [err]      cur.execute(
2026-01-06T16:34:42.003103447Z [err]      ~~~~~~~~~~~^
2026-01-06T16:34:42.003114091Z [err]          """
2026-01-06T16:34:42.003125359Z [err]          ^^^
2026-01-06T16:34:42.003992037Z [err]      )
2026-01-06T16:34:42.003999030Z [err]      ^
2026-01-06T16:34:42.004002545Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:34:42.004004512Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:34:42.004010227Z [err]  
2026-01-06T16:34:42.004010964Z [err]      return super().execute(query, vars)
2026-01-06T16:34:42.004016007Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:34:42.004020744Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:34:42.004025531Z [err]  LINE 5:           AND active = 1
2026-01-06T16:34:42.004030305Z [err]                               ^
2026-01-06T16:34:42.130919145Z [err]  2026-01-06 16:34:34.795 UTC [8933] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:34:42.130973270Z [err]  2026-01-06 16:34:34.795 UTC [8933] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:34:42.130984123Z [err]  2026-01-06 16:34:34.795 UTC [8933] STATEMENT:  
2026-01-06T16:34:42.130993069Z [err]  	        SELECT event
2026-01-06T16:34:42.131002048Z [err]  	        FROM event_config
2026-01-06T16:34:42.131011587Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:34:42.131019053Z [err]  	          AND active = 1
2026-01-06T16:34:42.131029254Z [err]  	          AND '16:34' BETWEEN open_time AND close_time
2026-01-06T16:34:42.131037132Z [err]  	        LIMIT 1;
2026-01-06T16:34:42.131045712Z [err]  	        
2026-01-06T16:35:01.618021287Z [err]  2026-01-06 16:34:56.208 UTC [8936] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:35:01.618028311Z [err]  2026-01-06 16:34:56.208 UTC [8936] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:35:01.618035621Z [err]  2026-01-06 16:34:56.208 UTC [8936] STATEMENT:  
2026-01-06T16:35:01.618042958Z [err]  	        SELECT event
2026-01-06T16:35:01.618067246Z [err]  	        FROM event_config
2026-01-06T16:35:01.618075399Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:35:01.618082794Z [err]  	          AND active = 1
2026-01-06T16:35:01.618089828Z [err]  	          AND '16:34' BETWEEN open_time AND close_time
2026-01-06T16:35:01.618098779Z [err]  	        LIMIT 1;
2026-01-06T16:35:01.618105687Z [err]  	        
2026-01-06T16:35:01.942905329Z [inf]  ðŸ“¨ 27832637248: Hi
2026-01-06T16:35:01.942914952Z [inf]  INFO:     100.64.0.7:41134 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:35:01.942922253Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:35:01.942929756Z [err]  Traceback (most recent call last):
2026-01-06T16:35:01.942936547Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:35:01.942943292Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:35:01.942949740Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:01.942956505Z [err]          self.scope, self.receive, self.send
2026-01-06T16:35:01.942962888Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:01.942969807Z [err]      )
2026-01-06T16:35:01.942975957Z [err]      ^
2026-01-06T16:35:01.942982282Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:35:01.942991050Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:35:01.942997184Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:01.943004691Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:35:01.943016327Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:35:01.943023293Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:35:01.943030102Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:35:01.943036416Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:35:01.943042249Z [err]      raise exc
2026-01-06T16:35:01.943049166Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:35:01.944143272Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:35:01.944154719Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:35:01.944158542Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:35:01.944163299Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:35:01.944170700Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:35:01.944174751Z [err]      await self.app(scope, receive, send)
2026-01-06T16:35:01.944181535Z [err]      raise exc
2026-01-06T16:35:01.944188047Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:35:01.944190325Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:35:01.944199055Z [err]      await app(scope, receive, sender)
2026-01-06T16:35:01.944203317Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:35:01.944209505Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:35:01.944218914Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:35:01.944220485Z [err]      await self.app(scope, receive, send)
2026-01-06T16:35:01.944227053Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:35:01.944231566Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:35:01.944235741Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:35:01.944240382Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:35:01.945617127Z [err]          """
2026-01-06T16:35:01.945622898Z [err]      raise exc
2026-01-06T16:35:01.945629881Z [err]          ^^^
2026-01-06T16:35:01.945639057Z [err]      ...<7 lines>...
2026-01-06T16:35:01.945642977Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:35:01.945648992Z [err]          (day_of_week, current_time),
2026-01-06T16:35:01.945658310Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:01.945659294Z [err]      await app(scope, receive, sender)
2026-01-06T16:35:01.945667942Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:35:01.945674518Z [err]      response = await f(request)
2026-01-06T16:35:01.945681429Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:35:01.945688348Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:35:01.945696025Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:35:01.945701915Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:01.945708264Z [err]      ...<3 lines>...
2026-01-06T16:35:01.945715964Z [err]      )
2026-01-06T16:35:01.945723383Z [err]      ^
2026-01-06T16:35:01.945729848Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:35:01.945736318Z [err]      return await dependant.call(**values)
2026-01-06T16:35:01.945743566Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:01.945751132Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:35:01.945757833Z [err]      event = get_active_event()
2026-01-06T16:35:01.945765747Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:35:01.945772873Z [err]      cur.execute(
2026-01-06T16:35:01.945779193Z [err]      ~~~~~~~~~~~^
2026-01-06T16:35:01.946457622Z [err]      )
2026-01-06T16:35:01.946465952Z [err]      ^
2026-01-06T16:35:01.946472987Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:35:01.946480089Z [err]      return super().execute(query, vars)
2026-01-06T16:35:01.946486922Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:35:01.946493697Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:35:01.946500411Z [err]  LINE 5:           AND active = 1
2026-01-06T16:35:01.946507653Z [err]                               ^
2026-01-06T16:35:01.946514333Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:35:01.946520887Z [err]  
2026-01-06T16:35:02.430922258Z [inf]  ðŸ“¨ 27829791864: 6km 28:35 Eben van Wyk SBK03E
2026-01-06T16:35:02.700433012Z [inf]  INFO:     100.64.0.6:32336 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:35:02.708868658Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:35:02.708878643Z [err]  Traceback (most recent call last):
2026-01-06T16:35:02.708887717Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:35:02.708896775Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:35:02.708905108Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:02.708914571Z [err]          self.scope, self.receive, self.send
2026-01-06T16:35:02.708922292Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:02.708930266Z [err]      )
2026-01-06T16:35:02.708942415Z [err]      ^
2026-01-06T16:35:02.708950958Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:35:02.708959513Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:35:02.708967581Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:02.708976193Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:35:02.708984879Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:35:02.708994334Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:35:02.709003070Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:35:02.709011741Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:35:02.709020213Z [err]      raise exc
2026-01-06T16:35:02.709028073Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:35:02.709036224Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:35:02.710173928Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:35:02.710180708Z [err]      raise exc
2026-01-06T16:35:02.710184160Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:35:02.710188864Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:35:02.710191221Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:35:02.710197916Z [err]      raise exc
2026-01-06T16:35:02.710199216Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:35:02.710203891Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:35:02.710208083Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:35:02.710213066Z [err]      await app(scope, receive, sender)
2026-01-06T16:35:02.710213911Z [err]      await self.app(scope, receive, send)
2026-01-06T16:35:02.710219518Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:35:02.710220687Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:35:02.710226028Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:35:02.710227425Z [err]      await self.app(scope, receive, send)
2026-01-06T16:35:02.710232661Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:35:02.710234335Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:35:02.710239878Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:35:02.711718107Z [err]      ^
2026-01-06T16:35:02.711718831Z [err]      ~~~~~~~~~~~^
2026-01-06T16:35:02.711730280Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:35:02.711730772Z [err]          """
2026-01-06T16:35:02.711739645Z [err]      return await dependant.call(**values)
2026-01-06T16:35:02.711742001Z [err]          ^^^
2026-01-06T16:35:02.711743758Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:35:02.711749178Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:02.711753028Z [err]      ...<7 lines>...
2026-01-06T16:35:02.711756579Z [err]      await app(scope, receive, sender)
2026-01-06T16:35:02.711758108Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:35:02.711763802Z [err]          (day_of_week, current_time),
2026-01-06T16:35:02.711766192Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:35:02.711768929Z [err]      event = get_active_event()
2026-01-06T16:35:02.711773463Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:02.711777221Z [err]      response = await f(request)
2026-01-06T16:35:02.711778441Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:35:02.711785977Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:35:02.711787388Z [err]      cur.execute(
2026-01-06T16:35:02.711793039Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:35:02.711799106Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:35:02.711805282Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:02.711810971Z [err]      ...<3 lines>...
2026-01-06T16:35:02.711816606Z [err]      )
2026-01-06T16:35:02.714066259Z [err]      )
2026-01-06T16:35:02.714073468Z [err]      ^
2026-01-06T16:35:02.714079552Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:35:02.714086330Z [err]      return super().execute(query, vars)
2026-01-06T16:35:02.714092346Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:35:02.714101339Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:35:02.714108850Z [err]  LINE 5:           AND active = 1
2026-01-06T16:35:02.714116193Z [err]                               ^
2026-01-06T16:35:02.714123334Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:35:02.714131267Z [err]  
2026-01-06T16:35:03.424831338Z [err]  	          AND '16:35' BETWEEN open_time AND close_time
2026-01-06T16:35:03.424844217Z [err]  	        LIMIT 1;
2026-01-06T16:35:03.424851868Z [err]  2026-01-06 16:35:02.695 UTC [8939] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:35:03.424854965Z [err]  	        
2026-01-06T16:35:03.424860650Z [err]  2026-01-06 16:35:02.695 UTC [8939] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:35:03.424868898Z [err]  2026-01-06 16:35:02.695 UTC [8939] STATEMENT:  
2026-01-06T16:35:03.424875001Z [err]  	        SELECT event
2026-01-06T16:35:03.424881075Z [err]  	        FROM event_config
2026-01-06T16:35:03.424890307Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:35:03.424895982Z [err]  	          AND active = 1
2026-01-06T16:35:03.573267957Z [inf]  ðŸ“¨ 27829791864: 6km 28:35 Eben van Wyk SBK03E
2026-01-06T16:35:03.757174862Z [err]          self.scope, self.receive, self.send
2026-01-06T16:35:03.757185744Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:03.757192881Z [err]      )
2026-01-06T16:35:03.757199966Z [err]      ^
2026-01-06T16:35:03.757209083Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:35:03.757217096Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:35:03.757225375Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:03.757233157Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:35:03.757240348Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:35:03.757246374Z [inf]  INFO:     100.64.0.6:32346 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:35:03.757249576Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:35:03.757254925Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:35:03.757258321Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:35:03.757263780Z [err]  Traceback (most recent call last):
2026-01-06T16:35:03.757266820Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:35:03.757272664Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:35:03.757275348Z [err]      raise exc
2026-01-06T16:35:03.757281777Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:35:03.757283661Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:35:03.757289988Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:03.758538738Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:35:03.758546466Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:35:03.758550170Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:35:03.758553378Z [err]      await self.app(scope, receive, send)
2026-01-06T16:35:03.758554927Z [err]      await self.app(scope, receive, send)
2026-01-06T16:35:03.758559115Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:35:03.758560624Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:35:03.758567118Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:35:03.758567756Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:35:03.758570032Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:35:03.758574245Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:35:03.758577851Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:35:03.758579614Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:35:03.758587125Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:35:03.758587416Z [err]      raise exc
2026-01-06T16:35:03.758594002Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:35:03.758603598Z [err]      await app(scope, receive, sender)
2026-01-06T16:35:03.758613614Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:35:03.759953654Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:03.759987871Z [err]      raise exc
2026-01-06T16:35:03.759996528Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:35:03.760003885Z [err]      await app(scope, receive, sender)
2026-01-06T16:35:03.760013164Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:35:03.760019384Z [err]      response = await f(request)
2026-01-06T16:35:03.760023586Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:35:03.760027796Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:35:03.760031618Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:35:03.760040561Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:03.760047307Z [err]      ...<3 lines>...
2026-01-06T16:35:03.760053463Z [err]      )
2026-01-06T16:35:03.760059176Z [err]      ^
2026-01-06T16:35:03.760065079Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:35:03.760072784Z [err]      return await dependant.call(**values)
2026-01-06T16:35:03.760079774Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:03.760086472Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:35:03.760093246Z [err]      event = get_active_event()
2026-01-06T16:35:03.760101441Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:35:03.760109894Z [err]      cur.execute(
2026-01-06T16:35:03.760118987Z [err]      ~~~~~~~~~~~^
2026-01-06T16:35:03.760125666Z [err]          """
2026-01-06T16:35:03.760132692Z [err]          ^^^
2026-01-06T16:35:03.760137984Z [err]      ...<7 lines>...
2026-01-06T16:35:03.760141617Z [err]          (day_of_week, current_time),
2026-01-06T16:35:03.761102344Z [err]      )
2026-01-06T16:35:03.761108622Z [err]      ^
2026-01-06T16:35:03.761112729Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:35:03.761117170Z [err]      return super().execute(query, vars)
2026-01-06T16:35:03.761121326Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:35:03.761126805Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:35:03.761132594Z [err]  LINE 5:           AND active = 1
2026-01-06T16:35:03.761137326Z [err]                               ^
2026-01-06T16:35:03.761141681Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:35:03.761146661Z [err]  
2026-01-06T16:35:04.316752462Z [err]  2026-01-06 16:35:03.700 UTC [8941] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:35:04.316761565Z [err]  2026-01-06 16:35:03.700 UTC [8941] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:35:04.316772296Z [err]  2026-01-06 16:35:03.700 UTC [8941] STATEMENT:  
2026-01-06T16:35:04.316783700Z [err]  	        SELECT event
2026-01-06T16:35:04.316794489Z [err]  	        FROM event_config
2026-01-06T16:35:04.316805053Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:35:04.316814501Z [err]  	          AND active = 1
2026-01-06T16:35:04.316825572Z [err]  	          AND '16:35' BETWEEN open_time AND close_time
2026-01-06T16:35:04.316835113Z [err]  	        LIMIT 1;
2026-01-06T16:35:04.316844605Z [err]  	        
2026-01-06T16:35:04.775707314Z [inf]  ðŸ“¨ 27829791864: 6km 28:35 Eben van Wyk SBK03E
2026-01-06T16:35:05.112070746Z [err]  Traceback (most recent call last):
2026-01-06T16:35:05.112082255Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:35:05.112090340Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:35:05.112097130Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:05.112104697Z [err]          self.scope, self.receive, self.send
2026-01-06T16:35:05.112114586Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:05.112123280Z [err]      )
2026-01-06T16:35:05.112130484Z [err]      ^
2026-01-06T16:35:05.112139298Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:35:05.112139344Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:35:05.112147794Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:35:05.112155928Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:35:05.112158801Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:05.112159692Z [inf]  INFO:     100.64.0.7:24512 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:35:05.112168656Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:35:05.112169402Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:35:05.112170064Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:35:05.112177505Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:35:05.112181913Z [err]      raise exc
2026-01-06T16:35:05.112192337Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:35:05.137716707Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:35:05.137723382Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:35:05.137729619Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:35:05.137735362Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:35:05.137742452Z [err]      raise exc
2026-01-06T16:35:05.137748987Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:35:05.137755032Z [err]      await app(scope, receive, sender)
2026-01-06T16:35:05.137761387Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:35:05.137767635Z [err]      await self.app(scope, receive, send)
2026-01-06T16:35:05.137774702Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:35:05.137780973Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:35:05.137787868Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:35:05.137795936Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:35:05.137802587Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:35:05.137809584Z [err]      await self.app(scope, receive, send)
2026-01-06T16:35:05.137816780Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:35:05.137825467Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:35:05.137891362Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:35:05.137923985Z [err]      raise exc
2026-01-06T16:35:05.137931256Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:35:05.137938104Z [err]      await app(scope, receive, sender)
2026-01-06T16:35:05.137944695Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:35:05.137951475Z [err]      response = await f(request)
2026-01-06T16:35:05.137959197Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:35:05.137965896Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:35:05.137972469Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:35:05.137979237Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:05.137986905Z [err]      ...<3 lines>...
2026-01-06T16:35:05.137994106Z [err]      )
2026-01-06T16:35:05.138001740Z [err]      ^
2026-01-06T16:35:05.138008577Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:35:05.138015780Z [err]      return await dependant.call(**values)
2026-01-06T16:35:05.138022904Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:05.138031056Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:35:05.138035382Z [err]      event = get_active_event()
2026-01-06T16:35:05.138042012Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:35:05.138055748Z [err]      cur.execute(
2026-01-06T16:35:05.138063737Z [err]      ~~~~~~~~~~~^
2026-01-06T16:35:05.138070930Z [err]          """
2026-01-06T16:35:05.138077122Z [err]          ^^^
2026-01-06T16:35:05.138085217Z [err]      ...<7 lines>...
2026-01-06T16:35:05.138099815Z [err]          (day_of_week, current_time),
2026-01-06T16:35:05.138107066Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:05.138114066Z [err]      )
2026-01-06T16:35:05.138122218Z [err]      ^
2026-01-06T16:35:05.138129783Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:35:05.138136133Z [err]      return super().execute(query, vars)
2026-01-06T16:35:05.138140116Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:35:05.138144264Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:35:05.138149316Z [err]  LINE 5:           AND active = 1
2026-01-06T16:35:05.138153519Z [err]                               ^
2026-01-06T16:35:05.138157420Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:35:05.138161789Z [err]  
2026-01-06T16:35:05.473548101Z [err]  2026-01-06 16:35:05.024 UTC [8943] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:35:05.473555195Z [err]  2026-01-06 16:35:05.024 UTC [8943] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:35:05.473561561Z [err]  2026-01-06 16:35:05.024 UTC [8943] STATEMENT:  
2026-01-06T16:35:05.473568287Z [err]  	        SELECT event
2026-01-06T16:35:05.473579111Z [err]  	        FROM event_config
2026-01-06T16:35:05.473589359Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:35:05.473597189Z [err]  	          AND active = 1
2026-01-06T16:35:05.473604519Z [err]  	          AND '16:35' BETWEEN open_time AND close_time
2026-01-06T16:35:05.473611437Z [err]  	        LIMIT 1;
2026-01-06T16:35:05.473618455Z [err]  	        
2026-01-06T16:35:06.894484989Z [inf]  ðŸ“¨ 27793945101: 8km 54:59 SBK03E
2026-01-06T16:35:07.166963120Z [err]      ^
2026-01-06T16:35:07.166966548Z [inf]  INFO:     100.64.0.6:32350 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:35:07.166977049Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:35:07.166977090Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:35:07.166986377Z [err]  Traceback (most recent call last):
2026-01-06T16:35:07.166987603Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:35:07.166995006Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:35:07.166997636Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:07.167003778Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:35:07.167006686Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:35:07.167013233Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:07.167015829Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:35:07.167021273Z [err]          self.scope, self.receive, self.send
2026-01-06T16:35:07.167025980Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:35:07.167028884Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:07.167044356Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:35:07.167048902Z [err]      )
2026-01-06T16:35:07.167052846Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:35:07.167066714Z [err]      raise exc
2026-01-06T16:35:07.167075056Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:35:07.167948670Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:35:07.167958838Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:35:07.167967446Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:35:07.167973931Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:35:07.167979876Z [err]      raise exc
2026-01-06T16:35:07.167985946Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:35:07.167992083Z [err]      await app(scope, receive, sender)
2026-01-06T16:35:07.167998616Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:35:07.168004789Z [err]      await self.app(scope, receive, send)
2026-01-06T16:35:07.168013289Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:35:07.168019630Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:35:07.168026982Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:35:07.168033563Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:35:07.168039813Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:35:07.168046862Z [err]      await self.app(scope, receive, send)
2026-01-06T16:35:07.168052991Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:35:07.168059922Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:35:07.168066833Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:35:07.169169488Z [err]      raise exc
2026-01-06T16:35:07.169178899Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:35:07.169186101Z [err]      await app(scope, receive, sender)
2026-01-06T16:35:07.169194146Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:35:07.169198312Z [err]      response = await f(request)
2026-01-06T16:35:07.169202403Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:35:07.169209349Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:35:07.169215663Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:35:07.169221860Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:07.169228281Z [err]      ...<3 lines>...
2026-01-06T16:35:07.169234779Z [err]      )
2026-01-06T16:35:07.169242127Z [err]      ^
2026-01-06T16:35:07.169249608Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:35:07.169254136Z [err]      return await dependant.call(**values)
2026-01-06T16:35:07.169258512Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:07.169262767Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:35:07.169266377Z [err]      event = get_active_event()
2026-01-06T16:35:07.169272726Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:35:07.169277031Z [err]      cur.execute(
2026-01-06T16:35:07.169281802Z [err]      ~~~~~~~~~~~^
2026-01-06T16:35:07.169285916Z [err]          """
2026-01-06T16:35:07.169289506Z [err]          ^^^
2026-01-06T16:35:07.169294051Z [err]      ...<7 lines>...
2026-01-06T16:35:07.169298595Z [err]          (day_of_week, current_time),
2026-01-06T16:35:07.169302849Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:07.170363021Z [err]      )
2026-01-06T16:35:07.170373566Z [err]      ^
2026-01-06T16:35:07.170381710Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:35:07.170388471Z [err]      return super().execute(query, vars)
2026-01-06T16:35:07.170395152Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:35:07.170404041Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:35:07.170413009Z [err]  LINE 5:           AND active = 1
2026-01-06T16:35:07.170421862Z [err]                               ^
2026-01-06T16:35:07.170429676Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:35:07.170437089Z [err]  
2026-01-06T16:35:07.574821738Z [err]  2026-01-06 16:35:07.158 UTC [8945] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:35:07.574829914Z [err]  2026-01-06 16:35:07.158 UTC [8945] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:35:07.574836451Z [err]  2026-01-06 16:35:07.158 UTC [8945] STATEMENT:  
2026-01-06T16:35:07.574842418Z [err]  	        SELECT event
2026-01-06T16:35:07.574850743Z [err]  	        FROM event_config
2026-01-06T16:35:07.574859706Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:35:07.574866337Z [err]  	          AND active = 1
2026-01-06T16:35:07.574873731Z [err]  	          AND '16:35' BETWEEN open_time AND close_time
2026-01-06T16:35:07.574880579Z [err]  	        LIMIT 1;
2026-01-06T16:35:07.574893910Z [err]  	        
2026-01-06T16:35:07.672292509Z [inf]  ðŸ“¨ 27793945101: 8km 54:59 SBK03E
2026-01-06T16:35:07.807325260Z [inf]  INFO:     100.64.0.4:20246 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:35:07.809234551Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:35:07.809243938Z [err]  Traceback (most recent call last):
2026-01-06T16:35:07.809251071Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:35:07.809257709Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:35:07.809264322Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:07.809271622Z [err]          self.scope, self.receive, self.send
2026-01-06T16:35:07.809278618Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:07.809286931Z [err]      )
2026-01-06T16:35:07.809295539Z [err]      ^
2026-01-06T16:35:07.809303085Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:35:07.809309087Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:35:07.809315563Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:07.809323191Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:35:07.809329895Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:35:07.809336258Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:35:07.809341968Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:35:07.809349270Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:35:07.809356111Z [err]      raise exc
2026-01-06T16:35:07.809362145Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:35:07.809368832Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:35:07.810848460Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:35:07.810857239Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:35:07.810865493Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:35:07.810865703Z [err]      raise exc
2026-01-06T16:35:07.810873442Z [err]      raise exc
2026-01-06T16:35:07.810880652Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:35:07.810885286Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:35:07.810888279Z [err]      await app(scope, receive, sender)
2026-01-06T16:35:07.810896029Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:35:07.810899396Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:35:07.810905845Z [err]      await self.app(scope, receive, send)
2026-01-06T16:35:07.810910988Z [err]      await self.app(scope, receive, send)
2026-01-06T16:35:07.810914821Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:35:07.810922074Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:35:07.810923225Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:35:07.810931746Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:35:07.810933674Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:35:07.810944713Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:35:07.812508438Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:07.812509506Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:35:07.812517108Z [err]      await app(scope, receive, sender)
2026-01-06T16:35:07.812521053Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:35:07.812524868Z [err]      response = await f(request)
2026-01-06T16:35:07.812528648Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:35:07.812533486Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:35:07.812537291Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:35:07.812540873Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:07.812545610Z [err]      ...<3 lines>...
2026-01-06T16:35:07.812549631Z [err]      )
2026-01-06T16:35:07.812553588Z [err]      ^
2026-01-06T16:35:07.812557132Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:35:07.812560674Z [err]      return await dependant.call(**values)
2026-01-06T16:35:07.812565089Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:07.812569106Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:35:07.812572806Z [err]      event = get_active_event()
2026-01-06T16:35:07.812576378Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:35:07.812580564Z [err]      cur.execute(
2026-01-06T16:35:07.812584552Z [err]      ~~~~~~~~~~~^
2026-01-06T16:35:07.812588439Z [err]          """
2026-01-06T16:35:07.812592914Z [err]          ^^^
2026-01-06T16:35:07.812596431Z [err]      ...<7 lines>...
2026-01-06T16:35:07.812600023Z [err]          (day_of_week, current_time),
2026-01-06T16:35:07.813889623Z [err]      )
2026-01-06T16:35:07.813895065Z [err]      ^
2026-01-06T16:35:07.813898813Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:35:07.813902207Z [err]      return super().execute(query, vars)
2026-01-06T16:35:07.813905556Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:35:07.813909078Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:35:07.813912353Z [err]  LINE 5:           AND active = 1
2026-01-06T16:35:07.813915729Z [err]                               ^
2026-01-06T16:35:07.813919276Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:35:07.813923064Z [err]  
2026-01-06T16:35:08.427941859Z [inf]  ðŸ“¨ 27793945101: 8km 54:59 SBK03E
2026-01-06T16:35:08.502240451Z [err]  	        
2026-01-06T16:35:08.502494167Z [err]  2026-01-06 16:35:07.801 UTC [8947] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:35:08.502502004Z [err]  2026-01-06 16:35:07.801 UTC [8947] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:35:08.502510295Z [err]  2026-01-06 16:35:07.801 UTC [8947] STATEMENT:  
2026-01-06T16:35:08.502518780Z [err]  	        SELECT event
2026-01-06T16:35:08.502526921Z [err]  	        FROM event_config
2026-01-06T16:35:08.502537303Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:35:08.502548832Z [err]  	          AND active = 1
2026-01-06T16:35:08.502556723Z [err]  	          AND '16:35' BETWEEN open_time AND close_time
2026-01-06T16:35:08.502567333Z [err]  	        LIMIT 1;
2026-01-06T16:35:08.563794515Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:08.563802394Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:35:08.563809834Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:35:08.563816617Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:35:08.563823707Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:35:08.563831803Z [inf]  INFO:     100.64.0.2:46316 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:35:08.563832555Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:35:08.563842592Z [err]      raise exc
2026-01-06T16:35:08.563843196Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:35:08.563853517Z [err]  Traceback (most recent call last):
2026-01-06T16:35:08.563853816Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:35:08.563862699Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:35:08.563868673Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:35:08.563874570Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:08.563880816Z [err]          self.scope, self.receive, self.send
2026-01-06T16:35:08.563886907Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:08.563893169Z [err]      )
2026-01-06T16:35:08.563899290Z [err]      ^
2026-01-06T16:35:08.563905650Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:35:08.563911735Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:35:08.565587601Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:35:08.565597741Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:35:08.565608568Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:35:08.565616848Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:35:08.565626028Z [err]      raise exc
2026-01-06T16:35:08.565633392Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:35:08.565640523Z [err]      await app(scope, receive, sender)
2026-01-06T16:35:08.565647708Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:35:08.565654905Z [err]      await self.app(scope, receive, send)
2026-01-06T16:35:08.565664128Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:35:08.565670905Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:35:08.565677478Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:35:08.565681407Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:35:08.565685390Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:35:08.565689844Z [err]      await self.app(scope, receive, send)
2026-01-06T16:35:08.565693999Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:35:08.565698966Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:35:08.565703755Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:35:08.567660321Z [err]      raise exc
2026-01-06T16:35:08.567673045Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:35:08.567680153Z [err]      await app(scope, receive, sender)
2026-01-06T16:35:08.567680373Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:35:08.567688426Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:35:08.567693551Z [err]      response = await f(request)
2026-01-06T16:35:08.567694341Z [err]      event = get_active_event()
2026-01-06T16:35:08.567698587Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:35:08.567703795Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:35:08.567704509Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:35:08.567709442Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:35:08.567712045Z [err]      cur.execute(
2026-01-06T16:35:08.567715208Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:08.567718253Z [err]      ~~~~~~~~~~~^
2026-01-06T16:35:08.567721805Z [err]      ...<3 lines>...
2026-01-06T16:35:08.567729478Z [err]          """
2026-01-06T16:35:08.567734141Z [err]      )
2026-01-06T16:35:08.567734626Z [err]          ^^^
2026-01-06T16:35:08.567740917Z [err]      ...<7 lines>...
2026-01-06T16:35:08.567743221Z [err]      ^
2026-01-06T16:35:08.567747636Z [err]          (day_of_week, current_time),
2026-01-06T16:35:08.567753664Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:35:08.567753717Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:08.567760863Z [err]      return await dependant.call(**values)
2026-01-06T16:35:08.567766451Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:08.568535823Z [err]      )
2026-01-06T16:35:08.568544845Z [err]      ^
2026-01-06T16:35:08.568552636Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:35:08.568560163Z [err]      return super().execute(query, vars)
2026-01-06T16:35:08.568567007Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:35:08.568573389Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:35:08.568580291Z [err]  LINE 5:           AND active = 1
2026-01-06T16:35:08.568586853Z [err]                               ^
2026-01-06T16:35:08.568593446Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:35:08.568600981Z [err]  
2026-01-06T16:35:08.581926829Z [err]  2026-01-06 16:35:08.554 UTC [8949] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:35:08.582212861Z [err]  2026-01-06 16:35:08.554 UTC [8949] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:35:08.582227412Z [err]  2026-01-06 16:35:08.554 UTC [8949] STATEMENT:  
2026-01-06T16:35:08.582235218Z [err]  	        SELECT event
2026-01-06T16:35:08.582242639Z [err]  	        FROM event_config
2026-01-06T16:35:08.582250073Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:35:08.582257671Z [err]  	          AND active = 1
2026-01-06T16:35:08.582271079Z [err]  	          AND '16:35' BETWEEN open_time AND close_time
2026-01-06T16:35:08.582279647Z [err]  	        LIMIT 1;
2026-01-06T16:35:08.582286903Z [err]  	        
2026-01-06T16:35:09.198836085Z [inf]  ðŸ“¨ 27793945101: 8km 54:59 SBK03E
2026-01-06T16:35:09.474043144Z [inf]  INFO:     100.64.0.6:41544 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:35:09.474054262Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:35:09.474060468Z [err]  Traceback (most recent call last):
2026-01-06T16:35:09.474065172Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:35:09.474069409Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:35:09.474074450Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:09.474078746Z [err]          self.scope, self.receive, self.send
2026-01-06T16:35:09.474086519Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:09.474091119Z [err]      )
2026-01-06T16:35:09.474094936Z [err]      ^
2026-01-06T16:35:09.474099344Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:35:09.474103589Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:35:09.474107404Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:09.474111006Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:35:09.474115806Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:35:09.474119888Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:35:09.474124461Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:35:09.474129538Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:35:09.474133531Z [err]      raise exc
2026-01-06T16:35:09.474137634Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:35:09.475448323Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:35:09.475456843Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:35:09.475463765Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:35:09.475469544Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:35:09.475475164Z [err]      raise exc
2026-01-06T16:35:09.475480720Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:35:09.475487195Z [err]      await app(scope, receive, sender)
2026-01-06T16:35:09.475493703Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:35:09.475499570Z [err]      await self.app(scope, receive, send)
2026-01-06T16:35:09.475504876Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:35:09.475510231Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:35:09.475514641Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:35:09.475519759Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:35:09.475524139Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:35:09.475528794Z [err]      await self.app(scope, receive, send)
2026-01-06T16:35:09.475532714Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:35:09.475536965Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:35:09.475541119Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:35:09.477208968Z [err]      raise exc
2026-01-06T16:35:09.477215946Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:35:09.477221604Z [err]      await app(scope, receive, sender)
2026-01-06T16:35:09.477228666Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:35:09.477231549Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:35:09.477235700Z [err]      response = await f(request)
2026-01-06T16:35:09.477244541Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:35:09.477245624Z [err]      cur.execute(
2026-01-06T16:35:09.477253677Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:35:09.477258024Z [err]      ~~~~~~~~~~~^
2026-01-06T16:35:09.477261503Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:35:09.477268177Z [err]          """
2026-01-06T16:35:09.477270171Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:09.477278919Z [err]      ...<3 lines>...
2026-01-06T16:35:09.477279507Z [err]          ^^^
2026-01-06T16:35:09.477288706Z [err]      )
2026-01-06T16:35:09.477290061Z [err]      ...<7 lines>...
2026-01-06T16:35:09.477297156Z [err]      ^
2026-01-06T16:35:09.477301090Z [err]          (day_of_week, current_time),
2026-01-06T16:35:09.477311415Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:09.477316707Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:35:09.477327061Z [err]      return await dependant.call(**values)
2026-01-06T16:35:09.477335290Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:09.477343159Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:35:09.477350709Z [err]      event = get_active_event()
2026-01-06T16:35:09.478515294Z [err]  
2026-01-06T16:35:09.478517326Z [err]      )
2026-01-06T16:35:09.478523438Z [err]      ^
2026-01-06T16:35:09.478528421Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:35:09.478533393Z [err]      return super().execute(query, vars)
2026-01-06T16:35:09.478537135Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:35:09.478541575Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:35:09.478546274Z [err]  LINE 5:           AND active = 1
2026-01-06T16:35:09.478549998Z [err]                               ^
2026-01-06T16:35:09.478554002Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:35:09.483148520Z [err]  2026-01-06 16:35:09.462 UTC [8951] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:35:09.483158704Z [err]  2026-01-06 16:35:09.462 UTC [8951] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:35:09.483167731Z [err]  2026-01-06 16:35:09.462 UTC [8951] STATEMENT:  
2026-01-06T16:35:09.483175501Z [err]  	        SELECT event
2026-01-06T16:35:09.483183719Z [err]  	        FROM event_config
2026-01-06T16:35:09.483191946Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:35:09.483199235Z [err]  	          AND active = 1
2026-01-06T16:35:09.483206242Z [err]  	          AND '16:35' BETWEEN open_time AND close_time
2026-01-06T16:35:09.483213028Z [err]  	        LIMIT 1;
2026-01-06T16:35:09.483223077Z [err]  	        
2026-01-06T16:35:12.502923087Z [inf]  ðŸ“¨ 27829791864: 6km 28:35 Eben van Wyk SBK03E
2026-01-06T16:35:12.785785032Z [inf]  INFO:     100.64.0.8:45724 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:35:12.785798569Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:35:12.785808624Z [err]  Traceback (most recent call last):
2026-01-06T16:35:12.785817719Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:35:12.785826615Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:35:12.785865208Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:12.785870545Z [err]          self.scope, self.receive, self.send
2026-01-06T16:35:12.785875380Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:12.785879817Z [err]      )
2026-01-06T16:35:12.785885652Z [err]      ^
2026-01-06T16:35:12.785891423Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:35:12.785895504Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:35:12.785901058Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:12.785905588Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:35:12.785910144Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:35:12.785914740Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:35:12.785918904Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:35:12.785925578Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:35:12.785930295Z [err]      raise exc
2026-01-06T16:35:12.785935048Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:35:12.786891183Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:35:12.786898098Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:35:12.786905306Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:35:12.786906459Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:35:12.786912729Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:35:12.786920706Z [err]      raise exc
2026-01-06T16:35:12.786924404Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:35:12.786928650Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:35:12.786936179Z [err]      await app(scope, receive, sender)
2026-01-06T16:35:12.786938779Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:35:12.786944025Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:35:12.786950039Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:35:12.786952724Z [err]      await self.app(scope, receive, send)
2026-01-06T16:35:12.786958862Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:35:12.786965919Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:35:12.786974379Z [err]      await self.app(scope, receive, send)
2026-01-06T16:35:12.786982469Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:35:12.786990680Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:35:12.788784045Z [err]      ^
2026-01-06T16:35:12.788787508Z [err]      raise exc
2026-01-06T16:35:12.788799367Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:35:12.788800094Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:35:12.788807399Z [err]      await app(scope, receive, sender)
2026-01-06T16:35:12.788814024Z [err]      return await dependant.call(**values)
2026-01-06T16:35:12.788817003Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:35:12.788824702Z [err]      response = await f(request)
2026-01-06T16:35:12.788826632Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:12.788833756Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:35:12.788838680Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:35:12.788842067Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:35:12.788850623Z [err]      event = get_active_event()
2026-01-06T16:35:12.788860718Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:35:12.788869391Z [err]      cur.execute(
2026-01-06T16:35:12.788883806Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:35:12.788883819Z [err]      ~~~~~~~~~~~^
2026-01-06T16:35:12.788895249Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:12.788895949Z [err]          """
2026-01-06T16:35:12.788907397Z [err]          ^^^
2026-01-06T16:35:12.788916357Z [err]      ...<7 lines>...
2026-01-06T16:35:12.788917763Z [err]      ...<3 lines>...
2026-01-06T16:35:12.788924871Z [err]          (day_of_week, current_time),
2026-01-06T16:35:12.788926700Z [err]      )
2026-01-06T16:35:12.788933276Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:12.790142816Z [err]  
2026-01-06T16:35:12.790152132Z [err]      )
2026-01-06T16:35:12.790164666Z [err]      ^
2026-01-06T16:35:12.790174305Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:35:12.790182629Z [err]      return super().execute(query, vars)
2026-01-06T16:35:12.790190752Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:35:12.790199323Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:35:12.790206218Z [err]  LINE 5:           AND active = 1
2026-01-06T16:35:12.790211567Z [err]                               ^
2026-01-06T16:35:12.790217443Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:35:13.952092977Z [err]  2026-01-06 16:35:12.777 UTC [8953] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:35:13.952101824Z [err]  2026-01-06 16:35:12.777 UTC [8953] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:35:13.952109634Z [err]  2026-01-06 16:35:12.777 UTC [8953] STATEMENT:  
2026-01-06T16:35:13.952117474Z [err]  	        SELECT event
2026-01-06T16:35:13.952126251Z [err]  	        FROM event_config
2026-01-06T16:35:13.952131991Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:35:13.952138667Z [err]  	          AND active = 1
2026-01-06T16:35:13.952145110Z [err]  	          AND '16:35' BETWEEN open_time AND close_time
2026-01-06T16:35:13.952151286Z [err]  	        LIMIT 1;
2026-01-06T16:35:13.952159263Z [err]  	        
2026-01-06T16:35:18.297284999Z [inf]  ðŸ“¨ 27793945101: 8km 54:59 SBK03E
2026-01-06T16:35:18.564253149Z [inf]  INFO:     100.64.0.5:12594 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:35:18.564268969Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:35:18.564282126Z [err]  Traceback (most recent call last):
2026-01-06T16:35:18.564293424Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:35:18.564304705Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:35:18.564320541Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:18.564331716Z [err]          self.scope, self.receive, self.send
2026-01-06T16:35:18.564342566Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:18.564356315Z [err]      )
2026-01-06T16:35:18.564368763Z [err]      ^
2026-01-06T16:35:18.564381160Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:35:18.564392059Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:35:18.564403522Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:18.564415037Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:35:18.564427002Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:35:18.564438216Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:35:18.564449492Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:35:18.564461377Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:35:18.564472376Z [err]      raise exc
2026-01-06T16:35:18.564481029Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:35:18.565101746Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:35:18.565109891Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:35:18.565114235Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:35:18.565118635Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:35:18.565122856Z [err]      raise exc
2026-01-06T16:35:18.565127803Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:35:18.565131759Z [err]      await app(scope, receive, sender)
2026-01-06T16:35:18.565135539Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:35:18.565139346Z [err]      await self.app(scope, receive, send)
2026-01-06T16:35:18.565143558Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:35:18.565148187Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:35:18.565152158Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:35:18.565155785Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:35:18.565159299Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:35:18.565162978Z [err]      await self.app(scope, receive, send)
2026-01-06T16:35:18.565166931Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:35:18.565171418Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:35:18.565175456Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:35:18.566780463Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:35:18.566780981Z [err]      raise exc
2026-01-06T16:35:18.566790149Z [err]      event = get_active_event()
2026-01-06T16:35:18.566792341Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:35:18.566796621Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:35:18.566800215Z [err]      await app(scope, receive, sender)
2026-01-06T16:35:18.566805596Z [err]      cur.execute(
2026-01-06T16:35:18.566809362Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:35:18.566812048Z [err]      ~~~~~~~~~~~^
2026-01-06T16:35:18.566817948Z [err]          """
2026-01-06T16:35:18.566818469Z [err]      response = await f(request)
2026-01-06T16:35:18.566826709Z [err]          ^^^
2026-01-06T16:35:18.566828123Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:35:18.566836587Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:35:18.566837941Z [err]      ...<7 lines>...
2026-01-06T16:35:18.566841774Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:35:18.566847671Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:18.566848221Z [err]          (day_of_week, current_time),
2026-01-06T16:35:18.566852816Z [err]      ...<3 lines>...
2026-01-06T16:35:18.566858305Z [err]      )
2026-01-06T16:35:18.566858963Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:18.566863118Z [err]      ^
2026-01-06T16:35:18.566867203Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:35:18.566871176Z [err]      return await dependant.call(**values)
2026-01-06T16:35:18.566874921Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:18.567901454Z [err]      )
2026-01-06T16:35:18.567904047Z [err]  
2026-01-06T16:35:18.567910543Z [err]  LINE 5:           AND active = 1
2026-01-06T16:35:18.567916873Z [err]      ^
2026-01-06T16:35:18.567924646Z [err]                               ^
2026-01-06T16:35:18.567928828Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:35:18.567933403Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:35:18.567941281Z [err]      return super().execute(query, vars)
2026-01-06T16:35:18.567951339Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:35:18.567961981Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:35:19.048617760Z [err]  2026-01-06 16:35:18.556 UTC [8955] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:35:19.048625226Z [err]  2026-01-06 16:35:18.556 UTC [8955] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:35:19.048631469Z [err]  2026-01-06 16:35:18.556 UTC [8955] STATEMENT:  
2026-01-06T16:35:19.048926008Z [err]  	        SELECT event
2026-01-06T16:35:19.048932758Z [err]  	        FROM event_config
2026-01-06T16:35:19.048938964Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:35:19.048946003Z [err]  	          AND active = 1
2026-01-06T16:35:19.048953361Z [err]  	          AND '16:35' BETWEEN open_time AND close_time
2026-01-06T16:35:19.048960722Z [err]  	        LIMIT 1;
2026-01-06T16:35:19.048967674Z [err]  	        
2026-01-06T16:35:27.842784133Z [inf]  ðŸ“¨ 27639259085: 4km 30:53 SBK03E
2026-01-06T16:35:28.104116700Z [inf]  INFO:     100.64.0.5:48716 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:35:28.107223791Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:35:28.107232886Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:35:28.107234137Z [err]      raise exc
2026-01-06T16:35:28.107242773Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:35:28.107246001Z [err]  Traceback (most recent call last):
2026-01-06T16:35:28.107250786Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:35:28.107251296Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:35:28.107257090Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:35:28.107263961Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:35:28.107270867Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:28.107279552Z [err]          self.scope, self.receive, self.send
2026-01-06T16:35:28.107286134Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:28.107293451Z [err]      )
2026-01-06T16:35:28.107300366Z [err]      ^
2026-01-06T16:35:28.107305947Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:35:28.107309544Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:35:28.107313635Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:28.107317958Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:35:28.107321531Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:35:28.107325195Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:35:28.108361040Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:35:28.108368242Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:35:28.108375736Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:35:28.108382185Z [err]      raise exc
2026-01-06T16:35:28.108387880Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:35:28.108393038Z [err]      await app(scope, receive, sender)
2026-01-06T16:35:28.108397271Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:35:28.108401230Z [err]      await self.app(scope, receive, send)
2026-01-06T16:35:28.108405469Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:35:28.108411006Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:35:28.108415304Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:35:28.108419432Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:35:28.108424477Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:35:28.108428470Z [err]      await self.app(scope, receive, send)
2026-01-06T16:35:28.108432330Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:35:28.108436794Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:35:28.108442632Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:35:28.108446852Z [err]      raise exc
2026-01-06T16:35:28.110163415Z [err]      ~~~~~~~~~~~^
2026-01-06T16:35:28.110165923Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:35:28.110167434Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:35:28.110173046Z [err]          """
2026-01-06T16:35:28.110177352Z [err]      return await dependant.call(**values)
2026-01-06T16:35:28.110181448Z [err]          ^^^
2026-01-06T16:35:28.110181943Z [err]      await app(scope, receive, sender)
2026-01-06T16:35:28.110186322Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:28.110188583Z [err]      ...<7 lines>...
2026-01-06T16:35:28.110193202Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:35:28.110195559Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:35:28.110199537Z [err]          (day_of_week, current_time),
2026-01-06T16:35:28.110202129Z [err]      event = get_active_event()
2026-01-06T16:35:28.110208276Z [err]      response = await f(request)
2026-01-06T16:35:28.110208504Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:28.110211316Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:35:28.110220809Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:35:28.110221560Z [err]      cur.execute(
2026-01-06T16:35:28.110231541Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:35:28.110238330Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:35:28.110245733Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:35:28.110253254Z [err]      ...<3 lines>...
2026-01-06T16:35:28.110259888Z [err]      )
2026-01-06T16:35:28.110266499Z [err]      ^
2026-01-06T16:35:28.111348063Z [err]      )
2026-01-06T16:35:28.111360014Z [err]      ^
2026-01-06T16:35:28.111370179Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:35:28.111378420Z [err]      return super().execute(query, vars)
2026-01-06T16:35:28.111386984Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:35:28.111396463Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:35:28.111405027Z [err]  LINE 5:           AND active = 1
2026-01-06T16:35:28.111414159Z [err]                               ^
2026-01-06T16:35:28.111423501Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:35:28.111432274Z [err]  
2026-01-06T16:35:28.560296856Z [err]  2026-01-06 16:35:28.099 UTC [8958] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:35:28.560303984Z [err]  2026-01-06 16:35:28.099 UTC [8958] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:35:28.560310573Z [err]  2026-01-06 16:35:28.099 UTC [8958] STATEMENT:  
2026-01-06T16:35:28.560317462Z [err]  	        SELECT event
2026-01-06T16:35:28.560326863Z [err]  	        FROM event_config
2026-01-06T16:35:28.560334639Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:35:28.560341926Z [err]  	          AND active = 1
2026-01-06T16:35:28.560349580Z [err]  	          AND '16:35' BETWEEN open_time AND close_time
2026-01-06T16:35:28.560357827Z [err]  	        LIMIT 1;
2026-01-06T16:35:28.560366636Z [err]  	        
2026-01-06T16:36:28.121721169Z [inf]  ðŸ“¨ 27634045059: Johanna (Jolanda) Potgieter
2026-01-06T16:36:28.121722380Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:36:28.121728335Z [inf]  INFO:     100.64.0.8:58440 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:36:28.121732458Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:36:28.121734236Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:36:28.121739328Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:36:28.121739945Z [err]  Traceback (most recent call last):
2026-01-06T16:36:28.121745358Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:36:28.121746222Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:36:28.121751095Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:36:28.121754048Z [err]      raise exc
2026-01-06T16:36:28.121759165Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:36:28.121759855Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:36:28.121763933Z [err]          self.scope, self.receive, self.send
2026-01-06T16:36:28.121767878Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:36:28.121771728Z [err]      )
2026-01-06T16:36:28.121775413Z [err]      ^
2026-01-06T16:36:28.121779450Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:36:28.121784091Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:36:28.121787736Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:36:28.121792819Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:36:28.122507344Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:36:28.122509932Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:36:28.122514588Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:36:28.122517076Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:36:28.122517229Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:36:28.122523478Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:36:28.122524125Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:36:28.122529509Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:36:28.122530245Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:36:28.122534058Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:36:28.122539603Z [err]      await self.app(scope, receive, send)
2026-01-06T16:36:28.122539699Z [err]      raise exc
2026-01-06T16:36:28.122544437Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:36:28.122548802Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:36:28.122556926Z [err]      await app(scope, receive, sender)
2026-01-06T16:36:28.122561355Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:36:28.122569728Z [err]      await self.app(scope, receive, send)
2026-01-06T16:36:28.122575068Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:36:28.123528811Z [err]          ^^^
2026-01-06T16:36:28.123535576Z [err]      ...<7 lines>...
2026-01-06T16:36:28.123539943Z [err]          (day_of_week, current_time),
2026-01-06T16:36:28.123544525Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:36:28.123614598Z [err]      raise exc
2026-01-06T16:36:28.123623309Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:36:28.123630827Z [err]      await app(scope, receive, sender)
2026-01-06T16:36:28.123638867Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:36:28.123647336Z [err]      response = await f(request)
2026-01-06T16:36:28.123655243Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:36:28.123664227Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:36:28.123674956Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:36:28.123683621Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:36:28.123692606Z [err]      ...<3 lines>...
2026-01-06T16:36:28.123698564Z [err]      )
2026-01-06T16:36:28.123704012Z [err]      ^
2026-01-06T16:36:28.123709591Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:36:28.123714957Z [err]      return await dependant.call(**values)
2026-01-06T16:36:28.123721776Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:36:28.123728127Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:36:28.123733857Z [err]      event = get_active_event()
2026-01-06T16:36:28.123739213Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:36:28.123744379Z [err]      cur.execute(
2026-01-06T16:36:28.123749701Z [err]      ~~~~~~~~~~~^
2026-01-06T16:36:28.123755451Z [err]          """
2026-01-06T16:36:28.124024251Z [err]      )
2026-01-06T16:36:28.124032289Z [err]      ^
2026-01-06T16:36:28.124040304Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:36:28.124048050Z [err]      return super().execute(query, vars)
2026-01-06T16:36:28.124056322Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:36:28.124063253Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:36:28.124068828Z [err]  LINE 5:           AND active = 1
2026-01-06T16:36:28.124075296Z [err]                               ^
2026-01-06T16:36:28.124080974Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:36:28.124086544Z [err]  
2026-01-06T16:36:29.284800599Z [err]  2026-01-06 16:36:25.851 UTC [8963] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:36:29.284808616Z [err]  2026-01-06 16:36:25.851 UTC [8963] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:36:29.284815998Z [err]  2026-01-06 16:36:25.851 UTC [8963] STATEMENT:  
2026-01-06T16:36:29.284824980Z [err]  	        SELECT event
2026-01-06T16:36:29.284835229Z [err]  	        FROM event_config
2026-01-06T16:36:29.284842463Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:36:29.284850189Z [err]  	          AND active = 1
2026-01-06T16:36:29.284857634Z [err]  	          AND '16:36' BETWEEN open_time AND close_time
2026-01-06T16:36:29.284864344Z [err]  	        LIMIT 1;
2026-01-06T16:36:29.284871907Z [err]  	        
2026-01-06T16:36:35.075642136Z [inf]  ðŸ“¨ 27634045059: ðŸƒðŸ¼â€â™€ï¸â€âž¡ï¸ Runner
2026-01-06T16:36:35.337396196Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:36:35.337429634Z [inf]  INFO:     100.64.0.6:13820 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:36:35.337437014Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:36:35.337442929Z [err]  Traceback (most recent call last):
2026-01-06T16:36:35.337448724Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:36:35.337454348Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:36:35.337460568Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:36:35.337469491Z [err]          self.scope, self.receive, self.send
2026-01-06T16:36:35.337476444Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:36:35.337480474Z [err]      )
2026-01-06T16:36:35.337485482Z [err]      ^
2026-01-06T16:36:35.337489456Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:36:35.337493923Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:36:35.337498176Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:36:35.337502005Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:36:35.337505819Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:36:35.337509444Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:36:35.337513419Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:36:35.337517369Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:36:35.337520931Z [err]      raise exc
2026-01-06T16:36:35.338279052Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:36:35.338288703Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:36:35.338294813Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:36:35.338297508Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:36:35.338305914Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:36:35.338308112Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:36:35.338313212Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:36:35.338315219Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:36:35.338317177Z [err]      raise exc
2026-01-06T16:36:35.338325378Z [err]      await self.app(scope, receive, send)
2026-01-06T16:36:35.338325867Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:36:35.338331535Z [err]      await app(scope, receive, sender)
2026-01-06T16:36:35.338333191Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:36:35.338338893Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:36:35.338347434Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:36:35.338353705Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:36:35.338359656Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:36:35.338365543Z [err]      await self.app(scope, receive, send)
2026-01-06T16:36:35.339626823Z [err]      raise exc
2026-01-06T16:36:35.339636999Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:36:35.339644579Z [err]      await app(scope, receive, sender)
2026-01-06T16:36:35.339651765Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:36:35.339659625Z [err]      response = await f(request)
2026-01-06T16:36:35.339667305Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:36:35.339674389Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:36:35.339681430Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:36:35.339689116Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:36:35.339692505Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:36:35.339701362Z [err]      ...<3 lines>...
2026-01-06T16:36:35.339706784Z [err]  
2026-01-06T16:36:35.339712813Z [err]      )
2026-01-06T16:36:35.339720302Z [err]      ^
2026-01-06T16:36:35.339727734Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:36:35.339733373Z [err]      return await dependant.call(**values)
2026-01-06T16:36:35.339737152Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:36:35.339740978Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:36:35.339745254Z [err]      event = get_active_event()
2026-01-06T16:36:35.339748983Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:36:35.339752865Z [err]      cur.execute(
2026-01-06T16:36:35.339756624Z [err]      ~~~~~~~~~~~^
2026-01-06T16:36:35.339760561Z [err]          """
2026-01-06T16:36:35.339764519Z [err]          ^^^
2026-01-06T16:36:35.339768172Z [err]      ...<7 lines>...
2026-01-06T16:36:35.339771879Z [err]          (day_of_week, current_time),
2026-01-06T16:36:35.339775560Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:36:35.339779538Z [err]      )
2026-01-06T16:36:35.339783639Z [err]      ^
2026-01-06T16:36:35.339787628Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:36:35.339792733Z [err]      return super().execute(query, vars)
2026-01-06T16:36:35.339796595Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:36:35.339800532Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:36:35.339807886Z [err]  LINE 5:           AND active = 1
2026-01-06T16:36:35.339812063Z [err]                               ^
2026-01-06T16:36:35.780274741Z [err]  2026-01-06 16:36:35.308 UTC [8965] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:36:35.780285732Z [err]  2026-01-06 16:36:35.308 UTC [8965] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:36:35.780302089Z [err]  2026-01-06 16:36:35.308 UTC [8965] STATEMENT:  
2026-01-06T16:36:35.780312464Z [err]  	        SELECT event
2026-01-06T16:36:35.780321699Z [err]  	        FROM event_config
2026-01-06T16:36:35.780329604Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:36:35.780337980Z [err]  	          AND active = 1
2026-01-06T16:36:35.780353101Z [err]  	          AND '16:36' BETWEEN open_time AND close_time
2026-01-06T16:36:35.780359760Z [err]  	        LIMIT 1;
2026-01-06T16:36:35.780366087Z [err]  	        
2026-01-06T16:36:55.237308608Z [err]  2026-01-06 16:36:46.556 UTC [8968] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:36:55.237320444Z [err]  2026-01-06 16:36:46.556 UTC [8968] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:36:55.237327468Z [err]  2026-01-06 16:36:46.556 UTC [8968] STATEMENT:  
2026-01-06T16:36:55.237333113Z [err]  	        SELECT event
2026-01-06T16:36:55.237339490Z [err]  	        FROM event_config
2026-01-06T16:36:55.237345706Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:36:55.237351324Z [err]  	          AND active = 1
2026-01-06T16:36:55.237356305Z [err]  	          AND '16:36' BETWEEN open_time AND close_time
2026-01-06T16:36:55.237389648Z [err]  	        LIMIT 1;
2026-01-06T16:36:55.237396505Z [err]  	        
2026-01-06T16:36:55.337076203Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:36:55.337085422Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:36:55.337091522Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:36:55.337096099Z [inf]  ðŸ“¨ 27793945101: 8km 54:59 SBK03E
2026-01-06T16:36:55.337096890Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:36:55.337102307Z [err]      raise exc
2026-01-06T16:36:55.337108885Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:36:55.337108891Z [inf]  INFO:     100.64.0.7:31390 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:36:55.337117159Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:36:55.337125489Z [err]  Traceback (most recent call last):
2026-01-06T16:36:55.337132615Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:36:55.337140457Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:36:55.337147157Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:36:55.337154106Z [err]          self.scope, self.receive, self.send
2026-01-06T16:36:55.337160495Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:36:55.337166557Z [err]      )
2026-01-06T16:36:55.337170543Z [err]      ^
2026-01-06T16:36:55.337174164Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:36:55.337178983Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:36:55.337182780Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:36:55.337187544Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:36:55.338066493Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:36:55.338070517Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:36:55.338078100Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:36:55.338078290Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:36:55.338084403Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:36:55.338087639Z [err]      await self.app(scope, receive, send)
2026-01-06T16:36:55.338090622Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:36:55.338096145Z [err]      raise exc
2026-01-06T16:36:55.338096863Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:36:55.338101964Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:36:55.338105409Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:36:55.338107640Z [err]      await app(scope, receive, sender)
2026-01-06T16:36:55.338113483Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:36:55.338115239Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:36:55.338118660Z [err]      await self.app(scope, receive, send)
2026-01-06T16:36:55.338122603Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:36:55.338126337Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:36:55.338130160Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:36:55.339263368Z [err]      raise exc
2026-01-06T16:36:55.339269620Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:36:55.339270038Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:36:55.339274780Z [err]      await app(scope, receive, sender)
2026-01-06T16:36:55.339279862Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:36:55.339280420Z [err]      return await dependant.call(**values)
2026-01-06T16:36:55.339285120Z [err]      response = await f(request)
2026-01-06T16:36:55.339289608Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:36:55.339290466Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:36:55.339295560Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:36:55.339300343Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:36:55.339302261Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:36:55.339309503Z [err]      event = get_active_event()
2026-01-06T16:36:55.339310114Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:36:55.339315322Z [err]      ...<3 lines>...
2026-01-06T16:36:55.339319506Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:36:55.339321340Z [err]      )
2026-01-06T16:36:55.339326577Z [err]      ^
2026-01-06T16:36:55.339328916Z [err]      cur.execute(
2026-01-06T16:36:55.339336004Z [err]      ~~~~~~~~~~~^
2026-01-06T16:36:55.339342505Z [err]          """
2026-01-06T16:36:55.339349629Z [err]          ^^^
2026-01-06T16:36:55.339356428Z [err]      ...<7 lines>...
2026-01-06T16:36:55.339362913Z [err]          (day_of_week, current_time),
2026-01-06T16:36:55.339370273Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:36:55.339934266Z [err]      )
2026-01-06T16:36:55.339943983Z [err]      ^
2026-01-06T16:36:55.339951481Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:36:55.339958419Z [err]      return super().execute(query, vars)
2026-01-06T16:36:55.339965705Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:36:55.339972943Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:36:55.339979538Z [err]  LINE 5:           AND active = 1
2026-01-06T16:36:55.339984214Z [err]                               ^
2026-01-06T16:36:55.339989323Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:36:55.339994374Z [err]  
2026-01-06T16:37:36.083811853Z [err]  2026-01-06 16:37:35.899 UTC [8972] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:37:36.083827511Z [err]  2026-01-06 16:37:35.899 UTC [8972] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:37:36.083837881Z [err]  2026-01-06 16:37:35.899 UTC [8972] STATEMENT:  
2026-01-06T16:37:36.083846516Z [err]  	        SELECT event
2026-01-06T16:37:36.083855933Z [err]  	        FROM event_config
2026-01-06T16:37:36.083866528Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:37:36.083875085Z [err]  	          AND active = 1
2026-01-06T16:37:36.083883501Z [err]  	          AND '16:37' BETWEEN open_time AND close_time
2026-01-06T16:37:36.083893074Z [err]  	        LIMIT 1;
2026-01-06T16:37:36.083906029Z [err]  	        
2026-01-06T16:37:45.394516816Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:37:45.394518243Z [inf]  ðŸ“¨ 27829406073: 8 km 50:32 SBK03E
2026-01-06T16:37:45.394527721Z [inf]  INFO:     100.64.0.2:51320 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:37:45.394528291Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:37:45.394534940Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:37:45.394538142Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:37:45.394541688Z [err]  Traceback (most recent call last):
2026-01-06T16:37:45.394546657Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:37:45.394547514Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:37:45.394553518Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:37:45.394555911Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:37:45.394559376Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:37:45.394566066Z [err]          self.scope, self.receive, self.send
2026-01-06T16:37:45.394566568Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:37:45.394571461Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:37:45.394576066Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:37:45.394577574Z [err]      )
2026-01-06T16:37:45.394583861Z [err]      ^
2026-01-06T16:37:45.394586066Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:37:45.394593680Z [err]      raise exc
2026-01-06T16:37:45.394600874Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:37:45.395486329Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:37:45.395494244Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:37:45.395494751Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:37:45.395501906Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:37:45.395502324Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:37:45.395507108Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:37:45.395510657Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:37:45.395515626Z [err]      raise exc
2026-01-06T16:37:45.395519794Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:37:45.395523696Z [err]      await app(scope, receive, sender)
2026-01-06T16:37:45.395527421Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:37:45.395531213Z [err]      await self.app(scope, receive, send)
2026-01-06T16:37:45.395535018Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:37:45.395538766Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:37:45.395542781Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:37:45.395546493Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:37:45.395550146Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:37:45.395553924Z [err]      await self.app(scope, receive, send)
2026-01-06T16:37:45.396656296Z [err]      raise exc
2026-01-06T16:37:45.396663235Z [err]          (day_of_week, current_time),
2026-01-06T16:37:45.396675408Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:37:45.396681786Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:37:45.396688398Z [err]      await app(scope, receive, sender)
2026-01-06T16:37:45.396694523Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:37:45.396700677Z [err]      response = await f(request)
2026-01-06T16:37:45.396707475Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:37:45.396723681Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:37:45.396750518Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:37:45.396758110Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:37:45.396765233Z [err]      ...<3 lines>...
2026-01-06T16:37:45.396772152Z [err]      )
2026-01-06T16:37:45.396778998Z [err]      ^
2026-01-06T16:37:45.396782916Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:37:45.396786571Z [err]      return await dependant.call(**values)
2026-01-06T16:37:45.396790552Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:37:45.396794742Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:37:45.396798556Z [err]      event = get_active_event()
2026-01-06T16:37:45.396802346Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:37:45.396806537Z [err]      cur.execute(
2026-01-06T16:37:45.396814596Z [err]      ~~~~~~~~~~~^
2026-01-06T16:37:45.396823994Z [err]          """
2026-01-06T16:37:45.396827868Z [err]          ^^^
2026-01-06T16:37:45.396831656Z [err]      ...<7 lines>...
2026-01-06T16:37:45.397551388Z [err]      )
2026-01-06T16:37:45.397556233Z [err]      ^
2026-01-06T16:37:45.397560581Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:37:45.397564511Z [err]      return super().execute(query, vars)
2026-01-06T16:37:45.397568189Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:37:45.397572862Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:37:45.397576658Z [err]  LINE 5:           AND active = 1
2026-01-06T16:37:45.397580938Z [err]                               ^
2026-01-06T16:37:45.397584274Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:37:45.397588219Z [err]  
2026-01-06T16:38:35.296656303Z [inf]  INFO:     100.64.0.6:56810 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:39:15.312743668Z [inf]  ðŸ“¨ 27829791864: 6km 28:35 Eben van Wyk SBK03E
2026-01-06T16:39:15.312750942Z [inf]  INFO:     100.64.0.9:43504 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:39:15.312756458Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:39:15.312760479Z [err]  Traceback (most recent call last):
2026-01-06T16:39:15.312765433Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:39:15.312769809Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:39:15.312776057Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:39:15.312780809Z [err]          self.scope, self.receive, self.send
2026-01-06T16:39:15.312784882Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:39:15.312789409Z [err]      )
2026-01-06T16:39:15.312793460Z [err]      ^
2026-01-06T16:39:15.312797427Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:39:15.312801922Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:39:15.312806030Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:39:15.312810140Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:39:15.312814054Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:39:15.312817948Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:39:15.312822475Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:39:15.312826603Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:39:15.312831061Z [err]      raise exc
2026-01-06T16:39:15.312835348Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:39:15.313970757Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:39:15.313976872Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:39:15.313982625Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:39:15.313982804Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:39:15.313993131Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:39:15.313997803Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:39:15.314003106Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:39:15.314007951Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:39:15.314013073Z [err]      raise exc
2026-01-06T16:39:15.314017713Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:39:15.314023719Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:39:15.314026552Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:39:15.314034440Z [err]      await app(scope, receive, sender)
2026-01-06T16:39:15.314035777Z [err]      await self.app(scope, receive, send)
2026-01-06T16:39:15.314043590Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:39:15.314044677Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:39:15.314050064Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:39:15.314054442Z [err]      await self.app(scope, receive, send)
2026-01-06T16:39:15.315412879Z [err]      raise exc
2026-01-06T16:39:15.315414401Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:39:15.315416105Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:39:15.315421836Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:39:15.315424278Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:39:15.315429166Z [err]      await app(scope, receive, sender)
2026-01-06T16:39:15.315429962Z [err]      ...<3 lines>...
2026-01-06T16:39:15.315436116Z [err]      )
2026-01-06T16:39:15.315436756Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:39:15.315441423Z [err]      ^
2026-01-06T16:39:15.315445274Z [err]      response = await f(request)
2026-01-06T16:39:15.315448049Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:39:15.315449259Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:39:15.315454733Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:39:15.315454847Z [err]      return await dependant.call(**values)
2026-01-06T16:39:15.315461076Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:39:15.315462776Z [err]      cur.execute(
2026-01-06T16:39:15.315463000Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:39:15.315469743Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:39:15.315473052Z [err]      ~~~~~~~~~~~^
2026-01-06T16:39:15.315479595Z [err]      event = get_active_event()
2026-01-06T16:39:15.315483263Z [err]          """
2026-01-06T16:39:15.315490752Z [err]          ^^^
2026-01-06T16:39:15.315499918Z [err]      ...<7 lines>...
2026-01-06T16:39:15.315509288Z [err]          (day_of_week, current_time),
2026-01-06T16:39:15.316899236Z [err]      )
2026-01-06T16:39:15.316912315Z [err]      ^
2026-01-06T16:39:15.316919598Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:39:15.316926063Z [err]      return super().execute(query, vars)
2026-01-06T16:39:15.316932899Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:39:15.316940519Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:39:15.316948505Z [err]  LINE 5:           AND active = 1
2026-01-06T16:39:15.316955354Z [err]                               ^
2026-01-06T16:39:15.316961606Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:39:15.316968860Z [err]  
2026-01-06T16:39:15.316975983Z [inf]  ðŸ“¨ 27832794122: RUNNER
2026-01-06T16:39:15.316982651Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T16:39:15.316989590Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T16:39:15.316996283Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T16:39:15.317002493Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T16:39:15.317009209Z [inf]  ðŸ“¤ Status: 200
2026-01-06T16:39:15.317015453Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27832794122","wa_id":"27832794122"}],"messages":[{"id":"wamid.HBgLMjc4MzI3OTQxMjIVAgARGBIxNDcyNTExQ0EwQjM4MTg0MEEA"}]}
2026-01-06T16:39:15.317022983Z [inf]  INFO:     100.64.0.8:49626 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:39:15.317029044Z [inf]  INFO:     100.64.0.3:26382 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:39:15.317035298Z [inf]  INFO:     100.64.0.9:43506 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:39:17.644832064Z [inf]  INFO:     100.64.0.4:27254 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:39:18.353313798Z [err]  2026-01-06 16:39:12.062 UTC [8979] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:39:18.353321297Z [err]  2026-01-06 16:39:12.062 UTC [8979] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:39:18.353329132Z [err]  2026-01-06 16:39:12.062 UTC [8979] STATEMENT:  
2026-01-06T16:39:18.353336919Z [err]  	        SELECT event
2026-01-06T16:39:18.353400538Z [err]  	        FROM event_config
2026-01-06T16:39:18.353408320Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:39:18.353416490Z [err]  	          AND active = 1
2026-01-06T16:39:18.353880521Z [err]  	          AND '16:39' BETWEEN open_time AND close_time
2026-01-06T16:39:18.353898212Z [err]  	        LIMIT 1;
2026-01-06T16:39:18.353905737Z [err]  	        
2026-01-06T16:40:17.706709548Z [inf]  ðŸ“¨ 27634045059: 8 km 47:57 SBK03E
2026-01-06T16:40:17.897820721Z [inf]  INFO:     100.64.0.6:19350 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:40:17.904103678Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:40:17.904103702Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:40:17.904111242Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:40:17.904114832Z [err]  Traceback (most recent call last):
2026-01-06T16:40:17.904117745Z [err]      raise exc
2026-01-06T16:40:17.904124543Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:40:17.904125609Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:40:17.904130399Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:40:17.904134263Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:40:17.904141398Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:40:17.904148415Z [err]          self.scope, self.receive, self.send
2026-01-06T16:40:17.904152913Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:40:17.904157230Z [err]      )
2026-01-06T16:40:17.904160753Z [err]      ^
2026-01-06T16:40:17.904164362Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:40:17.904167813Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:40:17.904171884Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:40:17.904175912Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:40:17.904179807Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:40:17.904183963Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:40:17.905607675Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:40:17.905611323Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:40:17.905615149Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:40:17.905621326Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:40:17.905624262Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:40:17.905628590Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:40:17.905633301Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:40:17.905633770Z [err]      raise exc
2026-01-06T16:40:17.905641523Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:40:17.905644185Z [err]      raise exc
2026-01-06T16:40:17.905650329Z [err]      await app(scope, receive, sender)
2026-01-06T16:40:17.905651306Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:40:17.905660186Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:40:17.905665726Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:40:17.905668687Z [err]      await self.app(scope, receive, send)
2026-01-06T16:40:17.905677207Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:40:17.905682102Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:40:17.905690292Z [err]      await self.app(scope, receive, send)
2026-01-06T16:40:17.907076837Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:40:17.907087390Z [err]      await app(scope, receive, sender)
2026-01-06T16:40:17.907095924Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:40:17.907106780Z [err]      response = await f(request)
2026-01-06T16:40:17.907114087Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:40:17.907121727Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:40:17.907130648Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:40:17.907137728Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:40:17.907144827Z [err]      ...<3 lines>...
2026-01-06T16:40:17.907152091Z [err]      )
2026-01-06T16:40:17.907159653Z [err]      ^
2026-01-06T16:40:17.907167005Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:40:17.907175266Z [err]      return await dependant.call(**values)
2026-01-06T16:40:17.907183331Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:40:17.907190824Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:40:17.907197785Z [err]      event = get_active_event()
2026-01-06T16:40:17.907204932Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:40:17.907212382Z [err]      cur.execute(
2026-01-06T16:40:17.907220112Z [err]      ~~~~~~~~~~~^
2026-01-06T16:40:17.907227024Z [err]          """
2026-01-06T16:40:17.907234755Z [err]          ^^^
2026-01-06T16:40:17.907241870Z [err]      ...<7 lines>...
2026-01-06T16:40:17.907249243Z [err]          (day_of_week, current_time),
2026-01-06T16:40:17.907257162Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:40:17.908497559Z [err]      )
2026-01-06T16:40:17.908506275Z [err]      ^
2026-01-06T16:40:17.908515578Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:40:17.908524370Z [err]      return super().execute(query, vars)
2026-01-06T16:40:17.908532081Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:40:17.908540301Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:40:17.908545971Z [err]  LINE 5:           AND active = 1
2026-01-06T16:40:17.908551480Z [err]                               ^
2026-01-06T16:40:17.908557161Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:40:17.908564727Z [err]  
2026-01-06T16:40:19.188302601Z [err]  	        LIMIT 1;
2026-01-06T16:40:19.188308429Z [err]  	        
2026-01-06T16:40:19.188343022Z [err]  2026-01-06 16:40:17.893 UTC [8985] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:40:19.188349665Z [err]  2026-01-06 16:40:17.893 UTC [8985] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:40:19.188355707Z [err]  2026-01-06 16:40:17.893 UTC [8985] STATEMENT:  
2026-01-06T16:40:19.188362158Z [err]  	        SELECT event
2026-01-06T16:40:19.188372324Z [err]  	        FROM event_config
2026-01-06T16:40:19.188379240Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:40:19.188387793Z [err]  	          AND active = 1
2026-01-06T16:40:19.188396161Z [err]  	          AND '16:40' BETWEEN open_time AND close_time
2026-01-06T16:40:57.923089446Z [inf]  ðŸ“¨ 27783491786: 6 km 39:53 SBK03E
2026-01-06T16:40:57.923090036Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:40:57.923096566Z [inf]  INFO:     100.64.0.7:22650 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:40:57.923099829Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:40:57.923102225Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:40:57.923108172Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:40:57.923108539Z [err]  Traceback (most recent call last):
2026-01-06T16:40:57.923114659Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:40:57.923115625Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:40:57.923120404Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:40:57.923121922Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:40:57.923125219Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:40:57.923128750Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:40:57.923130153Z [err]          self.scope, self.receive, self.send
2026-01-06T16:40:57.923135114Z [err]      raise exc
2026-01-06T16:40:57.923137403Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:40:57.923141075Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:40:57.923143529Z [err]      )
2026-01-06T16:40:57.923147332Z [err]      ^
2026-01-06T16:40:57.923151134Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:40:57.923156342Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:40:57.924000576Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:40:57.924011212Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:40:57.924017680Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:40:57.924023049Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:40:57.924028384Z [err]      raise exc
2026-01-06T16:40:57.924034964Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:40:57.924040306Z [err]      await app(scope, receive, sender)
2026-01-06T16:40:57.924045845Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:40:57.924052380Z [err]      await self.app(scope, receive, send)
2026-01-06T16:40:57.924059069Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:40:57.924063924Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:40:57.924068599Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:40:57.924074692Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:40:57.924079821Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:40:57.924084657Z [err]      await self.app(scope, receive, send)
2026-01-06T16:40:57.924091715Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:40:57.924098277Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:40:57.924105092Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:40:57.925263408Z [err]      raise exc
2026-01-06T16:40:57.925269928Z [err]          ^^^
2026-01-06T16:40:57.925272699Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:40:57.925279237Z [err]      await app(scope, receive, sender)
2026-01-06T16:40:57.925283604Z [err]      ...<7 lines>...
2026-01-06T16:40:57.925287622Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:40:57.925296609Z [err]          (day_of_week, current_time),
2026-01-06T16:40:57.925296998Z [err]      response = await f(request)
2026-01-06T16:40:57.925307492Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:40:57.925309105Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:40:57.925314470Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:40:57.925320457Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:40:57.925325961Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:40:57.925332785Z [err]      ...<3 lines>...
2026-01-06T16:40:57.925338736Z [err]      )
2026-01-06T16:40:57.925346647Z [err]      ^
2026-01-06T16:40:57.925353404Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:40:57.925360166Z [err]      return await dependant.call(**values)
2026-01-06T16:40:57.925367605Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:40:57.925373936Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:40:57.925378778Z [err]      event = get_active_event()
2026-01-06T16:40:57.925383575Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:40:57.925388279Z [err]      cur.execute(
2026-01-06T16:40:57.925392005Z [err]      ~~~~~~~~~~~^
2026-01-06T16:40:57.925397675Z [err]          """
2026-01-06T16:40:57.925898594Z [err]      )
2026-01-06T16:40:57.925903492Z [err]      ^
2026-01-06T16:40:57.925907454Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:40:57.925911537Z [err]      return super().execute(query, vars)
2026-01-06T16:40:57.925915729Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:40:57.925919348Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:40:57.925923469Z [err]  LINE 5:           AND active = 1
2026-01-06T16:40:57.925927508Z [err]                               ^
2026-01-06T16:40:57.925931129Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:40:57.925936141Z [err]  
2026-01-06T16:40:58.597432970Z [err]  2026-01-06 16:40:49.804 UTC [8989] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:40:58.597440220Z [err]  2026-01-06 16:40:49.804 UTC [8989] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:40:58.597446628Z [err]  2026-01-06 16:40:49.804 UTC [8989] STATEMENT:  
2026-01-06T16:40:58.597454602Z [err]  	        SELECT event
2026-01-06T16:40:58.597462234Z [err]  	        FROM event_config
2026-01-06T16:40:58.597469036Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:40:58.597475456Z [err]  	          AND active = 1
2026-01-06T16:40:58.597482451Z [err]  	          AND '16:40' BETWEEN open_time AND close_time
2026-01-06T16:40:58.597490593Z [err]  	        LIMIT 1;
2026-01-06T16:40:58.597498475Z [err]  	        
2026-01-06T16:41:57.969967009Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:41:57.969976591Z [inf]  ðŸ“¨ 27634045059: ðŸƒðŸ¼â€â™€ï¸â€âž¡ï¸ Runner
2026-01-06T16:41:57.969977735Z [err]      )
2026-01-06T16:41:57.969984618Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:41:57.969988183Z [err]      ^
2026-01-06T16:41:57.969993889Z [inf]  INFO:     100.64.0.3:22236 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:41:57.969997694Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:41:57.970004574Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:41:57.970005741Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:41:57.970012321Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:41:57.970016094Z [err]  Traceback (most recent call last):
2026-01-06T16:41:57.970017772Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:41:57.970033093Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:41:57.970033619Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:41:57.970044585Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:41:57.970052224Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:41:57.970059178Z [err]          self.scope, self.receive, self.send
2026-01-06T16:41:57.970073788Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:41:57.970079583Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:41:57.970084785Z [err]      raise exc
2026-01-06T16:41:57.970089592Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:41:57.970636966Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:41:57.970646330Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:41:57.970651962Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:41:57.970658418Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:41:57.970663422Z [err]      raise exc
2026-01-06T16:41:57.970668846Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:41:57.970675395Z [err]      await app(scope, receive, sender)
2026-01-06T16:41:57.970680213Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:41:57.970684978Z [err]      await self.app(scope, receive, send)
2026-01-06T16:41:57.970690672Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:41:57.970695338Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:41:57.970700272Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:41:57.970704711Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:41:57.970709755Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:41:57.970714260Z [err]      await self.app(scope, receive, send)
2026-01-06T16:41:57.970718604Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:41:57.970722636Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:41:57.970727134Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:41:57.971815712Z [err]      raise exc
2026-01-06T16:41:57.971826121Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:41:57.971839429Z [err]      await app(scope, receive, sender)
2026-01-06T16:41:57.971847296Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:41:57.971854460Z [err]      response = await f(request)
2026-01-06T16:41:57.971861538Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:41:57.971869062Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:41:57.971876715Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:41:57.971883568Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:41:57.971890171Z [err]      ...<3 lines>...
2026-01-06T16:41:57.971897014Z [err]      )
2026-01-06T16:41:57.971903477Z [err]      ^
2026-01-06T16:41:57.971911082Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:41:57.971917315Z [err]      return await dependant.call(**values)
2026-01-06T16:41:57.971923429Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:41:57.971928895Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:41:57.971941143Z [err]      event = get_active_event()
2026-01-06T16:41:57.971948186Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:41:57.971954883Z [err]      cur.execute(
2026-01-06T16:41:57.971961005Z [err]      ~~~~~~~~~~~^
2026-01-06T16:41:57.971966992Z [err]          """
2026-01-06T16:41:57.971993222Z [err]          ^^^
2026-01-06T16:41:57.972002528Z [err]      ...<7 lines>...
2026-01-06T16:41:57.972009181Z [err]          (day_of_week, current_time),
2026-01-06T16:41:57.972015137Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:41:57.972917924Z [err]      )
2026-01-06T16:41:57.972930211Z [err]      ^
2026-01-06T16:41:57.972938515Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:41:57.972945217Z [err]      return super().execute(query, vars)
2026-01-06T16:41:57.972952443Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:41:57.972959357Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:41:57.972966801Z [err]  LINE 5:           AND active = 1
2026-01-06T16:41:57.972973911Z [err]                               ^
2026-01-06T16:41:57.972982043Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:41:57.972990703Z [err]  
2026-01-06T16:41:57.972999548Z [inf]  ðŸ“¨ 27634045059: ðŸƒðŸ¼â€â™€ï¸â€âž¡ï¸ Runner
2026-01-06T16:41:57.973006983Z [inf]  INFO:     100.64.0.3:22244 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:41:57.973015275Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:41:57.973022799Z [err]  Traceback (most recent call last):
2026-01-06T16:41:57.973031099Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:41:57.973038778Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:41:57.973046345Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:41:57.973053952Z [err]          self.scope, self.receive, self.send
2026-01-06T16:41:57.973061168Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:41:57.973067787Z [err]      )
2026-01-06T16:41:57.973074014Z [err]      ^
2026-01-06T16:41:57.973080409Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:41:57.973088576Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:41:57.974326111Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:41:57.974335821Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:41:57.974344033Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:41:57.974355246Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:41:57.974362643Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:41:57.974370898Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:41:57.974380001Z [err]      raise exc
2026-01-06T16:41:57.974387730Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:41:57.974395442Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:41:57.974403061Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:41:57.974410598Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:41:57.974417858Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:41:57.974425855Z [err]      raise exc
2026-01-06T16:41:57.974446981Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:41:57.974455109Z [err]      await app(scope, receive, sender)
2026-01-06T16:41:57.974463640Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:41:57.974471183Z [err]      await self.app(scope, receive, send)
2026-01-06T16:41:57.974478846Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:41:57.975510792Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:41:57.975518545Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:41:57.975520969Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:41:57.975528178Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:41:57.975535218Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:41:57.975539551Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:41:57.975540904Z [err]      await self.app(scope, receive, send)
2026-01-06T16:41:57.975549391Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:41:57.975555100Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:41:57.975556838Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:41:57.975562922Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:41:57.975569335Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:41:57.975570606Z [err]      raise exc
2026-01-06T16:41:57.975578401Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:41:57.975578754Z [err]      ...<3 lines>...
2026-01-06T16:41:57.975587033Z [err]      await app(scope, receive, sender)
2026-01-06T16:41:57.975588843Z [err]      )
2026-01-06T16:41:57.975595294Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:41:57.975598268Z [err]      ^
2026-01-06T16:41:57.975603326Z [err]      response = await f(request)
2026-01-06T16:41:57.975606983Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:41:57.976552682Z [err]      return await dependant.call(**values)
2026-01-06T16:41:57.976558785Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:41:57.976563300Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:41:57.976567441Z [err]      event = get_active_event()
2026-01-06T16:41:57.976571770Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:41:57.976576995Z [err]      cur.execute(
2026-01-06T16:41:57.976580890Z [err]      ~~~~~~~~~~~^
2026-01-06T16:41:57.976585128Z [err]          """
2026-01-06T16:41:57.976589045Z [err]          ^^^
2026-01-06T16:41:57.976593716Z [err]      ...<7 lines>...
2026-01-06T16:41:57.976598408Z [err]          (day_of_week, current_time),
2026-01-06T16:41:57.976602949Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:41:57.976607775Z [err]      )
2026-01-06T16:41:57.976611550Z [err]      ^
2026-01-06T16:41:57.976615552Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:41:57.976619415Z [err]      return super().execute(query, vars)
2026-01-06T16:41:57.976623338Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:41:57.976627089Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:41:57.976630915Z [err]  LINE 5:           AND active = 1
2026-01-06T16:41:57.976634837Z [err]                               ^
2026-01-06T16:41:57.976638522Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:41:57.976643254Z [err]  
2026-01-06T16:41:57.976647159Z [inf]  ðŸ“¨ 27634045059: ðŸƒðŸ¼â€â™€ï¸â€âž¡ï¸ Runner
2026-01-06T16:41:57.976650813Z [inf]  INFO:     100.64.0.6:11014 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:41:57.976654469Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:41:57.977793609Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:41:57.977795725Z [err]  Traceback (most recent call last):
2026-01-06T16:41:57.977803029Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:41:57.977810625Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:41:57.977812953Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:41:57.977822438Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:41:57.977825928Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:41:57.977830986Z [err]      raise exc
2026-01-06T16:41:57.977870907Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:41:57.977875812Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:41:57.977880193Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:41:57.977986647Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:41:57.977994465Z [err]          self.scope, self.receive, self.send
2026-01-06T16:41:57.978001388Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:41:57.978007861Z [err]      )
2026-01-06T16:41:57.978015060Z [err]      ^
2026-01-06T16:41:57.978021603Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:41:57.978028716Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:41:57.978035918Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:41:57.978042725Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:41:57.979242143Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:41:57.979249557Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:41:57.979255145Z [err]      raise exc
2026-01-06T16:41:57.979261960Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:41:57.979266697Z [err]      await app(scope, receive, sender)
2026-01-06T16:41:57.979272034Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:41:57.979276639Z [err]      await self.app(scope, receive, send)
2026-01-06T16:41:57.979282606Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:41:57.979288340Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:41:57.979294592Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:41:57.979300177Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:41:57.979305032Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:41:57.979310613Z [err]      await self.app(scope, receive, send)
2026-01-06T16:41:57.979315558Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:41:57.979320566Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:41:57.979325002Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:41:57.979329952Z [err]      raise exc
2026-01-06T16:41:57.979334306Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:41:57.980968771Z [err]      ...<7 lines>...
2026-01-06T16:41:57.980970756Z [err]      await app(scope, receive, sender)
2026-01-06T16:41:57.980981134Z [err]          (day_of_week, current_time),
2026-01-06T16:41:57.980981408Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:41:57.980991113Z [err]      response = await f(request)
2026-01-06T16:41:57.980991327Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:41:57.981000785Z [err]      )
2026-01-06T16:41:57.981001436Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:41:57.981009588Z [err]      ^
2026-01-06T16:41:57.981010249Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:41:57.981019031Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:41:57.981020434Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:41:57.981027657Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:41:57.981032704Z [err]      ...<3 lines>...
2026-01-06T16:41:57.981036615Z [err]      )
2026-01-06T16:41:57.981040901Z [err]      ^
2026-01-06T16:41:57.981044902Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:41:57.981048926Z [err]      return await dependant.call(**values)
2026-01-06T16:41:57.981052918Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:41:57.981057042Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:41:57.981061488Z [err]      event = get_active_event()
2026-01-06T16:41:57.981065256Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:41:57.981069068Z [err]      cur.execute(
2026-01-06T16:41:57.981073430Z [err]      ~~~~~~~~~~~^
2026-01-06T16:41:57.981077438Z [err]          """
2026-01-06T16:41:57.981081011Z [err]          ^^^
2026-01-06T16:41:57.981972052Z [err]      return super().execute(query, vars)
2026-01-06T16:41:57.981981567Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:41:57.981989469Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:41:57.981996269Z [err]  LINE 5:           AND active = 1
2026-01-06T16:41:57.982002954Z [err]                               ^
2026-01-06T16:41:57.982008830Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:41:57.982015831Z [err]  
2026-01-06T16:41:58.265246443Z [err]  2026-01-06 16:41:49.365 UTC [8994] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:41:58.265252603Z [err]  2026-01-06 16:41:49.365 UTC [8994] STATEMENT:  
2026-01-06T16:41:58.265260816Z [err]  	        SELECT event
2026-01-06T16:41:58.265269806Z [err]  	        FROM event_config
2026-01-06T16:41:58.265276838Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:41:58.265284419Z [err]  	          AND active = 1
2026-01-06T16:41:58.265291991Z [err]  	          AND '16:41' BETWEEN open_time AND close_time
2026-01-06T16:41:58.265300330Z [err]  	        LIMIT 1;
2026-01-06T16:41:58.265307417Z [err]  	        
2026-01-06T16:41:58.265315052Z [err]  2026-01-06 16:41:50.137 UTC [8996] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:41:58.265323297Z [err]  2026-01-06 16:41:50.137 UTC [8996] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:41:58.265330666Z [err]  2026-01-06 16:41:50.137 UTC [8996] STATEMENT:  
2026-01-06T16:41:58.265388351Z [err]  2026-01-06 16:41:49.365 UTC [8994] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:41:58.265468395Z [err]  	        SELECT event
2026-01-06T16:41:58.265476625Z [err]  	        FROM event_config
2026-01-06T16:41:58.265483925Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:41:58.265490913Z [err]  	          AND active = 1
2026-01-06T16:41:58.265497969Z [err]  	          AND '16:41' BETWEEN open_time AND close_time
2026-01-06T16:41:58.265500059Z [err]  2026-01-06 16:41:52.480 UTC [8998] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:41:58.265506033Z [err]  	        LIMIT 1;
2026-01-06T16:41:58.265512690Z [err]  	        
2026-01-06T16:41:58.265519957Z [err]  2026-01-06 16:41:52.480 UTC [8998] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:41:59.740923063Z [err]  2026-01-06 16:41:52.480 UTC [8998] STATEMENT:  
2026-01-06T16:41:59.740930403Z [err]  	        SELECT event
2026-01-06T16:41:59.740938294Z [err]  	        FROM event_config
2026-01-06T16:41:59.740945558Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:41:59.740952993Z [err]  	          AND active = 1
2026-01-06T16:41:59.740960043Z [err]  	          AND '16:41' BETWEEN open_time AND close_time
2026-01-06T16:41:59.740966865Z [err]  	        LIMIT 1;
2026-01-06T16:41:59.740974625Z [err]  	        
2026-01-06T16:42:17.984653125Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:42:17.984655527Z [inf]  ðŸ“¨ 27634045059: ðŸƒðŸ¼â€â™€ï¸â€âž¡ï¸ Runner
2026-01-06T16:42:17.984662259Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:42:17.984664949Z [inf]  INFO:     100.64.0.7:26048 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:42:17.984669294Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:42:17.984671704Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:42:17.984676318Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:42:17.984677667Z [err]  Traceback (most recent call last):
2026-01-06T16:42:17.984683135Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:42:17.984684017Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:42:17.984690023Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:42:17.984691341Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:42:17.984698129Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:42:17.984700038Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:42:17.984705218Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:42:17.984709133Z [err]          self.scope, self.receive, self.send
2026-01-06T16:42:17.984712114Z [err]      raise exc
2026-01-06T16:42:17.984717585Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:42:17.984719844Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:42:17.984726121Z [err]      )
2026-01-06T16:42:17.984733281Z [err]      ^
2026-01-06T16:42:17.985756467Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:42:17.985759873Z [err]      await self.app(scope, receive, send)
2026-01-06T16:42:17.985761144Z [err]      await self.app(scope, receive, send)
2026-01-06T16:42:17.985764734Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:42:17.985771025Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:42:17.985771585Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:42:17.985772865Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:42:17.985776741Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:42:17.985781905Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:42:17.985782405Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:42:17.985783342Z [err]      raise exc
2026-01-06T16:42:17.985790283Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:42:17.985791332Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:42:17.985791679Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:42:17.985795927Z [err]      await app(scope, receive, sender)
2026-01-06T16:42:17.985800407Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:42:17.985801954Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:42:17.985808601Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:42:17.987133321Z [err]      raise exc
2026-01-06T16:42:17.987139429Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:42:17.987144071Z [err]      await app(scope, receive, sender)
2026-01-06T16:42:17.987149768Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:42:17.987156247Z [err]      ...<7 lines>...
2026-01-06T16:42:17.987157255Z [err]      ^
2026-01-06T16:42:17.987158764Z [err]      response = await f(request)
2026-01-06T16:42:17.987163297Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:42:17.987168556Z [err]          (day_of_week, current_time),
2026-01-06T16:42:17.987168611Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:42:17.987174490Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:42:17.987176172Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:42:17.987176766Z [err]      return await dependant.call(**values)
2026-01-06T16:42:17.987180526Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:42:17.987184350Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:42:17.987184838Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:42:17.987191279Z [err]      cur.execute(
2026-01-06T16:42:17.987193786Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:42:17.987194541Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:42:17.987202864Z [err]      ...<3 lines>...
2026-01-06T16:42:17.987203024Z [err]      event = get_active_event()
2026-01-06T16:42:17.987205920Z [err]      ~~~~~~~~~~~^
2026-01-06T16:42:17.987212699Z [err]      )
2026-01-06T16:42:17.987217101Z [err]          """
2026-01-06T16:42:17.987227235Z [err]          ^^^
2026-01-06T16:42:17.988100050Z [err]      )
2026-01-06T16:42:17.988109456Z [err]      ^
2026-01-06T16:42:17.988117033Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:42:17.988124456Z [err]      return super().execute(query, vars)
2026-01-06T16:42:17.988131939Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:42:17.988139576Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:42:17.988148804Z [err]  LINE 5:           AND active = 1
2026-01-06T16:42:17.988156570Z [err]                               ^
2026-01-06T16:42:17.988160834Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:42:17.988165470Z [err]  
2026-01-06T16:42:19.979252229Z [err]  2026-01-06 16:42:12.200 UTC [9001] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:42:19.979262552Z [err]  2026-01-06 16:42:12.200 UTC [9001] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:42:19.979269730Z [err]  2026-01-06 16:42:12.200 UTC [9001] STATEMENT:  
2026-01-06T16:42:19.979277128Z [err]  	        SELECT event
2026-01-06T16:42:19.979285603Z [err]  	        FROM event_config
2026-01-06T16:42:19.979294871Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:42:19.979301880Z [err]  	          AND active = 1
2026-01-06T16:42:19.979308696Z [err]  	          AND '16:42' BETWEEN open_time AND close_time
2026-01-06T16:42:19.979316089Z [err]  	        LIMIT 1;
2026-01-06T16:42:19.979324399Z [err]  	        
2026-01-06T16:42:38.013816340Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:42:38.013827990Z [err]      )
2026-01-06T16:42:38.013850407Z [err]      ^
2026-01-06T16:42:38.013859425Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:42:38.013868926Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:42:38.013880968Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:42:38.013890566Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:42:38.013897775Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:42:38.013904891Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:42:38.013912145Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:42:38.013918700Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:42:38.013923936Z [err]      raise exc
2026-01-06T16:42:38.013930743Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:42:38.013952690Z [inf]  ðŸ“¨ 27825528772: RUNNER
2026-01-06T16:42:38.013956825Z [inf]  INFO:     100.64.0.7:52818 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:42:38.013961390Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:42:38.013966740Z [err]  Traceback (most recent call last):
2026-01-06T16:42:38.013973948Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:42:38.013980107Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:42:38.013986244Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:42:38.013993190Z [err]          self.scope, self.receive, self.send
2026-01-06T16:42:38.014332726Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:42:38.014337070Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:42:38.014342659Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:42:38.014348989Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:42:38.014354776Z [err]      raise exc
2026-01-06T16:42:38.014361200Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:42:38.014368423Z [err]      await app(scope, receive, sender)
2026-01-06T16:42:38.014373729Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:42:38.014378121Z [err]      await self.app(scope, receive, send)
2026-01-06T16:42:38.014381777Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:42:38.014385640Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:42:38.014389323Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:42:38.014393420Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:42:38.014397300Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:42:38.014400924Z [err]      await self.app(scope, receive, send)
2026-01-06T16:42:38.014404587Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:42:38.014408949Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:42:38.014412434Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:42:38.015238988Z [err]          ^^^
2026-01-06T16:42:38.015252043Z [err]      raise exc
2026-01-06T16:42:38.015254420Z [err]      ...<7 lines>...
2026-01-06T16:42:38.015266906Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:42:38.015268206Z [err]          (day_of_week, current_time),
2026-01-06T16:42:38.015275696Z [err]      await app(scope, receive, sender)
2026-01-06T16:42:38.015282163Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:42:38.015284204Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:42:38.015291770Z [err]      response = await f(request)
2026-01-06T16:42:38.015296790Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:42:38.015301209Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:42:38.015305951Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:42:38.015310633Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:42:38.015315052Z [err]      ...<3 lines>...
2026-01-06T16:42:38.015319324Z [err]      )
2026-01-06T16:42:38.015323120Z [err]      ^
2026-01-06T16:42:38.015332540Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:42:38.015337277Z [err]      return await dependant.call(**values)
2026-01-06T16:42:38.015342783Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:42:38.015347940Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:42:38.015352097Z [err]      event = get_active_event()
2026-01-06T16:42:38.015356533Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:42:38.015360418Z [err]      cur.execute(
2026-01-06T16:42:38.015364488Z [err]      ~~~~~~~~~~~^
2026-01-06T16:42:38.015369371Z [err]          """
2026-01-06T16:42:38.016081723Z [err]      )
2026-01-06T16:42:38.016089445Z [err]      ^
2026-01-06T16:42:38.016094940Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:42:38.016099787Z [err]      return super().execute(query, vars)
2026-01-06T16:42:38.016105171Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:42:38.016110680Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:42:38.016115581Z [err]  LINE 5:           AND active = 1
2026-01-06T16:42:38.016120560Z [err]                               ^
2026-01-06T16:42:38.016125209Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:42:38.016130301Z [err]  
2026-01-06T16:42:38.016135251Z [inf]  ðŸ“¨ 27825528772: RUNNER
2026-01-06T16:42:38.016139643Z [inf]  INFO:     100.64.0.3:28216 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:42:38.016143947Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:42:38.016148453Z [err]  Traceback (most recent call last):
2026-01-06T16:42:38.016152814Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:42:38.016157169Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:42:38.016162651Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:42:38.016167343Z [err]          self.scope, self.receive, self.send
2026-01-06T16:42:38.016171550Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:42:38.016175514Z [err]      )
2026-01-06T16:42:38.016179680Z [err]      ^
2026-01-06T16:42:38.016185634Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:42:38.016192101Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:42:38.017054660Z [err]      raise exc
2026-01-06T16:42:38.017060326Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:42:38.017066279Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:42:38.017071943Z [err]      await app(scope, receive, sender)
2026-01-06T16:42:38.017072297Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:42:38.017078338Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:42:38.017078738Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:42:38.017083994Z [err]      await self.app(scope, receive, send)
2026-01-06T16:42:38.017085420Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:42:38.017089385Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:42:38.017091058Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:42:38.017096157Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:42:38.017100853Z [err]      raise exc
2026-01-06T16:42:38.017105044Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:42:38.017109194Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:42:38.017113110Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:42:38.017117338Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:42:38.017120948Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:42:38.018363725Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:42:38.018371670Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:42:38.018377724Z [err]      ^
2026-01-06T16:42:38.018378588Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:42:38.018384002Z [err]      await app(scope, receive, sender)
2026-01-06T16:42:38.018387041Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:42:38.018389373Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:42:38.018390864Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:42:38.018393517Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:42:38.018395133Z [err]      await self.app(scope, receive, send)
2026-01-06T16:42:38.018400952Z [err]      response = await f(request)
2026-01-06T16:42:38.018407246Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:42:38.018410462Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:42:38.018411810Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:42:38.018417993Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:42:38.018419426Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:42:38.018429019Z [err]      ...<3 lines>...
2026-01-06T16:42:38.018432268Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:42:38.018444510Z [err]      )
2026-01-06T16:42:38.018445150Z [err]      raise exc
2026-01-06T16:42:38.018454732Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:42:38.019235541Z [err]      return await dependant.call(**values)
2026-01-06T16:42:38.019246100Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:42:38.019246116Z [inf]  ðŸ“¨ 27825528772: RUNNER
2026-01-06T16:42:38.019253471Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:42:38.019257871Z [inf]  INFO:     100.64.0.8:18636 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:42:38.019259495Z [err]      event = get_active_event()
2026-01-06T16:42:38.019266118Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:42:38.019274501Z [err]      cur.execute(
2026-01-06T16:42:38.019274950Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:42:38.019279582Z [err]      ~~~~~~~~~~~^
2026-01-06T16:42:38.019284479Z [err]          """
2026-01-06T16:42:38.019288577Z [err]          ^^^
2026-01-06T16:42:38.019294174Z [err]      ...<7 lines>...
2026-01-06T16:42:38.019298484Z [err]          (day_of_week, current_time),
2026-01-06T16:42:38.019303682Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:42:38.019308395Z [err]      )
2026-01-06T16:42:38.019313155Z [err]      ^
2026-01-06T16:42:38.019317133Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:42:38.019321148Z [err]      return super().execute(query, vars)
2026-01-06T16:42:38.019327097Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:42:38.019332013Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:42:38.019336746Z [err]  LINE 5:           AND active = 1
2026-01-06T16:42:38.019341921Z [err]                               ^
2026-01-06T16:42:38.019346773Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:42:38.019351071Z [err]  
2026-01-06T16:42:38.020181062Z [err]  Traceback (most recent call last):
2026-01-06T16:42:38.020189577Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:42:38.020196435Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:42:38.020196963Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:42:38.020197758Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:42:38.020206439Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:42:38.020206494Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:42:38.020208746Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:42:38.020216366Z [err]          self.scope, self.receive, self.send
2026-01-06T16:42:38.020218561Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:42:38.020220532Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:42:38.020224841Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:42:38.020228703Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:42:38.020228870Z [err]      raise exc
2026-01-06T16:42:38.020234155Z [err]      )
2026-01-06T16:42:38.020236445Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:42:38.020243668Z [err]      ^
2026-01-06T16:42:38.020248399Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:42:38.020251511Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:42:38.020258578Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:42:38.020766851Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:42:38.020772529Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:42:38.020779776Z [err]      raise exc
2026-01-06T16:42:38.020788424Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:42:38.020789221Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:42:38.020796724Z [err]      await app(scope, receive, sender)
2026-01-06T16:42:38.020803284Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:42:38.020805374Z [err]      await self.app(scope, receive, send)
2026-01-06T16:42:38.020817051Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:42:38.020817755Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:42:38.020819709Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:42:38.020819881Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:42:38.020820241Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:42:38.020828302Z [err]      await self.app(scope, receive, send)
2026-01-06T16:42:38.020831172Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:42:38.020831906Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:42:38.020838296Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:42:38.020841730Z [err]      raise exc
2026-01-06T16:42:38.022110234Z [err]      await app(scope, receive, sender)
2026-01-06T16:42:38.022110897Z [err]          ^^^
2026-01-06T16:42:38.022116978Z [err]      )
2026-01-06T16:42:38.022119066Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:42:38.022120399Z [err]      ...<7 lines>...
2026-01-06T16:42:38.022128534Z [err]      response = await f(request)
2026-01-06T16:42:38.022128846Z [err]      ^
2026-01-06T16:42:38.022129658Z [err]          (day_of_week, current_time),
2026-01-06T16:42:38.022138154Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:42:38.022138356Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:42:38.022138359Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:42:38.022146974Z [err]      return await dependant.call(**values)
2026-01-06T16:42:38.022148024Z [err]      )
2026-01-06T16:42:38.022148315Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:42:38.022152394Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:42:38.022157210Z [err]      ^
2026-01-06T16:42:38.022157247Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:42:38.022158768Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:42:38.022164559Z [err]      event = get_active_event()
2026-01-06T16:42:38.022166672Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:42:38.022166675Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:42:38.022169832Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:42:38.022174514Z [err]      cur.execute(
2026-01-06T16:42:38.022175565Z [err]      ...<3 lines>...
2026-01-06T16:42:38.022178892Z [err]      ~~~~~~~~~~~^
2026-01-06T16:42:38.022182923Z [err]          """
2026-01-06T16:42:38.023024496Z [err]      return super().execute(query, vars)
2026-01-06T16:42:38.023033284Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:42:38.023034185Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:42:38.023038729Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:42:38.023042504Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:42:38.023042957Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:42:38.023050779Z [err]          self.scope, self.receive, self.send
2026-01-06T16:42:38.023051034Z [err]  LINE 5:           AND active = 1
2026-01-06T16:42:38.023057007Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:42:38.023059276Z [err]                               ^
2026-01-06T16:42:38.023062522Z [err]      )
2026-01-06T16:42:38.023067880Z [err]      ^
2026-01-06T16:42:38.023068976Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:42:38.023072853Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:42:38.023077876Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:42:38.023077895Z [err]  
2026-01-06T16:42:38.023083294Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:42:38.023085124Z [inf]  ðŸ“¨ 27825528772: RUNNER
2026-01-06T16:42:38.023089816Z [inf]  INFO:     100.64.0.4:40790 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:42:38.023094619Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:42:38.023098847Z [err]  Traceback (most recent call last):
2026-01-06T16:42:38.023102578Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:42:38.023832408Z [err]      await app(scope, receive, sender)
2026-01-06T16:42:38.023840026Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:42:38.023841156Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:42:38.023845581Z [err]      await self.app(scope, receive, send)
2026-01-06T16:42:38.023850705Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:42:38.023851001Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:42:38.023855846Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:42:38.023857482Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:42:38.023861198Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:42:38.023863270Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:42:38.023867554Z [err]      raise exc
2026-01-06T16:42:38.023871597Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:42:38.023876102Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:42:38.023880316Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:42:38.023885947Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:42:38.023890395Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:42:38.023894210Z [err]      raise exc
2026-01-06T16:42:38.023898493Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:42:38.024781885Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:42:38.024787702Z [err]      ...<3 lines>...
2026-01-06T16:42:38.024793071Z [err]      )
2026-01-06T16:42:38.024797006Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:42:38.024798643Z [err]      ^
2026-01-06T16:42:38.024803971Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:42:38.024804983Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:42:38.024809440Z [err]      return await dependant.call(**values)
2026-01-06T16:42:38.024811447Z [err]      await self.app(scope, receive, send)
2026-01-06T16:42:38.024815674Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:42:38.024819620Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:42:38.024823866Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:42:38.024827879Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:42:38.024832545Z [err]      raise exc
2026-01-06T16:42:38.024836824Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:42:38.024840925Z [err]      await app(scope, receive, sender)
2026-01-06T16:42:38.024846562Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:42:38.024851391Z [err]      response = await f(request)
2026-01-06T16:42:38.024855104Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:42:38.024859089Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:42:38.024862999Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:42:38.026154594Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:42:38.026160798Z [err]  LINE 5:           AND active = 1
2026-01-06T16:42:38.026161172Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T16:42:38.026163526Z [err]      event = get_active_event()
2026-01-06T16:42:38.026169585Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:42:38.026172004Z [err]                               ^
2026-01-06T16:42:38.026172419Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T16:42:38.026175380Z [err]      cur.execute(
2026-01-06T16:42:38.026182098Z [err]      ~~~~~~~~~~~^
2026-01-06T16:42:38.026183344Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:42:38.026188046Z [err]          """
2026-01-06T16:42:38.026193596Z [err]  
2026-01-06T16:42:38.026194644Z [err]          ^^^
2026-01-06T16:42:38.026194773Z [err]          (day_of_week, current_time),
2026-01-06T16:42:38.026200959Z [err]      ...<7 lines>...
2026-01-06T16:42:38.026203211Z [inf]  ðŸ“¨ 27673429555: Hi
2026-01-06T16:42:38.026205523Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:42:38.026212002Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T16:42:38.026212913Z [err]      )
2026-01-06T16:42:38.026217668Z [err]      ^
2026-01-06T16:42:38.026223416Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:42:38.026228297Z [err]      return super().execute(query, vars)
2026-01-06T16:42:38.026232992Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:42:38.026237943Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:42:38.727993744Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T16:42:38.728001532Z [inf]  ðŸ“¤ Status: 200
2026-01-06T16:42:38.728007228Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27673429555","wa_id":"27673429555"}],"messages":[{"id":"wamid.HBgLMjc2NzM0Mjk1NTUVAgARGBJBQjdEQUVGOTM5Q0NFNUEyNkEA"}]}
2026-01-06T16:42:38.728013826Z [inf]  INFO:     100.64.0.2:31632 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:42:40.049851784Z [inf]  INFO:     100.64.0.7:40158 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:42:40.323602178Z [err]  2026-01-06 16:42:31.071 UTC [9004] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:42:40.323612766Z [err]  2026-01-06 16:42:31.071 UTC [9004] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:42:40.323621864Z [err]  2026-01-06 16:42:31.071 UTC [9004] STATEMENT:  
2026-01-06T16:42:40.323632726Z [err]  	        SELECT event
2026-01-06T16:42:40.323643655Z [err]  	        FROM event_config
2026-01-06T16:42:40.323652335Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:42:40.323660659Z [err]  	          AND active = 1
2026-01-06T16:42:40.323668100Z [err]  	          AND '16:42' BETWEEN open_time AND close_time
2026-01-06T16:42:40.323676029Z [err]  	        LIMIT 1;
2026-01-06T16:42:40.323683633Z [err]  	        
2026-01-06T16:42:40.323692350Z [err]  2026-01-06 16:42:31.956 UTC [9006] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:42:40.323699887Z [err]  2026-01-06 16:42:31.956 UTC [9006] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:42:40.323708477Z [err]  2026-01-06 16:42:31.956 UTC [9006] STATEMENT:  
2026-01-06T16:42:40.323715207Z [err]  	        SELECT event
2026-01-06T16:42:40.323722875Z [err]  	        FROM event_config
2026-01-06T16:42:40.323733682Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:42:40.323739444Z [err]  	          AND active = 1
2026-01-06T16:42:40.323746458Z [err]  	          AND '16:42' BETWEEN open_time AND close_time
2026-01-06T16:42:40.323849361Z [err]  	        LIMIT 1;
2026-01-06T16:42:40.323857859Z [err]  	        
2026-01-06T16:42:40.323869906Z [err]  2026-01-06 16:42:32.864 UTC [9008] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:42:40.323877495Z [err]  2026-01-06 16:42:32.864 UTC [9008] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:42:41.051475437Z [inf]  INFO:     100.64.0.7:40158 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:42:41.376551538Z [inf]  INFO:     100.64.0.4:38160 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:42:41.834864083Z [err]  2026-01-06 16:42:32.864 UTC [9008] STATEMENT:  
2026-01-06T16:42:41.834871034Z [err]  	        SELECT event
2026-01-06T16:42:41.834879693Z [err]  	        FROM event_config
2026-01-06T16:42:41.834887368Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:42:41.834894731Z [err]  	          AND active = 1
2026-01-06T16:42:41.834901540Z [err]  	          AND '16:42' BETWEEN open_time AND close_time
2026-01-06T16:42:41.834907004Z [err]  	        LIMIT 1;
2026-01-06T16:42:41.834915802Z [err]  	        
2026-01-06T16:42:41.834921740Z [err]  2026-01-06 16:42:34.892 UTC [9010] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:42:41.838773431Z [err]  2026-01-06 16:42:34.892 UTC [9010] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:42:41.838787842Z [err]  2026-01-06 16:42:34.892 UTC [9010] STATEMENT:  
2026-01-06T16:42:41.838800221Z [err]  	        SELECT event
2026-01-06T16:42:41.838808056Z [err]  	        FROM event_config
2026-01-06T16:42:41.838817305Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:42:41.838824316Z [err]  	          AND active = 1
2026-01-06T16:42:41.838830787Z [err]  	          AND '16:42' BETWEEN open_time AND close_time
2026-01-06T16:42:41.838837649Z [err]  	        LIMIT 1;
2026-01-06T16:42:41.838848665Z [err]  	        
2026-01-06T16:42:46.875694812Z [err]  2026-01-06 16:42:46.599 UTC [76] LOG:  checkpoint starting: time
2026-01-06T16:42:47.763841435Z [inf]  ðŸ“¨ 27673429555: Runner
2026-01-06T16:42:47.916223726Z [err]  2026-01-06 16:42:47.067 UTC [76] LOG:  checkpoint complete: wrote 5 buffers (0.0%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.415 s, sync=0.013 s, total=0.469 s; sync files=5, longest=0.011 s, average=0.003 s; distance=10 kB, estimate=21 kB; lsn=0/1A17558, redo lsn=0/1A17500
2026-01-06T16:42:48.107438001Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T16:42:48.107450000Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T16:42:48.107460911Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T16:42:48.703470776Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T16:42:48.703479101Z [inf]  ðŸ“¤ Status: 200
2026-01-06T16:42:48.703486916Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27673429555","wa_id":"27673429555"}],"messages":[{"id":"wamid.HBgLMjc2NzM0Mjk1NTUVAgARGBIzMEMwQkJFQ0FBQTYzMEMwRTgA"}]}
2026-01-06T16:42:48.704459358Z [inf]  INFO:     100.64.0.3:33914 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:42:49.922813811Z [inf]  INFO:     100.64.0.5:30672 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:42:50.292684049Z [inf]  INFO:     100.64.0.9:25854 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:42:50.292693508Z [inf]  INFO:     100.64.0.4:21948 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:42:50.663574168Z [inf]  ðŸ“¨ 27825528772: RUNNER
2026-01-06T16:42:50.940820600Z [inf]  INFO:     100.64.0.3:33914 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:42:50.940827828Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:42:50.940834721Z [err]  Traceback (most recent call last):
2026-01-06T16:42:50.940839340Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:42:50.940844863Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:42:50.940849618Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:42:50.940853761Z [err]          self.scope, self.receive, self.send
2026-01-06T16:42:50.940858274Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:42:50.940862648Z [err]      )
2026-01-06T16:42:50.940866813Z [err]      ^
2026-01-06T16:42:50.940873322Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:42:50.940879576Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:42:50.940886492Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:42:50.940893109Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:42:50.940902502Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:42:50.940910042Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:42:50.940917273Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:42:50.940924041Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:42:50.940927957Z [err]      raise exc
2026-01-06T16:42:50.940933137Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:42:50.941265782Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:42:50.941274396Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:42:50.941281674Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:42:50.941288097Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:42:50.941295025Z [err]      raise exc
2026-01-06T16:42:50.941300748Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:42:50.941305032Z [err]      await app(scope, receive, sender)
2026-01-06T16:42:50.941308746Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:42:50.941312490Z [err]      await self.app(scope, receive, send)
2026-01-06T16:42:50.941316354Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:42:50.941320276Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:42:50.941324452Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:42:50.941329030Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:42:50.941333903Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:42:50.941338764Z [err]      await self.app(scope, receive, send)
2026-01-06T16:42:50.941343737Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:42:50.941348657Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:42:50.941353076Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:42:50.945737269Z [err]      raise exc
2026-01-06T16:42:50.945749983Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:42:50.945771782Z [err]      await app(scope, receive, sender)
2026-01-06T16:42:50.945778945Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:42:50.945785124Z [err]      response = await f(request)
2026-01-06T16:42:50.945791744Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:42:50.945798320Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:42:50.945805511Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:42:50.945812857Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:42:50.945819824Z [err]      ...<3 lines>...
2026-01-06T16:42:50.945826844Z [err]      )
2026-01-06T16:42:50.945869307Z [err]      ^
2026-01-06T16:42:50.945877866Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:42:50.945886004Z [err]      return await dependant.call(**values)
2026-01-06T16:42:50.945892991Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:42:50.945899077Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:42:50.945907579Z [err]      event = get_active_event()
2026-01-06T16:42:50.945914539Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:42:50.945921152Z [err]      cur.execute(
2026-01-06T16:42:50.945928502Z [err]      ~~~~~~~~~~~^
2026-01-06T16:42:50.945935810Z [err]          """
2026-01-06T16:42:50.945944016Z [err]          ^^^
2026-01-06T16:42:50.945950889Z [err]      ...<7 lines>...
2026-01-06T16:42:50.945958842Z [err]          (day_of_week, current_time),
2026-01-06T16:42:50.945966284Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:42:50.945973949Z [err]      )
2026-01-06T16:42:50.945979869Z [err]      ^
2026-01-06T16:42:50.945986844Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:42:50.945993185Z [err]      return super().execute(query, vars)
2026-01-06T16:42:50.946000738Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:42:50.946006676Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:42:50.946013159Z [err]  LINE 5:           AND active = 1
2026-01-06T16:42:50.946020221Z [err]                               ^
2026-01-06T16:42:50.946028790Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:42:50.946036505Z [err]  
2026-01-06T16:42:51.643706233Z [err]  2026-01-06 16:42:50.932 UTC [9015] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:42:51.643715769Z [err]  2026-01-06 16:42:50.932 UTC [9015] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:42:51.643723365Z [err]  2026-01-06 16:42:50.932 UTC [9015] STATEMENT:  
2026-01-06T16:42:51.643731209Z [err]  	        SELECT event
2026-01-06T16:42:51.643738075Z [err]  	        FROM event_config
2026-01-06T16:42:51.643748221Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:42:51.643755819Z [err]  	          AND active = 1
2026-01-06T16:42:51.643762613Z [err]  	          AND '16:42' BETWEEN open_time AND close_time
2026-01-06T16:42:51.643769451Z [err]  	        LIMIT 1;
2026-01-06T16:42:51.643776382Z [err]  	        
2026-01-06T16:43:10.937268722Z [inf]  ðŸ“¨ 27825528772: HI
2026-01-06T16:43:10.937272594Z [err]      raise exc
2026-01-06T16:43:10.937276953Z [inf]  INFO:     100.64.0.9:24430 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:43:10.937282195Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:43:10.937284978Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:43:10.937287730Z [err]  Traceback (most recent call last):
2026-01-06T16:43:10.937294412Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:43:10.937300147Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:43:10.937303840Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:43:10.937307990Z [err]          self.scope, self.receive, self.send
2026-01-06T16:43:10.937312362Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:43:10.937316999Z [err]      )
2026-01-06T16:43:10.937320686Z [err]      ^
2026-01-06T16:43:10.937324345Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:43:10.937328178Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:43:10.937332161Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:43:10.937335725Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:43:10.937339324Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:43:10.937342921Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:43:10.937346928Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:43:10.937351048Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:43:10.938268347Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:43:10.938276153Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:43:10.938280948Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:43:10.938285431Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:43:10.938289919Z [err]      raise exc
2026-01-06T16:43:10.938294372Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:43:10.938299042Z [err]      await app(scope, receive, sender)
2026-01-06T16:43:10.938306412Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:43:10.938310608Z [err]      await self.app(scope, receive, send)
2026-01-06T16:43:10.938316483Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:43:10.938321056Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:43:10.938325937Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:43:10.938329908Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:43:10.938334002Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:43:10.938338598Z [err]      await self.app(scope, receive, send)
2026-01-06T16:43:10.938342808Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:43:10.938347603Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:43:10.938353743Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:43:10.939322996Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:43:10.939323026Z [err]      raise exc
2026-01-06T16:43:10.939330611Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:43:10.939331603Z [err]      cur.execute(
2026-01-06T16:43:10.939337589Z [err]      await app(scope, receive, sender)
2026-01-06T16:43:10.939338808Z [err]      ~~~~~~~~~~~^
2026-01-06T16:43:10.939344254Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:43:10.939346816Z [err]          """
2026-01-06T16:43:10.939350630Z [err]      response = await f(request)
2026-01-06T16:43:10.939353660Z [err]          ^^^
2026-01-06T16:43:10.939358233Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:43:10.939360588Z [err]      ...<7 lines>...
2026-01-06T16:43:10.939366291Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:43:10.939367593Z [err]          (day_of_week, current_time),
2026-01-06T16:43:10.939374293Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:43:10.939374389Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:43:10.939380491Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:43:10.939386483Z [err]      ...<3 lines>...
2026-01-06T16:43:10.939394781Z [err]      )
2026-01-06T16:43:10.939402173Z [err]      ^
2026-01-06T16:43:10.939408396Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:43:10.939414406Z [err]      return await dependant.call(**values)
2026-01-06T16:43:10.939418789Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:43:10.939422655Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:43:10.939426850Z [err]      event = get_active_event()
2026-01-06T16:43:10.940811482Z [err]      )
2026-01-06T16:43:10.940820606Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:43:10.940821305Z [err]      ^
2026-01-06T16:43:10.940824609Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:43:10.940830818Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:43:10.940831834Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:43:10.940840259Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:43:10.940840866Z [err]      return super().execute(query, vars)
2026-01-06T16:43:10.940849526Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:43:10.940850798Z [err]          self.scope, self.receive, self.send
2026-01-06T16:43:10.940859422Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:43:10.940859444Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:43:10.940866079Z [err]      )
2026-01-06T16:43:10.940868187Z [err]  LINE 5:           AND active = 1
2026-01-06T16:43:10.940872158Z [err]      ^
2026-01-06T16:43:10.940876867Z [err]                               ^
2026-01-06T16:43:10.940877640Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:43:10.940884560Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:43:10.940891515Z [err]  
2026-01-06T16:43:10.940898127Z [inf]  ðŸ“¨ 27825528772: HI
2026-01-06T16:43:10.940904967Z [inf]  INFO:     100.64.0.9:24438 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:43:10.940911554Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:43:10.940917604Z [err]  Traceback (most recent call last):
2026-01-06T16:43:10.941568572Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:43:10.941574679Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:43:10.941576802Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:43:10.941580039Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:43:10.941585064Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:43:10.941586708Z [err]      await self.app(scope, receive, send)
2026-01-06T16:43:10.941591218Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:43:10.941595564Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:43:10.941597123Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:43:10.941598217Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:43:10.941603633Z [err]      raise exc
2026-01-06T16:43:10.941608292Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:43:10.941609685Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:43:10.941616330Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:43:10.941623894Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:43:10.941630631Z [err]      raise exc
2026-01-06T16:43:10.941638485Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:43:10.941646174Z [err]      await app(scope, receive, sender)
2026-01-06T16:43:10.942621194Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:43:10.942626071Z [err]      response = await f(request)
2026-01-06T16:43:10.942637476Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:43:10.942642180Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:43:10.942650864Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:43:10.942659421Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:43:10.942665386Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:43:10.942674468Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:43:10.942679467Z [err]      await self.app(scope, receive, send)
2026-01-06T16:43:10.942689389Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:43:10.942693745Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:43:10.942704201Z [err]      ...<3 lines>...
2026-01-06T16:43:10.942706247Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:43:10.942719699Z [err]      )
2026-01-06T16:43:10.942720401Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:43:10.942734344Z [err]      raise exc
2026-01-06T16:43:10.942738071Z [err]      ^
2026-01-06T16:43:10.942747145Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:43:10.942752058Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:43:10.942758691Z [err]      await app(scope, receive, sender)
2026-01-06T16:43:10.942765544Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:43:10.943563445Z [err]      return await dependant.call(**values)
2026-01-06T16:43:10.943573924Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:43:10.943581889Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:43:10.943589874Z [err]      event = get_active_event()
2026-01-06T16:43:10.943597934Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:43:10.943608018Z [err]      cur.execute(
2026-01-06T16:43:10.943616424Z [err]      ~~~~~~~~~~~^
2026-01-06T16:43:10.943624753Z [err]          """
2026-01-06T16:43:10.943631862Z [err]          ^^^
2026-01-06T16:43:10.943638934Z [err]      ...<7 lines>...
2026-01-06T16:43:10.943645926Z [err]          (day_of_week, current_time),
2026-01-06T16:43:10.943653018Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:43:10.943660127Z [err]      )
2026-01-06T16:43:10.943667185Z [err]      ^
2026-01-06T16:43:10.943673739Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:43:10.943680380Z [err]      return super().execute(query, vars)
2026-01-06T16:43:10.943687185Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:43:10.943695014Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:43:10.943702143Z [err]  LINE 5:           AND active = 1
2026-01-06T16:43:10.943709275Z [err]                               ^
2026-01-06T16:43:10.943716925Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:43:10.943724067Z [err]  
2026-01-06T16:43:10.943731537Z [inf]  ðŸ“¨ 27825528772: HI
2026-01-06T16:43:10.943738299Z [inf]  INFO:     100.64.0.3:31200 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:43:10.943744704Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:43:10.944546492Z [err]  Traceback (most recent call last):
2026-01-06T16:43:10.944550255Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:43:10.944553258Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:43:10.944558052Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:43:10.944561994Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:43:10.944563113Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:43:10.944567896Z [err]          self.scope, self.receive, self.send
2026-01-06T16:43:10.944573411Z [err]      raise exc
2026-01-06T16:43:10.944573491Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:43:10.944579336Z [err]      )
2026-01-06T16:43:10.944582119Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:43:10.944584716Z [err]      ^
2026-01-06T16:43:10.944589426Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:43:10.944592164Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:43:10.944597236Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:43:10.944599210Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:43:10.944603956Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:43:10.944608081Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:43:10.944611871Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:43:10.944615390Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:43:10.945630728Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:43:10.945646618Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:43:10.945648788Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:43:10.945660495Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:43:10.945663217Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:43:10.945674668Z [err]      raise exc
2026-01-06T16:43:10.945675724Z [err]      raise exc
2026-01-06T16:43:10.945684566Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:43:10.945689263Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:43:10.945693798Z [err]      await app(scope, receive, sender)
2026-01-06T16:43:10.945700001Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:43:10.945705601Z [err]      await self.app(scope, receive, send)
2026-01-06T16:43:10.945712749Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:43:10.945719385Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:43:10.945725509Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:43:10.945732654Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:43:10.945739715Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:43:10.945744948Z [err]      await self.app(scope, receive, send)
2026-01-06T16:43:10.947084015Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:43:10.947088576Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:43:10.947093615Z [err]      )
2026-01-06T16:43:10.947101682Z [err]      ^
2026-01-06T16:43:10.947103375Z [err]      await app(scope, receive, sender)
2026-01-06T16:43:10.947103601Z [err]      event = get_active_event()
2026-01-06T16:43:10.947109639Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:43:10.947113627Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:43:10.947124619Z [err]      cur.execute(
2026-01-06T16:43:10.947124742Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:43:10.947135007Z [err]      response = await f(request)
2026-01-06T16:43:10.947138961Z [err]      ~~~~~~~~~~~^
2026-01-06T16:43:10.947144747Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:43:10.947152581Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:43:10.947155458Z [err]          """
2026-01-06T16:43:10.947161944Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:43:10.947169346Z [err]          ^^^
2026-01-06T16:43:10.947171865Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:43:10.947182516Z [err]      ...<3 lines>...
2026-01-06T16:43:10.947184342Z [err]      ...<7 lines>...
2026-01-06T16:43:10.947191706Z [err]      )
2026-01-06T16:43:10.947198484Z [err]          (day_of_week, current_time),
2026-01-06T16:43:10.947201604Z [err]      ^
2026-01-06T16:43:10.947206599Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:43:10.947212133Z [err]      return await dependant.call(**values)
2026-01-06T16:43:10.947216637Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:43:10.947924850Z [err]      return super().execute(query, vars)
2026-01-06T16:43:10.947934378Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:43:10.947940963Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:43:10.947948469Z [err]  LINE 5:           AND active = 1
2026-01-06T16:43:10.947956394Z [err]                               ^
2026-01-06T16:43:10.947963665Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:43:10.947969715Z [err]  
2026-01-06T16:43:10.947976295Z [inf]  ðŸ“¨ 27825528772: HI
2026-01-06T16:43:10.947982886Z [inf]  INFO:     100.64.0.9:24450 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:43:10.947989654Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:43:10.947996000Z [err]  Traceback (most recent call last):
2026-01-06T16:43:10.948002501Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:43:10.948008729Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:43:10.948015211Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:43:10.948021353Z [err]          self.scope, self.receive, self.send
2026-01-06T16:43:10.948027513Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:43:10.948033324Z [err]      )
2026-01-06T16:43:10.948040174Z [err]      ^
2026-01-06T16:43:10.948045806Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:43:10.948052468Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:43:10.948058628Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:43:10.948064601Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:43:10.948896472Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:43:10.948903923Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:43:10.948908739Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:43:10.948913697Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:43:10.948918248Z [err]      raise exc
2026-01-06T16:43:10.948922789Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:43:10.948927206Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:43:10.948931485Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:43:10.948936299Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:43:10.948940647Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:43:10.948945511Z [err]      raise exc
2026-01-06T16:43:10.948949975Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:43:10.948954110Z [err]      await app(scope, receive, sender)
2026-01-06T16:43:10.948958168Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:43:10.948962452Z [err]      await self.app(scope, receive, send)
2026-01-06T16:43:10.948966605Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:43:10.948971152Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:43:10.948976994Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:43:10.950062596Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:43:10.950079959Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:43:10.950086199Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:43:10.950090635Z [err]      await self.app(scope, receive, send)
2026-01-06T16:43:10.950094208Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:43:10.950098102Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:43:10.950102286Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:43:10.950105886Z [err]      raise exc
2026-01-06T16:43:10.950110043Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:43:10.950113864Z [err]      await app(scope, receive, sender)
2026-01-06T16:43:10.950117823Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:43:10.950122816Z [err]      response = await f(request)
2026-01-06T16:43:10.950126678Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:43:10.950132797Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:43:10.950136706Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:43:10.950140407Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:43:10.950144703Z [err]      ...<3 lines>...
2026-01-06T16:43:10.950148574Z [err]      )
2026-01-06T16:43:10.950152276Z [err]      ^
2026-01-06T16:43:10.950156052Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:43:10.950159761Z [err]      return await dependant.call(**values)
2026-01-06T16:43:10.951074619Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:43:10.951089065Z [err]      event = get_active_event()
2026-01-06T16:43:10.951090545Z [err]          (day_of_week, current_time),
2026-01-06T16:43:10.951090691Z [err]                               ^
2026-01-06T16:43:10.951103281Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:43:10.951103703Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:43:10.951103847Z [err]      ^
2026-01-06T16:43:10.951105736Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:43:10.951115190Z [err]  
2026-01-06T16:43:10.951115516Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:43:10.951118792Z [err]      )
2026-01-06T16:43:10.951118988Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:43:10.951119591Z [err]      cur.execute(
2026-01-06T16:43:10.951133012Z [err]      return super().execute(query, vars)
2026-01-06T16:43:10.951133720Z [err]      ~~~~~~~~~~~^
2026-01-06T16:43:10.951141434Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:43:10.951142346Z [err]          """
2026-01-06T16:43:10.951149282Z [err]          ^^^
2026-01-06T16:43:10.951157175Z [err]      ...<7 lines>...
2026-01-06T16:43:10.951158105Z [err]  LINE 5:           AND active = 1
2026-01-06T16:43:11.524332737Z [err]  	        FROM event_config
2026-01-06T16:43:11.524347333Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:43:11.524348528Z [err]  2026-01-06 16:43:03.888 UTC [9018] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:43:11.524357072Z [err]  	          AND active = 1
2026-01-06T16:43:11.524397984Z [err]  	          AND '16:43' BETWEEN open_time AND close_time
2026-01-06T16:43:11.524406409Z [err]  	        LIMIT 1;
2026-01-06T16:43:11.524414516Z [err]  	        
2026-01-06T16:43:11.524423364Z [err]  2026-01-06 16:43:04.362 UTC [9020] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:43:11.524437014Z [err]  2026-01-06 16:43:04.362 UTC [9020] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:43:11.524449835Z [err]  2026-01-06 16:43:04.362 UTC [9020] STATEMENT:  
2026-01-06T16:43:11.524451937Z [err]  2026-01-06 16:43:03.888 UTC [9018] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:43:11.524460223Z [err]  	        SELECT event
2026-01-06T16:43:11.524468727Z [err]  	        FROM event_config
2026-01-06T16:43:11.524480832Z [err]  2026-01-06 16:43:03.888 UTC [9018] STATEMENT:  
2026-01-06T16:43:11.524481628Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:43:11.524494032Z [err]  	          AND active = 1
2026-01-06T16:43:11.524503511Z [err]  	        SELECT event
2026-01-06T16:43:11.528836154Z [err]  	          AND '16:43' BETWEEN open_time AND close_time
2026-01-06T16:43:11.528847978Z [err]  	        LIMIT 1;
2026-01-06T16:43:11.528855415Z [err]  	        
2026-01-06T16:43:11.528862869Z [err]  2026-01-06 16:43:04.931 UTC [9022] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:43:11.528872810Z [err]  2026-01-06 16:43:04.931 UTC [9022] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:43:13.360659484Z [err]  2026-01-06 16:43:04.931 UTC [9022] STATEMENT:  
2026-01-06T16:43:13.360667944Z [err]  	        SELECT event
2026-01-06T16:43:13.360695961Z [err]  	        FROM event_config
2026-01-06T16:43:13.360718839Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:43:13.368781399Z [err]  	          AND active = 1
2026-01-06T16:43:13.368797328Z [err]  	          AND '16:43' BETWEEN open_time AND close_time
2026-01-06T16:43:13.368806307Z [err]  	        LIMIT 1;
2026-01-06T16:43:13.368814113Z [err]  	        
2026-01-06T16:43:13.368822456Z [err]  2026-01-06 16:43:06.545 UTC [9024] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:43:13.368832685Z [err]  2026-01-06 16:43:06.545 UTC [9024] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:43:13.368839980Z [err]  2026-01-06 16:43:06.545 UTC [9024] STATEMENT:  
2026-01-06T16:43:13.368848514Z [err]  	        SELECT event
2026-01-06T16:43:13.368855926Z [err]  	        FROM event_config
2026-01-06T16:43:13.368864718Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:43:13.368873176Z [err]  	          AND active = 1
2026-01-06T16:43:13.368880108Z [err]  	          AND '16:43' BETWEEN open_time AND close_time
2026-01-06T16:43:13.368887315Z [err]  	        LIMIT 1;
2026-01-06T16:43:13.368893546Z [err]  	        
2026-01-06T16:43:30.947682826Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:43:30.947684272Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:43:30.947693346Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:43:30.947701820Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:43:30.947704728Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:43:30.947711368Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:43:30.947712016Z [inf]  ðŸ“¨ 27825528772: HI
2026-01-06T16:43:30.947717287Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:43:30.947718873Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:43:30.947721746Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:43:30.947723223Z [inf]  INFO:     100.64.0.4:45632 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:43:30.947729745Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:43:30.947730612Z [err]          self.scope, self.receive, self.send
2026-01-06T16:43:30.947733557Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:43:30.947733682Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:43:30.947739490Z [err]      raise exc
2026-01-06T16:43:30.947741527Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:43:30.947745614Z [err]  Traceback (most recent call last):
2026-01-06T16:43:30.947751983Z [err]      )
2026-01-06T16:43:30.947756875Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:43:30.947763922Z [err]      ^
2026-01-06T16:43:30.948506857Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:43:30.948514646Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:43:30.948518128Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:43:30.948523337Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:43:30.948528500Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:43:30.948532359Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:43:30.948538057Z [err]      await self.app(scope, receive, send)
2026-01-06T16:43:30.948541820Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:43:30.948547405Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:43:30.948551206Z [err]      raise exc
2026-01-06T16:43:30.948558655Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:43:30.948561396Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:43:30.948568772Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:43:30.948570102Z [err]      await app(scope, receive, sender)
2026-01-06T16:43:30.948577669Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:43:30.948584805Z [err]      await self.app(scope, receive, send)
2026-01-06T16:43:30.948593525Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:43:30.948600177Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:43:30.949905523Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:43:30.949906093Z [err]      raise exc
2026-01-06T16:43:30.949910503Z [err]      ...<7 lines>...
2026-01-06T16:43:30.949915727Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:43:30.949917360Z [err]      ...<3 lines>...
2026-01-06T16:43:30.949918241Z [err]      event = get_active_event()
2026-01-06T16:43:30.949924049Z [err]          (day_of_week, current_time),
2026-01-06T16:43:30.949925157Z [err]      await app(scope, receive, sender)
2026-01-06T16:43:30.949928450Z [err]      )
2026-01-06T16:43:30.949930941Z [err]      ~~~~~~~~~~~^
2026-01-06T16:43:30.949931869Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:43:30.949935410Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:43:30.949935826Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:43:30.949939206Z [err]      ^
2026-01-06T16:43:30.949943812Z [err]      cur.execute(
2026-01-06T16:43:30.949945012Z [err]      response = await f(request)
2026-01-06T16:43:30.949945250Z [err]          """
2026-01-06T16:43:30.949949201Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:43:30.949954691Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:43:30.949959544Z [err]      return await dependant.call(**values)
2026-01-06T16:43:30.949960135Z [err]          ^^^
2026-01-06T16:43:30.949963685Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:43:30.949969117Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:43:30.949972881Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:43:30.949978415Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:43:30.950465710Z [err]      )
2026-01-06T16:43:30.950471681Z [err]      ^
2026-01-06T16:43:30.950476912Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:43:30.950489317Z [err]      return super().execute(query, vars)
2026-01-06T16:43:30.950496314Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:43:30.950502982Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:43:30.950509983Z [err]  LINE 5:           AND active = 1
2026-01-06T16:43:30.950516422Z [err]                               ^
2026-01-06T16:43:30.950522268Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:43:30.950528607Z [err]  
2026-01-06T16:43:33.077351974Z [err]  2026-01-06 16:43:22.519 UTC [9026] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:43:33.077364216Z [err]  2026-01-06 16:43:22.519 UTC [9026] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:43:33.077373031Z [err]  2026-01-06 16:43:22.519 UTC [9026] STATEMENT:  
2026-01-06T16:43:33.077382636Z [err]  	        SELECT event
2026-01-06T16:43:33.077392157Z [err]  	        FROM event_config
2026-01-06T16:43:33.077400150Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:43:33.077408475Z [err]  	          AND active = 1
2026-01-06T16:43:33.077417166Z [err]  	          AND '16:43' BETWEEN open_time AND close_time
2026-01-06T16:43:33.077425238Z [err]  	        LIMIT 1;
2026-01-06T16:43:33.077488485Z [err]  	        
2026-01-06T16:44:41.030032428Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:44:41.030032482Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:44:41.030037020Z [inf]  ðŸ“¨ 27825528772: RUNNER
2026-01-06T16:44:41.030041418Z [err]      raise exc
2026-01-06T16:44:41.030046775Z [inf]  INFO:     100.64.0.8:54480 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:44:41.030048174Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:44:41.030049306Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:44:41.030056109Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:44:41.030060324Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:44:41.030069873Z [err]  Traceback (most recent call last):
2026-01-06T16:44:41.030072012Z [err]          self.scope, self.receive, self.send
2026-01-06T16:44:41.030080997Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:44:41.030090665Z [err]      )
2026-01-06T16:44:41.030100194Z [err]      ^
2026-01-06T16:44:41.030108969Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:44:41.030116334Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:44:41.030123223Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:44:41.030131451Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:44:41.030138657Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:44:41.030146847Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:44:41.030153415Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:44:41.031002366Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:44:41.031009455Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:44:41.031015060Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:44:41.031019255Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:44:41.031023602Z [err]      raise exc
2026-01-06T16:44:41.031027997Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:44:41.031032248Z [err]      await app(scope, receive, sender)
2026-01-06T16:44:41.031036393Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:44:41.031040926Z [err]      await self.app(scope, receive, send)
2026-01-06T16:44:41.031044907Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:44:41.031049169Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:44:41.031053822Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:44:41.031058158Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:44:41.031062094Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:44:41.031066651Z [err]      await self.app(scope, receive, send)
2026-01-06T16:44:41.031070437Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:44:41.031075937Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:44:41.031080051Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:44:41.032821767Z [err]      raise exc
2026-01-06T16:44:41.032828118Z [err]      ...<7 lines>...
2026-01-06T16:44:41.032832236Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:44:41.032843429Z [err]      await app(scope, receive, sender)
2026-01-06T16:44:41.032845353Z [err]          (day_of_week, current_time),
2026-01-06T16:44:41.032854524Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:44:41.032857092Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:44:41.032862790Z [err]      response = await f(request)
2026-01-06T16:44:41.032868233Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:44:41.032873695Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:44:41.032880057Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:44:41.032887060Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:44:41.032893839Z [err]      ...<3 lines>...
2026-01-06T16:44:41.032899685Z [err]      )
2026-01-06T16:44:41.032907481Z [err]      ^
2026-01-06T16:44:41.032913304Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:44:41.032918791Z [err]      return await dependant.call(**values)
2026-01-06T16:44:41.032924137Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:44:41.032929710Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:44:41.032934619Z [err]      event = get_active_event()
2026-01-06T16:44:41.032941662Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:44:41.032946841Z [err]      cur.execute(
2026-01-06T16:44:41.032951862Z [err]      ~~~~~~~~~~~^
2026-01-06T16:44:41.032956447Z [err]          """
2026-01-06T16:44:41.032960895Z [err]          ^^^
2026-01-06T16:44:41.034108984Z [err]      )
2026-01-06T16:44:41.034124437Z [err]      ^
2026-01-06T16:44:41.034134608Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:44:41.034142347Z [err]      return super().execute(query, vars)
2026-01-06T16:44:41.034149018Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:44:41.034155737Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:44:41.034161170Z [err]  LINE 5:           AND active = 1
2026-01-06T16:44:41.034166287Z [err]                               ^
2026-01-06T16:44:41.034171546Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:44:41.034178604Z [err]  
2026-01-06T16:44:46.516540202Z [err]  2026-01-06 16:44:39.568 UTC [9032] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:44:46.516541508Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:44:46.516558037Z [err]  	          AND active = 1
2026-01-06T16:44:46.516558313Z [err]  2026-01-06 16:44:39.568 UTC [9032] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:44:46.516569179Z [err]  2026-01-06 16:44:39.568 UTC [9032] STATEMENT:  
2026-01-06T16:44:46.516571702Z [err]  	          AND '16:44' BETWEEN open_time AND close_time
2026-01-06T16:44:46.516577547Z [err]  	        SELECT event
2026-01-06T16:44:46.516590175Z [err]  	        LIMIT 1;
2026-01-06T16:44:46.516600488Z [err]  	        
2026-01-06T16:44:46.516603154Z [err]  	        FROM event_config
2026-01-06T16:44:49.836820804Z [inf]  ðŸ“¨ 27825528772: HI
2026-01-06T16:44:50.150847380Z [inf]  INFO:     100.64.0.4:28804 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:44:50.150858284Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:44:50.150863989Z [err]  Traceback (most recent call last):
2026-01-06T16:44:50.150869622Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:44:50.150874890Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:44:50.150880784Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:44:50.150884778Z [err]          self.scope, self.receive, self.send
2026-01-06T16:44:50.150891526Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:44:50.150897009Z [err]      )
2026-01-06T16:44:50.150901382Z [err]      ^
2026-01-06T16:44:50.150906078Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:44:50.150910042Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:44:50.150914353Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:44:50.150919152Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:44:50.150923781Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:44:50.150927801Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:44:50.150932115Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:44:50.150936607Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:44:50.150940788Z [err]      raise exc
2026-01-06T16:44:50.150945188Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:44:50.151785852Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:44:50.151794182Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:44:50.151801716Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:44:50.151802077Z [err]      await self.app(scope, receive, send)
2026-01-06T16:44:50.151807121Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:44:50.151814710Z [err]      raise exc
2026-01-06T16:44:50.151817665Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:44:50.151821786Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:44:50.151830297Z [err]      await app(scope, receive, sender)
2026-01-06T16:44:50.151832486Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:44:50.151837736Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:44:50.151846029Z [err]      await self.app(scope, receive, send)
2026-01-06T16:44:50.151848160Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:44:50.151853502Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:44:50.151858734Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:44:50.151862734Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:44:50.151867554Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:44:50.151871811Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:44:50.152849063Z [err]      ...<7 lines>...
2026-01-06T16:44:50.152851956Z [err]      event = get_active_event()
2026-01-06T16:44:50.152858479Z [err]          (day_of_week, current_time),
2026-01-06T16:44:50.152862063Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:44:50.152864219Z [err]      raise exc
2026-01-06T16:44:50.152866850Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:44:50.152870862Z [err]      cur.execute(
2026-01-06T16:44:50.152875486Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:44:50.152881755Z [err]      ~~~~~~~~~~~^
2026-01-06T16:44:50.152886834Z [err]      await app(scope, receive, sender)
2026-01-06T16:44:50.152892356Z [err]          """
2026-01-06T16:44:50.152898071Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:44:50.152901706Z [err]          ^^^
2026-01-06T16:44:50.152906586Z [err]      response = await f(request)
2026-01-06T16:44:50.152912959Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:44:50.152917953Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:44:50.152922879Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:44:50.152928211Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:44:50.152933046Z [err]      ...<3 lines>...
2026-01-06T16:44:50.152938727Z [err]      )
2026-01-06T16:44:50.152943401Z [err]      ^
2026-01-06T16:44:50.152948422Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:44:50.152953577Z [err]      return await dependant.call(**values)
2026-01-06T16:44:50.152963291Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:44:50.152967715Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:44:50.153532814Z [err]      )
2026-01-06T16:44:50.153542494Z [err]      ^
2026-01-06T16:44:50.153551302Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:44:50.153558743Z [err]      return super().execute(query, vars)
2026-01-06T16:44:50.153565253Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:44:50.153569657Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:44:50.153573553Z [err]  LINE 5:           AND active = 1
2026-01-06T16:44:50.153577562Z [err]                               ^
2026-01-06T16:44:50.153581731Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:44:50.153586485Z [err]  
2026-01-06T16:44:51.142274461Z [err]  2026-01-06 16:44:50.132 UTC [9035] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:44:51.142436435Z [err]  2026-01-06 16:44:50.132 UTC [9035] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:44:51.142452561Z [err]  2026-01-06 16:44:50.132 UTC [9035] STATEMENT:  
2026-01-06T16:44:51.142467474Z [err]  	        SELECT event
2026-01-06T16:44:51.142476518Z [err]  	        FROM event_config
2026-01-06T16:44:51.142513056Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:44:51.142521525Z [err]  	          AND active = 1
2026-01-06T16:44:51.142529183Z [err]  	          AND '16:44' BETWEEN open_time AND close_time
2026-01-06T16:44:51.142536311Z [err]  	        LIMIT 1;
2026-01-06T16:44:51.142543542Z [err]  	        
2026-01-06T16:44:58.992859951Z [inf]  ðŸ“¨ 27634045059: ðŸƒðŸ¼â€â™€ï¸â€âž¡ï¸ Runner
2026-01-06T16:44:59.291409291Z [err]      ^
2026-01-06T16:44:59.291424745Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:44:59.291431096Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:44:59.291437295Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:44:59.291443871Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:44:59.291447675Z [inf]  INFO:     100.64.0.5:14678 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:44:59.291451021Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:44:59.291459008Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:44:59.291459954Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:44:59.291467732Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:44:59.291469418Z [err]  Traceback (most recent call last):
2026-01-06T16:44:59.291476247Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:44:59.291477557Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:44:59.291483388Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:44:59.291486368Z [err]      raise exc
2026-01-06T16:44:59.291490163Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:44:59.291495231Z [err]          self.scope, self.receive, self.send
2026-01-06T16:44:59.291499472Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:44:59.291501556Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:44:59.291505654Z [err]      )
2026-01-06T16:44:59.295671590Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:44:59.295682075Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:44:59.295692372Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:44:59.295701006Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:44:59.295709597Z [err]      raise exc
2026-01-06T16:44:59.295717289Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:44:59.295723355Z [err]      await app(scope, receive, sender)
2026-01-06T16:44:59.295731315Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:44:59.295739075Z [err]      await self.app(scope, receive, send)
2026-01-06T16:44:59.295746537Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:44:59.295754425Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:44:59.295764319Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:44:59.295772695Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:44:59.295781237Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:44:59.295789769Z [err]      await self.app(scope, receive, send)
2026-01-06T16:44:59.295796862Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:44:59.295801909Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:44:59.295806987Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:44:59.295812931Z [err]      raise exc
2026-01-06T16:44:59.295819047Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:44:59.295825423Z [err]      await app(scope, receive, sender)
2026-01-06T16:44:59.295830716Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:44:59.295836003Z [err]      response = await f(request)
2026-01-06T16:44:59.295842150Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:44:59.295847675Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:44:59.295853194Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:44:59.295859077Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:44:59.295864085Z [err]      ...<3 lines>...
2026-01-06T16:44:59.295870326Z [err]      )
2026-01-06T16:44:59.295876142Z [err]      ^
2026-01-06T16:44:59.295881285Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:44:59.295887721Z [err]      return await dependant.call(**values)
2026-01-06T16:44:59.295893663Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:44:59.295899062Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:44:59.295904430Z [err]      event = get_active_event()
2026-01-06T16:44:59.295910737Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:44:59.295916657Z [err]      cur.execute(
2026-01-06T16:44:59.295922859Z [err]      ~~~~~~~~~~~^
2026-01-06T16:44:59.295928012Z [err]          """
2026-01-06T16:44:59.295933402Z [err]          ^^^
2026-01-06T16:44:59.295938626Z [err]      ...<7 lines>...
2026-01-06T16:44:59.295944002Z [err]          (day_of_week, current_time),
2026-01-06T16:44:59.295949520Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:44:59.295954753Z [err]      )
2026-01-06T16:44:59.295959863Z [err]      ^
2026-01-06T16:44:59.295965705Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:44:59.295971040Z [err]      return super().execute(query, vars)
2026-01-06T16:44:59.295976013Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:44:59.295981060Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:44:59.295985815Z [err]  LINE 5:           AND active = 1
2026-01-06T16:44:59.295991016Z [err]                               ^
2026-01-06T16:44:59.295997324Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:44:59.296003058Z [err]  
2026-01-06T16:44:59.726826817Z [err]  2026-01-06 16:44:59.280 UTC [9037] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:44:59.726835988Z [err]  2026-01-06 16:44:59.280 UTC [9037] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:44:59.726843616Z [err]  2026-01-06 16:44:59.280 UTC [9037] STATEMENT:  
2026-01-06T16:44:59.726851530Z [err]  	        SELECT event
2026-01-06T16:44:59.726858586Z [err]  	        FROM event_config
2026-01-06T16:44:59.726865635Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:44:59.726872919Z [err]  	          AND active = 1
2026-01-06T16:44:59.726880557Z [err]  	          AND '16:44' BETWEEN open_time AND close_time
2026-01-06T16:44:59.726890447Z [err]  	        LIMIT 1;
2026-01-06T16:44:59.726900382Z [err]  	        
2026-01-06T16:45:07.163912023Z [inf]  ðŸ“¨ 27825528772: Runner
2026-01-06T16:45:07.347021167Z [inf]  INFO:     100.64.0.3:60178 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:45:07.347021365Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:45:07.347034474Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:45:07.347036656Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:45:07.347050710Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:45:07.347061282Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:45:07.347063789Z [err]  Traceback (most recent call last):
2026-01-06T16:45:07.347069229Z [err]      )
2026-01-06T16:45:07.347072222Z [err]      raise exc
2026-01-06T16:45:07.347078478Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:45:07.347086315Z [err]      ^
2026-01-06T16:45:07.347086745Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:45:07.347096497Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:45:07.347096874Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:45:07.347107472Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:45:07.347112585Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:45:07.347116465Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:45:07.347126856Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:45:07.347181103Z [err]          self.scope, self.receive, self.send
2026-01-06T16:45:07.347188908Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:45:07.347859283Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:45:07.347865073Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:45:07.347869589Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:45:07.347874130Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:45:07.347879292Z [err]      raise exc
2026-01-06T16:45:07.347885036Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:45:07.347889467Z [err]      await app(scope, receive, sender)
2026-01-06T16:45:07.347893667Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:45:07.347897843Z [err]      await self.app(scope, receive, send)
2026-01-06T16:45:07.347902637Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:45:07.347909344Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:45:07.347913349Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:45:07.347917374Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:45:07.347921436Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:45:07.347925603Z [err]      await self.app(scope, receive, send)
2026-01-06T16:45:07.347930253Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:45:07.347934540Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:45:07.347938722Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:45:07.349076145Z [err]      event = get_active_event()
2026-01-06T16:45:07.349084667Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:45:07.349091229Z [err]      cur.execute(
2026-01-06T16:45:07.349097939Z [err]      ~~~~~~~~~~~^
2026-01-06T16:45:07.349102773Z [err]      raise exc
2026-01-06T16:45:07.349104762Z [err]          """
2026-01-06T16:45:07.349111495Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:45:07.349112227Z [err]          ^^^
2026-01-06T16:45:07.349118780Z [err]      ...<7 lines>...
2026-01-06T16:45:07.349118893Z [err]      await app(scope, receive, sender)
2026-01-06T16:45:07.349125006Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:45:07.349127161Z [err]          (day_of_week, current_time),
2026-01-06T16:45:07.349131204Z [err]      response = await f(request)
2026-01-06T16:45:07.349133408Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:45:07.349138193Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:45:07.349143625Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:45:07.349148325Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:45:07.349152858Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:45:07.349158067Z [err]      ...<3 lines>...
2026-01-06T16:45:07.349163229Z [err]      )
2026-01-06T16:45:07.349167898Z [err]      ^
2026-01-06T16:45:07.349174628Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:45:07.349179920Z [err]      return await dependant.call(**values)
2026-01-06T16:45:07.349184232Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:45:07.349188411Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:45:07.350162295Z [err]      )
2026-01-06T16:45:07.350169659Z [err]      ^
2026-01-06T16:45:07.350177019Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:45:07.350183687Z [err]      return super().execute(query, vars)
2026-01-06T16:45:07.350189883Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:45:07.350198946Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:45:07.350206226Z [err]  LINE 5:           AND active = 1
2026-01-06T16:45:07.350216779Z [err]                               ^
2026-01-06T16:45:07.350221151Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:45:07.350228487Z [err]  
2026-01-06T16:45:07.890122995Z [inf]  ðŸ“¨ 27825528772: Runner
2026-01-06T16:45:08.064142313Z [inf]  INFO:     100.64.0.8:45906 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:45:08.064142897Z [err]      ^
2026-01-06T16:45:08.064152297Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:45:08.064157356Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:45:08.064159591Z [err]  Traceback (most recent call last):
2026-01-06T16:45:08.064165191Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:45:08.064168520Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:45:08.064170732Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:45:08.064176219Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:45:08.064178233Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:45:08.064183098Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:45:08.064184859Z [err]          self.scope, self.receive, self.send
2026-01-06T16:45:08.064190961Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:45:08.064191274Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:45:08.064197750Z [err]      )
2026-01-06T16:45:08.064199300Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:45:08.064205350Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:45:08.064210727Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:45:08.064216533Z [err]      raise exc
2026-01-06T16:45:08.064221833Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:45:08.065381941Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:45:08.065392253Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:45:08.065392486Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:45:08.065400028Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:45:08.065400812Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:45:08.065405172Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:45:08.065410061Z [err]      raise exc
2026-01-06T16:45:08.065414940Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:45:08.065419365Z [err]      await app(scope, receive, sender)
2026-01-06T16:45:08.065425041Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:45:08.065428078Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:45:08.065429434Z [err]      await self.app(scope, receive, send)
2026-01-06T16:45:08.065433725Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:45:08.065437897Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:45:08.065444299Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:45:08.065449992Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:45:08.065458133Z [err]      await self.app(scope, receive, send)
2026-01-06T16:45:08.065470585Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:45:08.067222895Z [err]      raise exc
2026-01-06T16:45:08.067231707Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:45:08.067241093Z [err]      await app(scope, receive, sender)
2026-01-06T16:45:08.067248848Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:45:08.067255301Z [err]      response = await f(request)
2026-01-06T16:45:08.067262868Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:45:08.067269617Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:45:08.067277682Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:45:08.067284098Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:45:08.067290546Z [err]      ...<3 lines>...
2026-01-06T16:45:08.067296290Z [err]      )
2026-01-06T16:45:08.067303088Z [err]      ^
2026-01-06T16:45:08.067309998Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:45:08.067317139Z [err]      return await dependant.call(**values)
2026-01-06T16:45:08.067324438Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:45:08.067338970Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:45:08.067345269Z [err]      event = get_active_event()
2026-01-06T16:45:08.067352067Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:45:08.067358078Z [err]      cur.execute(
2026-01-06T16:45:08.067366992Z [err]      ~~~~~~~~~~~^
2026-01-06T16:45:08.067373316Z [err]          """
2026-01-06T16:45:08.067380077Z [err]          ^^^
2026-01-06T16:45:08.067386590Z [err]      ...<7 lines>...
2026-01-06T16:45:08.067394980Z [err]          (day_of_week, current_time),
2026-01-06T16:45:08.067402590Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:45:08.068541677Z [err]      )
2026-01-06T16:45:08.068548967Z [err]      ^
2026-01-06T16:45:08.068553754Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:45:08.068559662Z [err]      return super().execute(query, vars)
2026-01-06T16:45:08.068563602Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:45:08.068568873Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:45:08.068572878Z [err]  LINE 5:           AND active = 1
2026-01-06T16:45:08.068576943Z [err]                               ^
2026-01-06T16:45:08.068581113Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:45:08.068585535Z [err]  
2026-01-06T16:45:08.166316012Z [err]  2026-01-06 16:45:07.338 UTC [9040] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:45:08.166322586Z [err]  2026-01-06 16:45:07.338 UTC [9040] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:45:08.166327257Z [err]  2026-01-06 16:45:07.338 UTC [9040] STATEMENT:  
2026-01-06T16:45:08.166332073Z [err]  	        SELECT event
2026-01-06T16:45:08.166336697Z [err]  	        FROM event_config
2026-01-06T16:45:08.166342430Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:45:08.166348735Z [err]  	          AND active = 1
2026-01-06T16:45:08.166353970Z [err]  	          AND '16:45' BETWEEN open_time AND close_time
2026-01-06T16:45:08.166360628Z [err]  	        LIMIT 1;
2026-01-06T16:45:08.166366176Z [err]  	        
2026-01-06T16:45:08.166372460Z [err]  2026-01-06 16:45:08.040 UTC [9042] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:45:08.166379315Z [err]  2026-01-06 16:45:08.040 UTC [9042] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:45:08.166385097Z [err]  2026-01-06 16:45:08.040 UTC [9042] STATEMENT:  
2026-01-06T16:45:08.166392418Z [err]  	        SELECT event
2026-01-06T16:45:08.166397174Z [err]  	        FROM event_config
2026-01-06T16:45:08.166401865Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:45:08.166406611Z [err]  	          AND active = 1
2026-01-06T16:45:08.166415401Z [err]  	          AND '16:45' BETWEEN open_time AND close_time
2026-01-06T16:45:08.166420047Z [err]  	        LIMIT 1;
2026-01-06T16:45:08.166424398Z [err]  	        
2026-01-06T16:45:08.496008194Z [inf]  ðŸ“¨ 27825528772: Runner
2026-01-06T16:45:08.656358165Z [inf]  INFO:     100.64.0.7:15206 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:45:08.656369414Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:45:08.656382769Z [err]  Traceback (most recent call last):
2026-01-06T16:45:08.656390778Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:45:08.656397751Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:45:08.656406035Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:45:08.656413571Z [err]          self.scope, self.receive, self.send
2026-01-06T16:45:08.656420598Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:45:08.656425934Z [err]      )
2026-01-06T16:45:08.656433286Z [err]      ^
2026-01-06T16:45:08.656437090Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:45:08.656441299Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:45:08.656444995Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:45:08.656450047Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:45:08.656454127Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:45:08.656457650Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:45:08.656462564Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:45:08.656466558Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:45:08.656470460Z [err]      raise exc
2026-01-06T16:45:08.656473912Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:45:08.657895605Z [err]      await self.app(scope, receive, send)
2026-01-06T16:45:08.657898307Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:45:08.657907647Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:45:08.657909021Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:45:08.657915296Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:45:08.657918390Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:45:08.657923027Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:45:08.657927301Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:45:08.657929449Z [err]      raise exc
2026-01-06T16:45:08.657933591Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:45:08.657937507Z [err]      await app(scope, receive, sender)
2026-01-06T16:45:08.657940941Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:45:08.657944592Z [err]      await self.app(scope, receive, send)
2026-01-06T16:45:08.657948472Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:45:08.657951892Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:45:08.657955504Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:45:08.657959267Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:45:08.657963129Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:45:08.659442513Z [err]      raise exc
2026-01-06T16:45:08.659448147Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:45:08.659452128Z [err]      cur.execute(
2026-01-06T16:45:08.659453267Z [err]      await app(scope, receive, sender)
2026-01-06T16:45:08.659458928Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:45:08.659462391Z [err]      ~~~~~~~~~~~^
2026-01-06T16:45:08.659463919Z [err]      response = await f(request)
2026-01-06T16:45:08.659468739Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:45:08.659469557Z [err]          """
2026-01-06T16:45:08.659474042Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:45:08.659475455Z [err]          ^^^
2026-01-06T16:45:08.659479523Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:45:08.659481338Z [err]      ...<7 lines>...
2026-01-06T16:45:08.659485172Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:45:08.659488035Z [err]          (day_of_week, current_time),
2026-01-06T16:45:08.659490594Z [err]      ...<3 lines>...
2026-01-06T16:45:08.659493376Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:45:08.659496075Z [err]      )
2026-01-06T16:45:08.659499789Z [err]      ^
2026-01-06T16:45:08.659503675Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:45:08.659508032Z [err]      return await dependant.call(**values)
2026-01-06T16:45:08.659511912Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:45:08.659515500Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:45:08.659519147Z [err]      event = get_active_event()
2026-01-06T16:45:08.659523000Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:45:08.660820173Z [err]      )
2026-01-06T16:45:08.660827261Z [err]      ^
2026-01-06T16:45:08.660831273Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:45:08.660835387Z [err]      return super().execute(query, vars)
2026-01-06T16:45:08.660839735Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:45:08.660843614Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:45:08.660847307Z [err]  LINE 5:           AND active = 1
2026-01-06T16:45:08.660850895Z [err]                               ^
2026-01-06T16:45:08.660854799Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:45:08.660860050Z [err]  
2026-01-06T16:45:09.200340443Z [err]  2026-01-06 16:45:08.633 UTC [9044] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:45:09.200347556Z [err]  2026-01-06 16:45:08.633 UTC [9044] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:45:09.200354317Z [err]  2026-01-06 16:45:08.633 UTC [9044] STATEMENT:  
2026-01-06T16:45:09.200362238Z [err]  	        SELECT event
2026-01-06T16:45:09.200371710Z [err]  	        FROM event_config
2026-01-06T16:45:09.200378598Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:45:09.200385119Z [err]  	          AND active = 1
2026-01-06T16:45:09.200392885Z [err]  	          AND '16:45' BETWEEN open_time AND close_time
2026-01-06T16:45:09.200399475Z [err]  	        LIMIT 1;
2026-01-06T16:45:09.200408466Z [err]  	        
2026-01-06T16:45:09.742101808Z [inf]  ðŸ“¨ 27825528772: Runner
2026-01-06T16:45:10.031123385Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:45:10.031126806Z [inf]  INFO:     100.64.0.8:45926 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:45:10.031133616Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:45:10.031141048Z [err]  Traceback (most recent call last):
2026-01-06T16:45:10.031148532Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:45:10.031153888Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:45:10.031157799Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:45:10.031161961Z [err]          self.scope, self.receive, self.send
2026-01-06T16:45:10.031165751Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:45:10.031169560Z [err]      )
2026-01-06T16:45:10.031173793Z [err]      ^
2026-01-06T16:45:10.031177722Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:45:10.031181728Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:45:10.031186878Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:45:10.031191395Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:45:10.031196273Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:45:10.031200157Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:45:10.031204252Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:45:10.031209388Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:45:10.031216014Z [err]      raise exc
2026-01-06T16:45:10.032002003Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:45:10.032009016Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:45:10.032016395Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:45:10.032023487Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:45:10.032033189Z [err]      raise exc
2026-01-06T16:45:10.032040560Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:45:10.032048448Z [err]      await app(scope, receive, sender)
2026-01-06T16:45:10.032054462Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:45:10.032061962Z [err]      await self.app(scope, receive, send)
2026-01-06T16:45:10.032069531Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:45:10.032076443Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:45:10.032095120Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:45:10.032102712Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:45:10.032110424Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:45:10.032116817Z [err]      await self.app(scope, receive, send)
2026-01-06T16:45:10.032122776Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:45:10.032130162Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:45:10.032137250Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:45:10.034112841Z [err]      raise exc
2026-01-06T16:45:10.034120960Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:45:10.034127148Z [err]      await app(scope, receive, sender)
2026-01-06T16:45:10.034128510Z [err]          (day_of_week, current_time),
2026-01-06T16:45:10.034133892Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:45:10.034140019Z [err]      response = await f(request)
2026-01-06T16:45:10.034144458Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:45:10.034147874Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:45:10.034151567Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:45:10.034155674Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:45:10.034162180Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:45:10.034169704Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:45:10.034172175Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:45:10.034180746Z [err]      ...<3 lines>...
2026-01-06T16:45:10.034186273Z [err]      event = get_active_event()
2026-01-06T16:45:10.034188017Z [err]      )
2026-01-06T16:45:10.034196173Z [err]      ^
2026-01-06T16:45:10.034201797Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:45:10.034205546Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:45:10.034214776Z [err]      return await dependant.call(**values)
2026-01-06T16:45:10.034216454Z [err]      cur.execute(
2026-01-06T16:45:10.034225788Z [err]      ~~~~~~~~~~~^
2026-01-06T16:45:10.034233562Z [err]          """
2026-01-06T16:45:10.034241462Z [err]          ^^^
2026-01-06T16:45:10.034248416Z [err]      ...<7 lines>...
2026-01-06T16:45:10.035375916Z [err]      )
2026-01-06T16:45:10.035386844Z [err]      ^
2026-01-06T16:45:10.035394950Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:45:10.035403070Z [err]      return super().execute(query, vars)
2026-01-06T16:45:10.035410574Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:45:10.035419107Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:45:10.035427437Z [err]  LINE 5:           AND active = 1
2026-01-06T16:45:10.035435528Z [err]                               ^
2026-01-06T16:45:10.035444457Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:45:10.035452993Z [err]  
2026-01-06T16:45:10.227908899Z [err]  2026-01-06 16:45:10.015 UTC [9046] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:45:10.227916101Z [err]  2026-01-06 16:45:10.015 UTC [9046] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:45:10.227923255Z [err]  2026-01-06 16:45:10.015 UTC [9046] STATEMENT:  
2026-01-06T16:45:10.227930083Z [err]  	        SELECT event
2026-01-06T16:45:10.227937124Z [err]  	        FROM event_config
2026-01-06T16:45:10.227943678Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:45:10.227951191Z [err]  	          AND active = 1
2026-01-06T16:45:10.227958032Z [err]  	          AND '16:45' BETWEEN open_time AND close_time
2026-01-06T16:45:10.227965604Z [err]  	        LIMIT 1;
2026-01-06T16:45:10.227972771Z [err]  	        
2026-01-06T16:45:30.040111112Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:45:30.040111419Z [err]      await self.app(scope, receive, send)
2026-01-06T16:45:30.040121847Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:45:30.040125469Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:45:30.040126054Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:45:30.040137058Z [err]      raise exc
2026-01-06T16:45:30.040143735Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:45:30.040145660Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:45:30.040151458Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:45:30.040156068Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:45:30.040162524Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:45:30.040166549Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:45:30.040178940Z [err]      await self.app(scope, receive, send)
2026-01-06T16:45:30.040179360Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:45:30.040194154Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:45:30.040194887Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:45:30.040206268Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:45:30.040214776Z [err]      raise exc
2026-01-06T16:45:30.040223157Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:45:30.040231825Z [err]      await app(scope, receive, sender)
2026-01-06T16:45:30.040240978Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:45:30.040312288Z [inf]  ðŸ“¨ 27825528772: Runner
2026-01-06T16:45:30.040321337Z [inf]  INFO:     100.64.0.6:19072 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:45:30.040327815Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:45:30.040334512Z [err]  Traceback (most recent call last):
2026-01-06T16:45:30.040343032Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:45:30.040349821Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:45:30.040356694Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:45:30.040364058Z [err]          self.scope, self.receive, self.send
2026-01-06T16:45:30.040370768Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:45:30.040377134Z [err]      )
2026-01-06T16:45:30.040383466Z [err]      ^
2026-01-06T16:45:30.040390568Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:45:30.040397158Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:45:30.040404072Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:45:30.040410940Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:45:30.040417430Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:45:30.040425108Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:45:30.040431760Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:45:30.041355132Z [err]      raise exc
2026-01-06T16:45:30.041362625Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:45:30.041369280Z [err]      await app(scope, receive, sender)
2026-01-06T16:45:30.041376379Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:45:30.041383086Z [err]      response = await f(request)
2026-01-06T16:45:30.041392156Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:45:30.041395185Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:45:30.041398544Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:45:30.041403525Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:45:30.041406759Z [err]      event = get_active_event()
2026-01-06T16:45:30.041406912Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:45:30.041415238Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:45:30.041416178Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:45:30.041423964Z [err]      cur.execute(
2026-01-06T16:45:30.041427993Z [err]      return await dependant.call(**values)
2026-01-06T16:45:30.041429473Z [err]      ...<3 lines>...
2026-01-06T16:45:30.041434792Z [err]      ...<7 lines>...
2026-01-06T16:45:30.041441673Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:45:30.041448536Z [err]          (day_of_week, current_time),
2026-01-06T16:45:30.041452227Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:45:30.041455544Z [err]      ~~~~~~~~~~~^
2026-01-06T16:45:30.041485327Z [err]          """
2026-01-06T16:45:30.041488764Z [err]      )
2026-01-06T16:45:30.041501206Z [err]          ^^^
2026-01-06T16:45:30.041503140Z [err]      ^
2026-01-06T16:45:30.042079199Z [err]      )
2026-01-06T16:45:30.042085896Z [err]      ^
2026-01-06T16:45:30.042090570Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:45:30.042095349Z [err]      return super().execute(query, vars)
2026-01-06T16:45:30.042101470Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:45:30.042106084Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:45:30.042110387Z [err]  LINE 5:           AND active = 1
2026-01-06T16:45:30.042114442Z [err]                               ^
2026-01-06T16:45:30.042120301Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:45:30.042124379Z [err]  
2026-01-06T16:45:30.507106248Z [err]  	          AND active = 1
2026-01-06T16:45:30.507122180Z [err]  	          AND '16:45' BETWEEN open_time AND close_time
2026-01-06T16:45:30.507570207Z [err]  2026-01-06 16:45:29.866 UTC [9049] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:45:30.507579275Z [err]  2026-01-06 16:45:29.866 UTC [9049] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:45:30.507586932Z [err]  2026-01-06 16:45:29.866 UTC [9049] STATEMENT:  
2026-01-06T16:45:30.507595539Z [err]  	        SELECT event
2026-01-06T16:45:30.507607682Z [err]  	        FROM event_config
2026-01-06T16:45:30.507617555Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:45:30.507643069Z [err]  	        LIMIT 1;
2026-01-06T16:45:30.507651000Z [err]  	        
2026-01-06T16:46:40.055498859Z [inf]  ðŸ“¨ 27832844884: Hi
2026-01-06T16:46:40.055509804Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T16:46:40.055517154Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T16:46:40.055524107Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T16:46:40.055531301Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T16:46:40.055538892Z [inf]  ðŸ“¤ Status: 200
2026-01-06T16:46:40.055545256Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27832844884","wa_id":"27832844884"}],"messages":[{"id":"wamid.HBgLMjc4MzI4NDQ4ODQVAgARGBI3RTIxMDYwNUVFRUI3OTkwQzcA"}]}
2026-01-06T16:46:40.055552846Z [inf]  INFO:     100.64.0.6:11262 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:46:40.055560534Z [inf]  INFO:     100.64.0.2:14176 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:46:40.055568061Z [inf]  INFO:     100.64.0.8:31802 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:46:40.055574361Z [inf]  INFO:     100.64.0.3:10834 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:47:00.100809107Z [inf]  ðŸ“¨ 27832844884: Runner
2026-01-06T16:47:00.100816265Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T16:47:00.100823181Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T16:47:00.100835275Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T16:47:00.100842356Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T16:47:00.100849829Z [inf]  ðŸ“¤ Status: 200
2026-01-06T16:47:00.100857354Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27832844884","wa_id":"27832844884"}],"messages":[{"id":"wamid.HBgLMjc4MzI4NDQ4ODQVAgARGBIxRTFFQTY0RTY2QjM1N0Y4RjIA"}]}
2026-01-06T16:47:00.100863761Z [inf]  INFO:     100.64.0.7:51498 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:47:00.100872707Z [inf]  INFO:     100.64.0.6:27362 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:47:00.100879572Z [inf]  INFO:     100.64.0.8:31600 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:47:01.672805608Z [inf]  ðŸ“¨ 27825528772: Runner
2026-01-06T16:47:01.939592137Z [inf]  INFO:     100.64.0.6:58974 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:47:01.942594866Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:47:01.942599348Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:47:01.942601426Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:47:01.942603879Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:47:01.942611339Z [err]  Traceback (most recent call last):
2026-01-06T16:47:01.942613965Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:47:01.942618749Z [err]      ^
2026-01-06T16:47:01.942623727Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:47:01.942625551Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:47:01.942626515Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:47:01.942628123Z [err]      raise exc
2026-01-06T16:47:01.942633255Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:47:01.942633699Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:47:01.942636708Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:47:01.942640891Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:47:01.942643585Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:47:01.942647733Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:47:01.942653278Z [err]          self.scope, self.receive, self.send
2026-01-06T16:47:01.942659716Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:47:01.942664309Z [err]      )
2026-01-06T16:47:01.944000010Z [err]      await self.app(scope, receive, send)
2026-01-06T16:47:01.944003283Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:47:01.944008043Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:47:01.944014828Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:47:01.944016040Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:47:01.944023028Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:47:01.944023673Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:47:01.944030881Z [err]      raise exc
2026-01-06T16:47:01.944034707Z [err]      raise exc
2026-01-06T16:47:01.944038364Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:47:01.944044825Z [err]      await app(scope, receive, sender)
2026-01-06T16:47:01.944051561Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:47:01.944059696Z [err]      await self.app(scope, receive, send)
2026-01-06T16:47:01.944066411Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:47:01.944072996Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:47:01.944079674Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:47:01.944093229Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:47:01.944099433Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:47:01.945011647Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:47:01.945017521Z [err]      await app(scope, receive, sender)
2026-01-06T16:47:01.945021573Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:47:01.945025820Z [err]      response = await f(request)
2026-01-06T16:47:01.945030457Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:47:01.945031065Z [err]      ~~~~~~~~~~~^
2026-01-06T16:47:01.945034984Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:47:01.945039431Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:47:01.945041200Z [err]          """
2026-01-06T16:47:01.945044397Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:47:01.945049295Z [err]      ...<3 lines>...
2026-01-06T16:47:01.945049929Z [err]          ^^^
2026-01-06T16:47:01.945054148Z [err]      )
2026-01-06T16:47:01.945058611Z [err]      ...<7 lines>...
2026-01-06T16:47:01.945059404Z [err]      ^
2026-01-06T16:47:01.945064328Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:47:01.945067713Z [err]          (day_of_week, current_time),
2026-01-06T16:47:01.945069144Z [err]      return await dependant.call(**values)
2026-01-06T16:47:01.945074423Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:47:01.945076422Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:47:01.945080721Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:47:01.945084991Z [err]      event = get_active_event()
2026-01-06T16:47:01.945088710Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:47:01.945093671Z [err]      cur.execute(
2026-01-06T16:47:01.946209093Z [err]      )
2026-01-06T16:47:01.946213100Z [err]      ^
2026-01-06T16:47:01.946216800Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:47:01.946220770Z [err]      return super().execute(query, vars)
2026-01-06T16:47:01.946224656Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:47:01.946228577Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:47:01.946232373Z [err]  LINE 5:           AND active = 1
2026-01-06T16:47:01.946236493Z [err]                               ^
2026-01-06T16:47:01.946240447Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:47:01.946245594Z [err]  
2026-01-06T16:47:05.356010349Z [err]  2026-01-06 16:47:01.935 UTC [9057] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:47:05.356018118Z [err]  2026-01-06 16:47:01.935 UTC [9057] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:47:05.356025013Z [err]  2026-01-06 16:47:01.935 UTC [9057] STATEMENT:  
2026-01-06T16:47:05.356032041Z [err]  	        SELECT event
2026-01-06T16:47:05.356039493Z [err]  	        FROM event_config
2026-01-06T16:47:05.356047254Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:47:05.356055321Z [err]  	          AND active = 1
2026-01-06T16:47:05.356063165Z [err]  	          AND '16:47' BETWEEN open_time AND close_time
2026-01-06T16:47:05.356069446Z [err]  	        LIMIT 1;
2026-01-06T16:47:05.356130177Z [err]  	        
2026-01-06T16:47:46.681484269Z [err]  2026-01-06 16:47:46.167 UTC [76] LOG:  checkpoint starting: time
2026-01-06T16:47:47.618839216Z [err]  2026-01-06 16:47:47.344 UTC [76] LOG:  checkpoint complete: wrote 12 buffers (0.1%); 0 WAL file(s) added, 0 removed, 0 recycled; write=1.112 s, sync=0.020 s, total=1.177 s; sync files=9, longest=0.012 s, average=0.003 s; distance=25 kB, estimate=25 kB; lsn=0/1A1DAF0, redo lsn=0/1A1DA98
2026-01-06T16:47:51.984918595Z [inf]  ðŸ“¨ 27826044441: Hi
2026-01-06T16:47:51.984928122Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T16:47:51.984935179Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T16:47:51.984943546Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T16:47:51.984952796Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T16:47:51.984961199Z [inf]  ðŸ“¤ Status: 200
2026-01-06T16:47:51.984969831Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27826044441","wa_id":"27826044441"}],"messages":[{"id":"wamid.HBgLMjc4MjYwNDQ0NDEVAgARGBI2QjRCOTVDNEI4MDdGRkVDMzAA"}]}
2026-01-06T16:47:51.984979190Z [inf]  INFO:     100.64.0.9:19768 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:47:51.984988722Z [inf]  INFO:     100.64.0.5:28526 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:47:51.984998219Z [inf]  INFO:     100.64.0.7:34416 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:48:11.980513641Z [inf]  ðŸ“¨ 27826044441: Runner
2026-01-06T16:48:11.980518062Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T16:48:11.980521810Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T16:48:11.980525488Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T16:48:11.980529031Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T16:48:11.980532462Z [inf]  ðŸ“¤ Status: 200
2026-01-06T16:48:11.980537875Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27826044441","wa_id":"27826044441"}],"messages":[{"id":"wamid.HBgLMjc4MjYwNDQ0NDEVAgARGBJCRTVFQ0E0QTQ3NzAzN0QwRTMA"}]}
2026-01-06T16:48:11.980541316Z [inf]  INFO:     100.64.0.2:22538 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:48:11.980544628Z [inf]  INFO:     100.64.0.8:19420 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:48:11.980548871Z [inf]  INFO:     100.64.0.7:52800 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:48:14.916472060Z [inf]  ðŸ“¨ 27832844884: 8km
2026-01-06T16:48:15.196599436Z [inf]  INFO:     100.64.0.7:52800 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:48:15.196611004Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:48:15.196617015Z [err]  Traceback (most recent call last):
2026-01-06T16:48:15.196622015Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:48:15.196626708Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:48:15.196631370Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:15.196636834Z [err]          self.scope, self.receive, self.send
2026-01-06T16:48:15.196641072Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:15.196645504Z [err]      )
2026-01-06T16:48:15.196650548Z [err]      ^
2026-01-06T16:48:15.196655446Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:48:15.196661068Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:48:15.196667122Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:15.196671473Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:48:15.196675652Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:48:15.196683406Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:48:15.196688107Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:48:15.196693100Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:48:15.196697428Z [err]      raise exc
2026-01-06T16:48:15.196702341Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:48:15.197781300Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:48:15.197787703Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:48:15.197793234Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:48:15.197799217Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:48:15.197804060Z [err]      raise exc
2026-01-06T16:48:15.197809334Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:48:15.197815128Z [err]      await app(scope, receive, sender)
2026-01-06T16:48:15.197819907Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:48:15.197824133Z [err]      await self.app(scope, receive, send)
2026-01-06T16:48:15.197858270Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:48:15.197865714Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:48:15.197872298Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:48:15.197880980Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:48:15.197887982Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:48:15.197896128Z [err]      await self.app(scope, receive, send)
2026-01-06T16:48:15.197904744Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:48:15.197911750Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:48:15.197918615Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:48:15.198828063Z [err]          """
2026-01-06T16:48:15.198834222Z [err]          ^^^
2026-01-06T16:48:15.198843484Z [err]      ...<7 lines>...
2026-01-06T16:48:15.198847260Z [err]      return await dependant.call(**values)
2026-01-06T16:48:15.198855544Z [err]          (day_of_week, current_time),
2026-01-06T16:48:15.198857108Z [err]      raise exc
2026-01-06T16:48:15.198860454Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:15.198866139Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:15.198870225Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:48:15.198872737Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:48:15.198876505Z [err]      event = get_active_event()
2026-01-06T16:48:15.198882704Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:48:15.198883158Z [err]      await app(scope, receive, sender)
2026-01-06T16:48:15.198887538Z [err]      cur.execute(
2026-01-06T16:48:15.198891284Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:48:15.198893372Z [err]      ~~~~~~~~~~~^
2026-01-06T16:48:15.198896788Z [err]      response = await f(request)
2026-01-06T16:48:15.198902063Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:48:15.198907032Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:48:15.198911908Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:48:15.198916571Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:15.198920698Z [err]      ...<3 lines>...
2026-01-06T16:48:15.198924740Z [err]      )
2026-01-06T16:48:15.198930255Z [err]      ^
2026-01-06T16:48:15.198934602Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:48:15.199645567Z [err]      )
2026-01-06T16:48:15.199652725Z [err]      ^
2026-01-06T16:48:15.199659864Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:48:15.199664650Z [err]      return super().execute(query, vars)
2026-01-06T16:48:15.199670539Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:48:15.199674823Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:48:15.199679948Z [err]  LINE 5:           AND active = 1
2026-01-06T16:48:15.199684660Z [err]                               ^
2026-01-06T16:48:15.199689369Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:48:15.199694328Z [err]  
2026-01-06T16:48:16.070410195Z [inf]  ðŸ“¨ 27832844884: 8km
2026-01-06T16:48:16.201033848Z [inf]  INFO:     100.64.0.7:52802 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:48:16.202608453Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:48:16.202618704Z [err]  Traceback (most recent call last):
2026-01-06T16:48:16.202626616Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:48:16.202633517Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:48:16.202638147Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:16.202644694Z [err]          self.scope, self.receive, self.send
2026-01-06T16:48:16.202648803Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:16.202652742Z [err]      )
2026-01-06T16:48:16.202658052Z [err]      ^
2026-01-06T16:48:16.202662481Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:48:16.202666572Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:48:16.202670378Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:16.202674385Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:48:16.202678488Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:48:16.202682406Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:48:16.202686003Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:48:16.202690391Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:48:16.202695048Z [err]      raise exc
2026-01-06T16:48:16.202698893Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:48:16.202702926Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:48:16.204034984Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:48:16.204037218Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:48:16.204045530Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:48:16.204045913Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:48:16.204051478Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:48:16.204053836Z [err]      raise exc
2026-01-06T16:48:16.204059385Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:48:16.204062986Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:48:16.204065869Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:48:16.204070840Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:48:16.204073120Z [err]      raise exc
2026-01-06T16:48:16.204076172Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:48:16.204081118Z [err]      await self.app(scope, receive, send)
2026-01-06T16:48:16.204083266Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:48:16.204086331Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:48:16.204090897Z [err]      await app(scope, receive, sender)
2026-01-06T16:48:16.204097586Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:48:16.204105936Z [err]      await self.app(scope, receive, send)
2026-01-06T16:48:16.205386426Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:48:16.205390938Z [err]      ^
2026-01-06T16:48:16.205401167Z [err]      await app(scope, receive, sender)
2026-01-06T16:48:16.205404486Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:48:16.205412392Z [err]      return await dependant.call(**values)
2026-01-06T16:48:16.205419451Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:16.205427624Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:48:16.205438892Z [err]      event = get_active_event()
2026-01-06T16:48:16.205450025Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:48:16.205453783Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:48:16.205459509Z [err]      cur.execute(
2026-01-06T16:48:16.205459576Z [err]      response = await f(request)
2026-01-06T16:48:16.205466134Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:48:16.205468752Z [err]      ~~~~~~~~~~~^
2026-01-06T16:48:16.205472466Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:48:16.205479267Z [err]          """
2026-01-06T16:48:16.205482050Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:48:16.205489301Z [err]          ^^^
2026-01-06T16:48:16.205489784Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:16.205498568Z [err]      ...<3 lines>...
2026-01-06T16:48:16.205500983Z [err]      ...<7 lines>...
2026-01-06T16:48:16.205509301Z [err]      )
2026-01-06T16:48:16.205511464Z [err]          (day_of_week, current_time),
2026-01-06T16:48:16.205518515Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:16.206121022Z [err]      )
2026-01-06T16:48:16.206131160Z [err]      ^
2026-01-06T16:48:16.206136780Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:48:16.206141338Z [err]      return super().execute(query, vars)
2026-01-06T16:48:16.206146781Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:48:16.206151828Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:48:16.206156781Z [err]  LINE 5:           AND active = 1
2026-01-06T16:48:16.206161988Z [err]                               ^
2026-01-06T16:48:16.206166651Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:48:16.206171574Z [err]  
2026-01-06T16:48:16.968951064Z [inf]  ðŸ“¨ 27832844884: 8km
2026-01-06T16:48:17.105265417Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:48:17.105273205Z [inf]  INFO:     100.64.0.9:33878 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:48:17.105275130Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:48:17.105281067Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:48:17.105281811Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:48:17.105287370Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:48:17.105289060Z [err]  Traceback (most recent call last):
2026-01-06T16:48:17.105293668Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:48:17.105295296Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:48:17.105301492Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:48:17.105301548Z [err]      raise exc
2026-01-06T16:48:17.105308151Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:48:17.105308209Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:17.105313484Z [err]          self.scope, self.receive, self.send
2026-01-06T16:48:17.105318270Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:17.105322511Z [err]      )
2026-01-06T16:48:17.105326955Z [err]      ^
2026-01-06T16:48:17.105331588Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:48:17.105337012Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:48:17.105341474Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:17.106514323Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:48:17.106516224Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:48:17.106523965Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:48:17.106526700Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:48:17.106529848Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:48:17.106536322Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:48:17.106537623Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:48:17.106545288Z [err]      raise exc
2026-01-06T16:48:17.106548245Z [err]      await self.app(scope, receive, send)
2026-01-06T16:48:17.106553584Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:48:17.106558433Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:48:17.106560100Z [err]      await app(scope, receive, sender)
2026-01-06T16:48:17.106565131Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:48:17.106568064Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:48:17.106570813Z [err]      await self.app(scope, receive, send)
2026-01-06T16:48:17.106575338Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:48:17.106577039Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:48:17.106581491Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:48:17.107766772Z [err]      raise exc
2026-01-06T16:48:17.107767518Z [err]      )
2026-01-06T16:48:17.107767940Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:17.107776103Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:48:17.107777916Z [err]      ^
2026-01-06T16:48:17.107779629Z [err]      event = get_active_event()
2026-01-06T16:48:17.107785093Z [err]      await app(scope, receive, sender)
2026-01-06T16:48:17.107787962Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:48:17.107789177Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:48:17.107793716Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:48:17.107797700Z [err]      return await dependant.call(**values)
2026-01-06T16:48:17.107797746Z [err]      cur.execute(
2026-01-06T16:48:17.107800323Z [err]      response = await f(request)
2026-01-06T16:48:17.107806129Z [err]      ~~~~~~~~~~~^
2026-01-06T16:48:17.107806876Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:48:17.107807864Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:17.107812944Z [err]          """
2026-01-06T16:48:17.107813045Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:48:17.107815465Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:48:17.107819202Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:48:17.107819460Z [err]          ^^^
2026-01-06T16:48:17.107824796Z [err]      ...<7 lines>...
2026-01-06T16:48:17.107826723Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:17.107830550Z [err]          (day_of_week, current_time),
2026-01-06T16:48:17.107833188Z [err]      ...<3 lines>...
2026-01-06T16:48:17.108586283Z [err]      )
2026-01-06T16:48:17.108592449Z [err]      ^
2026-01-06T16:48:17.108596426Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:48:17.108600489Z [err]      return super().execute(query, vars)
2026-01-06T16:48:17.108604298Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:48:17.108608375Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:48:17.108612035Z [err]  LINE 5:           AND active = 1
2026-01-06T16:48:17.108616472Z [err]                               ^
2026-01-06T16:48:17.108620340Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:48:17.108624911Z [err]  
2026-01-06T16:48:17.463162996Z [err]  2026-01-06 16:48:15.184 UTC [9065] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:48:17.463176338Z [err]  2026-01-06 16:48:15.184 UTC [9065] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:48:17.463184061Z [err]  2026-01-06 16:48:15.184 UTC [9065] STATEMENT:  
2026-01-06T16:48:17.463191321Z [err]  	        SELECT event
2026-01-06T16:48:17.463194717Z [err]  2026-01-06 16:48:17.096 UTC [9069] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:48:17.463200275Z [err]  	        FROM event_config
2026-01-06T16:48:17.463207316Z [err]  2026-01-06 16:48:17.096 UTC [9069] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:48:17.463209643Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:48:17.463216210Z [err]  	          AND active = 1
2026-01-06T16:48:17.463222758Z [err]  	          AND '16:48' BETWEEN open_time AND close_time
2026-01-06T16:48:17.463229358Z [err]  	        LIMIT 1;
2026-01-06T16:48:17.463237970Z [err]  	        
2026-01-06T16:48:17.463265603Z [err]  2026-01-06 16:48:16.194 UTC [9067] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:48:17.463272244Z [err]  2026-01-06 16:48:16.194 UTC [9067] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:48:17.463278780Z [err]  2026-01-06 16:48:16.194 UTC [9067] STATEMENT:  
2026-01-06T16:48:17.463284582Z [err]  	        SELECT event
2026-01-06T16:48:17.463291218Z [err]  	        FROM event_config
2026-01-06T16:48:17.463312142Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:48:17.463320104Z [err]  	          AND active = 1
2026-01-06T16:48:17.463327919Z [err]  	          AND '16:48' BETWEEN open_time AND close_time
2026-01-06T16:48:17.463334370Z [err]  	        LIMIT 1;
2026-01-06T16:48:17.463340973Z [err]  	        
2026-01-06T16:48:17.465839306Z [err]  2026-01-06 16:48:17.096 UTC [9069] STATEMENT:  
2026-01-06T16:48:17.465859776Z [err]  	        SELECT event
2026-01-06T16:48:17.466360670Z [err]  	        FROM event_config
2026-01-06T16:48:17.466371102Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:48:17.466378232Z [err]  	          AND active = 1
2026-01-06T16:48:17.466385985Z [err]  	          AND '16:48' BETWEEN open_time AND close_time
2026-01-06T16:48:17.466395404Z [err]  	        LIMIT 1;
2026-01-06T16:48:17.466408271Z [err]  	        
2026-01-06T16:48:18.826221480Z [inf]  ðŸ“¨ 27832844884: 8km
2026-01-06T16:48:19.095861799Z [inf]  INFO:     100.64.0.7:16676 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:48:19.095866217Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:48:19.095870520Z [err]  Traceback (most recent call last):
2026-01-06T16:48:19.095875316Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:48:19.095879795Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:48:19.095884482Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:19.095888377Z [err]          self.scope, self.receive, self.send
2026-01-06T16:48:19.095893177Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:19.095897626Z [err]      )
2026-01-06T16:48:19.095901497Z [err]      ^
2026-01-06T16:48:19.095905379Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:48:19.095910524Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:48:19.095915272Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:19.095918954Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:48:19.095922663Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:48:19.095926386Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:48:19.095930058Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:48:19.095934341Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:48:19.095940017Z [err]      raise exc
2026-01-06T16:48:19.095945060Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:48:19.096757064Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:48:19.096757305Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:48:19.096766742Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:48:19.096768192Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:48:19.096772619Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:48:19.096779622Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:48:19.096785886Z [err]      raise exc
2026-01-06T16:48:19.096806583Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:48:19.096812997Z [err]      await app(scope, receive, sender)
2026-01-06T16:48:19.096818018Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:48:19.096823392Z [err]      await self.app(scope, receive, send)
2026-01-06T16:48:19.096828854Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:48:19.096835536Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:48:19.096840456Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:48:19.096846739Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:48:19.096852332Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:48:19.096857807Z [err]      await self.app(scope, receive, send)
2026-01-06T16:48:19.096863542Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:48:19.098465784Z [err]      raise exc
2026-01-06T16:48:19.098466216Z [err]      ~~~~~~~~~~~^
2026-01-06T16:48:19.098477424Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:48:19.098479594Z [err]          """
2026-01-06T16:48:19.098485614Z [err]      await app(scope, receive, sender)
2026-01-06T16:48:19.098490555Z [err]          ^^^
2026-01-06T16:48:19.098494355Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:48:19.098500403Z [err]      ...<7 lines>...
2026-01-06T16:48:19.098512126Z [err]      response = await f(request)
2026-01-06T16:48:19.098518254Z [err]          (day_of_week, current_time),
2026-01-06T16:48:19.098521105Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:48:19.098524696Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:19.098529414Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:48:19.098536369Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:48:19.098543123Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:19.098550099Z [err]      ...<3 lines>...
2026-01-06T16:48:19.098556676Z [err]      )
2026-01-06T16:48:19.098563310Z [err]      ^
2026-01-06T16:48:19.098570075Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:48:19.098576604Z [err]      return await dependant.call(**values)
2026-01-06T16:48:19.098583320Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:19.098593832Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:48:19.098600466Z [err]      event = get_active_event()
2026-01-06T16:48:19.098607199Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:48:19.098613807Z [err]      cur.execute(
2026-01-06T16:48:19.099326152Z [err]      )
2026-01-06T16:48:19.099338496Z [err]      ^
2026-01-06T16:48:19.099347824Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:48:19.099354969Z [err]      return super().execute(query, vars)
2026-01-06T16:48:19.099361319Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:48:19.099367512Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:48:19.099374178Z [err]  LINE 5:           AND active = 1
2026-01-06T16:48:19.099380742Z [err]                               ^
2026-01-06T16:48:19.099387318Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:48:19.099395018Z [err]  
2026-01-06T16:48:19.099402030Z [inf]  ðŸ“¨ 27826044441: 8km
2026-01-06T16:48:19.203949660Z [err]  2026-01-06 16:48:19.088 UTC [9071] STATEMENT:  
2026-01-06T16:48:19.203966216Z [err]  	        SELECT event
2026-01-06T16:48:19.203976468Z [err]  	        FROM event_config
2026-01-06T16:48:19.203984863Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:48:19.203993257Z [err]  	          AND active = 1
2026-01-06T16:48:19.204003749Z [err]  	          AND '16:48' BETWEEN open_time AND close_time
2026-01-06T16:48:19.204015493Z [err]  	        LIMIT 1;
2026-01-06T16:48:19.204023281Z [err]  	        
2026-01-06T16:48:19.204193663Z [err]  2026-01-06 16:48:19.088 UTC [9071] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:48:19.204205689Z [err]  2026-01-06 16:48:19.088 UTC [9071] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:48:19.234762456Z [inf]  INFO:     100.64.0.7:16692 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:48:19.234765143Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:48:19.234769369Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:48:19.234774506Z [err]  Traceback (most recent call last):
2026-01-06T16:48:19.234778595Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:48:19.234782529Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:48:19.234786366Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:19.234790168Z [err]          self.scope, self.receive, self.send
2026-01-06T16:48:19.234793873Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:19.234797951Z [err]      )
2026-01-06T16:48:19.234801649Z [err]      ^
2026-01-06T16:48:19.234805213Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:48:19.234810072Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:48:19.234813903Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:19.234819746Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:48:19.234823940Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:48:19.234827645Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:48:19.234831381Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:48:19.234835355Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:48:19.234839295Z [err]      raise exc
2026-01-06T16:48:19.235993938Z [err]      await self.app(scope, receive, send)
2026-01-06T16:48:19.236000023Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:48:19.236001281Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:48:19.236005125Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:48:19.236006837Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:48:19.236009973Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:48:19.236013827Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:48:19.236015411Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:48:19.236020257Z [err]      raise exc
2026-01-06T16:48:19.236024650Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:48:19.236030206Z [err]      await app(scope, receive, sender)
2026-01-06T16:48:19.236036372Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:48:19.236052376Z [err]      await self.app(scope, receive, send)
2026-01-06T16:48:19.236062675Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:48:19.236071009Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:48:19.236081630Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:48:19.236093856Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:48:19.236105771Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:48:19.237443680Z [err]      raise exc
2026-01-06T16:48:19.237450742Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:48:19.237455108Z [err]      await app(scope, receive, sender)
2026-01-06T16:48:19.237459783Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:48:19.237463900Z [err]      response = await f(request)
2026-01-06T16:48:19.237467803Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:48:19.237471911Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:48:19.237475441Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:48:19.237479191Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:19.237483698Z [err]      ...<3 lines>...
2026-01-06T16:48:19.237487239Z [err]      )
2026-01-06T16:48:19.237490918Z [err]      ^
2026-01-06T16:48:19.237494714Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:48:19.237498287Z [err]      return await dependant.call(**values)
2026-01-06T16:48:19.237502362Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:19.237506309Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:48:19.237509900Z [err]      event = get_active_event()
2026-01-06T16:48:19.237513396Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:48:19.237516996Z [err]      cur.execute(
2026-01-06T16:48:19.237520929Z [err]      ~~~~~~~~~~~^
2026-01-06T16:48:19.237524487Z [err]          """
2026-01-06T16:48:19.237528889Z [err]          ^^^
2026-01-06T16:48:19.237532542Z [err]      ...<7 lines>...
2026-01-06T16:48:19.237536798Z [err]          (day_of_week, current_time),
2026-01-06T16:48:19.237540581Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:19.238552632Z [err]      )
2026-01-06T16:48:19.238557471Z [err]      ^
2026-01-06T16:48:19.238561263Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:48:19.238565834Z [err]      return super().execute(query, vars)
2026-01-06T16:48:19.238569444Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:48:19.238573058Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:48:19.238576863Z [err]  LINE 5:           AND active = 1
2026-01-06T16:48:19.238580789Z [err]                               ^
2026-01-06T16:48:19.238584676Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:48:19.238588372Z [err]  
2026-01-06T16:48:19.274404665Z [err]  2026-01-06 16:48:19.226 UTC [9073] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:48:19.274409465Z [err]  2026-01-06 16:48:19.226 UTC [9073] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:48:19.274413496Z [err]  2026-01-06 16:48:19.226 UTC [9073] STATEMENT:  
2026-01-06T16:48:19.275805054Z [err]  	        SELECT event
2026-01-06T16:48:19.275819289Z [err]  	        FROM event_config
2026-01-06T16:48:19.275826634Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:48:19.275833841Z [err]  	          AND active = 1
2026-01-06T16:48:19.275840765Z [err]  	          AND '16:48' BETWEEN open_time AND close_time
2026-01-06T16:48:19.275847967Z [err]  	        LIMIT 1;
2026-01-06T16:48:19.275855066Z [err]  	        
2026-01-06T16:48:19.741915752Z [inf]  ðŸ“¨ 27826044441: 8km
2026-01-06T16:48:19.858570886Z [inf]  INFO:     100.64.0.9:35386 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:48:19.858579515Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:48:19.858580166Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:48:19.858586146Z [err]  Traceback (most recent call last):
2026-01-06T16:48:19.858592339Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:48:19.858593614Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:48:19.858599633Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:48:19.858602936Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:19.858610195Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:19.858610330Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:48:19.858615968Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:48:19.858621116Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:48:19.858625734Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:48:19.858632519Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:48:19.858633226Z [err]          self.scope, self.receive, self.send
2026-01-06T16:48:19.858639982Z [err]      raise exc
2026-01-06T16:48:19.858642950Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:19.858650003Z [err]      )
2026-01-06T16:48:19.858655611Z [err]      ^
2026-01-06T16:48:19.858663352Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:48:19.859412293Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:48:19.859417311Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:48:19.859420229Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:48:19.859506305Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:48:19.859511277Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:48:19.859516389Z [err]      raise exc
2026-01-06T16:48:19.859520309Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:48:19.859523962Z [err]      await app(scope, receive, sender)
2026-01-06T16:48:19.859527639Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:48:19.859531478Z [err]      await self.app(scope, receive, send)
2026-01-06T16:48:19.859536870Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:48:19.859541171Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:48:19.859544975Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:48:19.859549449Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:48:19.859553293Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:48:19.859557522Z [err]      await self.app(scope, receive, send)
2026-01-06T16:48:19.859561629Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:48:19.859565632Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:48:19.860476792Z [err]      raise exc
2026-01-06T16:48:19.860478120Z [err]      ~~~~~~~~~~~^
2026-01-06T16:48:19.860484314Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:48:19.860485919Z [err]          """
2026-01-06T16:48:19.860489069Z [err]      await app(scope, receive, sender)
2026-01-06T16:48:19.860491558Z [err]          ^^^
2026-01-06T16:48:19.860494651Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:48:19.860497322Z [err]      ...<7 lines>...
2026-01-06T16:48:19.860500231Z [err]      response = await f(request)
2026-01-06T16:48:19.860503271Z [err]          (day_of_week, current_time),
2026-01-06T16:48:19.860505429Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:48:19.860510061Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:19.860510466Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:48:19.860516538Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:48:19.860520457Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:19.860524766Z [err]      ...<3 lines>...
2026-01-06T16:48:19.860528426Z [err]      )
2026-01-06T16:48:19.860532032Z [err]      ^
2026-01-06T16:48:19.860535721Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:48:19.860540644Z [err]      return await dependant.call(**values)
2026-01-06T16:48:19.860545049Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:19.860549602Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:48:19.860554268Z [err]      event = get_active_event()
2026-01-06T16:48:19.860558861Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:48:19.860563412Z [err]      cur.execute(
2026-01-06T16:48:19.861339962Z [err]      )
2026-01-06T16:48:19.861346269Z [err]      ^
2026-01-06T16:48:19.861350719Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:48:19.861355576Z [err]      return super().execute(query, vars)
2026-01-06T16:48:19.861360248Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:48:19.861364479Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:48:19.861368236Z [err]  LINE 5:           AND active = 1
2026-01-06T16:48:19.861372099Z [err]                               ^
2026-01-06T16:48:19.861376021Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:48:19.861380368Z [err]  
2026-01-06T16:48:20.220748853Z [err]  2026-01-06 16:48:19.849 UTC [9075] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:48:20.220755943Z [err]  2026-01-06 16:48:19.849 UTC [9075] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:48:20.220762960Z [err]  2026-01-06 16:48:19.849 UTC [9075] STATEMENT:  
2026-01-06T16:48:20.220770854Z [err]  	        SELECT event
2026-01-06T16:48:20.220778102Z [err]  	        FROM event_config
2026-01-06T16:48:20.220784723Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:48:20.220792626Z [err]  	          AND active = 1
2026-01-06T16:48:20.220799676Z [err]  	          AND '16:48' BETWEEN open_time AND close_time
2026-01-06T16:48:20.220806346Z [err]  	        LIMIT 1;
2026-01-06T16:48:20.220813256Z [err]  	        
2026-01-06T16:48:20.274449692Z [inf]  ðŸ“¨ 27826044441: 8km
2026-01-06T16:48:20.408145355Z [inf]  INFO:     100.64.0.5:62248 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:48:20.408156872Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:48:20.408163975Z [err]  Traceback (most recent call last):
2026-01-06T16:48:20.408172834Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:48:20.408179487Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:48:20.408186668Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:20.408193420Z [err]          self.scope, self.receive, self.send
2026-01-06T16:48:20.408200051Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:20.408206436Z [err]      )
2026-01-06T16:48:20.408212778Z [err]      ^
2026-01-06T16:48:20.408218656Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:48:20.408224741Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:48:20.408231819Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:20.408238402Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:48:20.408243956Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:48:20.408250048Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:48:20.408257410Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:48:20.408263640Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:48:20.408269711Z [err]      raise exc
2026-01-06T16:48:20.408275899Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:48:20.409029503Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:48:20.409034760Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:48:20.409038799Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:48:20.409043116Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:48:20.409047828Z [err]      raise exc
2026-01-06T16:48:20.409051782Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:48:20.409057001Z [err]      await app(scope, receive, sender)
2026-01-06T16:48:20.409060716Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:48:20.409064739Z [err]      await self.app(scope, receive, send)
2026-01-06T16:48:20.409069433Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:48:20.409073713Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:48:20.409079943Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:48:20.409083988Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:48:20.409088622Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:48:20.409092509Z [err]      await self.app(scope, receive, send)
2026-01-06T16:48:20.409096472Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:48:20.409099979Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:48:20.409103626Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:48:20.410331674Z [err]      ~~~~~~~~~~~^
2026-01-06T16:48:20.410344081Z [err]          """
2026-01-06T16:48:20.410346526Z [err]      raise exc
2026-01-06T16:48:20.410346727Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:20.410356569Z [err]          ^^^
2026-01-06T16:48:20.410360728Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:48:20.410361253Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:48:20.410371090Z [err]      ...<7 lines>...
2026-01-06T16:48:20.410374868Z [err]      await app(scope, receive, sender)
2026-01-06T16:48:20.410374900Z [err]      event = get_active_event()
2026-01-06T16:48:20.410381641Z [err]          (day_of_week, current_time),
2026-01-06T16:48:20.410387805Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:48:20.410388597Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:48:20.410394715Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:20.410400708Z [err]      cur.execute(
2026-01-06T16:48:20.410400787Z [err]      response = await f(request)
2026-01-06T16:48:20.410407979Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:48:20.410415008Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:48:20.410421653Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:48:20.410428162Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:20.410434519Z [err]      ...<3 lines>...
2026-01-06T16:48:20.410441119Z [err]      )
2026-01-06T16:48:20.410447785Z [err]      ^
2026-01-06T16:48:20.410454409Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:48:20.410462326Z [err]      return await dependant.call(**values)
2026-01-06T16:48:20.411042986Z [err]      )
2026-01-06T16:48:20.411053442Z [err]      ^
2026-01-06T16:48:20.411061796Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:48:20.411069526Z [err]      return super().execute(query, vars)
2026-01-06T16:48:20.411077095Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:48:20.411085841Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:48:20.411093117Z [err]  LINE 5:           AND active = 1
2026-01-06T16:48:20.411100633Z [err]                               ^
2026-01-06T16:48:20.411107816Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:48:20.411116332Z [err]  
2026-01-06T16:48:21.440836298Z [inf]  ðŸ“¨ 27826044441: 8km
2026-01-06T16:48:21.561656049Z [err]  2026-01-06 16:48:20.400 UTC [9077] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:48:21.561663003Z [err]  2026-01-06 16:48:20.400 UTC [9077] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:48:21.561669857Z [err]  2026-01-06 16:48:20.400 UTC [9077] STATEMENT:  
2026-01-06T16:48:21.561677466Z [err]  	        SELECT event
2026-01-06T16:48:21.561683241Z [err]  	        FROM event_config
2026-01-06T16:48:21.561689678Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:48:21.561696704Z [err]  	          AND active = 1
2026-01-06T16:48:21.561704839Z [err]  	          AND '16:48' BETWEEN open_time AND close_time
2026-01-06T16:48:21.561713012Z [err]  	        LIMIT 1;
2026-01-06T16:48:21.561720045Z [err]  	        
2026-01-06T16:48:21.771098967Z [inf]  INFO:     100.64.0.3:15634 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:48:21.771102839Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:48:21.771107490Z [err]  Traceback (most recent call last):
2026-01-06T16:48:21.771111751Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:48:21.771115892Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:48:21.771120975Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:21.771125183Z [err]          self.scope, self.receive, self.send
2026-01-06T16:48:21.771129823Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:21.771133581Z [err]      )
2026-01-06T16:48:21.771138757Z [err]      ^
2026-01-06T16:48:21.771143079Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:48:21.771147380Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:48:21.771151372Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:21.771155513Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:48:21.771159460Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:48:21.771165797Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:48:21.771169777Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:48:21.771173632Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:48:21.771177239Z [err]      raise exc
2026-01-06T16:48:21.771180865Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:48:21.772265714Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:48:21.772276613Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:48:21.772283541Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:48:21.772285153Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:48:21.772288660Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:48:21.772293698Z [err]      raise exc
2026-01-06T16:48:21.772300569Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:48:21.772303851Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:48:21.772312483Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:48:21.772312785Z [err]      await app(scope, receive, sender)
2026-01-06T16:48:21.772321490Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:48:21.772330596Z [err]      await self.app(scope, receive, send)
2026-01-06T16:48:21.772338301Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:48:21.772352558Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:48:21.772364508Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:48:21.772373141Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:48:21.772380808Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:48:21.772388594Z [err]      await self.app(scope, receive, send)
2026-01-06T16:48:21.772873675Z [err]      raise exc
2026-01-06T16:48:21.772880697Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:48:21.772885516Z [err]      await app(scope, receive, sender)
2026-01-06T16:48:21.772889393Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:48:21.772894082Z [err]      response = await f(request)
2026-01-06T16:48:21.772898753Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:48:21.772903063Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:48:21.772907632Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:48:21.772911507Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:21.772916300Z [err]      ...<3 lines>...
2026-01-06T16:48:21.772921047Z [err]      )
2026-01-06T16:48:21.772926235Z [err]      ^
2026-01-06T16:48:21.772930867Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:48:21.772934427Z [err]      return await dependant.call(**values)
2026-01-06T16:48:21.772938707Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:21.772943251Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:48:21.772946908Z [err]      event = get_active_event()
2026-01-06T16:48:21.772951260Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:48:21.772954914Z [err]      cur.execute(
2026-01-06T16:48:21.772958545Z [err]      ~~~~~~~~~~~^
2026-01-06T16:48:21.772963184Z [err]          """
2026-01-06T16:48:21.772967122Z [err]          ^^^
2026-01-06T16:48:21.772970625Z [err]      ...<7 lines>...
2026-01-06T16:48:21.772974778Z [err]          (day_of_week, current_time),
2026-01-06T16:48:21.772978797Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:21.773714363Z [err]      )
2026-01-06T16:48:21.773723852Z [err]      ^
2026-01-06T16:48:21.773730373Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:48:21.773737447Z [err]      return super().execute(query, vars)
2026-01-06T16:48:21.773744234Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:48:21.773750854Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:48:21.773757438Z [err]  LINE 5:           AND active = 1
2026-01-06T16:48:21.773763373Z [err]                               ^
2026-01-06T16:48:21.773769535Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:48:21.773775840Z [err]  
2026-01-06T16:48:22.722557532Z [err]  2026-01-06 16:48:21.721 UTC [9079] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:48:22.722564334Z [err]  2026-01-06 16:48:21.721 UTC [9079] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:48:22.722573468Z [err]  2026-01-06 16:48:21.721 UTC [9079] STATEMENT:  
2026-01-06T16:48:22.722582563Z [err]  	        SELECT event
2026-01-06T16:48:22.722591177Z [err]  	        FROM event_config
2026-01-06T16:48:22.722598807Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:48:22.722605477Z [err]  	          AND active = 1
2026-01-06T16:48:22.722612572Z [err]  	          AND '16:48' BETWEEN open_time AND close_time
2026-01-06T16:48:22.722619020Z [err]  	        LIMIT 1;
2026-01-06T16:48:22.722625990Z [err]  	        
2026-01-06T16:48:23.473165206Z [inf]  ðŸ“¨ 27832844884: 8km
2026-01-06T16:48:23.617245399Z [inf]  INFO:     100.64.0.3:15646 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:48:23.617254193Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:48:23.617259107Z [err]  Traceback (most recent call last):
2026-01-06T16:48:23.617263238Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:48:23.617266941Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:48:23.617272070Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:23.617275851Z [err]          self.scope, self.receive, self.send
2026-01-06T16:48:23.617279628Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:23.617283827Z [err]      )
2026-01-06T16:48:23.617300572Z [err]      ^
2026-01-06T16:48:23.617305438Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:48:23.617309556Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:48:23.617313928Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:23.617317613Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:48:23.617321479Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:48:23.617325557Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:48:23.617329514Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:48:23.617334180Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:48:23.617338180Z [err]      raise exc
2026-01-06T16:48:23.617343704Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:48:23.618431436Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:48:23.618441340Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:48:23.618446950Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:48:23.618452153Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:48:23.618457625Z [err]      raise exc
2026-01-06T16:48:23.618462313Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:48:23.618468576Z [err]      await app(scope, receive, sender)
2026-01-06T16:48:23.618473528Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:48:23.618478031Z [err]      await self.app(scope, receive, send)
2026-01-06T16:48:23.618482144Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:48:23.618486179Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:48:23.618489853Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:48:23.618493721Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:48:23.618497384Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:48:23.618502663Z [err]      await self.app(scope, receive, send)
2026-01-06T16:48:23.618506564Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:48:23.618510741Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:48:23.618514804Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:48:23.619708569Z [err]      raise exc
2026-01-06T16:48:23.619716527Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:48:23.619721734Z [err]      await app(scope, receive, sender)
2026-01-06T16:48:23.619728153Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:48:23.619733127Z [err]      response = await f(request)
2026-01-06T16:48:23.619739735Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:48:23.619744816Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:48:23.619749724Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:48:23.619755171Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:23.619760152Z [err]      ...<3 lines>...
2026-01-06T16:48:23.619765039Z [err]      )
2026-01-06T16:48:23.619769371Z [err]      ^
2026-01-06T16:48:23.619807702Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:48:23.619813714Z [err]      return await dependant.call(**values)
2026-01-06T16:48:23.619818035Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:23.619823290Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:48:23.619827582Z [err]      event = get_active_event()
2026-01-06T16:48:23.619832716Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:48:23.619836941Z [err]      cur.execute(
2026-01-06T16:48:23.619841836Z [err]      ~~~~~~~~~~~^
2026-01-06T16:48:23.619846358Z [err]          """
2026-01-06T16:48:23.619850349Z [err]          ^^^
2026-01-06T16:48:23.619854635Z [err]      ...<7 lines>...
2026-01-06T16:48:23.619859247Z [err]          (day_of_week, current_time),
2026-01-06T16:48:23.619863351Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:23.620711978Z [err]      )
2026-01-06T16:48:23.620721672Z [err]      ^
2026-01-06T16:48:23.620729091Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:48:23.620738057Z [err]      return super().execute(query, vars)
2026-01-06T16:48:23.620746090Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:48:23.620755377Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:48:23.620761334Z [err]  LINE 5:           AND active = 1
2026-01-06T16:48:23.620766829Z [err]                               ^
2026-01-06T16:48:23.620772872Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:48:23.620780428Z [err]  
2026-01-06T16:48:24.176810956Z [err]  2026-01-06 16:48:23.610 UTC [9082] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:48:24.176812183Z [err]  	          AND '16:48' BETWEEN open_time AND close_time
2026-01-06T16:48:24.176819981Z [err]  2026-01-06 16:48:23.610 UTC [9082] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:48:24.176824850Z [err]  	        LIMIT 1;
2026-01-06T16:48:24.176827743Z [err]  2026-01-06 16:48:23.610 UTC [9082] STATEMENT:  
2026-01-06T16:48:24.176833671Z [err]  	        
2026-01-06T16:48:24.176836093Z [err]  	        SELECT event
2026-01-06T16:48:24.176842618Z [err]  	        FROM event_config
2026-01-06T16:48:24.176848746Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:48:24.176856869Z [err]  	          AND active = 1
2026-01-06T16:48:43.521331899Z [err]  2026-01-06 16:48:40.204 UTC [9084] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:48:43.521343004Z [err]  2026-01-06 16:48:40.204 UTC [9084] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:48:43.521352080Z [err]  2026-01-06 16:48:40.204 UTC [9084] STATEMENT:  
2026-01-06T16:48:43.521360541Z [err]  	        SELECT event
2026-01-06T16:48:43.521367639Z [err]  	        FROM event_config
2026-01-06T16:48:43.521377784Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:48:43.521385259Z [err]  	          AND active = 1
2026-01-06T16:48:43.521392892Z [err]  	          AND '16:48' BETWEEN open_time AND close_time
2026-01-06T16:48:43.521401854Z [err]  	        LIMIT 1;
2026-01-06T16:48:43.521409224Z [err]  	        
2026-01-06T16:48:43.640276484Z [inf]  ðŸ“¨ 27826044441: 8km
2026-01-06T16:48:43.640282999Z [inf]  INFO:     100.64.0.5:21012 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:48:43.640287532Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:48:43.640292978Z [err]  Traceback (most recent call last):
2026-01-06T16:48:43.640297699Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:48:43.640302006Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:48:43.640306716Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:43.640311779Z [err]          self.scope, self.receive, self.send
2026-01-06T16:48:43.640316358Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:43.640321179Z [err]      )
2026-01-06T16:48:43.640327586Z [err]      ^
2026-01-06T16:48:43.640333265Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:48:43.640343023Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:48:43.640347385Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:43.640351591Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:48:43.640355739Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:48:43.640360912Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:48:43.640365649Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:48:43.640369681Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:48:43.640374858Z [err]      raise exc
2026-01-06T16:48:43.640378839Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:48:43.641263596Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:48:43.641274983Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:48:43.641283705Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:48:43.641291065Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:48:43.641298215Z [err]      raise exc
2026-01-06T16:48:43.641306813Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:48:43.641313813Z [err]      await app(scope, receive, sender)
2026-01-06T16:48:43.641320859Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:48:43.641333740Z [err]      await self.app(scope, receive, send)
2026-01-06T16:48:43.641338353Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:48:43.641343173Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:48:43.641346736Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:48:43.641350853Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:48:43.641354334Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:48:43.641358494Z [err]      await self.app(scope, receive, send)
2026-01-06T16:48:43.641363366Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:48:43.641367434Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:48:43.641371670Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:48:43.642433789Z [err]          """
2026-01-06T16:48:43.642444773Z [err]          ^^^
2026-01-06T16:48:43.642446387Z [err]      raise exc
2026-01-06T16:48:43.642452862Z [err]      ...<7 lines>...
2026-01-06T16:48:43.642459816Z [err]          (day_of_week, current_time),
2026-01-06T16:48:43.642464612Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:48:43.642468699Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:43.642476593Z [err]      await app(scope, receive, sender)
2026-01-06T16:48:43.642484652Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:48:43.642490856Z [err]      response = await f(request)
2026-01-06T16:48:43.642497937Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:48:43.642507440Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:48:43.642515282Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:48:43.642522099Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:43.642529839Z [err]      ...<3 lines>...
2026-01-06T16:48:43.642537056Z [err]      )
2026-01-06T16:48:43.642544072Z [err]      ^
2026-01-06T16:48:43.642551186Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:48:43.642558278Z [err]      return await dependant.call(**values)
2026-01-06T16:48:43.642565041Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:48:43.642572464Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:48:43.642579496Z [err]      event = get_active_event()
2026-01-06T16:48:43.642588166Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:48:43.642607900Z [err]      cur.execute(
2026-01-06T16:48:43.642615643Z [err]      ~~~~~~~~~~~^
2026-01-06T16:48:43.643002924Z [err]      )
2026-01-06T16:48:43.643007021Z [err]      ^
2026-01-06T16:48:43.643010449Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:48:43.643014083Z [err]      return super().execute(query, vars)
2026-01-06T16:48:43.643018109Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:48:43.643023277Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:48:43.643030258Z [err]  LINE 5:           AND active = 1
2026-01-06T16:48:43.643037450Z [err]                               ^
2026-01-06T16:48:43.643045399Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:48:43.643052512Z [err]  
2026-01-06T16:49:53.198869046Z [err]  2026-01-06 16:49:45.498 UTC [9090] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:49:53.198883895Z [err]  2026-01-06 16:49:45.498 UTC [9090] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:49:53.198893440Z [err]  2026-01-06 16:49:45.498 UTC [9090] STATEMENT:  
2026-01-06T16:49:53.198901719Z [err]  	        SELECT event
2026-01-06T16:49:53.198909169Z [err]  	        FROM event_config
2026-01-06T16:49:53.198916802Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:49:53.198926039Z [err]  	          AND active = 1
2026-01-06T16:49:53.198932796Z [err]  	          AND '16:49' BETWEEN open_time AND close_time
2026-01-06T16:49:53.198940368Z [err]  	        LIMIT 1;
2026-01-06T16:49:53.198948037Z [err]  	        
2026-01-06T16:49:53.198954171Z [err]  2026-01-06 16:49:52.053 UTC [9092] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:49:53.198960914Z [err]  2026-01-06 16:49:52.053 UTC [9092] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:49:53.198968188Z [err]  2026-01-06 16:49:52.053 UTC [9092] STATEMENT:  
2026-01-06T16:49:53.198976527Z [err]  	        SELECT event
2026-01-06T16:49:53.198984183Z [err]  	        FROM event_config
2026-01-06T16:49:53.198990034Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:49:53.198996613Z [err]  	          AND active = 1
2026-01-06T16:49:53.199004224Z [err]  	          AND '16:49' BETWEEN open_time AND close_time
2026-01-06T16:49:53.199011287Z [err]  	        LIMIT 1;
2026-01-06T16:49:53.199019199Z [err]  	        
2026-01-06T16:49:53.199026685Z [err]  2026-01-06 16:49:52.660 UTC [9094] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:49:53.199033293Z [err]  2026-01-06 16:49:52.660 UTC [9094] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:49:53.238465918Z [err]  2026-01-06 16:49:52.660 UTC [9094] STATEMENT:  
2026-01-06T16:49:53.238484794Z [err]  	        SELECT event
2026-01-06T16:49:53.238496570Z [err]  	        FROM event_config
2026-01-06T16:49:53.238510159Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:49:53.238519383Z [err]  	          AND active = 1
2026-01-06T16:49:53.238529145Z [err]  	          AND '16:49' BETWEEN open_time AND close_time
2026-01-06T16:49:53.238543065Z [err]  	        LIMIT 1;
2026-01-06T16:49:53.238551194Z [err]  	        
2026-01-06T16:49:53.263832643Z [err]  2026-01-06 16:49:53.244 UTC [9096] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:49:53.263841213Z [err]  2026-01-06 16:49:53.244 UTC [9096] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:49:53.263847567Z [err]  2026-01-06 16:49:53.244 UTC [9096] STATEMENT:  
2026-01-06T16:49:53.263858771Z [err]  	        SELECT event
2026-01-06T16:49:53.263864561Z [err]  	        FROM event_config
2026-01-06T16:49:53.263872972Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:49:53.263879486Z [err]  	          AND active = 1
2026-01-06T16:49:53.263885899Z [err]  	          AND '16:49' BETWEEN open_time AND close_time
2026-01-06T16:49:53.263892635Z [err]  	        LIMIT 1;
2026-01-06T16:49:53.263898894Z [err]  	        
2026-01-06T16:49:53.755054196Z [err]      raise exc
2026-01-06T16:49:53.755060528Z [err]      )
2026-01-06T16:49:53.755066119Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:49:53.755071609Z [err]      ^
2026-01-06T16:49:53.755078984Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:49:53.755085609Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:49:53.755091969Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:49:53.755100074Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:49:53.755102140Z [inf]  ðŸ“¨ 27826044441: 8km 50:34 SBK03E
2026-01-06T16:49:53.755108994Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:49:53.755114126Z [inf]  INFO:     100.64.0.6:42492 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:49:53.755117812Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:49:53.755126364Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:49:53.755126555Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:49:53.755134649Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:49:53.755138456Z [err]  Traceback (most recent call last):
2026-01-06T16:49:53.755150754Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:49:53.755161591Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:49:53.755172742Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:49:53.755184268Z [err]          self.scope, self.receive, self.send
2026-01-06T16:49:53.755187249Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:49:53.755191705Z [err]      await self.app(scope, receive, send)
2026-01-06T16:49:53.755195336Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:49:53.755196886Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:49:53.755198206Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:49:53.755201889Z [err]      await self.app(scope, receive, send)
2026-01-06T16:49:53.755202665Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:49:53.755208342Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:49:53.755208344Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:49:53.755211666Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:49:53.755217949Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:49:53.755218600Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:49:53.755220079Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:49:53.755226038Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:49:53.755228248Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:49:53.755233651Z [err]      raise exc
2026-01-06T16:49:53.755240258Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:49:53.755245706Z [err]      await app(scope, receive, sender)
2026-01-06T16:49:53.755251242Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:49:53.756346164Z [err]      raise exc
2026-01-06T16:49:53.756349126Z [err]      ...<7 lines>...
2026-01-06T16:49:53.756355049Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:49:53.756362236Z [err]          (day_of_week, current_time),
2026-01-06T16:49:53.756362733Z [err]      await app(scope, receive, sender)
2026-01-06T16:49:53.756370960Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:49:53.756373619Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:49:53.756378250Z [err]      response = await f(request)
2026-01-06T16:49:53.756385858Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:49:53.756392205Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:49:53.756399966Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:49:53.756405930Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:49:53.756412142Z [err]      ...<3 lines>...
2026-01-06T16:49:53.756417994Z [err]      )
2026-01-06T16:49:53.756424308Z [err]      ^
2026-01-06T16:49:53.756431199Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:49:53.756437189Z [err]      return await dependant.call(**values)
2026-01-06T16:49:53.756443657Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:49:53.756449796Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:49:53.756455844Z [err]      event = get_active_event()
2026-01-06T16:49:53.756462456Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:49:53.756469215Z [err]      cur.execute(
2026-01-06T16:49:53.756475458Z [err]      ~~~~~~~~~~~^
2026-01-06T16:49:53.756481926Z [err]          """
2026-01-06T16:49:53.756489402Z [err]          ^^^
2026-01-06T16:49:53.757412371Z [err]      )
2026-01-06T16:49:53.757422335Z [err]      ^
2026-01-06T16:49:53.757429798Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:49:53.757436706Z [err]      return super().execute(query, vars)
2026-01-06T16:49:53.757443776Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:49:53.757450894Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:49:53.757456939Z [err]  LINE 5:           AND active = 1
2026-01-06T16:49:53.757465402Z [err]                               ^
2026-01-06T16:49:53.757471974Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:49:53.757479382Z [err]  
2026-01-06T16:49:53.757488487Z [inf]  ðŸ“¨ 27832844884: 8km
2026-01-06T16:49:53.757495466Z [inf]  50.34
2026-01-06T16:49:53.757501999Z [inf]  SBK03E
2026-01-06T16:49:53.757508825Z [inf]  INFO:     100.64.0.4:55158 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:49:53.757517744Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:49:53.757524317Z [err]  Traceback (most recent call last):
2026-01-06T16:49:53.757530925Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:49:53.757537982Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:49:53.757544689Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:49:53.757551629Z [err]          self.scope, self.receive, self.send
2026-01-06T16:49:53.757559042Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:49:53.757565728Z [err]      )
2026-01-06T16:49:53.757571665Z [err]      ^
2026-01-06T16:49:53.757578631Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:49:53.758534469Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:49:53.758538235Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:49:53.758542739Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:49:53.758543569Z [err]      raise exc
2026-01-06T16:49:53.758550208Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:49:53.758551899Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:49:53.758552459Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:49:53.758561643Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:49:53.758562023Z [err]      await app(scope, receive, sender)
2026-01-06T16:49:53.758564541Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:49:53.758568584Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:49:53.758573658Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:49:53.758575376Z [err]      await self.app(scope, receive, send)
2026-01-06T16:49:53.758577506Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:49:53.758584641Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:49:53.758588694Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:49:53.758594489Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:49:53.758603318Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:49:53.758612582Z [err]      raise exc
2026-01-06T16:49:53.759446207Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:49:53.759449688Z [err]      ^
2026-01-06T16:49:53.759455276Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:49:53.759456244Z [err]      await app(scope, receive, sender)
2026-01-06T16:49:53.759457410Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:49:53.759462279Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:49:53.759466356Z [err]      ...<3 lines>...
2026-01-06T16:49:53.759467129Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:49:53.759472885Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:49:53.759474699Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:49:53.759475202Z [err]      response = await f(request)
2026-01-06T16:49:53.759476935Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:49:53.759478161Z [err]      )
2026-01-06T16:49:53.759481100Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:49:53.759486508Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:49:53.759487509Z [err]      raise exc
2026-01-06T16:49:53.759488714Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:49:53.759494256Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:49:53.759497262Z [err]      await self.app(scope, receive, send)
2026-01-06T16:49:53.759499213Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:49:53.759505770Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:49:53.760322472Z [err]      return await dependant.call(**values)
2026-01-06T16:49:53.760329663Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:49:53.760330319Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:49:53.760335163Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:49:53.760338422Z [err]      ...<7 lines>...
2026-01-06T16:49:53.760341136Z [err]  
2026-01-06T16:49:53.760342102Z [err]      event = get_active_event()
2026-01-06T16:49:53.760348391Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:49:53.760351192Z [err]          (day_of_week, current_time),
2026-01-06T16:49:53.760351322Z [inf]  ðŸ“¨ 27832844884: 8km
2026-01-06T16:49:53.760355196Z [err]      cur.execute(
2026-01-06T16:49:53.760361151Z [inf]  50.34
2026-01-06T16:49:53.760361724Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:49:53.760363265Z [err]      ~~~~~~~~~~~^
2026-01-06T16:49:53.760369888Z [err]          """
2026-01-06T16:49:53.760371296Z [inf]  SBK03E
2026-01-06T16:49:53.760372872Z [err]      )
2026-01-06T16:49:53.760375766Z [err]          ^^^
2026-01-06T16:49:53.760381276Z [inf]  INFO:     100.64.0.6:20162 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:49:53.760382534Z [err]      ^
2026-01-06T16:49:53.760390771Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:49:53.760398342Z [err]      return super().execute(query, vars)
2026-01-06T16:49:53.760406671Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:49:53.760415567Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:49:53.760423633Z [err]  LINE 5:           AND active = 1
2026-01-06T16:49:53.760430872Z [err]                               ^
2026-01-06T16:49:53.761189407Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:49:53.761193589Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:49:53.761198739Z [err]  Traceback (most recent call last):
2026-01-06T16:49:53.761204247Z [err]      raise exc
2026-01-06T16:49:53.761209263Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:49:53.761214853Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:49:53.761218252Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:49:53.761223918Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:49:53.761227714Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:49:53.761236139Z [err]          self.scope, self.receive, self.send
2026-01-06T16:49:53.761243614Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:49:53.761250639Z [err]      )
2026-01-06T16:49:53.761257839Z [err]      ^
2026-01-06T16:49:53.761264884Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:49:53.761272090Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:49:53.761279643Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:49:53.761286811Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:49:53.761294156Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:49:53.761301129Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:49:53.761308000Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:49:53.762199648Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:49:53.762201064Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:49:53.762206621Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:49:53.762212342Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:49:53.762212638Z [err]      await self.app(scope, receive, send)
2026-01-06T16:49:53.762218251Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:49:53.762222568Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:49:53.762224116Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:49:53.762230030Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:49:53.762231584Z [err]      raise exc
2026-01-06T16:49:53.762235380Z [err]      raise exc
2026-01-06T16:49:53.762239040Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:49:53.762247869Z [err]      await app(scope, receive, sender)
2026-01-06T16:49:53.762255374Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:49:53.762262038Z [err]      await self.app(scope, receive, send)
2026-01-06T16:49:53.762270109Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:49:53.762276826Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:49:53.762283505Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:49:53.763246401Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:49:53.763253400Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:49:53.763259309Z [err]      await app(scope, receive, sender)
2026-01-06T16:49:53.763260988Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:49:53.763261416Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:49:53.763268619Z [err]      ...<3 lines>...
2026-01-06T16:49:53.763269062Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:49:53.763275688Z [err]      )
2026-01-06T16:49:53.763275918Z [err]      cur.execute(
2026-01-06T16:49:53.763279189Z [err]      response = await f(request)
2026-01-06T16:49:53.763279584Z [err]      return await dependant.call(**values)
2026-01-06T16:49:53.763283406Z [err]      ^
2026-01-06T16:49:53.763289689Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:49:53.763290346Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:49:53.763292991Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:49:53.763295344Z [err]      ~~~~~~~~~~~^
2026-01-06T16:49:53.763299289Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:49:53.763301475Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:49:53.763305220Z [err]          """
2026-01-06T16:49:53.763310337Z [err]      event = get_active_event()
2026-01-06T16:49:53.763314454Z [err]          ^^^
2026-01-06T16:49:53.763321475Z [err]      ...<7 lines>...
2026-01-06T16:49:53.763324218Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:49:53.763328768Z [err]          (day_of_week, current_time),
2026-01-06T16:49:53.764202963Z [err]      )
2026-01-06T16:49:53.764211264Z [err]      ^
2026-01-06T16:49:53.764215616Z [err]  Traceback (most recent call last):
2026-01-06T16:49:53.764220059Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:49:53.764228066Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:49:53.764229130Z [err]      return super().execute(query, vars)
2026-01-06T16:49:53.764237791Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:49:53.764238089Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:49:53.764247228Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:49:53.764247772Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:49:53.764256159Z [err]          self.scope, self.receive, self.send
2026-01-06T16:49:53.764257602Z [err]  LINE 5:           AND active = 1
2026-01-06T16:49:53.764264285Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:49:53.764272420Z [err]                               ^
2026-01-06T16:49:53.764273028Z [err]      )
2026-01-06T16:49:53.764281667Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:49:53.764282094Z [err]      ^
2026-01-06T16:49:53.764290723Z [err]  
2026-01-06T16:49:53.764297765Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:49:53.764298976Z [inf]  ðŸ“¨ 27832844884: 8km
2026-01-06T16:49:53.764306265Z [inf]  50.34
2026-01-06T16:49:53.764313273Z [inf]  SBK03E
2026-01-06T16:49:53.764324570Z [inf]  INFO:     100.64.0.5:19740 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:49:53.764331756Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:49:53.764880036Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:49:53.764889192Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:49:53.764897210Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:49:53.764904524Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:49:53.764910906Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:49:53.764917023Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:49:53.764924102Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:49:53.764930582Z [err]      raise exc
2026-01-06T16:49:53.764937342Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:49:53.764944494Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:49:53.764950946Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:49:53.764957642Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:49:53.764967125Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:49:53.764975721Z [err]      raise exc
2026-01-06T16:49:53.764982344Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:49:53.764988524Z [err]      await app(scope, receive, sender)
2026-01-06T16:49:53.764995029Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:49:53.765001941Z [err]      await self.app(scope, receive, send)
2026-01-06T16:49:53.765011245Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:49:53.766082904Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:49:53.766089806Z [err]      ...<3 lines>...
2026-01-06T16:49:53.766092401Z [err]      raise exc
2026-01-06T16:49:53.766096323Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:49:53.766102385Z [err]      )
2026-01-06T16:49:53.766104236Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:49:53.766111990Z [err]      ^
2026-01-06T16:49:53.766112783Z [err]      await app(scope, receive, sender)
2026-01-06T16:49:53.766115600Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:49:53.766121913Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:49:53.766122385Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:49:53.766128283Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:49:53.766130184Z [err]      response = await f(request)
2026-01-06T16:49:53.766138288Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:49:53.766140546Z [err]      await self.app(scope, receive, send)
2026-01-06T16:49:53.766146073Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:49:53.766152454Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:49:53.766154785Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:49:53.766162604Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:49:53.766164528Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:49:53.766176434Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:49:53.767160151Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:49:53.767161349Z [err]      return await dependant.call(**values)
2026-01-06T16:49:53.767169278Z [err]  
2026-01-06T16:49:53.767172284Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:49:53.767178797Z [err]          (day_of_week, current_time),
2026-01-06T16:49:53.767182434Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:49:53.767188469Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:49:53.767191683Z [err]      event = get_active_event()
2026-01-06T16:49:53.767194703Z [err]      )
2026-01-06T16:49:53.767200606Z [err]      ^
2026-01-06T16:49:53.767202496Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:49:53.767206102Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:49:53.767212190Z [err]      cur.execute(
2026-01-06T16:49:53.767213004Z [err]      return super().execute(query, vars)
2026-01-06T16:49:53.767218133Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:49:53.767221709Z [err]      ~~~~~~~~~~~^
2026-01-06T16:49:53.767223596Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:49:53.767229918Z [err]  LINE 5:           AND active = 1
2026-01-06T16:49:53.767231595Z [err]          """
2026-01-06T16:49:53.767235128Z [err]                               ^
2026-01-06T16:49:53.767239840Z [err]          ^^^
2026-01-06T16:49:53.767247278Z [err]      ...<7 lines>...
2026-01-06T16:49:53.913530275Z [inf]  ðŸ“¨ 27832844884: 8km
2026-01-06T16:49:53.913538119Z [inf]  50.34
2026-01-06T16:49:53.913543230Z [inf]  SBK03E
2026-01-06T16:49:54.181284176Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:49:54.181293271Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:49:54.181302513Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:49:54.181308773Z [err]      raise exc
2026-01-06T16:49:54.181314842Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:49:54.181325667Z [inf]  INFO:     100.64.0.9:47374 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:49:54.181343171Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:49:54.181349565Z [err]  Traceback (most recent call last):
2026-01-06T16:49:54.181355961Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:49:54.181362159Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:49:54.181369283Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:49:54.181375137Z [err]          self.scope, self.receive, self.send
2026-01-06T16:49:54.181382450Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:49:54.181388274Z [err]      )
2026-01-06T16:49:54.181394343Z [err]      ^
2026-01-06T16:49:54.181400233Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:49:54.181406121Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:49:54.181413315Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:49:54.181420409Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:49:54.181426661Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:49:54.182164486Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:49:54.182173738Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:49:54.182180634Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:49:54.182185729Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:49:54.182191089Z [err]      raise exc
2026-01-06T16:49:54.182196776Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:49:54.182201483Z [err]      await app(scope, receive, sender)
2026-01-06T16:49:54.182206140Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:49:54.182211178Z [err]      await self.app(scope, receive, send)
2026-01-06T16:49:54.182216447Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:49:54.182221787Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:49:54.182233271Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:49:54.182237747Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:49:54.182242549Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:49:54.182247223Z [err]      await self.app(scope, receive, send)
2026-01-06T16:49:54.182252183Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:49:54.182258084Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:49:54.182263317Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:49:54.182856826Z [err]      raise exc
2026-01-06T16:49:54.182860066Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:49:54.182864062Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:49:54.182868530Z [err]      event = get_active_event()
2026-01-06T16:49:54.182871288Z [err]      await app(scope, receive, sender)
2026-01-06T16:49:54.182874456Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:49:54.182877111Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:49:54.182880568Z [err]      cur.execute(
2026-01-06T16:49:54.182882029Z [err]      response = await f(request)
2026-01-06T16:49:54.182886900Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:49:54.182888569Z [err]      ~~~~~~~~~~~^
2026-01-06T16:49:54.182892108Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:49:54.182894327Z [err]          """
2026-01-06T16:49:54.182897786Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:49:54.182902206Z [err]          ^^^
2026-01-06T16:49:54.182904578Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:49:54.182908931Z [err]      ...<7 lines>...
2026-01-06T16:49:54.182910896Z [err]      ...<3 lines>...
2026-01-06T16:49:54.182913983Z [err]          (day_of_week, current_time),
2026-01-06T16:49:54.182917584Z [err]      )
2026-01-06T16:49:54.182920576Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:49:54.182923330Z [err]      ^
2026-01-06T16:49:54.182927356Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:49:54.182932937Z [err]      return await dependant.call(**values)
2026-01-06T16:49:54.182936793Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:49:54.183420968Z [err]  
2026-01-06T16:49:54.183421208Z [err]      )
2026-01-06T16:49:54.183429459Z [err]      ^
2026-01-06T16:49:54.183430603Z [err]  LINE 5:           AND active = 1
2026-01-06T16:49:54.183434956Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:49:54.183437191Z [err]                               ^
2026-01-06T16:49:54.183441959Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:49:54.183444361Z [err]      return super().execute(query, vars)
2026-01-06T16:49:54.183448277Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:49:54.183453430Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:49:54.213834237Z [err]  2026-01-06 16:49:54.170 UTC [9098] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:49:54.213870199Z [err]  2026-01-06 16:49:54.170 UTC [9098] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:49:54.213879799Z [err]  2026-01-06 16:49:54.170 UTC [9098] STATEMENT:  
2026-01-06T16:49:54.213888206Z [err]  	        SELECT event
2026-01-06T16:49:54.213897578Z [err]  	        FROM event_config
2026-01-06T16:49:54.213906376Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:49:54.213915348Z [err]  	          AND active = 1
2026-01-06T16:49:54.213924255Z [err]  	          AND '16:49' BETWEEN open_time AND close_time
2026-01-06T16:49:54.213931647Z [err]  	        LIMIT 1;
2026-01-06T16:49:54.213941494Z [err]  	        
2026-01-06T16:50:14.181021944Z [inf]  ðŸ“¨ 27832844884: 8km
2026-01-06T16:50:14.181029172Z [inf]  50.34
2026-01-06T16:50:14.181032044Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:50:14.181033037Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:50:14.181037937Z [inf]  SBK03E
2026-01-06T16:50:14.181043452Z [err]          self.scope, self.receive, self.send
2026-01-06T16:50:14.181046005Z [inf]  INFO:     100.64.0.2:17042 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:50:14.181046346Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:50:14.181053471Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:50:14.181053485Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:50:14.181058157Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:50:14.181061417Z [err]  Traceback (most recent call last):
2026-01-06T16:50:14.181062388Z [err]      )
2026-01-06T16:50:14.181067854Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:50:14.181069936Z [err]      ^
2026-01-06T16:50:14.181074706Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:50:14.181077193Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:50:14.181083835Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:50:14.181092612Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:50:14.181108712Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:50:14.181116467Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:50:14.182607679Z [err]      raise exc
2026-01-06T16:50:14.182617342Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:50:14.182625601Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:50:14.182633075Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:50:14.182639712Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:50:14.182650722Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:50:14.182658437Z [err]      raise exc
2026-01-06T16:50:14.182665633Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:50:14.182674983Z [err]      await app(scope, receive, sender)
2026-01-06T16:50:14.182683080Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:50:14.182691045Z [err]      await self.app(scope, receive, send)
2026-01-06T16:50:14.182699051Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:50:14.182707524Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:50:14.182715193Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:50:14.182723581Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:50:14.182731846Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:50:14.182740117Z [err]      await self.app(scope, receive, send)
2026-01-06T16:50:14.182749415Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:50:14.182757390Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:50:14.184382296Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:50:14.184387668Z [err]      raise exc
2026-01-06T16:50:14.184392401Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:50:14.184397139Z [err]      await app(scope, receive, sender)
2026-01-06T16:50:14.184400989Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:50:14.184406659Z [err]      response = await f(request)
2026-01-06T16:50:14.184410512Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:50:14.184414810Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:50:14.184418452Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:50:14.184422394Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:50:14.184426113Z [err]      ...<3 lines>...
2026-01-06T16:50:14.184429907Z [err]      )
2026-01-06T16:50:14.184433601Z [err]      ^
2026-01-06T16:50:14.184437197Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:50:14.184441132Z [err]      return await dependant.call(**values)
2026-01-06T16:50:14.184445489Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:50:14.184449414Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:50:14.184453797Z [err]      event = get_active_event()
2026-01-06T16:50:14.184458285Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:50:14.184462185Z [err]      cur.execute(
2026-01-06T16:50:14.184465721Z [err]      ~~~~~~~~~~~^
2026-01-06T16:50:14.184469805Z [err]          """
2026-01-06T16:50:14.184473923Z [err]          ^^^
2026-01-06T16:50:14.184478468Z [err]      ...<7 lines>...
2026-01-06T16:50:14.186109629Z [err]          (day_of_week, current_time),
2026-01-06T16:50:14.186116534Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:50:14.186120995Z [err]      )
2026-01-06T16:50:14.186125609Z [err]      ^
2026-01-06T16:50:14.186130177Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:50:14.186134140Z [err]      return super().execute(query, vars)
2026-01-06T16:50:14.186138944Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:50:14.186142832Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:50:14.186147205Z [err]  LINE 5:           AND active = 1
2026-01-06T16:50:14.186150897Z [err]                               ^
2026-01-06T16:50:14.186154591Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:50:14.186159250Z [err]  
2026-01-06T16:50:14.366884482Z [err]  2026-01-06 16:50:12.439 UTC [9101] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:50:14.366892972Z [err]  2026-01-06 16:50:12.439 UTC [9101] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:50:14.366904033Z [err]  2026-01-06 16:50:12.439 UTC [9101] STATEMENT:  
2026-01-06T16:50:14.366915110Z [err]  	        SELECT event
2026-01-06T16:50:14.366924975Z [err]  	        FROM event_config
2026-01-06T16:50:14.366934100Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:50:14.366942879Z [err]  	          AND active = 1
2026-01-06T16:50:14.366954002Z [err]  	          AND '16:50' BETWEEN open_time AND close_time
2026-01-06T16:50:14.366963142Z [err]  	        LIMIT 1;
2026-01-06T16:50:14.366971904Z [err]  	        
2026-01-06T16:51:14.205971597Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:51:14.205978802Z [inf]  ðŸ“¨ 27634045059: ðŸƒðŸ¼â€â™€ï¸â€âž¡ï¸ Runner
2026-01-06T16:51:14.205980863Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:51:14.205986592Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:51:14.205988562Z [inf]  INFO:     100.64.0.9:43098 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:51:14.205991759Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:51:14.205995259Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:51:14.205997598Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:51:14.206000965Z [err]  Traceback (most recent call last):
2026-01-06T16:51:14.206004019Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:51:14.206006882Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:51:14.206009289Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:51:14.206013883Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:51:14.206014609Z [err]      raise exc
2026-01-06T16:51:14.206019815Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:51:14.206020165Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:51:14.206024424Z [err]          self.scope, self.receive, self.send
2026-01-06T16:51:14.206028361Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:51:14.206033896Z [err]      )
2026-01-06T16:51:14.206039077Z [err]      ^
2026-01-06T16:51:14.206043263Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:51:14.206926210Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:51:14.206926768Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:51:14.206936836Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:51:14.206937930Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:51:14.206946049Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:51:14.206947542Z [err]      await self.app(scope, receive, send)
2026-01-06T16:51:14.206952397Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:51:14.206954402Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:51:14.206958361Z [err]      raise exc
2026-01-06T16:51:14.206961604Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:51:14.206963706Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:51:14.206967202Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:51:14.206970197Z [err]      await app(scope, receive, sender)
2026-01-06T16:51:14.206974257Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:51:14.206977983Z [err]      await self.app(scope, receive, send)
2026-01-06T16:51:14.206983352Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:51:14.206987962Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:51:14.206992123Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:51:14.208301913Z [err]      ~~~~~~~~~~~^
2026-01-06T16:51:14.208309319Z [err]          """
2026-01-06T16:51:14.208311137Z [err]      raise exc
2026-01-06T16:51:14.208318226Z [err]          ^^^
2026-01-06T16:51:14.208318316Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:51:14.208324453Z [err]      await app(scope, receive, sender)
2026-01-06T16:51:14.208326060Z [err]      ...<7 lines>...
2026-01-06T16:51:14.208330227Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:51:14.208333999Z [err]          (day_of_week, current_time),
2026-01-06T16:51:14.208336134Z [err]      response = await f(request)
2026-01-06T16:51:14.208341064Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:51:14.208341212Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:51:14.208345722Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:51:14.208349467Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:51:14.208353493Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:51:14.208357424Z [err]      ...<3 lines>...
2026-01-06T16:51:14.208362252Z [err]      )
2026-01-06T16:51:14.208365970Z [err]      ^
2026-01-06T16:51:14.208370123Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:51:14.208374417Z [err]      return await dependant.call(**values)
2026-01-06T16:51:14.208377863Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:51:14.208382540Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:51:14.208388219Z [err]      event = get_active_event()
2026-01-06T16:51:14.208392667Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:51:14.208396369Z [err]      cur.execute(
2026-01-06T16:51:14.209365069Z [err]      )
2026-01-06T16:51:14.209371268Z [err]      ^
2026-01-06T16:51:14.209376614Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:51:14.209380789Z [err]      return super().execute(query, vars)
2026-01-06T16:51:14.209384682Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:51:14.209388879Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:51:14.209393794Z [err]  LINE 5:           AND active = 1
2026-01-06T16:51:14.209398072Z [err]                               ^
2026-01-06T16:51:14.209402088Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:51:14.209406779Z [err]  
2026-01-06T16:51:17.033938511Z [err]  2026-01-06 16:51:08.127 UTC [9106] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:51:17.033945085Z [err]  2026-01-06 16:51:08.127 UTC [9106] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:51:17.033952457Z [err]  2026-01-06 16:51:08.127 UTC [9106] STATEMENT:  
2026-01-06T16:51:17.033959834Z [err]  	        SELECT event
2026-01-06T16:51:17.033970731Z [err]  	        FROM event_config
2026-01-06T16:51:17.033980921Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:51:17.033988635Z [err]  	          AND active = 1
2026-01-06T16:51:17.037848419Z [err]  	          AND '16:51' BETWEEN open_time AND close_time
2026-01-06T16:51:17.037857724Z [err]  	        LIMIT 1;
2026-01-06T16:51:17.037862559Z [err]  	        
2026-01-06T16:51:34.316821613Z [inf]  ðŸ“¨ 27794789795: 8km 48:48 SBK03E
2026-01-06T16:51:34.316826338Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:51:34.316826828Z [inf]  INFO:     100.64.0.2:30070 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:51:34.316832084Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:51:34.316836900Z [err]  Traceback (most recent call last):
2026-01-06T16:51:34.316837768Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:51:34.316841203Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:51:34.316845725Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:51:34.316846173Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:51:34.316851767Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:51:34.316854127Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:51:34.316857043Z [err]          self.scope, self.receive, self.send
2026-01-06T16:51:34.316860932Z [err]      raise exc
2026-01-06T16:51:34.316863138Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:51:34.316868006Z [err]      )
2026-01-06T16:51:34.316868791Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:51:34.316873126Z [err]      ^
2026-01-06T16:51:34.316877641Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:51:34.316881968Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:51:34.316885917Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:51:34.316889809Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:51:34.317171434Z [err]      await self.app(scope, receive, send)
2026-01-06T16:51:34.317175994Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:51:34.317181124Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:51:34.317184484Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:51:34.317188043Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:51:34.317192190Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:51:34.317196134Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:51:34.317200641Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:51:34.317205754Z [err]      raise exc
2026-01-06T16:51:34.317209430Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:51:34.317213684Z [err]      await app(scope, receive, sender)
2026-01-06T16:51:34.317217804Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:51:34.317222438Z [err]      await self.app(scope, receive, send)
2026-01-06T16:51:34.317227600Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:51:34.317231450Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:51:34.317235764Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:51:34.317240172Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:51:34.317245056Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:51:34.318258651Z [err]      raise exc
2026-01-06T16:51:34.318263374Z [err]      cur.execute(
2026-01-06T16:51:34.318269055Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:51:34.318271873Z [err]      ~~~~~~~~~~~^
2026-01-06T16:51:34.318274461Z [err]      ^
2026-01-06T16:51:34.318276430Z [err]      await app(scope, receive, sender)
2026-01-06T16:51:34.318279436Z [err]          """
2026-01-06T16:51:34.318283950Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:51:34.318286422Z [err]          ^^^
2026-01-06T16:51:34.318289763Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:51:34.318292347Z [err]      response = await f(request)
2026-01-06T16:51:34.318293736Z [err]      ...<7 lines>...
2026-01-06T16:51:34.318298645Z [err]      return await dependant.call(**values)
2026-01-06T16:51:34.318300001Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:51:34.318300447Z [err]          (day_of_week, current_time),
2026-01-06T16:51:34.318307266Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:51:34.318307749Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:51:34.318308404Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:51:34.318314173Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:51:34.318315567Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:51:34.318321226Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:51:34.318323258Z [err]      event = get_active_event()
2026-01-06T16:51:34.318326914Z [err]      ...<3 lines>...
2026-01-06T16:51:34.318333291Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:51:34.318333829Z [err]      )
2026-01-06T16:51:34.319118184Z [err]      )
2026-01-06T16:51:34.319127389Z [err]      ^
2026-01-06T16:51:34.319133872Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:51:34.319140735Z [err]      return super().execute(query, vars)
2026-01-06T16:51:34.319151470Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:51:34.319162126Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:51:34.319168315Z [err]  LINE 5:           AND active = 1
2026-01-06T16:51:34.319174586Z [err]                               ^
2026-01-06T16:51:34.319180404Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:51:34.319186214Z [err]  
2026-01-06T16:51:34.319194010Z [inf]  ðŸ“¨ 27794789795: 8km 48:48 SBK03E
2026-01-06T16:51:34.319202601Z [inf]  INFO:     100.64.0.8:53656 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:51:34.319210567Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:51:34.319225366Z [err]  Traceback (most recent call last):
2026-01-06T16:51:34.319233639Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:51:34.319243676Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:51:34.319252146Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:51:34.319261324Z [err]          self.scope, self.receive, self.send
2026-01-06T16:51:34.319271272Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:51:34.319280261Z [err]      )
2026-01-06T16:51:34.319289916Z [err]      ^
2026-01-06T16:51:34.319297180Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:51:34.319302736Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:51:34.320019944Z [err]      await self.app(scope, receive, send)
2026-01-06T16:51:34.320028376Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:51:34.320035638Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:51:34.320036548Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:51:34.320042753Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:51:34.320048188Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:51:34.320053184Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:51:34.320058371Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:51:34.320064091Z [err]      raise exc
2026-01-06T16:51:34.320069490Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:51:34.320074620Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:51:34.320080022Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:51:34.320085121Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:51:34.320090705Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:51:34.320096064Z [err]      raise exc
2026-01-06T16:51:34.320102236Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:51:34.320107551Z [err]      await app(scope, receive, sender)
2026-01-06T16:51:34.320112811Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:51:34.320925217Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:51:34.320934658Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:51:34.320941718Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:51:34.320947865Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:51:34.320955044Z [err]      await self.app(scope, receive, send)
2026-01-06T16:51:34.320961714Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:51:34.320969677Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:51:34.320977060Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:51:34.320983187Z [err]      raise exc
2026-01-06T16:51:34.320989236Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:51:34.320997042Z [err]      await app(scope, receive, sender)
2026-01-06T16:51:34.321004227Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:51:34.321010950Z [err]      response = await f(request)
2026-01-06T16:51:34.321016895Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:51:34.321023249Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:51:34.321031621Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:51:34.321037376Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:51:34.321043802Z [err]      ...<3 lines>...
2026-01-06T16:51:34.321051401Z [err]      )
2026-01-06T16:51:34.321058752Z [err]      ^
2026-01-06T16:51:34.321064819Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:51:34.322385798Z [err]                               ^
2026-01-06T16:51:34.322386644Z [err]      return await dependant.call(**values)
2026-01-06T16:51:34.322390558Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:51:34.322396461Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:51:34.322396466Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:51:34.322400935Z [err]      )
2026-01-06T16:51:34.322405894Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:51:34.322406301Z [err]  
2026-01-06T16:51:34.322409842Z [err]      ^
2026-01-06T16:51:34.322415145Z [inf]  ðŸ“¨ 27794789795: 8km 48:48 SBK03E
2026-01-06T16:51:34.322417301Z [err]      event = get_active_event()
2026-01-06T16:51:34.322420863Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:51:34.322425716Z [inf]  INFO:     100.64.0.8:53672 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:51:34.322427088Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:51:34.322429641Z [err]      return super().execute(query, vars)
2026-01-06T16:51:34.322434308Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:51:34.322436440Z [err]      cur.execute(
2026-01-06T16:51:34.322439783Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:51:34.322445046Z [err]      ~~~~~~~~~~~^
2026-01-06T16:51:34.322448678Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:51:34.322456379Z [err]          """
2026-01-06T16:51:34.322456921Z [err]  LINE 5:           AND active = 1
2026-01-06T16:51:34.322464518Z [err]          ^^^
2026-01-06T16:51:34.322471474Z [err]      ...<7 lines>...
2026-01-06T16:51:34.322477875Z [err]          (day_of_week, current_time),
2026-01-06T16:51:34.323274671Z [err]  Traceback (most recent call last):
2026-01-06T16:51:34.323279788Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:51:34.323282499Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:51:34.323287963Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:51:34.323289297Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:51:34.323295021Z [err]      raise exc
2026-01-06T16:51:34.323296524Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:51:34.323302071Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:51:34.323303035Z [err]          self.scope, self.receive, self.send
2026-01-06T16:51:34.323309038Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:51:34.323309947Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:51:34.323315920Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:51:34.323317873Z [err]      )
2026-01-06T16:51:34.323323746Z [err]      ^
2026-01-06T16:51:34.323329530Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:51:34.323335944Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:51:34.323342086Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:51:34.323348476Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:51:34.323354648Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:51:34.323360994Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:51:34.324443887Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:51:34.324448071Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:51:34.324453604Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:51:34.324454279Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:51:34.324462290Z [err]      raise exc
2026-01-06T16:51:34.324466761Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:51:34.324471349Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:51:34.324479164Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:51:34.324481088Z [err]      await app(scope, receive, sender)
2026-01-06T16:51:34.324487762Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:51:34.324492244Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:51:34.324492615Z [err]      raise exc
2026-01-06T16:51:34.324495300Z [err]      await self.app(scope, receive, send)
2026-01-06T16:51:34.324502042Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:51:34.324509384Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:51:34.324518675Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:51:34.324529306Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:51:34.324541768Z [err]      await self.app(scope, receive, send)
2026-01-06T16:51:34.325575964Z [err]      await app(scope, receive, sender)
2026-01-06T16:51:34.325585848Z [err]          (day_of_week, current_time),
2026-01-06T16:51:34.325587011Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:51:34.325588492Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:51:34.325601775Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:51:34.325602695Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:51:34.325603159Z [err]      response = await f(request)
2026-01-06T16:51:34.325617130Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:51:34.325618118Z [err]      event = get_active_event()
2026-01-06T16:51:34.325618351Z [err]      )
2026-01-06T16:51:34.325624906Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:51:34.325632580Z [err]      ^
2026-01-06T16:51:34.325634454Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:51:34.325635871Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:51:34.325647456Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:51:34.325648193Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:51:34.325652204Z [err]      cur.execute(
2026-01-06T16:51:34.325656610Z [err]      ...<3 lines>...
2026-01-06T16:51:34.325664774Z [err]      )
2026-01-06T16:51:34.325671363Z [err]      ~~~~~~~~~~~^
2026-01-06T16:51:34.325672099Z [err]      ^
2026-01-06T16:51:34.325682060Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:51:34.325687420Z [err]          """
2026-01-06T16:51:34.325689475Z [err]      return await dependant.call(**values)
2026-01-06T16:51:34.325698876Z [err]          ^^^
2026-01-06T16:51:34.325705841Z [err]      ...<7 lines>...
2026-01-06T16:51:34.326087588Z [err]      return super().execute(query, vars)
2026-01-06T16:51:34.326097647Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:51:34.326106418Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:51:34.326113714Z [err]  LINE 5:           AND active = 1
2026-01-06T16:51:34.326121131Z [err]                               ^
2026-01-06T16:51:34.326128711Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:51:34.326136001Z [err]  
2026-01-06T16:51:35.453308467Z [inf]  ðŸ“¨ 27794789795: 8km 48:48 SBK03E
2026-01-06T16:51:35.725740169Z [inf]  INFO:     100.64.0.8:33246 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:51:35.725753286Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:51:35.725762720Z [err]  Traceback (most recent call last):
2026-01-06T16:51:35.725773468Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:51:35.725781569Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:51:35.725789442Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:51:35.725797165Z [err]          self.scope, self.receive, self.send
2026-01-06T16:51:35.725806190Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:51:35.725814173Z [err]      )
2026-01-06T16:51:35.725823063Z [err]      ^
2026-01-06T16:51:35.725830230Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:51:35.725859966Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:51:35.725865784Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:51:35.725872948Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:51:35.725880178Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:51:35.725887492Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:51:35.725895353Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:51:35.725903443Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:51:35.725911213Z [err]      raise exc
2026-01-06T16:51:35.725918536Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:51:35.726841893Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:51:35.726850576Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:51:35.726857931Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:51:35.726867432Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:51:35.726874866Z [err]      raise exc
2026-01-06T16:51:35.726882710Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:51:35.726890729Z [err]      await app(scope, receive, sender)
2026-01-06T16:51:35.726897969Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:51:35.726905102Z [err]      await self.app(scope, receive, send)
2026-01-06T16:51:35.726911886Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:51:35.726920443Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:51:35.726927691Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:51:35.726934262Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:51:35.726941402Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:51:35.726948107Z [err]      await self.app(scope, receive, send)
2026-01-06T16:51:35.726954673Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:51:35.726961346Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:51:35.726968526Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:51:35.728570838Z [err]      raise exc
2026-01-06T16:51:35.728579072Z [err]          (day_of_week, current_time),
2026-01-06T16:51:35.728579776Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:51:35.728587328Z [err]      await app(scope, receive, sender)
2026-01-06T16:51:35.728587944Z [err]      ...<3 lines>...
2026-01-06T16:51:35.728588030Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:51:35.728588529Z [err]      event = get_active_event()
2026-01-06T16:51:35.728592647Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:51:35.728598780Z [err]      response = await f(request)
2026-01-06T16:51:35.728599090Z [err]      )
2026-01-06T16:51:35.728604940Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:51:35.728608532Z [err]      cur.execute(
2026-01-06T16:51:35.728609045Z [err]      ^
2026-01-06T16:51:35.728611475Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:51:35.728616140Z [err]      ~~~~~~~~~~~^
2026-01-06T16:51:35.728618279Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:51:35.728619689Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:51:35.728622573Z [err]          ^^^
2026-01-06T16:51:35.728624943Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:51:35.728625085Z [err]          """
2026-01-06T16:51:35.728630272Z [err]      return await dependant.call(**values)
2026-01-06T16:51:35.728632493Z [err]      ...<7 lines>...
2026-01-06T16:51:35.728638672Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:51:35.728645883Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:51:35.729264412Z [err]      )
2026-01-06T16:51:35.729266666Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:51:35.729274083Z [err]      ^
2026-01-06T16:51:35.729277903Z [err]  
2026-01-06T16:51:35.729281855Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:51:35.729287836Z [err]      return super().execute(query, vars)
2026-01-06T16:51:35.729293755Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:51:35.729300573Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:51:35.729306498Z [err]  LINE 5:           AND active = 1
2026-01-06T16:51:35.729311968Z [err]                               ^
2026-01-06T16:51:37.044669800Z [err]  	        SELECT event
2026-01-06T16:51:37.044687141Z [err]  	        FROM event_config
2026-01-06T16:51:37.044698326Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:51:37.044705172Z [err]  	          AND active = 1
2026-01-06T16:51:37.044714033Z [err]  	          AND '16:51' BETWEEN open_time AND close_time
2026-01-06T16:51:37.044736060Z [err]  	        LIMIT 1;
2026-01-06T16:51:37.044745416Z [err]  	        
2026-01-06T16:51:37.044753135Z [err]  2026-01-06 16:51:34.134 UTC [9113] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:51:37.044764467Z [err]  2026-01-06 16:51:34.134 UTC [9113] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:51:37.044776737Z [err]  2026-01-06 16:51:32.691 UTC [9109] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:51:37.044797735Z [err]  2026-01-06 16:51:32.691 UTC [9109] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:51:37.044804776Z [err]  2026-01-06 16:51:32.691 UTC [9109] STATEMENT:  
2026-01-06T16:51:37.044811400Z [err]  	        SELECT event
2026-01-06T16:51:37.044818294Z [err]  	        FROM event_config
2026-01-06T16:51:37.044824620Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:51:37.044831402Z [err]  	          AND active = 1
2026-01-06T16:51:37.044837439Z [err]  	          AND '16:51' BETWEEN open_time AND close_time
2026-01-06T16:51:37.044845060Z [err]  	        LIMIT 1;
2026-01-06T16:51:37.044851481Z [err]  	        
2026-01-06T16:51:37.044858564Z [err]  2026-01-06 16:51:33.443 UTC [9111] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:51:37.044865855Z [err]  2026-01-06 16:51:33.443 UTC [9111] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:51:37.044872930Z [err]  2026-01-06 16:51:33.443 UTC [9111] STATEMENT:  
2026-01-06T16:51:37.055782379Z [err]  2026-01-06 16:51:34.134 UTC [9113] STATEMENT:  
2026-01-06T16:51:37.055791429Z [err]  	        SELECT event
2026-01-06T16:51:37.055798271Z [err]  	        FROM event_config
2026-01-06T16:51:37.055806385Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:51:37.055813454Z [err]  	          AND active = 1
2026-01-06T16:51:37.055821738Z [err]  	          AND '16:51' BETWEEN open_time AND close_time
2026-01-06T16:51:37.055828904Z [err]  	        LIMIT 1;
2026-01-06T16:51:37.055837682Z [err]  	        
2026-01-06T16:51:37.055844742Z [err]  2026-01-06 16:51:35.717 UTC [9115] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:51:37.055851988Z [err]  2026-01-06 16:51:35.717 UTC [9115] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:51:37.055859084Z [err]  2026-01-06 16:51:35.717 UTC [9115] STATEMENT:  
2026-01-06T16:51:37.055867074Z [err]  	        SELECT event
2026-01-06T16:51:37.055873001Z [err]  	        FROM event_config
2026-01-06T16:51:37.055878833Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:51:37.055887384Z [err]  	          AND active = 1
2026-01-06T16:51:37.055892646Z [err]  	          AND '16:51' BETWEEN open_time AND close_time
2026-01-06T16:51:37.055898517Z [err]  	        LIMIT 1;
2026-01-06T16:51:37.055903521Z [err]  	        
2026-01-06T16:51:39.429201544Z [inf]  ðŸ“¨ 27794789795: 8km 48:48 SBK03E
2026-01-06T16:51:39.539805995Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:51:39.539810079Z [inf]  INFO:     100.64.0.3:23592 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:51:39.539816709Z [err]          self.scope, self.receive, self.send
2026-01-06T16:51:39.539822659Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:51:39.539825704Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:51:39.539827526Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:51:39.539832876Z [err]      raise exc
2026-01-06T16:51:39.539835226Z [err]  Traceback (most recent call last):
2026-01-06T16:51:39.539836259Z [err]      )
2026-01-06T16:51:39.539842256Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:51:39.539843977Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:51:39.539844236Z [err]      ^
2026-01-06T16:51:39.539851671Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:51:39.539851904Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:51:39.539859661Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:51:39.539859894Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:51:39.539866427Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:51:39.539871899Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:51:39.539877835Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:51:39.539886499Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:51:39.540639254Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:51:39.540647338Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:51:39.540654160Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:51:39.540659338Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:51:39.540666113Z [err]      raise exc
2026-01-06T16:51:39.540672647Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:51:39.540678789Z [err]      await app(scope, receive, sender)
2026-01-06T16:51:39.540685201Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:51:39.540692316Z [err]      await self.app(scope, receive, send)
2026-01-06T16:51:39.540699509Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:51:39.540706179Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:51:39.540712730Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:51:39.540719249Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:51:39.540725644Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:51:39.540733278Z [err]      await self.app(scope, receive, send)
2026-01-06T16:51:39.540740139Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:51:39.540745333Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:51:39.540749413Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:51:39.541884576Z [err]      raise exc
2026-01-06T16:51:39.541891705Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:51:39.541897520Z [err]      await app(scope, receive, sender)
2026-01-06T16:51:39.541906001Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:51:39.541913514Z [err]      response = await f(request)
2026-01-06T16:51:39.541922442Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:51:39.541930912Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:51:39.541939511Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:51:39.541947361Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:51:39.541949129Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:51:39.541953519Z [err]      cur.execute(
2026-01-06T16:51:39.541956560Z [err]      ...<3 lines>...
2026-01-06T16:51:39.541963012Z [err]      )
2026-01-06T16:51:39.541965012Z [err]      ~~~~~~~~~~~^
2026-01-06T16:51:39.541970354Z [err]      ^
2026-01-06T16:51:39.541973929Z [err]          """
2026-01-06T16:51:39.541976950Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:51:39.541982529Z [err]          ^^^
2026-01-06T16:51:39.541983349Z [err]      return await dependant.call(**values)
2026-01-06T16:51:39.541991232Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:51:39.541991235Z [err]      ...<7 lines>...
2026-01-06T16:51:39.541998180Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:51:39.542000524Z [err]          (day_of_week, current_time),
2026-01-06T16:51:39.542004358Z [err]      event = get_active_event()
2026-01-06T16:51:39.542010294Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:51:39.542874443Z [err]      return super().execute(query, vars)
2026-01-06T16:51:39.542882251Z [err]      )
2026-01-06T16:51:39.542884622Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:51:39.542893797Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:51:39.542894842Z [err]      ^
2026-01-06T16:51:39.542903598Z [err]  LINE 5:           AND active = 1
2026-01-06T16:51:39.542905593Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:51:39.542911959Z [err]                               ^
2026-01-06T16:51:39.542918762Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:51:39.542926390Z [err]  
2026-01-06T16:51:40.003694086Z [err]  2026-01-06 16:51:39.532 UTC [9117] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:51:40.003699801Z [err]  2026-01-06 16:51:39.532 UTC [9117] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:51:40.003706364Z [err]  2026-01-06 16:51:39.532 UTC [9117] STATEMENT:  
2026-01-06T16:51:40.003713204Z [err]  	        SELECT event
2026-01-06T16:51:40.003718774Z [err]  	        FROM event_config
2026-01-06T16:51:40.003724363Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:51:40.003730023Z [err]  	          AND active = 1
2026-01-06T16:51:40.003736490Z [err]  	          AND '16:51' BETWEEN open_time AND close_time
2026-01-06T16:51:40.003743297Z [err]  	        LIMIT 1;
2026-01-06T16:51:40.003749071Z [err]  	        
2026-01-06T16:52:29.843909303Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:52:29.843909953Z [inf]  ðŸ“¨ 27725957859: 6km 54:44 SBK03E
2026-01-06T16:52:29.843922917Z [inf]  INFO:     100.64.0.2:36876 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:52:29.843924122Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:52:29.843931307Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:52:29.843934258Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:52:29.843939896Z [err]  Traceback (most recent call last):
2026-01-06T16:52:29.843943331Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:52:29.843948563Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:52:29.843953987Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:52:29.843957349Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:52:29.843963330Z [err]      raise exc
2026-01-06T16:52:29.843966441Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:29.843973092Z [err]          self.scope, self.receive, self.send
2026-01-06T16:52:29.843980636Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:29.843987927Z [err]      )
2026-01-06T16:52:29.843994519Z [err]      ^
2026-01-06T16:52:29.844001045Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:52:29.844006505Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:52:29.844010831Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:29.844880000Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:52:29.844892953Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:52:29.844894150Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:52:29.844902061Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:52:29.844911763Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:52:29.844914840Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:52:29.844925498Z [err]      await self.app(scope, receive, send)
2026-01-06T16:52:29.844928175Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:52:29.844937816Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:52:29.844942159Z [err]      raise exc
2026-01-06T16:52:29.844950006Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:52:29.844955416Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:52:29.844962938Z [err]      await app(scope, receive, sender)
2026-01-06T16:52:29.844970037Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:52:29.844977581Z [err]      await self.app(scope, receive, send)
2026-01-06T16:52:29.844985176Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:52:29.844992142Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:52:29.844999183Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:52:29.846099324Z [err]      ...<7 lines>...
2026-01-06T16:52:29.846100911Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:52:29.846110866Z [err]      raise exc
2026-01-06T16:52:29.846112622Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:29.846119139Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:52:29.846125863Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:52:29.846125901Z [err]      await app(scope, receive, sender)
2026-01-06T16:52:29.846132788Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:52:29.846134382Z [err]      event = get_active_event()
2026-01-06T16:52:29.846140072Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:52:29.846141917Z [err]      response = await f(request)
2026-01-06T16:52:29.846145713Z [err]      cur.execute(
2026-01-06T16:52:29.846151337Z [err]      ~~~~~~~~~~~^
2026-01-06T16:52:29.846152017Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:52:29.846156573Z [err]          """
2026-01-06T16:52:29.846161316Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:52:29.846162618Z [err]          ^^^
2026-01-06T16:52:29.846170772Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:52:29.846176029Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:29.846181615Z [err]      ...<3 lines>...
2026-01-06T16:52:29.846186287Z [err]      )
2026-01-06T16:52:29.846191782Z [err]      ^
2026-01-06T16:52:29.846198893Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:52:29.846204116Z [err]      return await dependant.call(**values)
2026-01-06T16:52:29.846819780Z [err]          (day_of_week, current_time),
2026-01-06T16:52:29.846821711Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:52:29.846828117Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:29.846828213Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:29.846834249Z [err]          self.scope, self.receive, self.send
2026-01-06T16:52:29.846834942Z [err]      )
2026-01-06T16:52:29.846840647Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:29.846841435Z [err]      ^
2026-01-06T16:52:29.846845981Z [err]      )
2026-01-06T16:52:29.846847603Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:52:29.846851552Z [err]      ^
2026-01-06T16:52:29.846853309Z [err]      return super().execute(query, vars)
2026-01-06T16:52:29.846856881Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:52:29.846858587Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:52:29.846862989Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:52:29.846867753Z [err]  LINE 5:           AND active = 1
2026-01-06T16:52:29.846871863Z [err]                               ^
2026-01-06T16:52:29.846876080Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:52:29.846881060Z [err]  
2026-01-06T16:52:29.846885026Z [inf]  ðŸ“¨ 27725957859: 6km 54:44 SBK03E
2026-01-06T16:52:29.846888919Z [inf]  INFO:     100.64.0.9:51656 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:52:29.846892942Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:52:29.846897672Z [err]  Traceback (most recent call last):
2026-01-06T16:52:29.846901438Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:52:29.847894005Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:52:29.847902080Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:29.847903782Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:52:29.847908759Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:52:29.847916938Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:52:29.847921181Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:52:29.847925839Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:52:29.847926251Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:52:29.847926336Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:52:29.847932465Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:52:29.847934991Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:52:29.847937859Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:52:29.847941926Z [err]      raise exc
2026-01-06T16:52:29.847945557Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:52:29.847946135Z [err]      await app(scope, receive, sender)
2026-01-06T16:52:29.847955867Z [err]      raise exc
2026-01-06T16:52:29.847972334Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:52:29.847979317Z [err]      await self.app(scope, receive, send)
2026-01-06T16:52:29.847987054Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:52:29.848678176Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:52:29.848684405Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:52:29.848688787Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:52:29.848693066Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:52:29.848700901Z [err]      await self.app(scope, receive, send)
2026-01-06T16:52:29.848708084Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:52:29.848715796Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:52:29.848722511Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:52:29.848728189Z [err]      raise exc
2026-01-06T16:52:29.848733863Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:52:29.848738613Z [err]      await app(scope, receive, sender)
2026-01-06T16:52:29.848742409Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:52:29.848746794Z [err]      response = await f(request)
2026-01-06T16:52:29.848750827Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:52:29.848754436Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:52:29.848758443Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:52:29.848762096Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:29.848766976Z [err]      ...<3 lines>...
2026-01-06T16:52:29.848770864Z [err]      )
2026-01-06T16:52:29.848774589Z [err]      ^
2026-01-06T16:52:29.848778684Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:52:29.849539206Z [err]      return await dependant.call(**values)
2026-01-06T16:52:29.849549075Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:29.849553105Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:52:29.849555599Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:52:29.849557478Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:52:29.849563448Z [err]      event = get_active_event()
2026-01-06T16:52:29.849565914Z [err]      return super().execute(query, vars)
2026-01-06T16:52:29.849568991Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:52:29.849574143Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:52:29.849574201Z [err]      cur.execute(
2026-01-06T16:52:29.849580682Z [err]      ~~~~~~~~~~~^
2026-01-06T16:52:29.849582366Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:52:29.849585667Z [err]          """
2026-01-06T16:52:29.849590296Z [err]  LINE 5:           AND active = 1
2026-01-06T16:52:29.849591079Z [err]          ^^^
2026-01-06T16:52:29.849595638Z [err]      ...<7 lines>...
2026-01-06T16:52:29.849599572Z [err]                               ^
2026-01-06T16:52:29.849600367Z [err]          (day_of_week, current_time),
2026-01-06T16:52:29.849605182Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:29.849608319Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:52:29.849610069Z [err]      )
2026-01-06T16:52:29.849614698Z [err]      ^
2026-01-06T16:52:29.849618287Z [err]  
2026-01-06T16:52:29.849624569Z [inf]  ðŸ“¨ 27725957859: 6km 54:44 SBK03E
2026-01-06T16:52:29.849629003Z [inf]  INFO:     100.64.0.4:25954 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:52:29.850746316Z [err]      raise exc
2026-01-06T16:52:29.850751886Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:52:29.850756839Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:52:29.850761016Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:52:29.850772734Z [err]  Traceback (most recent call last):
2026-01-06T16:52:29.850781581Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:52:29.850788261Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:52:29.850793469Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:29.850798519Z [err]          self.scope, self.receive, self.send
2026-01-06T16:52:29.850806761Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:29.850812023Z [err]      )
2026-01-06T16:52:29.850817887Z [err]      ^
2026-01-06T16:52:29.850823245Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:52:29.850828530Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:52:29.850833715Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:29.850838942Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:52:29.850843947Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:52:29.850847971Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:52:29.850853002Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:52:29.850858039Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:52:29.851570223Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:52:29.851575963Z [err]      await self.app(scope, receive, send)
2026-01-06T16:52:29.851580039Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:52:29.851585745Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:52:29.851589230Z [err]      raise exc
2026-01-06T16:52:29.851593639Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:52:29.851598245Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:52:29.851601091Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:52:29.851605251Z [err]      await app(scope, receive, sender)
2026-01-06T16:52:29.851608416Z [err]      raise exc
2026-01-06T16:52:29.851611895Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:52:29.851617483Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:52:29.851618784Z [err]      await self.app(scope, receive, send)
2026-01-06T16:52:29.851622946Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:52:29.851626559Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:52:29.851629904Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:52:29.851634166Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:52:29.851637610Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:52:29.852647039Z [err]      await app(scope, receive, sender)
2026-01-06T16:52:29.852652005Z [err]      ...<7 lines>...
2026-01-06T16:52:29.852653897Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:52:29.852658835Z [err]      response = await f(request)
2026-01-06T16:52:29.852661504Z [err]          (day_of_week, current_time),
2026-01-06T16:52:29.852663577Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:52:29.852668302Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:29.852668423Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:52:29.852673759Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:52:29.852674984Z [err]      )
2026-01-06T16:52:29.852680262Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:29.852680982Z [err]      ^
2026-01-06T16:52:29.852685788Z [err]      ...<3 lines>...
2026-01-06T16:52:29.852686152Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:52:29.852690379Z [err]      )
2026-01-06T16:52:29.852694675Z [err]      ^
2026-01-06T16:52:29.852699803Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:52:29.852703898Z [err]      return await dependant.call(**values)
2026-01-06T16:52:29.852707935Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:29.852712429Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:52:29.852716189Z [err]      event = get_active_event()
2026-01-06T16:52:29.852719589Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:52:29.852723925Z [err]      cur.execute(
2026-01-06T16:52:29.852728101Z [err]      ~~~~~~~~~~~^
2026-01-06T16:52:29.852732172Z [err]          """
2026-01-06T16:52:29.852735697Z [err]          ^^^
2026-01-06T16:52:29.853792898Z [err]      return super().execute(query, vars)
2026-01-06T16:52:29.853794135Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:29.853800189Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:52:29.853801562Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:52:29.853802737Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:29.853807032Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:52:29.853811952Z [err]  Traceback (most recent call last):
2026-01-06T16:52:29.853812783Z [err]  LINE 5:           AND active = 1
2026-01-06T16:52:29.853814622Z [err]      )
2026-01-06T16:52:29.853819157Z [err]                               ^
2026-01-06T16:52:29.853819714Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:52:29.853824414Z [err]      ^
2026-01-06T16:52:29.853826285Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:52:29.853826316Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:52:29.853827222Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:52:29.853848785Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:29.853850771Z [err]  
2026-01-06T16:52:29.853856706Z [err]          self.scope, self.receive, self.send
2026-01-06T16:52:29.853860889Z [inf]  ðŸ“¨ 27725957859: 6km 54:44 SBK03E
2026-01-06T16:52:29.853868022Z [inf]  INFO:     100.64.0.5:60288 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:52:29.853872170Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:52:29.853876742Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:52:29.854660539Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:52:29.854671287Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:52:29.854678692Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:52:29.854686939Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:52:29.854694615Z [err]      raise exc
2026-01-06T16:52:29.854702478Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:52:29.854711309Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:52:29.854718253Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:52:29.854725544Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:52:29.854733857Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:52:29.854740575Z [err]      raise exc
2026-01-06T16:52:29.854747430Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:52:29.854754179Z [err]      await app(scope, receive, sender)
2026-01-06T16:52:29.854762964Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:52:29.854770385Z [err]      await self.app(scope, receive, send)
2026-01-06T16:52:29.854777438Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:52:29.854784467Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:52:29.854791384Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:52:29.856021165Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:52:29.856032281Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:29.856040167Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:52:29.856041837Z [err]      ...<3 lines>...
2026-01-06T16:52:29.856050363Z [err]      )
2026-01-06T16:52:29.856052749Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:52:29.856058929Z [err]      ^
2026-01-06T16:52:29.856062767Z [err]      await self.app(scope, receive, send)
2026-01-06T16:52:29.856066734Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:52:29.856072900Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:52:29.856075465Z [err]      return await dependant.call(**values)
2026-01-06T16:52:29.856082120Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:52:29.856083565Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:29.856091637Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:52:29.856098551Z [err]      raise exc
2026-01-06T16:52:29.856105650Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:52:29.856112799Z [err]      await app(scope, receive, sender)
2026-01-06T16:52:29.856120522Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:52:29.856127906Z [err]      response = await f(request)
2026-01-06T16:52:29.856134725Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:52:29.856143079Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:52:29.857172094Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:52:29.857178729Z [err]      event = get_active_event()
2026-01-06T16:52:29.857181089Z [err]      return super().execute(query, vars)
2026-01-06T16:52:29.857184488Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:52:29.857189739Z [err]      cur.execute(
2026-01-06T16:52:29.857192015Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:52:29.857195275Z [err]      ~~~~~~~~~~~^
2026-01-06T16:52:29.857200462Z [err]          """
2026-01-06T16:52:29.857203513Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:52:29.857205734Z [err]          ^^^
2026-01-06T16:52:29.857210805Z [err]      ...<7 lines>...
2026-01-06T16:52:29.857212752Z [err]  LINE 5:           AND active = 1
2026-01-06T16:52:29.857215630Z [err]          (day_of_week, current_time),
2026-01-06T16:52:29.857221842Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:29.857222455Z [err]                               ^
2026-01-06T16:52:29.857227625Z [err]      )
2026-01-06T16:52:29.857233109Z [err]      ^
2026-01-06T16:52:29.857233814Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:52:29.857239553Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:52:29.857242756Z [err]  
2026-01-06T16:52:29.953867223Z [err]  	          AND '16:52' BETWEEN open_time AND close_time
2026-01-06T16:52:29.953875657Z [err]  	        LIMIT 1;
2026-01-06T16:52:29.953882991Z [err]  	        
2026-01-06T16:52:29.953890150Z [err]  2026-01-06 16:52:20.995 UTC [9123] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:52:29.953898700Z [err]  2026-01-06 16:52:20.995 UTC [9123] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:52:29.953906860Z [err]  2026-01-06 16:52:20.995 UTC [9123] STATEMENT:  
2026-01-06T16:52:29.953914537Z [err]  	        SELECT event
2026-01-06T16:52:29.953922081Z [err]  	        FROM event_config
2026-01-06T16:52:29.953929084Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:52:29.953937120Z [err]  	          AND active = 1
2026-01-06T16:52:29.953944715Z [err]  	          AND '16:52' BETWEEN open_time AND close_time
2026-01-06T16:52:29.953951321Z [err]  	        LIMIT 1;
2026-01-06T16:52:29.953958372Z [err]  	        
2026-01-06T16:52:29.954002780Z [err]  2026-01-06 16:52:21.460 UTC [9125] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:52:29.954018374Z [err]  2026-01-06 16:52:21.460 UTC [9125] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:52:29.954038058Z [err]  2026-01-06 16:52:20.510 UTC [9121] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:52:29.954046096Z [err]  2026-01-06 16:52:20.510 UTC [9121] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:52:29.954053480Z [err]  2026-01-06 16:52:20.510 UTC [9121] STATEMENT:  
2026-01-06T16:52:29.954061918Z [err]  	        SELECT event
2026-01-06T16:52:29.954073256Z [err]  	        FROM event_config
2026-01-06T16:52:29.954080966Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:52:29.954090920Z [err]  	          AND active = 1
2026-01-06T16:52:30.975011813Z [err]  	        FROM event_config
2026-01-06T16:52:30.975044489Z [err]  2026-01-06 16:52:21.460 UTC [9125] STATEMENT:  
2026-01-06T16:52:30.975061172Z [err]  	        SELECT event
2026-01-06T16:52:30.981465435Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:52:30.981481811Z [err]  	          AND active = 1
2026-01-06T16:52:30.981491525Z [err]  	          AND '16:52' BETWEEN open_time AND close_time
2026-01-06T16:52:30.981505982Z [err]  	        LIMIT 1;
2026-01-06T16:52:30.981514493Z [err]  	        
2026-01-06T16:52:30.981522772Z [err]  2026-01-06 16:52:23.317 UTC [9127] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:52:30.981531635Z [err]  2026-01-06 16:52:23.317 UTC [9127] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:52:30.981539950Z [err]  2026-01-06 16:52:23.317 UTC [9127] STATEMENT:  
2026-01-06T16:52:30.981550194Z [err]  	        SELECT event
2026-01-06T16:52:30.981559588Z [err]  	        FROM event_config
2026-01-06T16:52:30.981575587Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:52:30.981586023Z [err]  	          AND active = 1
2026-01-06T16:52:30.981594281Z [err]  	          AND '16:52' BETWEEN open_time AND close_time
2026-01-06T16:52:30.981603201Z [err]  	        LIMIT 1;
2026-01-06T16:52:30.981611994Z [err]  	        
2026-01-06T16:52:37.649828199Z [inf]  ðŸ“¨ 27832844884: 8km
2026-01-06T16:52:37.649867879Z [inf]  50.34
2026-01-06T16:52:37.649875904Z [inf]  SBK03E
2026-01-06T16:52:37.917673796Z [inf]  INFO:     100.64.0.5:53400 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:52:37.917676409Z [err]      )
2026-01-06T16:52:37.917684190Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:52:37.917689826Z [err]      ^
2026-01-06T16:52:37.917693319Z [err]  Traceback (most recent call last):
2026-01-06T16:52:37.917699686Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:52:37.917701456Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:52:37.917709496Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:52:37.917709628Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:52:37.917718733Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:37.917720656Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:37.917727770Z [err]          self.scope, self.receive, self.send
2026-01-06T16:52:37.917730576Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:52:37.917736263Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:37.917738088Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:52:37.917742833Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:52:37.917746426Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:52:37.917751611Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:52:37.917755574Z [err]      raise exc
2026-01-06T16:52:37.917762861Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:52:37.918606412Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:52:37.918610047Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:52:37.918616117Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:52:37.918621386Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:52:37.918622828Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:52:37.918627323Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:52:37.918631781Z [err]      await self.app(scope, receive, send)
2026-01-06T16:52:37.918633130Z [err]      raise exc
2026-01-06T16:52:37.918639156Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:52:37.918641127Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:52:37.918644224Z [err]      await app(scope, receive, sender)
2026-01-06T16:52:37.918649610Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:52:37.918650080Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:52:37.918655927Z [err]      await self.app(scope, receive, send)
2026-01-06T16:52:37.918656337Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:52:37.918660571Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:52:37.918665237Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:52:37.918669362Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:52:37.919664727Z [err]      raise exc
2026-01-06T16:52:37.919670851Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:52:37.919675192Z [err]      cur.execute(
2026-01-06T16:52:37.919676551Z [err]      await app(scope, receive, sender)
2026-01-06T16:52:37.919681441Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:52:37.919685981Z [err]      ~~~~~~~~~~~^
2026-01-06T16:52:37.919686954Z [err]      response = await f(request)
2026-01-06T16:52:37.919692519Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:52:37.919694274Z [err]          """
2026-01-06T16:52:37.919697504Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:52:37.919701876Z [err]          ^^^
2026-01-06T16:52:37.919702779Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:52:37.919708088Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:37.919709518Z [err]      ...<7 lines>...
2026-01-06T16:52:37.919716662Z [err]      ...<3 lines>...
2026-01-06T16:52:37.919716986Z [err]          (day_of_week, current_time),
2026-01-06T16:52:37.919723712Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:37.919725508Z [err]      )
2026-01-06T16:52:37.919733307Z [err]      ^
2026-01-06T16:52:37.919739380Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:52:37.919745555Z [err]      return await dependant.call(**values)
2026-01-06T16:52:37.919751389Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:37.919755443Z [err]  2026-01-06 16:52:37.906 UTC [9130] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:52:37.919757840Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:52:37.919764705Z [err]      event = get_active_event()
2026-01-06T16:52:37.919771962Z [err]  2026-01-06 16:52:37.906 UTC [9130] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:52:37.919773036Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:52:37.919781884Z [err]  2026-01-06 16:52:37.906 UTC [9130] STATEMENT:  
2026-01-06T16:52:37.919790385Z [err]  	        SELECT event
2026-01-06T16:52:37.919799408Z [err]  	        FROM event_config
2026-01-06T16:52:37.919807987Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:52:37.919817150Z [err]  	          AND active = 1
2026-01-06T16:52:37.919827097Z [err]  	          AND '16:52' BETWEEN open_time AND close_time
2026-01-06T16:52:37.919835278Z [err]  	        LIMIT 1;
2026-01-06T16:52:37.919845550Z [err]  	        
2026-01-06T16:52:37.920435001Z [err]      )
2026-01-06T16:52:37.920445213Z [err]      ^
2026-01-06T16:52:37.920454423Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:52:37.920463170Z [err]      return super().execute(query, vars)
2026-01-06T16:52:37.920471378Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:52:37.920479474Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:52:37.920487425Z [err]  LINE 5:           AND active = 1
2026-01-06T16:52:37.920495736Z [err]                               ^
2026-01-06T16:52:37.920504582Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:52:37.920518717Z [err]  
2026-01-06T16:52:46.667294685Z [inf]  ðŸ“¨ 27725957859: 6km 54:44 SBK03E
2026-01-06T16:52:46.835935181Z [inf]  INFO:     100.64.0.7:16078 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:52:46.835935915Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:52:46.835944875Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:52:46.835950560Z [err]  Traceback (most recent call last):
2026-01-06T16:52:46.835955882Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:52:46.835960866Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:52:46.835965632Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:46.835969980Z [err]          self.scope, self.receive, self.send
2026-01-06T16:52:46.835975703Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:46.835980859Z [err]      )
2026-01-06T16:52:46.835986655Z [err]      ^
2026-01-06T16:52:46.835991992Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:52:46.835995730Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:52:46.836001516Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:46.836007081Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:52:46.836011995Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:52:46.836016689Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:52:46.836020939Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:52:46.836025809Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:52:46.836030153Z [err]      raise exc
2026-01-06T16:52:46.837368203Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:52:46.837377949Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:52:46.837385294Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:52:46.837391903Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:52:46.837398545Z [err]      raise exc
2026-01-06T16:52:46.837405583Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:52:46.837409149Z [err]      await app(scope, receive, sender)
2026-01-06T16:52:46.837414442Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:52:46.837420154Z [err]      await self.app(scope, receive, send)
2026-01-06T16:52:46.837425321Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:52:46.837428863Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:52:46.837433613Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:52:46.837437523Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:52:46.837442238Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:52:46.837446329Z [err]      await self.app(scope, receive, send)
2026-01-06T16:52:46.837450666Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:52:46.837454544Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:52:46.837458651Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:52:46.838496813Z [err]      raise exc
2026-01-06T16:52:46.838501637Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:52:46.838502998Z [err]          ^^^
2026-01-06T16:52:46.838510317Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:52:46.838511473Z [err]      return await dependant.call(**values)
2026-01-06T16:52:46.838516609Z [err]      ...<7 lines>...
2026-01-06T16:52:46.838520007Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:46.838522752Z [err]      await app(scope, receive, sender)
2026-01-06T16:52:46.838527012Z [err]          (day_of_week, current_time),
2026-01-06T16:52:46.838528441Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:52:46.838534720Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:52:46.838537917Z [err]      event = get_active_event()
2026-01-06T16:52:46.838538732Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:46.838546325Z [err]      response = await f(request)
2026-01-06T16:52:46.838546688Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:52:46.838555757Z [err]      cur.execute(
2026-01-06T16:52:46.838558148Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:52:46.838562722Z [err]      ~~~~~~~~~~~^
2026-01-06T16:52:46.838569128Z [err]          """
2026-01-06T16:52:46.838571208Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:52:46.838577876Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:52:46.838583496Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:46.838589192Z [err]      ...<3 lines>...
2026-01-06T16:52:46.838595828Z [err]      )
2026-01-06T16:52:46.838602079Z [err]      ^
2026-01-06T16:52:46.839404192Z [err]      )
2026-01-06T16:52:46.839410869Z [err]      ^
2026-01-06T16:52:46.839416898Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:52:46.839422340Z [err]      return super().execute(query, vars)
2026-01-06T16:52:46.839428219Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:52:46.839434280Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:52:46.839439921Z [err]  LINE 5:           AND active = 1
2026-01-06T16:52:46.839445280Z [err]                               ^
2026-01-06T16:52:46.839451254Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:52:46.839457260Z [err]  
2026-01-06T16:52:46.948576524Z [err]  2026-01-06 16:52:46.443 UTC [76] LOG:  checkpoint starting: time
2026-01-06T16:52:46.948586372Z [err]  2026-01-06 16:52:46.640 UTC [76] LOG:  checkpoint complete: wrote 2 buffers (0.0%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.109 s, sync=0.012 s, total=0.198 s; sync files=2, longest=0.010 s, average=0.006 s; distance=4 kB, estimate=23 kB; lsn=0/1A1EEB0, redo lsn=0/1A1EE58
2026-01-06T16:52:46.948596333Z [err]  2026-01-06 16:52:46.825 UTC [9133] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:52:46.948608903Z [err]  2026-01-06 16:52:46.825 UTC [9133] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:52:46.948617039Z [err]  2026-01-06 16:52:46.825 UTC [9133] STATEMENT:  
2026-01-06T16:52:46.948626215Z [err]  	        SELECT event
2026-01-06T16:52:46.948634941Z [err]  	        FROM event_config
2026-01-06T16:52:46.948645733Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:52:46.948665214Z [err]  	          AND active = 1
2026-01-06T16:52:46.948673644Z [err]  	          AND '16:52' BETWEEN open_time AND close_time
2026-01-06T16:52:46.948682510Z [err]  	        LIMIT 1;
2026-01-06T16:52:46.948691082Z [err]  	        
2026-01-06T16:52:46.986419135Z [inf]  ðŸ“¨ 27826044441: 8km
2026-01-06T16:52:47.074227345Z [inf]  INFO:     100.64.0.4:10474 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:52:47.074232749Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:52:47.074236870Z [err]  Traceback (most recent call last):
2026-01-06T16:52:47.074241230Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:52:47.074245375Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:52:47.074249410Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:47.074254416Z [err]          self.scope, self.receive, self.send
2026-01-06T16:52:47.074258728Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:47.074264830Z [err]      )
2026-01-06T16:52:47.074271503Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:47.074279041Z [err]      ^
2026-01-06T16:52:47.074286512Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:52:47.074288452Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:52:47.074297365Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:52:47.074298689Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:52:47.074305429Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:52:47.074310043Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:52:47.074314992Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:52:47.074321732Z [err]      raise exc
2026-01-06T16:52:47.074327641Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:52:47.075128530Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:52:47.075134869Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:52:47.075139140Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:52:47.075142792Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:52:47.075147221Z [err]      raise exc
2026-01-06T16:52:47.075151191Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:52:47.075154694Z [err]      await app(scope, receive, sender)
2026-01-06T16:52:47.075159046Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:52:47.075163169Z [err]      await self.app(scope, receive, send)
2026-01-06T16:52:47.075167185Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:52:47.075172539Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:52:47.075176513Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:52:47.075181017Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:52:47.075185077Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:52:47.075196798Z [err]      await self.app(scope, receive, send)
2026-01-06T16:52:47.075200705Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:52:47.075204461Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:52:47.075208736Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:52:47.076299072Z [err]      raise exc
2026-01-06T16:52:47.076305334Z [err]          """
2026-01-06T16:52:47.076305985Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:52:47.076310565Z [err]      await app(scope, receive, sender)
2026-01-06T16:52:47.076315685Z [err]          ^^^
2026-01-06T16:52:47.076316520Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:52:47.076323298Z [err]      ...<7 lines>...
2026-01-06T16:52:47.076324557Z [err]      response = await f(request)
2026-01-06T16:52:47.076330518Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:52:47.076331111Z [err]          (day_of_week, current_time),
2026-01-06T16:52:47.076337483Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:47.076339095Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:52:47.076343555Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:52:47.076347412Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:47.076352083Z [err]      ...<3 lines>...
2026-01-06T16:52:47.076357083Z [err]      )
2026-01-06T16:52:47.076361201Z [err]      ^
2026-01-06T16:52:47.076365232Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:52:47.076369273Z [err]      return await dependant.call(**values)
2026-01-06T16:52:47.076374051Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:47.076377657Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:52:47.076381683Z [err]      event = get_active_event()
2026-01-06T16:52:47.076385636Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:52:47.076389748Z [err]      cur.execute(
2026-01-06T16:52:47.076394441Z [err]      ~~~~~~~~~~~^
2026-01-06T16:52:47.077057412Z [err]      )
2026-01-06T16:52:47.077064999Z [err]      ^
2026-01-06T16:52:47.077071198Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:52:47.077077556Z [err]      return super().execute(query, vars)
2026-01-06T16:52:47.077083263Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:52:47.077089224Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:52:47.077097090Z [err]  LINE 5:           AND active = 1
2026-01-06T16:52:47.077102481Z [err]                               ^
2026-01-06T16:52:47.077108459Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:52:47.077114761Z [err]  
2026-01-06T16:52:47.085566570Z [err]  2026-01-06 16:52:47.066 UTC [9135] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:52:47.085581107Z [err]  2026-01-06 16:52:47.066 UTC [9135] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:52:47.085590128Z [err]  2026-01-06 16:52:47.066 UTC [9135] STATEMENT:  
2026-01-06T16:52:47.085598959Z [err]  	        SELECT event
2026-01-06T16:52:47.085607756Z [err]  	        FROM event_config
2026-01-06T16:52:47.085617357Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:52:47.085625337Z [err]  	          AND active = 1
2026-01-06T16:52:47.085633796Z [err]  	          AND '16:52' BETWEEN open_time AND close_time
2026-01-06T16:52:47.085642103Z [err]  	        LIMIT 1;
2026-01-06T16:52:47.085650711Z [err]  	        
2026-01-06T16:52:52.038065883Z [inf]  ðŸ“¨ 27794789795: 8km 48:48 SBK03E
2026-01-06T16:52:52.322315681Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:52:52.322316103Z [inf]  INFO:     100.64.0.8:30252 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:52:52.322333178Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:52:52.322339015Z [err]  Traceback (most recent call last):
2026-01-06T16:52:52.322343479Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:52:52.322348232Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:52:52.322353213Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:52.322357545Z [err]          self.scope, self.receive, self.send
2026-01-06T16:52:52.322361601Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:52.322365979Z [err]      )
2026-01-06T16:52:52.322369968Z [err]      ^
2026-01-06T16:52:52.322374403Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:52:52.322378494Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:52:52.322381991Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:52.322386111Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:52:52.322389879Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:52:52.322393855Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:52:52.322398171Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:52:52.322403166Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:52:52.322407111Z [err]      raise exc
2026-01-06T16:52:52.323655763Z [err]      await app(scope, receive, sender)
2026-01-06T16:52:52.323656561Z [err]      await self.app(scope, receive, send)
2026-01-06T16:52:52.323669155Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:52:52.323669593Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:52:52.323676175Z [err]      await self.app(scope, receive, send)
2026-01-06T16:52:52.323676498Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:52:52.323677904Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:52:52.323682661Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:52:52.323685875Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:52:52.323687136Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:52:52.323689364Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:52:52.323695691Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:52:52.323695732Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:52:52.323702306Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:52:52.323704446Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:52:52.323707672Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:52:52.323711738Z [err]      raise exc
2026-01-06T16:52:52.323718158Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:52:52.324965733Z [err]      raise exc
2026-01-06T16:52:52.324968477Z [err]      cur.execute(
2026-01-06T16:52:52.324972088Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:52:52.324976106Z [err]      ~~~~~~~~~~~^
2026-01-06T16:52:52.324977245Z [err]      await app(scope, receive, sender)
2026-01-06T16:52:52.324982394Z [err]          """
2026-01-06T16:52:52.324984811Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:52:52.324987809Z [err]          ^^^
2026-01-06T16:52:52.324991545Z [err]      response = await f(request)
2026-01-06T16:52:52.324993275Z [err]      ...<7 lines>...
2026-01-06T16:52:52.324996495Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:52:52.324999522Z [err]          (day_of_week, current_time),
2026-01-06T16:52:52.325002003Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:52:52.325005767Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:52.325007301Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:52:52.325014678Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:52.325018403Z [err]      ...<3 lines>...
2026-01-06T16:52:52.325021813Z [err]      )
2026-01-06T16:52:52.325025167Z [err]      ^
2026-01-06T16:52:52.325030261Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:52:52.325033867Z [err]      return await dependant.call(**values)
2026-01-06T16:52:52.325037264Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:52:52.325040689Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:52:52.325044141Z [err]      event = get_active_event()
2026-01-06T16:52:52.325050099Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:52:52.326032266Z [err]      )
2026-01-06T16:52:52.326039243Z [err]      ^
2026-01-06T16:52:52.326045322Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:52:52.326053631Z [err]      return super().execute(query, vars)
2026-01-06T16:52:52.326059380Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:52:52.326064111Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:52:52.326069187Z [err]  LINE 5:           AND active = 1
2026-01-06T16:52:52.326073058Z [err]                               ^
2026-01-06T16:52:52.326076801Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:52:52.326081252Z [err]  
2026-01-06T16:52:52.899761552Z [err]  2026-01-06 16:52:52.306 UTC [9137] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:52:52.899765886Z [err]  2026-01-06 16:52:52.306 UTC [9137] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:52:52.899770488Z [err]  2026-01-06 16:52:52.306 UTC [9137] STATEMENT:  
2026-01-06T16:52:52.899774556Z [err]  	        SELECT event
2026-01-06T16:52:52.899778911Z [err]  	        FROM event_config
2026-01-06T16:52:52.903652673Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:52:52.903666810Z [err]  	          AND active = 1
2026-01-06T16:52:52.903687657Z [err]  	          AND '16:52' BETWEEN open_time AND close_time
2026-01-06T16:52:52.903696781Z [err]  	        LIMIT 1;
2026-01-06T16:52:52.903703404Z [err]  	        
2026-01-06T16:53:12.337948719Z [inf]  ðŸ“¨ 27721004166: 8km 36:03 SBK03E
2026-01-06T16:53:12.525901600Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T16:53:12.525910947Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T16:53:12.525917449Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T16:53:13.463236047Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T16:53:13.463243463Z [inf]  ðŸ“¤ Status: 200
2026-01-06T16:53:13.463248523Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27721004166","wa_id":"27721004166"}],"messages":[{"id":"wamid.HBgLMjc3MjEwMDQxNjYVAgARGBJERjMxQ0VBRjEzNDk1REQ1MEEA"}]}
2026-01-06T16:53:13.464613743Z [inf]  INFO:     100.64.0.6:28718 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:53:13.464621742Z [inf]  ðŸ“¨ 27832844884: 8km
2026-01-06T16:53:13.627610986Z [inf]  INFO:     100.64.0.8:55500 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:53:13.627617823Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:53:13.627623781Z [err]  Traceback (most recent call last):
2026-01-06T16:53:13.627630524Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:53:13.627636954Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:53:13.627644569Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:53:13.627652056Z [err]          self.scope, self.receive, self.send
2026-01-06T16:53:13.627658606Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:53:13.627665202Z [err]      )
2026-01-06T16:53:13.627671249Z [err]      ^
2026-01-06T16:53:13.627676700Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:53:13.627682482Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:53:13.627688140Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:53:13.627696078Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:53:13.627702346Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:53:13.627708660Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:53:13.627715191Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:53:13.627720223Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:53:13.627724544Z [err]      raise exc
2026-01-06T16:53:13.627728603Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:53:13.628817067Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:53:13.628823927Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:53:13.628825126Z [err]      await self.app(scope, receive, send)
2026-01-06T16:53:13.628829316Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:53:13.628835060Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:53:13.628838009Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:53:13.628840341Z [err]      raise exc
2026-01-06T16:53:13.628845651Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:53:13.628847637Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:53:13.628850686Z [err]      await app(scope, receive, sender)
2026-01-06T16:53:13.628856004Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:53:13.628856949Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:53:13.628867140Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:53:13.628874802Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:53:13.628880026Z [err]      await self.app(scope, receive, send)
2026-01-06T16:53:13.628885099Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:53:13.628889930Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:53:13.628895689Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:53:13.630559971Z [err]      raise exc
2026-01-06T16:53:13.630563313Z [err]      ...<7 lines>...
2026-01-06T16:53:13.630567061Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:53:13.630570591Z [err]          (day_of_week, current_time),
2026-01-06T16:53:13.630572248Z [err]      await app(scope, receive, sender)
2026-01-06T16:53:13.630577341Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:53:13.630578009Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:53:13.630582162Z [err]      response = await f(request)
2026-01-06T16:53:13.630585740Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:53:13.630589661Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:53:13.630593505Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:53:13.630597299Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:53:13.630600948Z [err]      ...<3 lines>...
2026-01-06T16:53:13.630604694Z [err]      )
2026-01-06T16:53:13.630608378Z [err]      ^
2026-01-06T16:53:13.630612161Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:53:13.630615776Z [err]      return await dependant.call(**values)
2026-01-06T16:53:13.630619701Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:53:13.630623896Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:53:13.630628392Z [err]      event = get_active_event()
2026-01-06T16:53:13.630632083Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:53:13.630635574Z [err]      cur.execute(
2026-01-06T16:53:13.630639504Z [err]      ~~~~~~~~~~~^
2026-01-06T16:53:13.630645088Z [err]          """
2026-01-06T16:53:13.630649200Z [err]          ^^^
2026-01-06T16:53:13.631669964Z [err]      )
2026-01-06T16:53:13.631679382Z [err]      ^
2026-01-06T16:53:13.631689359Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:53:13.631695273Z [err]      return super().execute(query, vars)
2026-01-06T16:53:13.631699127Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:53:13.631704009Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:53:13.631710038Z [err]  LINE 5:           AND active = 1
2026-01-06T16:53:13.631716268Z [err]                               ^
2026-01-06T16:53:13.631722545Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:53:13.631729160Z [err]  
2026-01-06T16:53:14.728366970Z [inf]  INFO:     100.64.0.8:50536 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:53:15.813630361Z [inf]  INFO:     100.64.0.2:35444 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:53:15.849888104Z [inf]  INFO:     100.64.0.9:48412 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:53:22.699318803Z [err]  2026-01-06 16:53:13.593 UTC [9141] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:53:22.699323735Z [err]  2026-01-06 16:53:13.593 UTC [9141] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:53:22.699331103Z [err]  2026-01-06 16:53:13.593 UTC [9141] STATEMENT:  
2026-01-06T16:53:22.699339632Z [err]  	        SELECT event
2026-01-06T16:53:22.699370592Z [err]  	        FROM event_config
2026-01-06T16:53:22.699384795Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:53:22.699393682Z [err]  	          AND active = 1
2026-01-06T16:53:22.699402868Z [err]  	          AND '16:53' BETWEEN open_time AND close_time
2026-01-06T16:53:22.699409196Z [err]  	        LIMIT 1;
2026-01-06T16:53:22.699414193Z [err]  	        
2026-01-06T16:53:35.850571006Z [inf]  ðŸ“¨ 27721004166: RUNNER
2026-01-06T16:53:35.850578394Z [inf]  ðŸ“Œ DEBUG â€” WhatsApp ENV CHECK
2026-01-06T16:53:35.850584279Z [inf]  ðŸ“Œ PHONE_NUMBER_ID: 866927696513314
2026-01-06T16:53:35.850590571Z [inf]  ðŸ“Œ WHATSAPP_TOKEN present: True
2026-01-06T16:53:35.850598820Z [inf]  ðŸ“¤ WhatsApp send response:
2026-01-06T16:53:35.850604340Z [inf]  ðŸ“¤ Status: 200
2026-01-06T16:53:35.850610016Z [inf]  ðŸ“¤ Body: {"messaging_product":"whatsapp","contacts":[{"input":"27721004166","wa_id":"27721004166"}],"messages":[{"id":"wamid.HBgLMjc3MjEwMDQxNjYVAgARGBJCMkVENzI0QjM4NzQ2NDJBNjYA"}]}
2026-01-06T16:53:35.850615888Z [inf]  INFO:     100.64.0.8:33212 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:53:35.850621913Z [inf]  INFO:     100.64.0.7:36734 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:53:35.850628183Z [inf]  INFO:     100.64.0.2:47792 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:53:35.850635396Z [inf]  INFO:     100.64.0.3:45322 - "POST /webhook HTTP/1.1" 200 OK
2026-01-06T16:56:25.162020961Z [err]  2026-01-06 16:56:18.614 UTC [9153] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:56:25.162027632Z [err]  2026-01-06 16:56:18.614 UTC [9153] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:56:25.162067805Z [err]  2026-01-06 16:56:18.614 UTC [9153] STATEMENT:  
2026-01-06T16:56:25.162075597Z [err]  	        SELECT event
2026-01-06T16:56:25.162094405Z [err]  	        FROM event_config
2026-01-06T16:56:25.162102564Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:56:25.162110002Z [err]  	          AND active = 1
2026-01-06T16:56:25.162116824Z [err]  	          AND '16:56' BETWEEN open_time AND close_time
2026-01-06T16:56:25.162124300Z [err]  	        LIMIT 1;
2026-01-06T16:56:25.162131084Z [err]  	        
2026-01-06T16:56:25.162137091Z [err]  2026-01-06 16:56:19.321 UTC [9155] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:56:25.162155572Z [err]  2026-01-06 16:56:19.321 UTC [9155] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:56:25.162161728Z [err]  2026-01-06 16:56:19.321 UTC [9155] STATEMENT:  
2026-01-06T16:56:25.162167518Z [err]  	        SELECT event
2026-01-06T16:56:25.162174033Z [err]  	        FROM event_config
2026-01-06T16:56:25.162180846Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:56:25.162187599Z [err]  	          AND active = 1
2026-01-06T16:56:25.162194088Z [err]  	          AND '16:56' BETWEEN open_time AND close_time
2026-01-06T16:56:25.162202171Z [err]  	        LIMIT 1;
2026-01-06T16:56:25.162208867Z [err]  	        
2026-01-06T16:56:25.162214643Z [err]  2026-01-06 16:56:19.956 UTC [9157] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:56:25.162220312Z [err]  2026-01-06 16:56:19.956 UTC [9157] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:56:25.167298032Z [err]  2026-01-06 16:56:23.714 UTC [9162] STATEMENT:  
2026-01-06T16:56:25.167308986Z [err]  	        SELECT event
2026-01-06T16:56:25.167337390Z [err]  2026-01-06 16:56:19.956 UTC [9157] STATEMENT:  
2026-01-06T16:56:25.167374810Z [err]  	        SELECT event
2026-01-06T16:56:25.167383583Z [err]  	        FROM event_config
2026-01-06T16:56:25.167392109Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:56:25.167408281Z [err]  	          AND active = 1
2026-01-06T16:56:25.167416655Z [err]  	          AND '16:56' BETWEEN open_time AND close_time
2026-01-06T16:56:25.167424272Z [err]  	        LIMIT 1;
2026-01-06T16:56:25.167430912Z [err]  	        
2026-01-06T16:56:25.167436879Z [err]  2026-01-06 16:56:21.525 UTC [9159] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:56:25.167443647Z [err]  2026-01-06 16:56:21.525 UTC [9159] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:56:25.167449905Z [err]  2026-01-06 16:56:21.525 UTC [9159] STATEMENT:  
2026-01-06T16:56:25.167457882Z [err]  	        SELECT event
2026-01-06T16:56:25.167466280Z [err]  	        FROM event_config
2026-01-06T16:56:25.167473034Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:56:25.167478952Z [err]  	          AND active = 1
2026-01-06T16:56:25.167485091Z [err]  	          AND '16:56' BETWEEN open_time AND close_time
2026-01-06T16:56:25.167491443Z [err]  	        LIMIT 1;
2026-01-06T16:56:25.167520777Z [err]  	        
2026-01-06T16:56:25.167531673Z [err]  2026-01-06 16:56:23.714 UTC [9162] ERROR:  operator does not exist: boolean = integer at character 100
2026-01-06T16:56:25.167538328Z [err]  2026-01-06 16:56:23.714 UTC [9162] HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:56:25.167540996Z [err]  	        FROM event_config
2026-01-06T16:56:25.172341517Z [err]  	        WHERE day_of_week = 1
2026-01-06T16:56:25.172351836Z [err]  	          AND active = 1
2026-01-06T16:56:25.172363485Z [err]  	          AND '16:56' BETWEEN open_time AND close_time
2026-01-06T16:56:25.172382990Z [err]  	        LIMIT 1;
2026-01-06T16:56:25.172389704Z [err]  	        
2026-01-06T16:56:26.782950915Z [inf]  ðŸ“¨ 27721004166: 8km 36:03 SBK03E
2026-01-06T16:56:26.782959008Z [inf]  INFO:     100.64.0.8:16074 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:56:26.782967906Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:56:26.782974437Z [err]  Traceback (most recent call last):
2026-01-06T16:56:26.782980146Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:56:26.782985279Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:56:26.782990318Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:56:26.782995001Z [err]          self.scope, self.receive, self.send
2026-01-06T16:56:26.783001266Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:56:26.783006249Z [err]      )
2026-01-06T16:56:26.783010986Z [err]      ^
2026-01-06T16:56:26.783016254Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:56:26.783021101Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:56:26.783026313Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:56:26.783030909Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:56:26.783035615Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:56:26.783039519Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:56:26.783044608Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:56:26.783049274Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:56:26.783054914Z [err]      raise exc
2026-01-06T16:56:26.783060001Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:56:26.783875848Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:56:26.783888353Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:56:26.783899249Z [err]      await self.app(scope, receive, send)
2026-01-06T16:56:26.783900579Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:56:26.783910932Z [err]      await self.app(scope, receive, send)
2026-01-06T16:56:26.783914635Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:56:26.783916054Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:56:26.783925051Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:56:26.783927325Z [err]      raise exc
2026-01-06T16:56:26.783934314Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:56:26.783937632Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:56:26.783940102Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:56:26.783947968Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:56:26.783952685Z [err]      await app(scope, receive, sender)
2026-01-06T16:56:26.783953264Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:56:26.783966157Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:56:26.783970024Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:56:26.783978968Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:56:26.784402251Z [err]          """
2026-01-06T16:56:26.784411114Z [err]          ^^^
2026-01-06T16:56:26.784418836Z [err]      ...<7 lines>...
2026-01-06T16:56:26.784424401Z [err]      raise exc
2026-01-06T16:56:26.784427191Z [err]          (day_of_week, current_time),
2026-01-06T16:56:26.784436085Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:56:26.784436206Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:56:26.784444374Z [err]      await app(scope, receive, sender)
2026-01-06T16:56:26.784452528Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:56:26.784460651Z [err]      response = await f(request)
2026-01-06T16:56:26.784468592Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:56:26.784475572Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:56:26.784482478Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:56:26.784490779Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:56:26.784497994Z [err]      ...<3 lines>...
2026-01-06T16:56:26.784505879Z [err]      )
2026-01-06T16:56:26.784512893Z [err]      ^
2026-01-06T16:56:26.784519779Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:56:26.784526508Z [err]      return await dependant.call(**values)
2026-01-06T16:56:26.784533452Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:56:26.784540382Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:56:26.784547545Z [err]      event = get_active_event()
2026-01-06T16:56:26.784554749Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:56:26.784561612Z [err]      cur.execute(
2026-01-06T16:56:26.784568930Z [err]      ~~~~~~~~~~~^
2026-01-06T16:56:26.784907414Z [err]      )
2026-01-06T16:56:26.784915331Z [err]      )
2026-01-06T16:56:26.784916278Z [err]      ^
2026-01-06T16:56:26.784923392Z [err]      ^
2026-01-06T16:56:26.784925489Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:56:26.784931275Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:56:26.784934462Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:56:26.784936836Z [err]      return super().execute(query, vars)
2026-01-06T16:56:26.784941262Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:56:26.784946039Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:56:26.784950512Z [err]  LINE 5:           AND active = 1
2026-01-06T16:56:26.784954739Z [err]                               ^
2026-01-06T16:56:26.784959885Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:56:26.784965111Z [err]  
2026-01-06T16:56:26.784969396Z [inf]  ðŸ“¨ 27721004166: 8km 36:03 SBK03E
2026-01-06T16:56:26.784973518Z [inf]  INFO:     100.64.0.5:32926 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:56:26.784977398Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:56:26.784981525Z [err]  Traceback (most recent call last):
2026-01-06T16:56:26.784985647Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:56:26.784991031Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:56:26.784995948Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:56:26.785000484Z [err]          self.scope, self.receive, self.send
2026-01-06T16:56:26.785004318Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:56:26.785668661Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:56:26.785679997Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:56:26.785688644Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:56:26.785695340Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:56:26.785702638Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:56:26.785709496Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:56:26.785716484Z [err]      raise exc
2026-01-06T16:56:26.785723556Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:56:26.785731073Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:56:26.785738338Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:56:26.785745632Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:56:26.785752373Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:56:26.785759183Z [err]      raise exc
2026-01-06T16:56:26.785765581Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:56:26.785772605Z [err]      await app(scope, receive, sender)
2026-01-06T16:56:26.785778427Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
2026-01-06T16:56:26.785784435Z [err]      await self.app(scope, receive, send)
2026-01-06T16:56:26.785790599Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
2026-01-06T16:56:26.786759232Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:56:26.786769018Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:56:26.786776723Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:56:26.786784335Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
2026-01-06T16:56:26.786791531Z [err]      await self.app(scope, receive, send)
2026-01-06T16:56:26.786798644Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
2026-01-06T16:56:26.786807016Z [err]      await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2026-01-06T16:56:26.786814533Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:56:26.786821654Z [err]      raise exc
2026-01-06T16:56:26.786828942Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:56:26.786835281Z [err]      await app(scope, receive, sender)
2026-01-06T16:56:26.786842272Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
2026-01-06T16:56:26.786852912Z [err]      response = await f(request)
2026-01-06T16:56:26.786861150Z [err]                 ^^^^^^^^^^^^^^^^
2026-01-06T16:56:26.786868825Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
2026-01-06T16:56:26.786876218Z [err]      raw_response = await run_endpoint_function(
2026-01-06T16:56:26.786883869Z [err]                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:56:26.786891678Z [err]      ...<3 lines>...
2026-01-06T16:56:26.786898812Z [err]      )
2026-01-06T16:56:26.786905843Z [err]      ^
2026-01-06T16:56:26.786913895Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
2026-01-06T16:56:26.787943854Z [err]      return await dependant.call(**values)
2026-01-06T16:56:26.787953016Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:56:26.787961025Z [err]    File "/app/app/webhook.py", line 162, in webhook
2026-01-06T16:56:26.787968554Z [err]      event = get_active_event()
2026-01-06T16:56:26.787975424Z [err]    File "/app/app/services/event_detector.py", line 45, in get_active_event
2026-01-06T16:56:26.787982928Z [err]      cur.execute(
2026-01-06T16:56:26.787989136Z [err]      ~~~~~~~~~~~^
2026-01-06T16:56:26.787996192Z [err]          """
2026-01-06T16:56:26.788006414Z [err]          ^^^
2026-01-06T16:56:26.788014029Z [err]      ...<7 lines>...
2026-01-06T16:56:26.788020929Z [err]          (day_of_week, current_time),
2026-01-06T16:56:26.788027232Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:56:26.788035063Z [err]      )
2026-01-06T16:56:26.788041945Z [err]      ^
2026-01-06T16:56:26.788049335Z [err]    File "/app/.venv/lib/python3.13/site-packages/psycopg2/extras.py", line 236, in execute
2026-01-06T16:56:26.788058080Z [err]      return super().execute(query, vars)
2026-01-06T16:56:26.788066498Z [err]             ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
2026-01-06T16:56:26.788073949Z [err]  psycopg2.errors.UndefinedFunction: operator does not exist: boolean = integer
2026-01-06T16:56:26.788080099Z [err]  LINE 5:           AND active = 1
2026-01-06T16:56:26.788086562Z [err]                               ^
2026-01-06T16:56:26.788092258Z [err]  HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
2026-01-06T16:56:26.788099482Z [err]  
2026-01-06T16:56:26.788107966Z [inf]  ðŸ“¨ 27721004166: 8km 36:03 SBK03E
2026-01-06T16:56:26.788116242Z [inf]  INFO:     100.64.0.9:34682 - "POST /webhook HTTP/1.1" 500 Internal Server Error
2026-01-06T16:56:26.788122894Z [err]  ERROR:    Exception in ASGI application
2026-01-06T16:56:26.789158646Z [err]  Traceback (most recent call last):
2026-01-06T16:56:26.789160075Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
2026-01-06T16:56:26.789168288Z [err]      await self.app(scope, receive, _send)
2026-01-06T16:56:26.789168644Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
2026-01-06T16:56:26.789175678Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
2026-01-06T16:56:26.789175881Z [err]      result = await app(  # type: ignore[func-returns-value]
2026-01-06T16:56:26.789182782Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:56:26.789189293Z [err]          self.scope, self.receive, self.send
2026-01-06T16:56:26.789195476Z [err]          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:56:26.789201385Z [err]      )
2026-01-06T16:56:26.789208593Z [err]      ^
2026-01-06T16:56:26.789214932Z [err]    File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
2026-01-06T16:56:26.789221211Z [err]      return await self.app(scope, receive, send)
2026-01-06T16:56:26.789228028Z [err]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-06T16:56:26.789234925Z [err]    File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
2026-01-06T16:56:26.789241324Z [err]      await super().__call__(scope, receive, send)
2026-01-06T16:56:26.789247751Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
2026-01-06T16:56:26.789253994Z [err]      await self.middleware_stack(scope, receive, send)
2026-01-06T16:56:26.789258752Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
2026-01-06T16:56:26.789262506Z [err]      raise exc
2026-01-06T16:56:26.790487821Z [err]      raise exc
2026-01-06T16:56:26.790491784Z [err]      await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2026-01-06T16:56:26.790495708Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
2026-01-06T16:56:26.790497784Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
2026-01-06T16:56:26.790500982Z [err]    File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2026-01-06T16:56:26.790504704Z [err]      await route.handle(scope, receive, send)
2026-01-06T16:58:31.278067787Z [err]      )